;/*FB_PKG_DELIM*/

__d("CometEmptyStatesNoResultsDarkMode.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b;return i.jsxs((b=d("XPlatReactSVG")).Svg,babelHelpers["extends"]({viewBox:"0 0 112 112",width:"1em",height:"1em",title:a.title},a,{children:[i.jsxs(b.Defs,{children:[i.jsx(b.ClipPath,{id:"a",children:i.jsx(b.Path,{fill:"none",d:"m88.53 98.17-9.01-27.9 13.12-4.24 10.38 32.14H88.53z"})}),i.jsx(b.ClipPath,{id:"b",children:i.jsx(b.Circle,{fill:"none",cx:77.06,cy:23.51,r:5.17})}),i.jsx(b.ClipPath,{id:"c",children:i.jsx(b.Path,{fill:"none",d:"M67.5 43.87 32.16 60.84 17.99 38.21 48.7 13.84l18.8 30.03z"})}),a.children]}),i.jsxs(b.G,{children:[i.jsx(b.Path,{fill:"#90c3ff",d:"M74 12.26h6.69a1.55 1.55 0 0 1 1.55 1.55v9.71h-9.8V13.8A1.55 1.55 0 0 1 74 12.26z"}),i.jsx(b.Path,{strokeWidth:3.45,strokeMiterlimit:10,strokeLinecap:"round",stroke:"#90c3ff",fill:"none",d:"m42.74 52.62-17.71 49.09"}),i.jsx(b.Path,{stroke:"#7a7d81",strokeWidth:3.45,strokeMiterlimit:10,strokeLinecap:"round",fill:"none",d:"m40.2 50.53 16.22 56.04"}),i.jsxs(b.G,{clipPath:"url(#a)",children:[i.jsx(b.Path,{d:"m88.53 98.17-9.01-27.9 13.12-4.24 9.64 29.85-13.75 2.29z"}),i.jsx(b.Ellipse,{fill:"#1876f2",cx:83.8,cy:89.48,rx:11.42,ry:17.96,transform:"rotate(-14.08 83.78 89.474)"})]}),i.jsx(b.Path,{fill:"#7a7d81",d:"M83.35 98.17H92l-4.86-4.27-3.79 4.27zm0 0h18.66v1.41H83.35zm7.7-58.39-13.3 32.06H98.1l7.21-30.15-14.26-1.91z"}),i.jsx(b.Path,{fill:"#7a7d81",transform:"rotate(-32.88 11.202 56.798)",d:"M4.33 52.73h13.74v8.09H4.33z"}),i.jsx(b.Circle,{fill:"#90c3ff",cx:5.9,cy:60.22,r:4.14}),i.jsx(b.Circle,{fill:"#bcc0c4",cx:25.29,cy:49.4,r:13.35}),i.jsxs(b.G,{clipPath:"url(#b)",children:[i.jsx(b.Circle,{fill:"#1876f2",cx:77.06,cy:23.51,r:5.17}),i.jsx(b.Path,{fill:"#90c3ff",d:"M70.4 19.67c.23.16 14.33 9 14.33 9l.42-11S71.5 13.45 71.42 13.7s-1.02 5.97-1.02 5.97z"})]}),i.jsx(b.G,{clipPath:"url(#c)",children:i.jsx(b.Path,{fill:"#bcc0c4",d:"M67.5 43.87 32.16 60.84 17.99 38.21 48.7 13.84l18.8 30.03z"})}),i.jsx(b.Rect,{fill:"#bcc0c4",x:48.9,y:7.6,width:20.37,height:40.75,rx:1.39,transform:"rotate(-32.88 59.09 27.972)"}),i.jsx(b.Path,{strokeLinejoin:"round",strokeWidth:8.62,stroke:"#1877f2",strokeLinecap:"round",fill:"none",d:"m82.23 36.33-4.16 9.8-11.9-6.06"}),i.jsx(b.Path,{strokeWidth:13.78,stroke:"#1877f2",fill:"#1876f2",strokeMiterlimit:10,d:"M102.17 63.5v37.51"}),i.jsx(b.Path,{fill:"#fff",d:"m92.41 32.72-4.5 10.96-10.82-6.54 4.01-9.23 11.31 4.81z"}),i.jsx(b.Path,{fill:"#bcc0c4",d:"m108.9 37.81-19.36 7 2.63 30.75h17.15V39.87a5.3 5.3 0 0 0-.42-2.06z"}),i.jsx(b.Path,{fill:"#fff",d:"m106.64 35.29-10.92-6.13-7.21-3.89a5.08 5.08 0 0 0-7.11 2.06L80.54 29a9.16 9.16 0 0 0 3.06 11.79l5.94 4L109 38a5.17 5.17 0 0 0-2.36-2.71zm-15.11 65.72h8.65l-4.87-4.27-3.78 4.27zm0 0h18.66v1.41H91.53z"}),i.jsx(b.Circle,{fill:"#1876f2",cx:72.63,cy:25.97,r:1.22}),i.jsx(b.Circle,{fill:"#1876f2",cx:77.74,cy:23.74,r:1.88})]})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("CometEmptyStatesNoResultsGrayWash.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b;return i.jsxs((b=d("XPlatReactSVG")).Svg,babelHelpers["extends"]({viewBox:"0 0 112 112",width:"1em",height:"1em",title:a.title},a,{children:[i.jsxs(b.Defs,{children:[i.jsx(b.ClipPath,{id:"a",children:i.jsx(b.Path,{fill:"none",d:"m88.56 97.17-9.01-27.9 13.12-4.24 10.38 32.14H88.56z"})}),i.jsx(b.ClipPath,{id:"b",children:i.jsx(b.Circle,{fill:"none",cx:77.08,cy:22.51,r:5.17})}),i.jsx(b.ClipPath,{id:"c",children:i.jsx(b.Path,{fill:"none",d:"M67.52 42.87 32.18 59.84 18.02 37.21l30.71-24.37 18.79 30.03z"})}),a.children]}),i.jsxs(b.G,{children:[i.jsx(b.Path,{d:"M74 11.26h6.7a1.55 1.55 0 0 1 1.55 1.55v9.71h-9.78V12.8A1.55 1.55 0 0 1 74 11.26z"}),i.jsx(b.Path,{strokeWidth:3.45,strokeMiterlimit:10,strokeLinecap:"round",stroke:"#000",fill:"none",d:"m42.77 51.62-17.71 49.09"}),i.jsx(b.Path,{stroke:"#64676b",strokeWidth:3.45,strokeMiterlimit:10,strokeLinecap:"round",fill:"none",d:"m40.22 49.53 16.22 56.04"}),i.jsxs(b.G,{clipPath:"url(#a)",children:[i.jsx(b.Path,{d:"m88.56 97.17-9.01-27.9 13.12-4.24 9.63 29.85-13.74 2.29z"}),i.jsx(b.Ellipse,{fill:"#1876f2",cx:83.83,cy:88.48,rx:11.42,ry:17.96,transform:"rotate(-14.08 83.82 88.493)"})]}),i.jsx(b.Path,{fill:"#64676b",d:"M83.38 97.17h8.65l-4.87-4.27-3.78 4.27zm0 0h18.66v1.41H83.38zm7.7-58.39L77.77 70.84h20.36l7.21-30.15-14.26-1.91z"}),i.jsx(b.Path,{fill:"#64676b",transform:"rotate(-32.88 11.223 55.79)",d:"M4.35 51.73h13.74v8.09H4.35z"}),i.jsx(b.Circle,{cx:5.92,cy:59.22,r:4.14}),i.jsx(b.Circle,{fill:"#a4a7ab",cx:25.31,cy:48.4,r:13.35}),i.jsxs(b.G,{clipPath:"url(#b)",children:[i.jsx(b.Circle,{fill:"#1876f2",cx:77.08,cy:22.51,r:5.17}),i.jsx(b.Path,{d:"M70.43 18.67c.23.16 14.33 9 14.33 9l.42-11s-13.66-4.22-13.74-3.97-1.01 5.97-1.01 5.97z"})]}),i.jsx(b.G,{clipPath:"url(#c)",children:i.jsx(b.Path,{fill:"#a4a7ab",d:"M67.52 42.87 32.18 59.84 18.02 37.21l30.71-24.37 18.79 30.03z"})}),i.jsx(b.Rect,{fill:"#a4a7ab",x:48.93,y:6.6,width:20.37,height:40.75,rx:1.39,transform:"rotate(-32.88 59.128 26.97)"}),i.jsx(b.Path,{strokeLinejoin:"round",strokeWidth:8.62,stroke:"#1877f2",strokeLinecap:"round",fill:"none",d:"m82.25 35.33-4.15 9.8-11.91-6.06"}),i.jsx(b.Path,{strokeWidth:13.78,stroke:"#1877f2",fill:"#1876f2",strokeMiterlimit:10,d:"M102.2 62.5v37.51"}),i.jsx(b.Path,{fill:"#90c3ff",d:"m92.43 31.72-4.49 10.96-10.83-6.54 4.02-9.23 11.3 4.81z"}),i.jsx(b.Path,{fill:"#a4a7ab",d:"m108.93 36.81-19.37 7 2.64 30.71h17.15V38.87a5.3 5.3 0 0 0-.42-2.06z"}),i.jsx(b.Path,{fill:"#90c3ff",d:"m106.67 34.29-10.92-6.13-7.21-3.89a5.09 5.09 0 0 0-7.12 2.06L80.57 28a9.16 9.16 0 0 0 3.05 11.78l5.94 4L109 37a5.21 5.21 0 0 0-2.33-2.71zm-15.11 65.72h8.64l-4.86-4.27-3.78 4.27zm0 0h18.66v1.41H91.56z"}),i.jsx(b.Circle,{fill:"#1876f2",cx:72.66,cy:24.97,r:1.22}),i.jsx(b.Circle,{fill:"#1876f2",cx:77.77,cy:22.74,r:1.88})]})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("WorkerBootstrap",["HasteSupportData","ServerJSDefine"],(function(a,b,c,d,e,f,g){"use strict";function h(a){Object.keys(a).forEach(function(b){c("ServerJSDefine").handleDefine(b,[],a[b],-1,null)})}function a(a,c){var f,g;a.hsdp&&d("HasteSupportData").handle(a.hsdp);var i=(f=(g=a.jsmods)!=null?g:a.dynamicModules)!=null?f:{};h(i);var j=b.call(null,c);a.rds!=null&&a.rds.length>0&&e.call(null,a.rds,function(){});if(typeof j==="function"||j!==null)try{for(var k=arguments.length,l=new Array(k>2?k-2:0),m=2;m<k;m++)l[m-2]=arguments[m];j.apply(void 0,l)}catch(a){}}function f(a){a=a;if(typeof a==="function"||a!==null)try{a()}catch(a){}}g.initDynamicModules=h;g.start=a;g.startServerJS=f}),98);
__d("CurrentSharedWorker",["HasteSupportData","QPLUserFlow","SharedWorkerStatusLock","WorkerBootstrap","emptyFunction","err","qpl","structuredClone"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=[],j=new Set(),k=[],l=!1,m=!1,n=null,o=!1,p=c("qpl")._(931609794,"2369");c("QPLUserFlow").start(p);var q=d("SharedWorkerStatusLock").getStatusLock();c("QPLUserFlow").addPoint(p,"status_lock");c("QPLUserFlow").addAnnotations(p,{string:{id:self.worker_id}});self.setTimeout(function(){if(!o){try{var a;(a=j.values().next().value)==null?void 0:a.postMessage({type:"self-terminate",response:{from:"bundle",workerID:self.worker_id}})}catch(a){c("QPLUserFlow").endFailure(p,"timeout_termination_error"),x(a)}self.close()}},3e5);function r(){m=!0,n=null,h!==null&&(c("QPLUserFlow").addPoint(p,"process_message_buffer"),c("QPLUserFlow").addAnnotations(p,{"int":{message_buffer_size:i.length}}),i.forEach(function(a){return a()}),i=[]),c("QPLUserFlow").endSuccess(p)}function s(a,f){var g=a.data;if(typeof g==="object"&&(g==null?void 0:g.type)==="execute-worker"){var k=!l;try{if(!l&&g.args instanceof Array){var u=g.args[0],v=u.hsdp,w=u.jsmods,x=u.dynamicModules;u=u.rds;c("QPLUserFlow").addPoint(p,"first_init");v!=null&&d("HasteSupportData").handle(v);d("WorkerBootstrap").initDynamicModules((w=(v=w)!=null?v:x)!=null?w:{});u!=null&&u.length>0&&e.call(null,u,function(){});q.init();c("QPLUserFlow").addPoint(p,"status_lock_init");l=!0;n!=null&&(n(),r())}v=b.call(b,"SiteData");j.size>1&&f.postMessage({type:"execute-worker-imports",response:{}});f.postMessage({type:"execute-worker-ack",response:{firstInit:k,workerRevision:v.client_revision,spinMode:v.spin,spinTime:v.__spin_t}});o=!0}catch(a){c("QPLUserFlow").endFailure(p,"worker_init_error"),q.release(),f.postMessage({type:"execute-worker-ack",response:{firstInit:k,error:a.message}}),self.close()}}else if(typeof g==="object"&&(g==null?void 0:g.type)==="sw-get-rev")try{x=b.call(b,"SiteData");f.postMessage({type:"sw-get-rev",response:{workerRevision:x.client_revision,spinMode:x.spin,spinTime:x.__spin_t}})}catch(a){f.postMessage({type:"sw-get-rev",response:{error:a.message}})}else if(typeof g==="object"&&(g==null?void 0:g.type)==="sw-shutdown"){w=Array.isArray(g.args)?g.args[0]:null;q.release();typeof w==="object"&&(w==null?void 0:w.upgrade)===!0?t({type:"sw-shutdown",response:{reason:"requested-upgrade",workerID:self.worker_id,isInitialized:o}}):typeof w==="object"&&typeof (w==null?void 0:w.reason)==="string"?t({type:"sw-shutdown",response:{reason:w==null?void 0:w.reason,workerID:self.worker_id,isInitialized:o}}):t({type:"sw-shutdown",response:{workerID:self.worker_id,isInitialized:o}});self.close()}else if(typeof g==="object"&&(g==null?void 0:g.type)==="sw-uptime-tracking"){v=typeof (g==null?void 0:g.args)==="object"?(u=g.args)==null?void 0:u.trackerID:null;f.postMessage({type:"sw-uptime-tracking",response:{trackerID:v}})}else typeof g==="object"&&(g==null?void 0:g.type)==="ww-hrp-init"?f.postMessage({type:"ww-hrp-init",response:{}}):typeof g==="object"&&(g==null?void 0:g.type)==="ww-connection-ack"?f.postMessage({type:"connection-ack",response:{from:"bundle",workerID:self.worker_id}}):h!==null&&m?h(g):i.push(function(){return s(a,f)})}function a(a){var b=h==null;h=(a=a)!=null?a:c("emptyFunction");b&&m&&(i.forEach(function(a){return a()}),i=[])}function t(a,b){j.forEach(function(c){try{c.postMessage(a,b)}catch(b){c.postMessage(a)}})}function f(a){if(l){c("QPLUserFlow").addPoint(p,"init_complete_handler_ran");a();r();return}c("QPLUserFlow").addPoint(p,"init_complete_handler_attached");n=a}["log","error","info","debug","warn"].forEach(function(a){if(self.console[a]==null)throw c("err")('"'+a+'" is not a valid console method.');var b=self.console[a];self.console[a]=function(){for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];b.apply(void 0,e);var g=!1;try{c("structuredClone")!=null&&c("structuredClone")(e),g=!0}catch(a){}if(!g){t({type:"console",response:{method:"error",args:["DataCloneError: Failed to forward console message from web worker due to args not being serializable."]}});return}t({type:"console",response:{method:a,args:e}})}});try{c("QPLUserFlow").addPoint(p,"bootstrap_start");var u=self.shared_worker_bootstrap_buffer==null?void 0:self.shared_worker_bootstrap_buffer();if(u!=null){var v=u.ports,w=u.messages;c("QPLUserFlow").addAnnotations(p,{"int":{bootstrap_ports_num:v.length}});v==null?void 0:v.forEach(function(a){try{a.postMessage({type:"connection-ack",response:{from:"bundle",workerID:self.worker_id}}),a.addEventListener("message",function(b){return s(b,a)}),j.add(a)}catch(a){c("QPLUserFlow").addPoint(p,"connection_fail"),x(a)}});w==null?void 0:w.forEach(function(a){try{s(a.e,a.port)}catch(b){c("QPLUserFlow").addPoint(p,"message_processing_fail");c("QPLUserFlow").addAnnotations(p,{string:{failed_msg_type:(a=(a=a.e.data)==null?void 0:a.type)!=null?a:"unknown"}});x(b)}c("QPLUserFlow").addAnnotations(p,{"int":{msg_num:w.length},string_array:{msgs:w.map(function(a){return(a=a.e.data)==null?void 0:a.type})}})})}else c("QPLUserFlow").addPoint(p,"bootstrap_buffer_empty")}catch(a){x(a),c("QPLUserFlow").endFailure(p,"uncaught_bootstrap_error")}function x(a){try{t({type:"sw-uncaught-error",e:{message:a.message,lineno:a.lineno,colno:a.colno,filename:a.filename,error:a.error}})}catch(b){c("QPLUserFlow").addPoint(p,"sending_error_failed");c("QPLUserFlow").addAnnotations(p,{string:{error:String((a=b.message)!=null?a:b)}})}}self.addEventListener("error",function(a){if(j.size===0){k.push(a);return}x(a)});self.addEventListener("connect",function(a){var b=a.ports[0];b.postMessage({type:"connection-ack",response:{from:"bundle",workerID:self.worker_id}});b.addEventListener("message",function(a){return s(a,b)});b.start();j.add(b);k.length>0&&(k.forEach(x),k.splice(0,k.length))});g.setMessageHandler=a;g.postMessage=t;g.onInitComplete=f}),98);
__d("CurrentSharedWorkerAdapter",["CurrentSharedWorker","FBLogger"],(function(a,b,c,d,e,f,g){a=function(){function a(){}var b=a.prototype;b.addEventListener=function(a,b,e){switch(a){case"message":d("CurrentSharedWorker").setMessageHandler(function(a){return b({data:a})});break;case"error":break;default:c("FBLogger")("worker").mustfix("Unexpected message type %",a)}};b.removeEventListener=function(a,b,e){switch(a){case"message":d("CurrentSharedWorker").setMessageHandler(null);break;case"error":break;default:c("FBLogger")("worker").mustfix("Unexpected message type %",a)}};b.postMessage=function(a,b){d("CurrentSharedWorker").postMessage(a,b)};return a}();g.CurrentSharedWorkerAdapter=a}),98);
__d("CurrentWorkerMessagePort",["CurrentSharedWorkerAdapter"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function a(){if(h==null)if("SharedWorkerGlobalScope"in self&&self instanceof self.SharedWorkerGlobalScope)h=new(d("CurrentSharedWorkerAdapter").CurrentSharedWorkerAdapter)();else if("DedicatedWorkerGlobalScope"in self&&self instanceof self.DedicatedWorkerGlobalScope)h=self;else throw new Error("CurrentWorkerAdapter: Unsupported worker type");return h}g.getMessagePort=a}),98);
__d("EBAPI",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("EBMessageRangeQuery").__setRef("EBAPI"),i=c("requireDeferred")("EBPointQuery").__setRef("EBAPI");a={messageRangeQuery:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return h.load().then(function(a){return a.messageRangeQuery.apply(a,b)})},pointQuery:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return i.load().then(function(a){return a.pointQuery.apply(a,b)})}};b=a;g["default"]=b}),98);
__d("EBBridgedAPIHandler",["EBAPI"],(function(a,b,c,d,e,f,g){"use strict";a={messageRangeQuery:function(){return c("EBAPI").messageRangeQuery.apply(c("EBAPI"),arguments)},pointQuery:function(){return c("EBAPI").pointQuery.apply(c("EBAPI"),arguments)}};g.ebapi=a}),98);
__d("IGDHandleContinueMediaDownload",["MediaDownloadMediator","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("MediaDownloadMediator").handleNewCDNUrlFromMI(a.deliveryObjectId,a.cdnUrl);return(h||(h=b("Promise"))).resolve()});return i.apply(this,arguments)}g.handleContinueMediaDownload=a}),98);
__d("MAWIncomingReceiptUtils",["WALogger","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["User "," is in affectedUserJids in receipt-writing results, but they have no corresponding read/delivery receipt entry in the DB"]);h=function(){return a};return a}function a(a){var b=new Map();a.forEach(function(a){if(a.msgRenderType==="unrendered")return;a.affectedUserJids.forEach(function(c){var e=a.receipt.statusTsPerUser.get(c);if(e==null){d("WALogger").WARN(h(),c);return}c=[a.threadJid,c];var f=b.get(JSON.stringify(c)),g=e.deliveredTs!=null,i=e.readTs!=null;g=g?a.msgTs:0;i=i?a.msgTs:0;e=(e=e.readTs)!=null?e:0;if(f!=null){var j=f.lastDeliveredMsgTs,k=f.lastReadMsgTs;f=f.lastReadActionTs;g=Math.max(g,j);i=Math.max(i,k);e=Math.max(e,f)}b.set(JSON.stringify(c),{lastDeliveredMsgTs:d("WATimeUtils").castToUnixTime(g),lastReadActionTs:d("WATimeUtils").castToUnixTime(e),lastReadMsgTs:d("WATimeUtils").castToUnixTime(i)})})});return new Map(Array.from(b).map(function(a){var b=a[0];a=a[1];return[JSON.parse(b),a]}))}g.getMaxTimestampsPerParticipant=a}),98);
__d("MAWAckAndTimestampUpdatesForReceiptsTxns",["MAWDbMsgTxns","MAWDbParticipantTxns","MAWDbUnrenderedMsgTxns","MAWDexieTable","MAWIncomingReceiptUtils","MAWLoggerUtils","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Updating timestamps for "," participants"]);h=function(){return a};return a}var i=d("WATagsLogger").TAGS([d("MAWLoggerUtils").Tag.Ephemeral,d("MAWLoggerUtils").Tag.Countdown,d("MAWLoggerUtils").Tag.Incoming]);function a(a,b,c){b=d("MAWIncomingReceiptUtils").getMaxTimestampsPerParticipant(b);i.LOG(h(),b.size);var e=[];b.forEach(function(a,b){e.push({deliveredWatermarkTs:a.lastDeliveredMsgTs,lastReadActionTs:a.lastReadActionTs,lastReadWatermarkTs:a.lastReadMsgTs,participantKey:b})});b=c.regular.length>0?d("MAWDbMsgTxns").bulkUpdateSystemAck(a,c.regular):d("MAWDexieTable").dexieResolve();c=c.unrendered.length>0?d("MAWDbUnrenderedMsgTxns").bulkUpdateSystemAckForUnrenderedMsgs(a,c.unrendered):d("MAWDexieTable").dexieResolve();b=d("MAWDexieTable").dexieAll([b,c]);return d("MAWDexieTable").dexieAll([b,e.length>0?d("MAWDbParticipantTxns").bulkUpdateParticipantTimestamps(a,e):d("MAWDexieTable").dexieResolve()]).then(function(){})}g.handleAckAndTimestampUpdatesForReceipts=a}),98);
__d("MAWAdminAddParticipantMsg",["MAWLocalizationType","WAGlobals","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h=1;function i(a,b,c){switch(a){case 1:return{adminMsgContent:[b],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU};case 2:return{adminMsgContent:[b,c],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER};default:return{adminMsgContent:[b,(a-1).toString()],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS}}}function j(a,b,c){switch(a){case 1:return{adminMsgContent:[b],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT};case 2:return{adminMsgContent:[b,c],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS};default:return{adminMsgContent:[b,(a-1).toString()],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS}}}function k(a,b,c,e){switch(a){case 1:return{adminMsgContent:[b,c],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER};case 2:return{adminMsgContent:[b,c,e],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER}}return{adminMsgContent:[b,c,(a-1).toString()],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER}}function l(a,b){switch(a){case 1:return{adminMsgContent:[],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU};case 2:return{adminMsgContent:[b],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER}}return{adminMsgContent:[(a-1).toString()],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER}}function m(a,b,c){switch(a){case 1:return{adminMsgContent:[b],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER};case 2:return{adminMsgContent:[b,c],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER}}return{adminMsgContent:[b,(a-1).toString()],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER}}function n(a,b){var c=d("WAGlobals").getMyUserJid(),e=b[0],f=b[1],g=d("WAJids").userIdFromJid(e);f=f!=null?d("WAJids").userIdFromJid(f):"";if(a==null)return b.includes(c)?l(b.length,e===c?f:g):m(b.length,g,f);if(a===c)return j(b.length,g,f);a=d("WAJids").userIdFromJid(a);return b.includes(c)?i(b.length,a,e===c?f:g):k(b.length,a,g,f)}function a(a,b){return babelHelpers["extends"]({},n(a,b),{version:h})}g.createAddParticipantsAdminMessage=a}),98);
__d("MAWAdminRemoveParticipantMsg",["MAWLocalizationType","WAGlobals","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h=1;function i(a,b,c){switch(a){case 1:return{adminMsgContent:[b],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU};case 2:return{adminMsgContent:[b,c],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER};default:return{adminMsgContent:[b,(a-1).toString()],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS}}}function j(a,b,c,e){switch(a){case 1:return e?{adminMsgContent:[],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LEFT_GROUP}:{adminMsgContent:[b],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT};case 2:return{adminMsgContent:[b,c],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS};default:return{adminMsgContent:[b,(a-1).toString()],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS}}}function k(a,b,c,e,f){switch(a){case 1:return f?{adminMsgContent:[b],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP}:{adminMsgContent:[b,c],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER};case 2:return{adminMsgContent:[b,c,e],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER}}return{adminMsgContent:[b,c,(a-1).toString()],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER}}function l(a,b){var c=d("WAGlobals").getMyUserJid(),e=b[0],f=b[1],g=d("WAJids").userIdFromJid(e);f=f!=null?d("WAJids").userIdFromJid(f):"";if(a==null)return b.includes(c)?{adminMsgContent:[],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU}:{adminMsgContent:[g],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER};if(a===c)return j(b.length,g,f,e===c);var h=d("WAJids").userIdFromJid(a);return b.includes(c)?i(b.length,h,e===c?f:g):k(b.length,h,g,f,e===a)}function a(a,b){return babelHelpers["extends"]({},l(a,b),{version:h})}g.createRemoveParticipantsAdminMessage=a}),98);
__d("MAWAdminWriteChangeParticipantsAdminMsgTxn",["MAWAdminAddParticipantMsg","MAWAdminRemoveParticipantMsg","MAWDbThreadTxns","MAWLocalizationUtils","MAWWriteMsgTxns","WAGlobals","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h(a,b,d("MAWAdminAddParticipantMsg").createAddParticipantsAdminMessage)}function b(a,b){return h(a,b,d("MAWAdminRemoveParticipantMsg").createRemoveParticipantsAdminMessage)}function h(a,b,e){var f=b.admin,g=b.chatJid,h=b.participants,i=b.serverTs;if(h.length===0)throw c("err")("invalid number of participants when writing participants change admin msg");return d("MAWDbThreadTxns").getThread(a,g).then(function(b){if(!b.success)throw c("err")("no thread when writing participants change admin msg");b=b.value;var g=d("WAGlobals").getMyUserJid();g=f==="@me"?g:f;if(g==null)return;g=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg(e(g,h),b.jid,i);return d("MAWWriteMsgTxns").writeMsg(a,g,b).then(function(){})})}g.writeAddParticipantAdminMsg=a;g.writeRemoveParticipantAdminMsg=b}),98);
__d("MessagingArmadilloThreadCutoverNonTALClientDomain",[],(function(a,b,c,d,e,f){a=Object.freeze({ARMADILLO_CUTOVER_CLIENT_DOMAIN_MESSENGER_CUTOVER_DASM_NATIVE_OPERATIONS:"MessengerCutoverDasmNativeOperations"});f["default"]=a}),66);
__d("MessagingArmadilloThreadCutoverNonTALClientEvent",[],(function(a,b,c,d,e,f){a=Object.freeze({ARMADILLO_CUTOVER_CLIENT_EVENT_COMPLETE_CUTOVER:"CompleteCutover",ARMADILLO_CUTOVER_CLIENT_EVENT_THREAD_FETCH:"ThreadFetch"});f["default"]=a}),66);
__d("MessagingArmadilloThreadCutoverNonTALClientEventDetails",[],(function(a,b,c,d,e,f){a=Object.freeze({ARMADILLO_CUTOVER_CLIENT_EVENT_DETAILS_SUCCESS:"Success",ARMADILLO_CUTOVER_CLIENT_EVENT_DETAILS_APPEND_ADMIN_MESSAGES:"AppendAdminMessages",ARMADILLO_CUTOVER_CLIENT_EVENT_DETAILS_GENERIC_ERROR:"GenericError",ARMADILLO_CUTOVER_CLIENT_EVENT_DETAILS_MISSING_ACT_THREAD:"MissingActThread",ARMADILLO_CUTOVER_CLIENT_EVENT_DETAILS_THREAD_ALREADY_MIGRATED:"ThreadAlreadyMigrated"});f["default"]=a}),66);
__d("MAWAdminWriteCutoverThreadMsgTxn",["CurrentEnvironment","MAWBridge","MAWBridgeMsg","MAWBridgeTypesCreators","MAWDbMessageHandler","MAWDbMsg","MAWDbThreadTxns","MAWIndexedDb","MAWLocalizationType","MAWLocalizationUtils","MAWMsgType","MAWThreadSnippetBuildTxns","MAWWriteBulkWriteIncomingAdminMsgTxns","MAWWriteMsgTxns","MessagingArmadilloThreadCutoverNonTALClientDomain","MessagingArmadilloThreadCutoverNonTALClientEvent","MessagingArmadilloThreadCutoverNonTALClientEventDetails","WAJids","WALogger","WATimeUtils","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["cutoverThreadAdminMessage failed to get the thread"]);h=function(){return a};return a}function i(a,b,e,f,g){a=d("WAJids").switchOnMsgrChatJidType(a,{group:function(a){return d("WAJids").groupIdFromJid(a)},user:function(a){return d("WAJids").userIdFromJid(a)}});d("MAWBridge").getBridge().fireAndForget("event","logCutoverEvent",{armadilloThreadId:a,domain:c("MessagingArmadilloThreadCutoverNonTALClientDomain").ARMADILLO_CUTOVER_CLIENT_DOMAIN_MESSENGER_CUTOVER_DASM_NATIVE_OPERATIONS,event:c("MessagingArmadilloThreadCutoverNonTALClientEvent").ARMADILLO_CUTOVER_CLIENT_EVENT_COMPLETE_CUTOVER,eventDetails:f,openThreadId:b,success:g,traceId:e})}function a(a,b,e,f){return d("MAWDbThreadTxns").getThread(a,b).then(function(g){var j=function(a,c){i(b,e,f,a,c)};if(!g.success){d("WALogger").WARN(h());j(c("MessagingArmadilloThreadCutoverNonTALClientEventDetails").ARMADILLO_CUTOVER_CLIENT_EVENT_DETAILS_MISSING_ACT_THREAD,!1);return{needsMarkThreadAsMigrated:!1}}var k=g.value;if(k.isMigratedLocally===!0){j(c("MessagingArmadilloThreadCutoverNonTALClientEventDetails").ARMADILLO_CUTOVER_CLIENT_EVENT_DETAILS_THREAD_ALREADY_MIGRATED,!0);return{needsMarkThreadAsMigrated:!1}}g=d("MAWDbMsg").craftE2eeAdminMsgAltIndex(k.chatId);var l=d("MAWDbMsg").craftCutoverAdminMsgAltIndex(k.chatId);return a.messages.where("altIndex").equals(g).first().then(function(b){var e=c("CurrentEnvironment").instagramdotcom?d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE;if(!b){var f=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:[],adminType:e,version:1},k.jid,d("WATimeUtils").castToUnixTime(0),l);return d("MAWWriteMsgTxns").writeMsg(a,f,k,{sortOrderMs:0}).then(function(){j(c("MessagingArmadilloThreadCutoverNonTALClientEventDetails").ARMADILLO_CUTOVER_CLIENT_EVENT_DETAILS_APPEND_ADMIN_MESSAGES,!0);return{needsMarkThreadAsMigrated:!0}})}var g=babelHelpers["extends"]({},b,{altIndex:l,author:d("WAJids").AUTHOR_SYSTEM,msgContent:{adminMsgContent:[],adminType:e},type:d("MAWMsgType").MSG_TYPE.ADMIN});return a.messages.put(g).then(function(){d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(g)});j(c("MessagingArmadilloThreadCutoverNonTALClientEventDetails").ARMADILLO_CUTOVER_CLIENT_EVENT_DETAILS_APPEND_ADMIN_MESSAGES,!0);return{needsMarkThreadAsMigrated:!0}})})})}function b(a,b){var e=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:[],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE},b.jid),f=babelHelpers["extends"]({},b,{didInsertDualThreadCutoverAdminMsg:!1});return a.threads.put(f).then(function(){return d("MAWWriteMsgTxns").writeMsg(a,e,f).then(c("emptyFunction"))})}function e(a,b){var c=d("MAWDbMsg").craftCutoverAdminMsgAltIndex(b.chatId),e=d("MAWDbMsg").craftE2eeAdminMsgAltIndex(b.chatId);return a.messages.where("altIndex").equals(e).first().then(function(f){if(f!=null)return;return a.messages.where("altIndex").equals(c).first().then(function(c){if(!c)return d("MAWWriteBulkWriteIncomingAdminMsgTxns").writeE2EEAdminMsgsForIncomingCreatedThreads(a,[b]).then(function(){});var f=babelHelpers["extends"]({},c,{altIndex:e,author:d("WAJids").AUTHOR_SYSTEM,msgContent:{adminMsgContent:[],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION},type:d("MAWMsgType").MSG_TYPE.ADMIN});return a.messages.put(f).then(function(){d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(f)});if(!d("MAWDbMessageHandler").isThreadUpdateEnabledViaMiddleware(f.type))return d("MAWThreadSnippetBuildTxns").buildThreadSnippet(a,f).then(function(a){var c=a.snippetParams,e=a.snippetSenderContactId;a=a.snippetType;d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedThread({snippetParams:c,snippetSenderContactId:e,snippetType:a,threadJid:b.jid})});return})})})})}g.writeCutoverThreadAdminMsg=a;g.writeRollbackCutoverAdminMsg=b;g.revertCutoverThreadAdminMsg=e}),98);
__d("MAWAdminWriteGroupNameChangeTxn",["MAWDexieTable","MAWLocalizationType","MAWLocalizationUtils","MAWWriteMsgTxns","WAGlobals","WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e=b.name;if(e==null)return d("MAWDexieTable").dexieResolve();var f=d("WAGlobals").getMyUserJid(),g=[];b.nameOwner===f?(f=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP,g.push(e)):b.nameOwner==null?(f=d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP,g.push(e)):(f=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP,g.push(d("WAJids").userIdFromJid(b.nameOwner),e));b=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:g,adminType:f,version:1},c.jid,d("WATimeUtils").castMillisTimeToUnixTime(d("WATimeUtils").millisTime()));return d("MAWWriteMsgTxns").writeMsg(a,b,c).then(function(){})}g.writeGroupNameChangeInfo=a}),98);
__d("MAWAdminWriteUserDeviceMsgTxn",["MAWAckLevel","MAWAdminMsgHelpers","MAWDbMsgTxns","MAWDexieTable","MAWExternalId","MAWLocalizationType","MAWLocalizationUtils","MAWMsgType","MAWWriteMsgTxns","WAGlobals","WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";c={add:"add",remove:"remove",update:"update"};function h(a,b){switch(a){case"add":if(b)return d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE;else return d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE;case"remove":if(b)return d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE;else return d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE;case"update":if(b)return d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE;else return d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE}}function a(a,b,c,e,f){return d("MAWDbMsgTxns").getIsThreadEmpty(a,c).then(function(g){if(g)return d("MAWDexieTable").dexieResolve();g=b===d("WAGlobals").getMyUserJid();var i=h(e,g);g=g?[]:[d("WAJids").userIdFromJid(b)];g=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:g,adminType:i,version:1},c.jid,f);return d("MAWWriteMsgTxns").writeMsg(a,g,c).then(function(){})})}function b(a,b,c,e){var f=d("MAWAdminMsgHelpers").UNKNOWN_USER,g=b===d("WAGlobals").getMyUserJid();b={ack:d("MAWAckLevel").ACK.received,altIndex:void 0,author:g?d("WAJids").AUTHOR_ME:b,externalId:d("MAWExternalId").generateExternalId(),msgContent:{adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE,authorName:f},threadJid:c.jid,ts:(g=e)!=null?g:d("WATimeUtils").unixTime(),type:d("MAWMsgType").MSG_TYPE.ICDC_ALERT};return d("MAWWriteMsgTxns").writeMsg(a,b,c).then(function(){})}g.DeviceChange=c;g.getUserDeviceAdminType=h;g.writeUserDeviceAdminMsg=a;g.writeICDCAlert=b}),98);
__d("MAWAdminWriteUsersConnectedMsgTxn",["MAWDbMsgTxns","MAWDbThreadTxns","MAWDexieTable","MAWIndexedDb","MAWLocalizationType","MAWLocalizationUtils","MAWWriteMsgTxns","MessengerMSplitFlag","WAGlobals","WAJids","WALogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["writeUsersConnectedAdminMsg found an empty thread, which we'll not append to."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["writeUsersConnectedAdminMsg failed to create or get 1:1 thread"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["writeUsersConnectedAdminMsg is called for self thread"]);j=function(){return a};return a}function a(a,b,e,f){if(b===d("WAGlobals").getMyUserJid()){d("WALogger").WARN(j());return d("MAWDexieTable").dexieResolve()}return d("MAWDbThreadTxns").getThread(a,b).then(function(b){if(!b.success){d("WALogger").WARN(i());return}return d("MAWDbMsgTxns").getIsThreadEmpty(a,b.value).then(function(g){if(g){d("WALogger").WARN(h());return}var i=b.value;g=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:[],adminType:c("MessengerMSplitFlag").is_msplit_account||e?d("MAWLocalizationType").LOCALIZATION_TYPE.TWO_USERS_CONNECTED_ONE_MSPLIT:d("MAWLocalizationType").LOCALIZATION_TYPE.TWO_USERS_CONNECTED,version:1},i.jid,f);return d("MAWWriteMsgTxns").writeMsg(a,g,i).then(function(){if(!c("gkx")("4746"))return;var a=d("WAJids").interpretAsUserJid(i.jid);if(a==null)return;d("MAWIndexedDb").afterTransaction({tag:"UpdateContactAsConnected",value:{contactUserId:d("WAJids").extractUserId(a),threadJid:i.jid}})})})})}g.writeUsersConnectedAdminMsg=a}),98);
__d("MAWHandleNotification",["Promise","WAAPI","WALogger","WAProtocolQueue","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["SyncABProps: ",""]);i=function(){return a};return a}function j(a){switch(a.type){case"server":c("WAAPI").syncAbProps({sendHash:!1})["catch"](function(a){d("WALogger").ERROR(i(),a)});return;default:a.type;return}}function k(a){switch(a.type){case"thread":case"group":a.ack;var b=babelHelpers.objectWithoutPropertiesLoose(a,["ack"]);return b;default:a.type;return}}function l(a){switch(a.type){case"group":return{jid:a.notification.groupJid,notification:a,priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow,stanzaId:a.stanzaId,type:"notification"};case"thread":return{jid:a.notification.chatJid,notification:a,priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow,stanzaId:a.stanzaId,type:"notification"};default:a;throw c("err")("Received unsupported notification type: "+a.type)}}function a(a){j(a);var c=k(a);c&&void d("WAProtocolQueue").protocolQueue().addPending(l(c));return(h||(h=b("Promise"))).resolve(a.ack())}g.notificationHandler=a}),98);
__d("MAWHandleAbPropsRefreshNotification",["MAWHandleNotification"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var b=a.id,c=a.makeAck,e=a.offline;a=a.serverTs;return d("MAWHandleNotification").notificationHandler({ack:c,offline:e,stanzaId:b,ts:a,type:"server"})};g.handleAbPropsRefreshNotification=a}),98);
__d("WADecryptPkmsgOrMsg",["WACryptoManagerUtils","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.from,c=a.ciphertext,e=a.encType,f=a.cb;a=a.ctx;return d("WACryptoManagerUtils").decryptMsg(e,b,c,a).then(function(a){if(a.success===!1)return f(a);return a.value!=null?f(d("WAResultOrError").makeResult({plaintext:a.value.plaintext,remoteIdentity:a.value.remoteIdentity})):f(d("WAResultOrError").makeError("missing-content"))})}g.decryptPkmsgOrMsg=a}),98);
__d("WAHandleAppdataMessageProtocol",["WAMsgTransport.pb","WAParseMessageTransport","WAResultOrError","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("decodeProtobuf").decodeProtobuf(d("WAMsgTransport.pb").MessageTransportSpec,a);a=d("WAParseMessageTransport").parseMessageTransport(a,null);switch(a.type){case"error":return d("WAResultOrError").makeError(a.error);case"skdm":return d("WAResultOrError").makeError("skdm appdata is not supported");case"unknown":return d("WAResultOrError").makeError("unknown appdata");default:a.type;return d("WAResultOrError").makeResult(a.applicationPayload)}}g.decodeAppdata=a}),98);
__d("WAStanzaRootTag",[],(function(a,b,c,d,e,f){"use strict";a="notification";b="receipt";c="message";d="call";e="chatstate";var g="presence",h="appdata",i="failure",j="stream:error",k="ib",l="iq",m="error",n="success",o="xmlstreamend",p={NOTIFICATION:a,RECEIPT:b,MESSAGE:c,CHATSTATE:e,PRESENCE:g,APPDATA:h,CALL:d,IQ:l,IB:k,STREAM_ERROR:j,FAILURE:i,SUCCESS:n,ERROR:m,XML_STREAM_END:o};f.NOTIFICATION=a;f.RECEIPT=b;f.MESSAGE=c;f.CALL=d;f.CHATSTATE=e;f.PRESENCE=g;f.APPDATA=h;f.FAILURE=i;f.STREAM_ERROR=j;f.IB=k;f.IQ=l;f.ERROR=m;f.SUCCESS=n;f.XML_STREAM_END=o;f.STANZA_ROOT_TAG=p}),66);
__d("MAWHandleAppdataMessage",["Promise","WADecryptPkmsgOrMsg","WAHandleAppdataMessageProtocol","WAProtocolQueue","WAResolvable","WAStanzaRootTag","WATagsLogger","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Appdata contains unexpected message transport. ",""]);i=function(){return a};return a}var j=d("WATagsLogger").TAGS(["backend","appdata"]);a=function(a,e){var f=a.parsedAppdata,g=a.sendDeliveryReceipt,k=a.sendRetryReceipt,l=new(d("WAResolvable").Resolvable)();return d("WADecryptPkmsgOrMsg").decryptPkmsgOrMsg({cb:m,ciphertext:f.ciphertext,ctx:e,encType:f.encType,from:f.from});function m(a){return(h||(h=b("Promise"))).resolve().then(function(){if(!a.success)return(h||(h=b("Promise"))).resolve(babelHelpers["extends"]({error:a.error,type:"Undecrypted"},f));else return(h||(h=b("Promise"))).resolve(babelHelpers["extends"]({type:"Decrypted"},f,a.value))}).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.type==="Undecrypted"){c("promiseDone")(k());return"NO_ACK"}var b=d("WAHandleAppdataMessageProtocol").decodeAppdata(a.plaintext);if(!b.success){j.ERROR(i(),b.error);return"NO_ACK"}l.resolve();void d("WAProtocolQueue").protocolQueue().addPending({appdata:d("WAProtocolQueue").appdataApplicationProtocol(b.value),deviceJid:a.from,jid:a.author,priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow,stanzaId:a.stanzaId,type:d("WAStanzaRootTag").STANZA_ROOT_TAG.APPDATA});c("promiseDone")(g());return"NO_ACK"});return function(b){return a.apply(this,arguments)}}())}};g.handleAppdataMessage=a}),98);
__d("MAWHandleChatState",["MAWBridge","MAWBridgeTypesCreators","Promise","WAJids","WALogger","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["ReceivedChatState route was unsupported, falling back on UI handler ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleChatStatus status for ",": ",""]);j=function(){return a};return a}function k(a,e,f){d("WALogger").LOG(j(),a,f);var g={tag:"ReceivedChatState",value:d("MAWBridgeTypesCreators").createBridgeReceivedChatState(a,e,f)};c("promiseDone")(d("MAWBridge").getBridge().sendAndReceive("event","receivedChatState",{senderId:d("WAJids").extractUserId(e),state:f,threadJid:a}),null,function(a){d("WALogger").ERROR(i(),a==null?void 0:a.message),d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[g]})});return(h||(h=b("Promise"))).resolve("NO_ACK")}a=function(a){var b=a.jid,c=a.participant;a=a.status;return k(b,c,a)};e=function(a){var b=a.jid;a=a.status;return k(b,b,a)};g.handleGroupChatState=a;g.handleIndividualChatState=e}),98);
__d("MAWFbCat",["err"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function a(a){h=a}function b(){if(h==null)throw c("err")("FBCat is not set");return h}g.setFbCat=a;g.getFbCat=b}),98);
__d("MAWRotateCAT",["MAWBridge","MAWFbCat","MAWODSProxy","WAArrayBufferUtils","WADbDeviceRegistration","WADbMetaTxns","WALogger","WAOdsEnums","WAPromiseRetryLoop","WARetryUtils","asyncToGeneratorRuntime","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Rotate CAT finished, ending rotate CAT promise retry loop"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to rotate CAT"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MAWRotateCAT] Got an error while attempting to rotate CAT: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["CAT Finished Rotating"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Starting rotate CAT Task Bridge event"]);l=function(){return a};return a}function m(){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.CAT_ROTATION,key:"rotateCAT"});d("WALogger").LOG(l());return d("MAWBridge").getBridge().sendAndReceive("event","rotateCryptoAuthToken",{}).then(function(a){return d("WADbMetaTxns").saveCAT(a)}).then(function(a){d("MAWFbCat").setFbCat(d("WAArrayBufferUtils").stringToArrayBuffer(a.encrypted_serialized_cat));d("WALogger").LOG(k());return a})["catch"](function(a){d("WALogger").EXPECTED_ERROR(j(),c("getErrorSafe")(a)).expect(["1357004"]);return null})}function a(a){var c=(a=a==null?void 0:a.retries)!=null?a:d("WADbDeviceRegistration").MAX_ROTATE_CRYPTO_AUTH_TOKEN_RETRIES,e=0;a=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({code:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){e===c&&d("WALogger").ERROR(i());var b=(yield m());b!=null&&(d("WALogger").LOG(h()),a());e++});function f(b){return a.apply(this,arguments)}return f}(),name:"rotateCAT",timer:d("WARetryUtils").FIBONACCI_BACKOFF});a.start();return a.promise()}g.rotateCAT=m;g.tryRotateCAT=a}),98);
__d("MAWHandleFailure",["MAWBridge","MAWQplProxy","MAWRotateCAT","Promise","WAHandleFailureUtils","WALogger","WAOdsEnums","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["failure reason "," not implemented yet"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleFailure: got failure code ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Crypto auth token Error: ",", rotating CAT"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received <failure> stanza with "," code. ReregisterPhone"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received <failure> stanza with "," code. DeregisterPhone"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleFailure: got failure code ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received <failure> stanza with "," code. DeregisterPhone"]);o=function(){return a};return a}a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.reason;d("MAWBridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.STREAM_ERROR,key:"failure."+a});d("MAWQplProxy").sendQPLDoubleAnnotationsThroughBridge(c("qpl")._(1056839232,"112"),{waiLoginError:Number(a)});switch(a){case d("WAHandleFailureUtils").FAILURE_CODES.BANNED:d("WALogger").ERROR(o(),a);yield d("WAHandleFailureUtils").deregisterPhone();break;case d("WAHandleFailureUtils").FAILURE_CODES.TEMP_BANNED:d("WALogger").ERROR(n(),a);break;case d("WAHandleFailureUtils").FAILURE_CODES.NOT_FOUND:d("WALogger").ERROR(m(),a);yield d("WAHandleFailureUtils").deregisterPhone();break;case d("WAHandleFailureUtils").FAILURE_CODES.GENERIC_FAILURE:case d("WAHandleFailureUtils").FAILURE_CODES.NOT_AUTHORIZED:d("WALogger").ERROR(l(),a);yield d("WAHandleFailureUtils").reregisterPhone();break;case d("WAHandleFailureUtils").FAILURE_CODES.CAT_EXPIRED:case d("WAHandleFailureUtils").FAILURE_CODES.CAT_INVALID:d("WALogger").ERROR(k(),a);yield d("MAWRotateCAT").tryRotateCAT({retries:10});break;case d("WAHandleFailureUtils").FAILURE_CODES.INTERNAL_ERROR:case d("WAHandleFailureUtils").FAILURE_CODES.SERVER_UNAVAILABLE:d("WALogger").ERROR(j(),a);break;default:d("WALogger").ERROR(i(),a);return(h||(h=b("Promise"))).reject("failure reason "+a+" not implemented yet")}return(h||(h=b("Promise"))).resolve("NO_ACK")});return function(b){return a.apply(this,arguments)}}();g.handleLoginFailure=a}),98);
__d("WADeviceNotificationFlushable",["Promise","WAComputeAndUploadICDCInfo","WAGlobals","WAICDCUtils","WALogger","WANotifyDeviceChange","WAOfflineUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to notify "," contacts of device change"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Notified "," contacts of device change"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["computeAndSaveICDC: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["flushing device notification has no payload to saveICDC"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["flushing device notification failed to saveICDC: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["flushing device notification has no payload to computeAndSaveICDC"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["flushing device notification failed to computeAndSaveICDC: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["flushing device notification payload with "," entries from ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["flushing device notification payload"]);r=function(){return a};return a}a=function(){function a(){this.$1=[]}var c=a.prototype;c.handleDeviceNotification=function(a){a.ack;var b=babelHelpers.objectWithoutPropertiesLoose(a,["ack"]);this.$1.push(b.notification);return a.ack()};c.flush=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){e.addPoint("device_notification_flushable_flush_start");c.LOG(r());if(this.$1.length===0){e.addPoint("device_notification_flushable_flush_empty");return}var f=new Map(),g=this.$1;this.$1=[];for(var i of g){var j=i.jid;f.set(j,i)}j=Array.from(f.values());e.addPoint("device_notification_flushable_flush_non_empty",{"int":{payloadLength:g.length,dedupedPayloadLength:j.length}});c.LOG(q(),j.length,Array.from(f.keys()).join(","));e.addPoint("device_notification_flushable_update_user_devices_start");yield a.cryptoManager.storage.updateUserDevicesInfo(j.map(function(a){return babelHelpers["extends"]({},a,{icdcInfo:null})}));e.addPoint("device_notification_flushable_update_user_devices_end");e.addPoint("device_notification_flushable_flush_notify_device_start");yield (h||(h=b("Promise"))).all(j.map(function(a){a=a.jid;return u(a,d("WAGlobals").getWaOneQueue().getMode()!==d("WAOfflineUtils").ServerRPCMode.ONLINE)}));e.addPoint("device_notification_flushable_flush_notify_device_end");i=[];var k=[];for(g of j)s(g.jid,g.icdcInfo)?k.push(g):i.push(g);e.addPoint("device_notification_flushable_flush_compute_and_save_icdc",{"int":{computeAndSave:k.length,justSave:i.length}});k.length>0?(e.addPoint("device_notification_flushable_finish_compute_and_save_start"),void d("WAGlobals").getWaOneQueue().waitForWAInfraOfflineSyncEnd().then(function(){return(h||(h=b("Promise"))).all(k.map(function(a){return t(a.icdcInfo)}))["catch"](function(a){c.ERROR(p(),a.toString())}).then(function(){})}),e.addPoint("device_notification_flushable_finish_compute_and_save_end")):c.LOG(o());i.length>0?(e.addPoint("device_notification_flushable_finish_just_save_start"),yield (h||(h=b("Promise"))).all(i.map(function(b){if(b.icdcInfo==null)return;return a.cryptoManager.storage.saveICDC(b.jid,b.icdcInfo)}))["catch"](function(a){c.ERROR(n(),a.toString())}),e.addPoint("device_notification_flushable_finish_just_save_end")):c.LOG(m());e.addPoint("device_notification_flushable_flush_end")});function c(b,c,d){return a.apply(this,arguments)}return c}();return a}();c=new a();function s(a,b){if(a!==d("WAGlobals").getMyUserJid())return!1;return b==null||d("WAICDCUtils").isICDCIndexInvalid(b)||(b==null?void 0:b.dirty)?!0:!1}function t(a){var b;a==null?b="empty":a.dirty?b="dirty":b="invalidIndex";d("WAComputeAndUploadICDCInfo").computeAndUploadICDCInfo(null,{reason:b,caller:"device_notification",sequence:a==null?void 0:a.sequence})["catch"](function(a){d("WALogger").DEV(l(),a)})}function u(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b)return;b=d("WAGlobals").getMyUserJid();if(a!==b)return;var c=(yield d("WAGlobals").getDependencies().loadRecentParticipants(d("WAGlobals").getConfig().maxUsersForNotifyDeviceChange(),b));d("WANotifyDeviceChange").notifyDeviceChange(null,{users:c}).then(function(){d("WALogger").LOG(k(),c.size)})["catch"](function(a){d("WALogger").LOG(j(),c.size),d("WALogger").ERROR(i(),a)})});return v.apply(this,arguments)}g.DeviceNotificationFlushable=a;g.deviceNotificationFlushable=c}),98);
__d("MAWHandleFbDeviceChangeNotification",["Promise","WADeviceNotificationFlushable","WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){a.ctx;var c=a.devices,e=a.dhash,f=a.icdcInfo,g=a.id,i=a.makeAck,j=a.offline,k=a.serverTs;a=a.userJid;i={ack:i,notification:{devices:c.map(function(a){return{id:d("WAJids").extractDeviceId(a.device),identity:a.identity,model:a.model,platform:a.platform}}),dhash:e,icdcInfo:f,jid:a,lastSyncTs:d("WATimeUtils").unixTime(),notificationTs:k},offline:j,stanzaId:g,type:"devices"};return(h||(h=b("Promise"))).resolve(d("WADeviceNotificationFlushable").deviceNotificationFlushable.handleDeviceNotification(i))};g.handleFbDeviceChangeNotification=a}),98);
__d("MAWHandleFbMultiwayNotification",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;a=function(a){var b=a.domainJid,c=a.id,d=a.makeAck,e=a.multiwayBinaryVersion,f=a.multiwayElementValue,g=a.multiwayTransactionId,i=a.offline;a=a.serverTs;return h({domainJid:b,id:c,makeAck:d,multiwayBinaryVersion:e,multiwayElementValue:f,multiwayTransactionId:g,offline:i,serverTs:a})};function h(a){return(g||(g=b("Promise"))).resolve(a.makeAck())}f.handleFbMultiwayNotification=a}),66);
__d("MAWHandleFbThreadNotification",["MAWHandleNotification"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var b=a.chatJid,c=a.folderId,e=a.hasConnected,f=a.id,g=a.makeAck,h=a.offline;a=a.serverTs;var i=[];c!=null&&i.push({folderId:c,type:"folder"});e&&i.push({type:"connected"});return d("MAWHandleNotification").notificationHandler({ack:g,notification:{actions:i,chatJid:b,ts:a},offline:h,stanzaId:f,type:"thread"})};g.handleFbThreadNotification=a}),98);
__d("MAWHandleGroupNotification",["MAWHandleNotification"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var b=a.action,c=a.id,e=a.makeAck;a=a.offline;return d("MAWHandleNotification").notificationHandler({ack:e,notification:b,offline:a,stanzaId:c,type:"group"})};g.handleGroupNotification=a}),98);
__d("MAWHandleGroupReceipt",["Promise","WAProtocolQueue","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["start handling..."]);i=function(){return a};return a}var j=d("WATagsLogger").TAGS(["backend","handleGroupReceipt"]);a=function(a){j.DEV(i());switch(a.aggregatedType){case"none":var c;c={chat:a.chat,externalIds:[a.stanzaId],from:{author:a.receiptSender,chat:a.chat,groupJid:a.chat,type:"group"},messageAuthor:a.author,offline:(c=a.offline)!=null?c:null,receiptType:"group",stanzaId:a.stanzaId,ts:a.serverTs,type:a.receiptType};void d("WAProtocolQueue").protocolQueue().addPending({jid:a.chat,priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow,receipt:c,stanzaId:a.stanzaId,type:"receipt"});break;case"sender":c=a.stanzaIds[0];var e={chat:a.chat,externalIds:a.stanzaIds,from:{author:a.receiptSender,chat:a.chat,groupJid:a.chat,type:"group"},messageAuthor:a.author,offline:a.offline,receiptType:"group",stanzaId:c,ts:a.serverTs,type:a.receiptType};void d("WAProtocolQueue").protocolQueue().addPending({jid:a.chat,priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow,receipt:e,stanzaId:c,type:"receipt"});break;default:a.aggregatedType;e={chat:a.chat,externalId:a.stanzaId,messageAuthor:a.author,offline:a.offline,receiptType:"group-server-agg",receivers:a.receiptSenders,stanzaId:a.stanzaId,type:a.receiptType};void d("WAProtocolQueue").protocolQueue().addPending({jid:a.chat,priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow,receipt:e,stanzaId:a.stanzaId,type:"receipt"})}return(h||(h=b("Promise"))).resolve(a.makeAck())};g.handleGroupReceipt=a}),98);
__d("MAWHandleGroupRetryReceipt",["Promise","WAProtocolQueue"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){var c=a.chat,e=a.makeAck,f=a.offline;a=a.retryReceipt;var g=a.keys,i=a.receiptSender,j=a.recipient,k=a.regId,l=a.retryCount,m=a.stanzaId;a=a.timestamp;i={category:null,externalId:m,from:{author:i,chat:c,groupJid:c,type:"group"},keys:g,offline:f,recipient:j,regId:k,retryCount:l,timestamp:a};void d("WAProtocolQueue").protocolQueue().addPending({jid:c,priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow,retry:i,stanzaId:m,type:"retryReceipt"});return(h||(h=b("Promise"))).resolve(e())};g.handleGroupRetryReceipt=a}),98);
__d("MAWHandleIndividualRetryReceipt",["Promise","WAProtocolQueue"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){var c=a.chat,e=a.makeAck,f=a.offline;a=a.retryReceipt;var g=a.keys,i=a.receiptSender,j=a.recipient,k=a.regId,l=a.retryCount,m=a.stanzaId;a=a.timestamp;i={category:null,externalId:m,from:{author:i,chat:c,deviceJid:i,type:"device"},keys:g,offline:f,recipient:j,regId:k,retryCount:l,timestamp:a};void d("WAProtocolQueue").protocolQueue().addPending({jid:c,priority:d("WAProtocolQueue").WAProtocolQueuePriorityBackground,retry:i,stanzaId:m,type:"retryReceipt"});return(h||(h=b("Promise"))).resolve(e())};g.handleIndividualRetryReceipt=a}),98);
__d("WADanglingQueue",["WAErr","WALogger","WAPersistedQueue"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["DanglingQueue is already initialized"]);h=function(){return a};return a}var i=null;function a(a){if(i!=null){d("WALogger").WARN(h());return i}a=d("WAPersistedQueue").initPersistedQueue("danglingQueue",a);i=a;return i}function j(){if(!i)throw c("WAErr")("Dangling queue not initialized");return i}function b(){return j().read({limit:1}).then(function(a){return a.length===0})}function e(){return j().read()}function f(a){void j().addPending(a)}function k(){return j().commit()}function l(){return j().clear()}g.initDanglingQueue=a;g.isDanglingQueueEmpty=b;g.danglingQueueRead=e;g.danglingQueueAdd=f;g.danglingQueueCommit=k;g.danglingQueueClear=l}),98);
__d("WASmaxInPassiveModeActiveIQResponseSuccess",["WAResultOrError","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"active");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!c.success)return c;b=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");return!b.success?b:d("WAResultOrError").makeResult({type:c.value,from:b.value})}g.parseActiveIQResponseSuccess=a}),98);
__d("WASmaxOutPassiveModeActiveIQRequest",["WASmaxJsx","WAWap"],(function(a,b,c,d,e,f,g){function a(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set",xmlns:"passive",to:d("WAWap").S_WHATSAPP_NET},d("WASmaxJsx").smax("active",null));return a}g.makeActiveIQRequest=a}),98);
__d("WASmaxPassiveModeActiveIQRPC",["WAComms","WASmaxInPassiveModeActiveIQResponseSuccess","WASmaxOutPassiveModeActiveIQRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:c=d("WASmaxOutPassiveModeActiveIQRequest").makeActiveIQRequest();g.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(c,a));case 3:e=g.sent;f=d("WASmaxInPassiveModeActiveIQResponseSuccess").parseActiveIQResponseSuccess(e,c);if(!f.success){g.next=7;break}return g.abrupt("return",{name:"ActiveIQResponseSuccess",value:f.value});case 7:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("ActiveIQ",{Success:f}));case 8:case"end":return g.stop()}},null,this)}g.sendActiveIQRPC=a}),98);
__d("WASmaxInPassiveModePassiveIQResponseSuccess",["WAResultOrError","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"passive");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!c.success)return c;b=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");return!b.success?b:d("WAResultOrError").makeResult({type:c.value,from:b.value})}g.parsePassiveIQResponseSuccess=a}),98);
__d("WASmaxOutPassiveModePassiveIQRequest",["WASmaxJsx","WAWap"],(function(a,b,c,d,e,f,g){function a(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set",xmlns:"passive",to:d("WAWap").S_WHATSAPP_NET},d("WASmaxJsx").smax("passive",null));return a}g.makePassiveIQRequest=a}),98);
__d("WASmaxPassiveModePassiveIQRPC",["WAComms","WASmaxInPassiveModePassiveIQResponseSuccess","WASmaxOutPassiveModePassiveIQRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:c=d("WASmaxOutPassiveModePassiveIQRequest").makePassiveIQRequest();g.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(c,a));case 3:e=g.sent;f=d("WASmaxInPassiveModePassiveIQResponseSuccess").parsePassiveIQResponseSuccess(e,c);if(!f.success){g.next=7;break}return g.abrupt("return",{name:"PassiveIQResponseSuccess",value:f.value});case 7:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("PassiveIQ",{Success:f}));case 8:case"end":return g.stop()}},null,this)}g.sendPassiveIQRPC=a}),98);
__d("WASendPassiveModeProtocol",["WALogger","WASmaxPassiveModeActiveIQRPC","WASmaxPassiveModePassiveIQRPC","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendPassiveModeIq: passive mode set to '","'"]);h=function(){return a};return a}function a(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:if(!(a==="active")){c.next=5;break}c.next=3;return b("regeneratorRuntime").awrap(d("WASmaxPassiveModeActiveIQRPC").sendActiveIQRPC());case 3:c.next=7;break;case 5:c.next=7;return b("regeneratorRuntime").awrap(d("WASmaxPassiveModePassiveIQRPC").sendPassiveIQRPC());case 7:d("WALogger").LOG(h(),a);case 8:case"end":return c.stop()}},null,this)}g.sendPassiveModeProtocol=a}),98);
__d("WAPassiveMode",["WACastStanzas","WADanglingQueue","WAGlobals","WAPubSub","WASendPassiveModeProtocol","WATagsLogger","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Dangling queue: switch back to active mode"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot process passive mode ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Dangling queue: ",""]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["passive-mode"]),l=d("WAPubSub").simplePubSub();function a(){var a=!1;d("WAGlobals").getWaOneQueue().enqueue(function(){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(d("WADanglingQueue").isDanglingQueueEmpty());case 2:c=e.sent;k.LOG(j(),!c);if(!c){e.next=6;break}return e.abrupt("return");case 6:a=!0;e.next=9;return b("regeneratorRuntime").awrap(d("WACastStanzas").castDanglingStanzas());case 9:l.publish({type:"passive-mode-end"});case 10:case"end":return e.stop()}},null,this)},{operationType:"dangling_receipts",flush:!1})["catch"](function(a){l.publish({type:"passive-mode-fail"}),k.ERROR(i(),a)})["finally"](function(){a&&(k.LOG(h()),void d("WASendPassiveModeProtocol").sendPassiveModeProtocol("active"))})}g.passiveModeNotifier=l;g.maybeProcessPassiveMode=a}),98);
__d("WASmaxOutReceiptBizOriginalEnvelopeMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.originalEnvelopeElementValue;a=d("WASmaxJsx").smax("biz",null,d("WASmaxJsx").smax("original_envelope",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBizOriginalEnvelopeMixin=a}),98);
__d("WASmaxOutReceiptFromProxyAccountMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.receiptActualFrom;a=d("WASmaxJsx").smax("receipt",{actual_from:d("WAWap").JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeFromProxyAccountMixin=a}),98);
__d("WASmaxOutReceiptNeedPrivacyTokenMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("receipt",{privacy_token:"false"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNeedPrivacyTokenMixin=a}),98);
__d("WASmaxOutReceiptRecipientMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.receiptRecipient;a=d("WASmaxJsx").smax("receipt",{recipient:d("WAWap").USER_JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeRecipientMixin=a}),98);
__d("WASmaxOutReceiptSenderAggregatedPublishMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.itemId;a=d("WASmaxJsx").smax("item",{id:d("WAWap").STANZA_ID(a)});return a}function i(a){var b=a.itemArgs;a=a.receiptId;a=d("WASmaxJsx").smax("receipt",{id:d("WAWap").STANZA_ID(a)},d("WASmaxJsx").smax("list",null,d("WASmaxChildren").REPEATED_CHILD(h,b,0,255)));return a}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeSenderAggregatedPublishListItem=h;g.mergeSenderAggregatedPublishMixin=a}),98);
__d("WASmaxOutReceiptSingleMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.receiptId;a=d("WASmaxJsx").smax("receipt",{id:d("WAWap").STANZA_ID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeSingleMixin=a}),98);
__d("WASmaxOutReceiptSenderAggregatedPublishOrSingleMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutReceiptSenderAggregatedPublishMixin","WASmaxOutReceiptSingleMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.senderAggregatedPublish)return d("WASmaxOutReceiptSenderAggregatedPublishMixin").mergeSenderAggregatedPublishMixin(a,b.senderAggregatedPublish);if(b.single)return d("WASmaxOutReceiptSingleMixin").mergeSingleMixin(a,b.single);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeSenderAggregatedPublishOrSingleMixinGroup=a}),98);
__d("WASmaxOutReceiptBroadcastDeviceMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.receiptTo;a=a.receiptParticipant;b=d("WASmaxJsx").smax("receipt",{to:d("WAWap").BROADCAST_JID(b),participant:d("WAWap").DEVICE_JID(a)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBroadcastDeviceMixin=a}),98);
__d("WASmaxOutReceiptGroupDeviceMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.receiptTo;a=a.receiptParticipant;b=d("WASmaxJsx").smax("receipt",{to:d("WAWap").GROUP_JID(b),participant:d("WAWap").JID(a)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeGroupDeviceMixin=a}),98);
__d("WASmaxOutReceiptIndividualDeviceMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.receiptTo;a=d("WASmaxJsx").smax("receipt",{to:d("WAWap").JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIndividualDeviceMixin=a}),98);
__d("WASmaxOutReceiptStatusDeviceMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.receiptTo;a=a.receiptParticipant;b=d("WASmaxJsx").smax("receipt",{to:d("WAWap").JID(b),participant:d("WAWap").DEVICE_JID(a)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeStatusDeviceMixin=a}),98);
__d("WASmaxOutReceiptDeviceMixins",["WASmaxMixinGroupExhaustiveError","WASmaxOutReceiptBroadcastDeviceMixin","WASmaxOutReceiptGroupDeviceMixin","WASmaxOutReceiptIndividualDeviceMixin","WASmaxOutReceiptStatusDeviceMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.groupDevice)return d("WASmaxOutReceiptGroupDeviceMixin").mergeGroupDeviceMixin(a,b.groupDevice);if(b.individualDevice)return d("WASmaxOutReceiptIndividualDeviceMixin").mergeIndividualDeviceMixin(a,b.individualDevice);if(b.statusDevice)return d("WASmaxOutReceiptStatusDeviceMixin").mergeStatusDeviceMixin(a,b.statusDevice);if(b.broadcastDevice)return d("WASmaxOutReceiptBroadcastDeviceMixin").mergeBroadcastDeviceMixin(a,b.broadcastDevice);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeDeviceMixins=a}),98);
__d("WASmaxOutReceiptDeviceMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutReceiptDeviceMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.deviceMixinsArgs;a=d("WASmaxOutReceiptDeviceMixins").mergeDeviceMixins(d("WASmaxJsx").smax("receipt",null),a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeDeviceMixin=a}),98);
__d("WASmaxOutReceiptInteropDeviceMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.receiptTo;a=d("WASmaxJsx").smax("receipt",{to:d("WAWap").JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeInteropDeviceMixin=a}),98);
__d("WASmaxOutReceiptInteropUserMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.receiptTo;a=d("WASmaxJsx").smax("receipt",{to:d("WAWap").JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeInteropUserMixin=a}),98);
__d("WASmaxOutReceiptBroadcastUserMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.receiptTo;a=a.receiptParticipant;b=d("WASmaxJsx").smax("receipt",{to:d("WAWap").BROADCAST_JID(b),participant:d("WAWap").USER_JID(a)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBroadcastUserMixin=a}),98);
__d("WASmaxOutReceiptGroupUserMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.receiptTo;a=a.receiptParticipant;b=d("WASmaxJsx").smax("receipt",{to:d("WAWap").GROUP_JID(b),participant:d("WAWap").JID(a)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeGroupUserMixin=a}),98);
__d("WASmaxOutReceiptIndividualUserMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.receiptTo;a=d("WASmaxJsx").smax("receipt",{to:d("WAWap").JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIndividualUserMixin=a}),98);
__d("WASmaxOutReceiptStatusUserMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.receiptTo;a=a.receiptParticipant;b=d("WASmaxJsx").smax("receipt",{to:d("WAWap").JID(b),participant:d("WAWap").USER_JID(a)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeStatusUserMixin=a}),98);
__d("WASmaxOutReceiptUserMixins",["WASmaxMixinGroupExhaustiveError","WASmaxOutReceiptBroadcastUserMixin","WASmaxOutReceiptGroupUserMixin","WASmaxOutReceiptIndividualUserMixin","WASmaxOutReceiptStatusUserMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.groupUser)return d("WASmaxOutReceiptGroupUserMixin").mergeGroupUserMixin(a,b.groupUser);if(b.individualUser)return d("WASmaxOutReceiptIndividualUserMixin").mergeIndividualUserMixin(a,b.individualUser);if(b.statusUser)return d("WASmaxOutReceiptStatusUserMixin").mergeStatusUserMixin(a,b.statusUser);if(b.broadcastUser)return d("WASmaxOutReceiptBroadcastUserMixin").mergeBroadcastUserMixin(a,b.broadcastUser);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeUserMixins=a}),98);
__d("WASmaxOutReceiptUserMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutReceiptUserMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.userMixinsArgs;a=d("WASmaxOutReceiptUserMixins").mergeUserMixins(d("WASmaxJsx").smax("receipt",null),a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeUserMixin=a}),98);
__d("WASmaxOutReceiptUserOrDeviceOrInteropUserOrInteropDeviceMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutReceiptDeviceMixin","WASmaxOutReceiptInteropDeviceMixin","WASmaxOutReceiptInteropUserMixin","WASmaxOutReceiptUserMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.user)return d("WASmaxOutReceiptUserMixin").mergeUserMixin(a,b.user);if(b.device)return d("WASmaxOutReceiptDeviceMixin").mergeDeviceMixin(a,b.device);if(b.interopUser)return d("WASmaxOutReceiptInteropUserMixin").mergeInteropUserMixin(a,b.interopUser);if(b.interopDevice)return d("WASmaxOutReceiptInteropDeviceMixin").mergeInteropDeviceMixin(a,b.interopDevice);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeUserOrDeviceOrInteropUserOrInteropDeviceMixinGroup=a}),98);
__d("WASmaxOutReceiptPublishDeliveryRequest",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutReceiptBizOriginalEnvelopeMixin","WASmaxOutReceiptFromProxyAccountMixin","WASmaxOutReceiptNeedPrivacyTokenMixin","WASmaxOutReceiptRecipientMixin","WASmaxOutReceiptSenderAggregatedPublishOrSingleMixinGroup","WASmaxOutReceiptUserOrDeviceOrInteropUserOrInteropDeviceMixinGroup"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutReceiptBizOriginalEnvelopeMixin").mergeBizOriginalEnvelopeMixin(d("WASmaxJsx").smax("biz",null),a);return a}function a(a){var b=a.bizArgs,c=a.recipientMixinArgs,e=a.fromProxyAccountMixinArgs,f=a.hasNeedPrivacyToken,g=a.userOrDeviceOrInteropUserOrInteropDeviceMixinGroupArgs;a=a.senderAggregatedPublishOrSingleMixinGroupArgs;b=d("WASmaxOutReceiptSenderAggregatedPublishOrSingleMixinGroup").mergeSenderAggregatedPublishOrSingleMixinGroup(d("WASmaxOutReceiptUserOrDeviceOrInteropUserOrInteropDeviceMixinGroup").mergeUserOrDeviceOrInteropUserOrInteropDeviceMixinGroup(d("WASmaxMixins").optionalMerge(d("WASmaxOutReceiptNeedPrivacyTokenMixin").mergeNeedPrivacyTokenMixin,d("WASmaxMixins").optionalMerge(d("WASmaxOutReceiptFromProxyAccountMixin").mergeFromProxyAccountMixin,d("WASmaxMixins").optionalMerge(d("WASmaxOutReceiptRecipientMixin").mergeRecipientMixin,d("WASmaxJsx").smax("receipt",null,d("WASmaxChildren").OPTIONAL_CHILD(h,b)),c),e),f),g),a);return b}g.makePublishDeliveryRequestBiz=h;g.makePublishDeliveryRequest=a}),98);
__d("WASmaxOutReceiptSenderTypeMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("receipt",{type:"sender"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeSenderTypeMixin=a}),98);
__d("WASmaxOutReceiptPublishSenderBroadcastDeviceSenderTypeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutReceiptBroadcastDeviceMixin","WASmaxOutReceiptSenderTypeMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutReceiptSenderTypeMixin").mergeSenderTypeMixin(d("WASmaxOutReceiptBroadcastDeviceMixin").mergeBroadcastDeviceMixin(d("WASmaxJsx").smax("receipt",null),a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePublishSenderBroadcastDeviceSenderTypeMixin=a}),98);
__d("WASmaxOutReceiptPublishSenderGroupDeviceSenderTypeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutReceiptGroupDeviceMixin","WASmaxOutReceiptSenderTypeMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutReceiptSenderTypeMixin").mergeSenderTypeMixin(d("WASmaxOutReceiptGroupDeviceMixin").mergeGroupDeviceMixin(d("WASmaxJsx").smax("receipt",null),a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePublishSenderGroupDeviceSenderTypeMixin=a}),98);
__d("WASmaxOutReceiptPublishSenderIndividualDeviceSenderTypeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutReceiptIndividualDeviceMixin","WASmaxOutReceiptRecipientMixin","WASmaxOutReceiptSenderTypeMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutReceiptRecipientMixin").mergeRecipientMixin(d("WASmaxOutReceiptSenderTypeMixin").mergeSenderTypeMixin(d("WASmaxOutReceiptIndividualDeviceMixin").mergeIndividualDeviceMixin(d("WASmaxJsx").smax("receipt",null),a)),a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePublishSenderIndividualDeviceSenderTypeMixin=a}),98);
__d("WASmaxOutReceiptPublishSenderStatusDeviceSenderTypeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutReceiptSenderTypeMixin","WASmaxOutReceiptStatusDeviceMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutReceiptSenderTypeMixin").mergeSenderTypeMixin(d("WASmaxOutReceiptStatusDeviceMixin").mergeStatusDeviceMixin(d("WASmaxJsx").smax("receipt",null),a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePublishSenderStatusDeviceSenderTypeMixin=a}),98);
__d("WASmaxOutReceiptPublishSenderGroupOrPublishSenderIndividualOrPublishSenderStatusOrPublishSenderBroadcastDeviceSenderTypeMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutReceiptPublishSenderBroadcastDeviceSenderTypeMixin","WASmaxOutReceiptPublishSenderGroupDeviceSenderTypeMixin","WASmaxOutReceiptPublishSenderIndividualDeviceSenderTypeMixin","WASmaxOutReceiptPublishSenderStatusDeviceSenderTypeMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.publishSenderGroupDeviceSenderType)return d("WASmaxOutReceiptPublishSenderGroupDeviceSenderTypeMixin").mergePublishSenderGroupDeviceSenderTypeMixin(a,b.publishSenderGroupDeviceSenderType);if(b.publishSenderIndividualDeviceSenderType)return d("WASmaxOutReceiptPublishSenderIndividualDeviceSenderTypeMixin").mergePublishSenderIndividualDeviceSenderTypeMixin(a,b.publishSenderIndividualDeviceSenderType);if(b.publishSenderStatusDeviceSenderType)return d("WASmaxOutReceiptPublishSenderStatusDeviceSenderTypeMixin").mergePublishSenderStatusDeviceSenderTypeMixin(a,b.publishSenderStatusDeviceSenderType);if(b.publishSenderBroadcastDeviceSenderType)return d("WASmaxOutReceiptPublishSenderBroadcastDeviceSenderTypeMixin").mergePublishSenderBroadcastDeviceSenderTypeMixin(a,b.publishSenderBroadcastDeviceSenderType);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergePublishSenderGroupOrPublishSenderIndividualOrPublishSenderStatusOrPublishSenderBroadcastDeviceSenderTypeMixinGroup=a}),98);
__d("WASmaxOutReceiptPublishSenderRequest",["WASmaxJsx","WASmaxOutReceiptPublishSenderGroupOrPublishSenderIndividualOrPublishSenderStatusOrPublishSenderBroadcastDeviceSenderTypeMixinGroup","WASmaxOutReceiptSenderAggregatedPublishOrSingleMixinGroup"],(function(a,b,c,d,e,f,g){function a(a){var b=a.publishSenderGroupOrPublishSenderIndividualOrPublishSenderStatusOrPublishSenderBroadcastDeviceSenderTypeMixinGroupArgs;a=a.senderAggregatedPublishOrSingleMixinGroupArgs;b=d("WASmaxOutReceiptSenderAggregatedPublishOrSingleMixinGroup").mergeSenderAggregatedPublishOrSingleMixinGroup(d("WASmaxOutReceiptPublishSenderGroupOrPublishSenderIndividualOrPublishSenderStatusOrPublishSenderBroadcastDeviceSenderTypeMixinGroup").mergePublishSenderGroupOrPublishSenderIndividualOrPublishSenderStatusOrPublishSenderBroadcastDeviceSenderTypeMixinGroup(d("WASmaxJsx").smax("receipt",null),b),a);return b}g.makePublishSenderRequest=a}),98);
__d("WASendAggregatedDeliveryReceiptProtocol",["WAComms","WAGlobals","WAJids","WASmaxOutReceiptPublishDeliveryRequest","WASmaxOutReceiptPublishSenderRequest"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=h(a);d("WAComms").castSmaxStanza(a)}function h(a){var b=a.from,c=a.chat,e=a.stanzaIdList;return d("WAJids").switchOnMsgrChatJidType(c,{group:function(a){var c=d("WAJids").extractUserJid(b);if(c===d("WAGlobals").getMyUserJid())return k({stanzaIdList:e,from:b,chat:a});else return l({from:b,stanzaIdList:e,chat:a})},user:function(a){a=d("WAJids").extractUserJid(b);if(a===d("WAGlobals").getMyUserJid())return j({from:b,stanzaIdList:e});else return i({stanzaIdList:e,from:b})}})}function i(a){var b=a.from;a=a.stanzaIdList;b={device:{deviceMixinsArgs:{individualDevice:{receiptTo:b}}}};a={senderAggregatedPublish:{itemArgs:a.slice(1).map(function(a){return{itemId:a}}),receiptId:a[0]}};a={senderAggregatedPublishOrSingleMixinGroupArgs:a,userOrDeviceOrInteropUserOrInteropDeviceMixinGroupArgs:b};return d("WASmaxOutReceiptPublishDeliveryRequest").makePublishDeliveryRequest(a)}function j(a){var b=a.from;a=a.stanzaIdList;b={publishSenderIndividualDeviceSenderType:{receiptRecipient:d("WAJids").extractUserJid(b),receiptTo:b}};a={senderAggregatedPublish:{itemArgs:a.slice(1).map(function(a){return{itemId:a}}),receiptId:a[0]}};a={senderAggregatedPublishOrSingleMixinGroupArgs:a,publishSenderGroupOrPublishSenderIndividualOrPublishSenderStatusOrPublishSenderBroadcastDeviceSenderTypeMixinGroupArgs:b};return d("WASmaxOutReceiptPublishSenderRequest").makePublishSenderRequest(a)}function k(a){var b=a.stanzaIdList,c=a.chat;a=a.from;c={publishSenderGroupDeviceSenderType:{receiptTo:c,receiptParticipant:a}};a={senderAggregatedPublish:{itemArgs:b.slice(1).map(function(a){return{itemId:a}}),receiptId:b[0]}};b={publishSenderGroupOrPublishSenderIndividualOrPublishSenderStatusOrPublishSenderBroadcastDeviceSenderTypeMixinGroupArgs:c,senderAggregatedPublishOrSingleMixinGroupArgs:a};return d("WASmaxOutReceiptPublishSenderRequest").makePublishSenderRequest(b)}function l(a){var b=a.stanzaIdList,c=a.chat;a=a.from;c={device:{deviceMixinsArgs:{groupDevice:{receiptTo:c,receiptParticipant:a}}}};a={senderAggregatedPublish:{itemArgs:b.slice(1).map(function(a){return{itemId:a}}),receiptId:b[0]}};b={senderAggregatedPublishOrSingleMixinGroupArgs:a,userOrDeviceOrInteropUserOrInteropDeviceMixinGroupArgs:c};return d("WASmaxOutReceiptPublishDeliveryRequest").makePublishDeliveryRequest(b)}g.sendAggregatedDeliveryReceipts=a;g.makeAggregatedDeliveryReceipts=h}),98);
__d("WACastStanzas",["Promise","WAArrayUtils","WAComms","WADanglingQueue","WALogger","WAPassiveMode","WASendAggregatedDeliveryReceiptProtocol","WAStanzaUtils","WAWap","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Dangling Queue: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to cast stanzas: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Passive: cast stanzas ",", ",""]);k=function(){return a};return a}function a(a){a.forEach(function(a){a!=="NO_ACK"&&a!=="CLOSE_SOCKET"&&d("WAComms").castSmaxStanza(a)})}function l(a,b,c){var e;((e=d("WAComms").getComms())==null?void 0:e.socketId)===b?d("WAComms").castSmaxStanza(a):c==null?void 0:c.addAnnotations({string:{omitCastStanza:"socketId"}})}function c(a,b){d("WALogger").LOG(k(),a.length,b);var c=[],e=[],f=[];a.forEach(function(a){var b=a.response,d=a.socketId;a=a.eventFlow;if(b==="NO_ACK"||b==="CLOSE_SOCKET")return;b;if(b.tag==="ack"){c.push({node:b,socketId:d,eventFlow:a});return}if(b.tag==="receipt"){if(b.attrs.type==="retry"){e.push({node:b,socketId:d,eventFlow:a});return}if(b.attrs.type==="delivery"||b.attrs.type==="sender"||b.attrs.type==null){f.push({node:b,socketId:d,eventFlow:a});return}}c.push({node:b,socketId:d,eventFlow:a})});c.forEach(function(a){var c=a.node,e=a.socketId;a=a.eventFlow;b.store&&d("WADanglingQueue").danglingQueueAdd({node:d("WAWap").encodeStanza(c)});b.send&&(l(c,e,a),a==null?void 0:a.endSuccess())});try{r(e,b),q(f,b)}catch(a){d("WALogger").ERROR(j(),a)}finally{b.store&&d("WADanglingQueue").danglingQueueCommit()["catch"](function(a){d("WALogger").ERROR(i(),a)})}}function m(a){return a.map(function(a){var b=a.node,c=a.socketId;a=a.eventFlow;return{stanzaId:d("WAStanzaUtils").toStanzaId(""+b.attrs.id),to:""+b.attrs.to,participant:b.attrs.participant?""+b.attrs.participant:""+b.attrs.to,socketId:c,eventFlow:a}})}function n(a){var b=new Map();a.forEach(function(a){var c=b.get(a.socketId);c||(c=new Map(),b.set(a.socketId,c));var d=c.get(a.to);d||(d=new Map(),c.set(a.to,d));c=d.get(a.participant);c||(c=[],d.set(a.participant,c));c.push([a.stanzaId,a.eventFlow])});return b}var o=255;function p(a,b){a=n(m(a));a.forEach(function(a,c){a.forEach(function(a,e){a.forEach(function(a,f){var g=function(){if(i){if(j>=h.length)return"break";k=h[j++]}else{j=h.next();if(j.done)return"break";k=j.value}var a=k,g=[],m=[];a.forEach(function(a){var b=a[0];a=a[1];g.push(b);m.push(a)});a=d("WASendAggregatedDeliveryReceiptProtocol").makeAggregatedDeliveryReceipts({from:f,chat:e,stanzaIdList:g});b.store&&d("WADanglingQueue").danglingQueueAdd({node:d("WAWap").encodeStanza(a)});b.send&&(l(a,c),m.forEach(function(a){var b;((b=d("WAComms").getComms())==null?void 0:b.socketId)!==c&&(a==null?void 0:a.addAnnotations({string:{omitCastStanza:"socketId"}}));a==null?void 0:a.endSuccess()}))};for(var h=d("WAArrayUtils").peekEvery(a,o),i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;a=g();if(a==="break")break}})})})}function q(a,b){if(a.length===0)return;if(a.length>1)return p(a,b);b.store&&d("WADanglingQueue").danglingQueueAdd({node:d("WAWap").encodeStanza(a[0].node)});b.send&&a.forEach(function(a){var b=a.node,c=a.socketId;a=a.eventFlow;l(b,c,a);a==null?void 0:a.endSuccess()})}function r(a,b){b.store&&a.forEach(function(a){a=a.node;d("WADanglingQueue").danglingQueueAdd({node:d("WAWap").encodeStanza(a)})}),b.send&&a.map(function(a){var b=a.node,c=a.socketId;a=a.eventFlow;l(b,c);a==null?void 0:a.endSuccess()})}function e(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(d("WADanglingQueue").danglingQueueRead());case 2:a=c.sent;d("WAPassiveMode").passiveModeNotifier.publish({type:"passive-mode-start",count:a.length});c.next=6;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).allSettled(a.map(function(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(d("WAWap").decodeStanza(a.node,function(a){return(h||(h=b("Promise"))).resolve(a)}));case 2:c=e.sent;return e.abrupt("return",d("WAComms").castSmaxStanza(c));case 4:case"end":return e.stop()}},null,this)})).then(function(){}));case 6:c.next=8;return b("regeneratorRuntime").awrap(d("WADanglingQueue").danglingQueueClear());case 8:case"end":return c.stop()}},null,this)}g.castStanzas=a;g.castStanzasByCategories=c;g.castDanglingStanzas=e}),98);
__d("MAWHandleLoginSuccess",["MAWQplProxy","Promise","WAPassiveMode","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(1056839232,"112"),"wai_login");d("WAPassiveMode").maybeProcessPassiveMode();return(h||(h=b("Promise"))).resolve("NO_ACK")};g.handleLoginSuccess=a}),98);
__d("MAWHandlePeerAppdataReceipt",["Promise","WAJids","WAProtocolQueue","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to persist incoming stanza: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["start..."]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["backend","handlePeerAppdataReceipt"]);a=function(a){var c=a.makeAck,e=a.receiptSender,f=a.receiptType;a=a.stanzaId;k.DEV(j());d("WAProtocolQueue").protocolQueue().addPending({jid:d("WAJids").extractUserJid(e),priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow,receipt:{externalIds:[a],from:e,offline:null,receiptType:"appdata",stanzaId:a,type:f},stanzaId:a,type:"receipt"},void 0,function(a){k.ERROR(i(),a)});return(h||(h=b("Promise"))).resolve(c())};g.handlePeerAppdataReceipt=a}),98);
__d("MAWHandlePeerAppdataRetryReceipt",["Promise","WAJids","WAProtocolQueue"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){var c=a.category,e=a.makeAck;a=a.retryReceipt;var f=a.keys,g=a.receiptSender,i=a.regId,j=a.retryCount,k=a.stanzaId;a=a.timestamp;c={category:c,externalId:k,from:{author:g,chat:d("WAJids").extractUserJid(g),deviceJid:g,type:"device"},keys:f,offline:null,recipient:null,regId:i,retryCount:j,timestamp:a};void d("WAProtocolQueue").protocolQueue().addPending({jid:d("WAJids").extractUserJid(g),priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow,retry:c,stanzaId:k,type:"retryReceipt"});return(h||(h=b("Promise"))).resolve(e())};g.handlePeerAppdataRetryReceipt=a}),98);
__d("MAWHandleSpam",["MAWJobDefinitions","MAWJobManager","Promise","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleInfoBulletin unrecognized spam state"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleInfoBulletin spam messages have been drained"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleInfoBulletin continues to fetch spam messages"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleInfoBulletin receives spam marker"]);l=function(){return a};return a}function a(a){d("WALogger").LOG(l());a=a.spamState;if(a==="continue"){d("WALogger").LOG(k());return d("MAWJobManager").getJobManager().waitUntilPersisted(d("MAWJobDefinitions").jobSerializers.getSpams()).then(function(){return"NO_ACK"})}else if(a==="complete"){d("WALogger").LOG(j());return d("MAWJobManager").getJobManager().waitUntilPersisted(d("MAWJobDefinitions").jobSerializers.handleSpamMsg()).then(function(){return"NO_ACK"})}d("WALogger").WARN(i());return(h||(h=b("Promise"))).resolve("NO_ACK")}g.handleSpam=a}),98);
__d("MAWHandleThreadMetadata",["MAWBridge","MAWSharedCOP","MAWSharedOfflineResumeUINotifier","Promise","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Handle thread metadata: ","}"]);i=function(){return a};return a}a=function(a){d("WALogger").DEV(i(),JSON.stringify(a));d("MAWSharedCOP").getCOP().handleThreadMetadata(a.map(function(a){return a.from}));d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"COPDigestReceived",value:a}]});d("MAWSharedOfflineResumeUINotifier").offlineResumeUINotifier.setThreadMetadata(a);return(h||(h=b("Promise"))).resolve("NO_ACK")};g.handleThreadMetadata=a}),98);
__d("MAWBackendHandlers",["MAWHandleAbPropsRefreshNotification","MAWHandleAppdataMessage","MAWHandleChatState","MAWHandleFailure","MAWHandleFbDeviceChangeNotification","MAWHandleFbMultiwayNotification","MAWHandleFbThreadNotification","MAWHandleGroupNotification","MAWHandleGroupReceipt","MAWHandleGroupRetryReceipt","MAWHandleIndividualRetryReceipt","MAWHandleLoginSuccess","MAWHandlePeerAppdataReceipt","MAWHandlePeerAppdataRetryReceipt","MAWHandleSpam","MAWHandleThreadMetadata"],(function(a,b,c,d,e,f,g){"use strict";a={abprops:{handleAbPropsRefreshNotification:d("MAWHandleAbPropsRefreshNotification").handleAbPropsRefreshNotification},appdataMessage:{handleAppdataMessage:d("MAWHandleAppdataMessage").handleAppdataMessage,handlePeerAppdataReceipt:d("MAWHandlePeerAppdataReceipt").handlePeerAppdataReceipt,handlePeerAppdataRetryReceipt:d("MAWHandlePeerAppdataRetryReceipt").handlePeerAppdataRetryReceipt},fb:{handleFbDeviceChangeNotification:d("MAWHandleFbDeviceChangeNotification").handleFbDeviceChangeNotification,handleFbMultiwayNotification:d("MAWHandleFbMultiwayNotification").handleFbMultiwayNotification,handleFbThreadNotification:d("MAWHandleFbThreadNotification").handleFbThreadNotification},groupMessage:{handleGroupChatState:d("MAWHandleChatState").handleGroupChatState,handleGroupNotification:d("MAWHandleGroupNotification").handleGroupNotification,handleGroupReceipt:d("MAWHandleGroupReceipt").handleGroupReceipt,handleGroupRetryReceipt:d("MAWHandleGroupRetryReceipt").handleGroupRetryReceipt},individualMessage:{handleIndividualChatState:d("MAWHandleChatState").handleIndividualChatState,handleIndividualRetryReceipt:d("MAWHandleIndividualRetryReceipt").handleIndividualRetryReceipt},login:{handleLoginFailure:d("MAWHandleFailure").handleLoginFailure,handleLoginSuccess:d("MAWHandleLoginSuccess").handleLoginSuccess},offline:{handleThreadMetadata:d("MAWHandleThreadMetadata").handleThreadMetadata},spam:{handleSpam:d("MAWHandleSpam").handleSpam}};g.serverRpcHandlers=a}),98);
__d("WAClearSignalStores",["MAWDexieTable","MAWTransactionMode","WADbTransactor"],(function(a,b,c,d,e,f,g){"use strict";b=d("WADbTransactor").makeSignalTransactor({meta:(a=d("MAWTransactionMode")).READWRITE,personalSenderKeyStatuses:a.READWRITE,prekey:a.READWRITE,prekeyGeneration:a.READWRITE,senderKeySessions:a.READWRITE,session:a.READWRITE,signedPrekey:a.READWRITE,tasks:a.READWRITE},"clearSignalAndTempStores",function(a){return function(){return d("MAWDexieTable").dexieAll([a.meta.clear(),a.prekey.clear(),a.prekeyGeneration.clear(),a.session.clear(),a.signedPrekey.clear(),a.tasks.clear(),a.senderKeySessions.clear(),a.personalSenderKeyStatuses.clear()]).then(function(){})}});g.clearSignalStores=b}),98);
__d("MAWClearSignalAndTempStores",["MAWDeleteOldLogsFromDisk","MAWJobActionsV2","MAWJobsIndexedDb","MAWLoggingSwitches","MAWTransactionMode","Promise","WAClearSignalStores"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("MAWJobsIndexedDb").makeJobsTransactor("jobs",d("MAWTransactionMode").READWRITE,"clearJob")(d("MAWJobActionsV2").clearJobs);a=function(){return(h||(h=b("Promise"))).all([d("MAWLoggingSwitches").removeLoggingFromBridge&&d("MAWDeleteOldLogsFromDisk").clearLogs(),d("WAClearSignalStores").clearSignalStores(),i()]).then(function(){})};g.clearSignalAndTempStores=a}),98);
__d("MAWDeviceInfo",["UserAgentData"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.get=function(){var a;return{device:[c("UserAgentData").browserName].join(" "),hardware:c("UserAgentData").platformName,lc:"en",lg:"en",manufacturer:c("UserAgentData").platformName,mcc:"000",mnc:"000",osBuild:(a=c("UserAgentData").platformVersion)!=null?a:"",osVersion:(a=c("UserAgentData").platformVersion)!=null?a:"",sim_mcc:"000",sim_mnc:"000"}};return a}();b=new a();g.deviceInfo=b}),98);
__d("WAWa5.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){c=(a=b("$InternalEnum"))({WHATSAPP:0,MESSENGER:1});e=a({SYSTEM:0,GOOGLE:1,HARDCODED:2,OVERRIDE:3,FALLBACK:4});f=a({CELLULAR_UNKNOWN:0,WIFI_UNKNOWN:1,CELLULAR_EDGE:100,CELLULAR_IDEN:101,CELLULAR_UMTS:102,CELLULAR_EVDO:103,CELLULAR_GPRS:104,CELLULAR_HSDPA:105,CELLULAR_HSUPA:106,CELLULAR_HSPA:107,CELLULAR_CDMA:108,CELLULAR_1XRTT:109,CELLULAR_EHRPD:110,CELLULAR_LTE:111,CELLULAR_HSPAP:112});b=a({PUSH:0,USER_ACTIVATED:1,SCHEDULED:2,ERROR_RECONNECT:3,NETWORK_SWITCH:4,PING_RECONNECT:5,UNKNOWN:6});var h=a({SHARE_EXTENSION:0,SERVICE_EXTENSION:1,INTENTS_EXTENSION:2}),i=a({WEB_BROWSER:0,APP_STORE:1,WIN_STORE:2,DARWIN:3,WIN32:4}),j=a({PHONE:0,TABLET:1,DESKTOP:2,WEARABLE:3,VR:4}),k=a({RELEASE:0,BETA:1,ALPHA:2,DEBUG:3});a=a({ANDROID:0,IOS:1,WINDOWS_PHONE:2,BLACKBERRY:3,BLACKBERRYX:4,S40:5,S60:6,PYTHON_CLIENT:7,TIZEN:8,ENTERPRISE:9,SMB_ANDROID:10,KAIOS:11,SMB_IOS:12,WINDOWS:13,WEB:14,PORTAL:15,GREEN_ANDROID:16,GREEN_IPHONE:17,BLUE_ANDROID:18,BLUE_IPHONE:19,FBLITE_ANDROID:20,MLITE_ANDROID:21,IGLITE_ANDROID:22,PAGE:23,MACOS:24,OCULUS_MSG:25,OCULUS_CALL:26,MILAN:27,CAPI:28,WEAROS:29,ARDEVICE:30,VRDEVICE:31,BLUE_WEB:32,IPAD:33,TEST:34,SMART_GLASSES:35});var l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={};l.internalSpec={clientHello:[2,(d=d("WAProtoConst")).TYPES.MESSAGE,o],serverHello:[3,d.TYPES.MESSAGE,n],clientFinish:[4,d.TYPES.MESSAGE,m]};m.internalSpec={"static":[1,d.TYPES.BYTES],payload:[2,d.TYPES.BYTES]};n.internalSpec={ephemeral:[1,d.TYPES.BYTES],"static":[2,d.TYPES.BYTES],payload:[3,d.TYPES.BYTES]};o.internalSpec={ephemeral:[1,d.TYPES.BYTES],"static":[2,d.TYPES.BYTES],payload:[3,d.TYPES.BYTES]};p.internalSpec={username:[1,d.TYPES.UINT64],passive:[3,d.TYPES.BOOL],userAgent:[5,d.TYPES.MESSAGE,u],webInfo:[6,d.TYPES.MESSAGE,s],pushName:[7,d.TYPES.STRING],sessionId:[9,d.TYPES.SFIXED32],shortConnect:[10,d.TYPES.BOOL],connectType:[12,d.TYPES.ENUM,f],connectReason:[13,d.TYPES.ENUM,b],shards:[14,d.FLAGS.REPEATED|d.TYPES.INT32],dnsSource:[15,d.TYPES.MESSAGE,r],connectAttemptCount:[16,d.TYPES.UINT32],device:[18,d.TYPES.UINT32],devicePairingData:[19,d.TYPES.MESSAGE,q],product:[20,d.TYPES.ENUM,c],fbCat:[21,d.TYPES.BYTES],fbUserAgent:[22,d.TYPES.BYTES],oc:[23,d.TYPES.BOOL],lc:[24,d.TYPES.INT32],iosAppExtension:[30,d.TYPES.ENUM,h],fbAppId:[31,d.TYPES.UINT64],fbDeviceId:[32,d.TYPES.BYTES],pull:[33,d.TYPES.BOOL],paddingBytes:[34,d.TYPES.BYTES],yearClass:[36,d.TYPES.INT32],memClass:[37,d.TYPES.INT32]};q.internalSpec={eRegid:[1,d.TYPES.BYTES],eKeytype:[2,d.TYPES.BYTES],eIdent:[3,d.TYPES.BYTES],eSkeyId:[4,d.TYPES.BYTES],eSkeyVal:[5,d.TYPES.BYTES],eSkeySig:[6,d.TYPES.BYTES],buildHash:[7,d.TYPES.BYTES],deviceProps:[8,d.TYPES.BYTES]};r.internalSpec={dnsMethod:[15,d.TYPES.ENUM,e],appCached:[16,d.TYPES.BOOL]};s.internalSpec={refToken:[1,d.TYPES.STRING],version:[2,d.TYPES.STRING],webdPayload:[3,d.TYPES.MESSAGE,t],webSubPlatform:[4,d.TYPES.ENUM,i]};t.internalSpec={usesParticipantInKey:[1,d.TYPES.BOOL],supportsStarredMessages:[2,d.TYPES.BOOL],supportsDocumentMessages:[3,d.TYPES.BOOL],supportsUrlMessages:[4,d.TYPES.BOOL],supportsMediaRetry:[5,d.TYPES.BOOL],supportsE2EImage:[6,d.TYPES.BOOL],supportsE2EVideo:[7,d.TYPES.BOOL],supportsE2EAudio:[8,d.TYPES.BOOL],supportsE2EDocument:[9,d.TYPES.BOOL],documentTypes:[10,d.TYPES.STRING],features:[11,d.TYPES.BYTES]};u.internalSpec={platform:[1,d.TYPES.ENUM,a],appVersion:[2,d.TYPES.MESSAGE,v],mcc:[3,d.TYPES.STRING],mnc:[4,d.TYPES.STRING],osVersion:[5,d.TYPES.STRING],manufacturer:[6,d.TYPES.STRING],device:[7,d.TYPES.STRING],osBuildNumber:[8,d.TYPES.STRING],phoneId:[9,d.TYPES.STRING],releaseChannel:[10,d.TYPES.ENUM,k],localeLanguageIso6391:[11,d.TYPES.STRING],localeCountryIso31661Alpha2:[12,d.TYPES.STRING],deviceBoard:[13,d.TYPES.STRING],deviceExpId:[14,d.TYPES.STRING],deviceType:[15,d.TYPES.ENUM,j]};v.internalSpec={primary:[1,d.TYPES.UINT32],secondary:[2,d.TYPES.UINT32],tertiary:[3,d.TYPES.UINT32],quaternary:[4,d.TYPES.UINT32],quinary:[5,d.TYPES.UINT32]};g.ClientPayload$Product=c;g.ClientPayload$DNSSource$DNSResolutionMethod=e;g.ClientPayload$ConnectType=f;g.ClientPayload$ConnectReason=b;g.ClientPayload$IOSAppExtension=h;g.ClientPayload$WebInfo$WebSubPlatform=i;g.ClientPayload$UserAgent$DeviceType=j;g.ClientPayload$UserAgent$ReleaseChannel=k;g.ClientPayload$UserAgent$Platform=a;g.HandshakeMessageSpec=l;g.HandshakeMessage$ClientFinishSpec=m;g.HandshakeMessage$ServerHelloSpec=n;g.HandshakeMessage$ClientHelloSpec=o;g.ClientPayloadSpec=p;g.ClientPayload$DevicePairingRegistrationDataSpec=q;g.ClientPayload$DNSSourceSpec=r;g.ClientPayload$WebInfoSpec=s;g.ClientPayload$WebInfo$WebdPayloadSpec=t;g.ClientPayload$UserAgentSpec=u;g.ClientPayload$UserAgent$AppVersionSpec=v}),98);
__d("MAWClientPayload",["CurrentMessengerUser","MAWAppVersion","MAWDeviceInfo","MAWFbCat","MqttWebDeviceID","WAArrayBufferUtils","WADanglingQueue","WAGlobals","WAJids","WALogger","WALongInt","WAWa5.pb","asyncToGeneratorRuntime","encodeProtobuf","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Passive mode is not active"]);h=function(){return a};return a}function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAGlobals").getMyDeviceJid();a=d("WAJids").extractDeviceIDParts(a);var b=a.deviceID;a=a.userId;b=babelHelpers["extends"]({},yield l(),n(),{device:b,fbCat:d("MAWFbCat").getFbCat(),fbUserAgent:d("WAArrayBufferUtils").stringToArrayBuffer(navigator.userAgent),product:d("WAWa5.pb").ClientPayload$Product.MESSENGER,username:d("WALongInt").decimalStringToLongInt(a)});return d("encodeProtobuf").encodeProtobuf(d("WAWa5.pb").ClientPayloadSpec,b).readByteArray()});return i.apply(this,arguments)}function j(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!d("WAGlobals").getConfig().waDanglingQueue()){d("WALogger").LOG(h());return!1}var a=d("WAGlobals").getWaOneQueue();if(a&&!a.isPendingAcksEmpty())return!0;a=(yield d("WADanglingQueue").isDanglingQueueEmpty());return!a});return k.apply(this,arguments)}function l(){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return{connectReason:d("WAWa5.pb").ClientPayload$ConnectReason.USER_ACTIVATED,connectType:d("WAWa5.pb").ClientPayload$ConnectType.WIFI_UNKNOWN,passive:yield j(),pull:!0,userAgent:o()}});return m.apply(this,arguments)}function n(){if(!c("gkx")("8923"))return{};var a=d("CurrentMessengerUser").getAppID(),b=c("MqttWebDeviceID").clientID;return a==null?{fbDeviceId:d("WAArrayBufferUtils").stringToArrayBuffer(b)}:{fbAppId:d("WALongInt").decimalStringToLongInt(a),fbDeviceId:d("WAArrayBufferUtils").stringToArrayBuffer(b)}}function o(){var a=d("MAWDeviceInfo").deviceInfo.get(),b=d("MAWAppVersion").getAppVersionParts();return{appVersion:b,device:a.device,localeCountryIso31661Alpha2:a.lc,localeLanguageIso6391:a.lg,manufacturer:a.manufacturer,mcc:a.mcc,mnc:a.mnc,osBuildNumber:a.osBuild,osVersion:a.osVersion,platform:c("gkx")("23941")?d("WAWa5.pb").ClientPayload$UserAgent$Platform.WEB:d("WAWa5.pb").ClientPayload$UserAgent$Platform.BLUE_WEB,releaseChannel:d("WAWa5.pb").ClientPayload$UserAgent$ReleaseChannel.RELEASE}}g.getClientPayload=a}),98);
__d("WACryptoCurve25519",["Promise","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Curve25519.generateSharedSecret pubkey:",""]);i=function(){return a};return a}a=function(){function a(a,c){this.signalDependencies=a,this.keyPair=c?(h||(h=b("Promise"))).resolve(c):this.signalDependencies.generateIdentityKeyPair()}var c=a.prototype;c.generatePublicKey=function(){return this.keyPair.then(function(a){return a.publicKey})};c.generateSharedSecret=function(a){var b=this;return this.keyPair.then(function(c){c=c.privateKey;d("WALogger").LOG(i(),a).devConsole(c);return b.signalDependencies.calculateAgreement(new Uint8Array(a),c)})};return a}();g.Curve25519=a}),98);
__d("WAGetInitialChatSocketDetails",["WAGetMetaApi"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return d("WAGetMetaApi").getMeta().then(function(a){var b=a.edgeInfo;a=a.certificateChain;return{edgeInfo:b,certificateChain:a}})};g.getInitialChatSocketDetails=a}),98);
__d("WAGetRoutingInfoApi",["WAGetMetaApi"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return d("WAGetMetaApi").getMeta().then(function(a){return{edgeInfo:(a=a.edgeInfo)!=null?a:null}})};g.getRoutingInfo=a}),98);
__d("WASetCertificateChain",["WASetMetaApi"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return d("WASetMetaApi").setMeta({certificateChain:a})};g.setCertificateChain=a}),98);
__d("WAConnectivityReports",["WALogger","WAPREList","WAPREMetrics"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Connectivity]: ",". Reason: ",", clean: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Connectivity]: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Connectivity]: ",""]);j=function(){return a};return a}function a(a,b){d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.WA_DISCONNECT).endSuccess({string:{key:"code"+b.code}});a=a!=null?"WebSocket "+a+" closed. code: "+b.code:"WebSocket closed connection during initialization. Code: "+b.code;switch(b.code){case 1e3:case 1001:case 1006:d("WALogger").LOG(j(),a);break;case 1002:case 1003:case 1007:case 1008:case 1009:case 1010:case 1011:case 1015:d("WALogger").ERROR(i(),a);break;default:d("WALogger").ERROR(h(),a,b.reason,b.wasClean);break}}g.onWebSocketCloseEvent=a}),98);
__d("WASocketTransport",["Promise","WABinary","WAConnectivityReports","WAErr","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["WebSocket #"," not opened"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["WebSocket #"," errored: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["WebSocket #"," dropped "," bytes"]);k=function(){return a};return a}var l=1,m=function(){function a(a){var b=this;this.$2=!1;this.onData=null;this.onClose=null;this.onError=null;this.dataToSend=new(d("WABinary").Binary)();this.$3=function(a){if(b.$2)return;a=new Uint8Array(a.data);b.onData?b.onData(a):d("WALogger").ERROR(k(),b.id,a.length)};this.$4=function(a){d("WAConnectivityReports").onWebSocketCloseEvent(b.id,a);if(b.$2)return;b.$6()};this.$5=function(a){d("WALogger").DEV(j(),b.id,a);if(b.$2)return;var c=b.onError;c&&c(String(a))};var c=l++;this.id=c;this.$1=a;a.onmessage=this.$3;a.onclose=this.$4;a.onerror=this.$5}var b=a.prototype;b.close=function(){if(this.$2)return;this.$1.close();this.$6()};b.requestSend=function(){if(this.$2){d("WALogger").ERROR(i(),this.id);return}if(!this.dataToSend.size())return;this.$1.send(this.dataToSend.readBuffer())};b.$6=function(){this.$2=!0,this.onClose&&this.onClose()};return a}();function a(a){var e=new WebSocket(a);e.binaryType="arraybuffer";return new(h||(h=b("Promise")))(function(a,b){e.onopen=a,e.onclose=function(a){d("WAConnectivityReports").onWebSocketCloseEvent(null,a),b(c("WAErr")("WebSocket closed immediately: "+a.reason+" "+a.code))}}).then(function(){return new m(e)})}g.openWebSocket=a}),98);
__d("WATreasureHunt",["Promise","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new(h||(h=b("Promise")))(function(){});function a(a,c,e,f){var g=0,j=0,k=!1,l=null,m=null;function n(a){if(!k){k=!0;l!=null&&(clearTimeout(l),l=null);return d("WAResultOrError").makeResult(a)}else{f==null?void 0:f(a);return i}}function o(){if(k)return i;j++;if(j===c)return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeError("max-hunters"));var a=m;a!=null&&j===g&&(l!=null&&(clearTimeout(l),l=null),a());return i}function p(){var d=g++;d=a(d).then(n,o);if(g<c){var f=new(h||(h=b("Promise")))(function(a){l=setTimeout(a,e),m=a}).then(p);return h.race([d,f])}else return d}return p()}g.treasureHunt=a}),98);
__d("WACert.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};a.internalSpec={details:[1,(d=d("WAProtoConst")).TYPES.BYTES],signature:[2,d.TYPES.BYTES]};b.internalSpec={serial:[1,d.TYPES.UINT32],issuer:[2,d.TYPES.STRING],expires:[3,d.TYPES.UINT64],subject:[4,d.TYPES.STRING],key:[5,d.TYPES.BYTES]};c.internalSpec={leaf:[1,d.TYPES.MESSAGE,e],intermediate:[2,d.TYPES.MESSAGE,e]};e.internalSpec={details:[1,d.TYPES.BYTES],signature:[2,d.TYPES.BYTES]};f.internalSpec={serial:[1,d.TYPES.UINT32],issuerSerial:[2,d.TYPES.UINT32],key:[3,d.TYPES.BYTES],notBefore:[4,d.TYPES.UINT64],notAfter:[5,d.TYPES.UINT64]};g.NoiseCertificateSpec=a;g.NoiseCertificate$DetailsSpec=b;g.CertChainSpec=c;g.CertChain$NoiseCertificateSpec=e;g.CertChain$NoiseCertificate$DetailsSpec=f}),98);
__d("WAVerifyChainCertificateWA6",["WACert.pb","WACryptoUtils","WAHex","WALogger","WAResultOrError","WASignalKeys","WASignalOther","WASignalSignatures","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "key"']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "serial"']);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "issuer_serial"']);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "signature"']);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "details"']);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6 leafCert.key does not match handshake server.hello.static"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: leaf certificate is poorly signed"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6 leaf certificate was not issued by RootCA"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: invalid leaf certificate"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifying leaf certificate"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: intermediate certificate is poorly signed"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6 intermediate certificate was not issued by RootCA"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: invalid intermediate certificate"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifying intermediate certificate"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: missing leaf and/or intermediate certificate"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: extract leaf and intermediate certificate"]);w=function(){return a};return a}b="142375574d0a587166aae71ebe516437c4a28b73e3695c6ce1f7f9545da8ee6b";var x={SERIAL:0,ISSUER:"WhatsAppLongTerm1",PUBLIC_KEY:d("WASignalKeys").serializeIdentity(new Uint8Array(d("WAHex").parseHex(b)))};function a(a,b){d("WALogger").LOG(w());a=d("decodeProtobuf").decodeProtobuf(d("WACert.pb").CertChainSpec,a);var c=a.intermediate;a=a.leaf;if(c==null||a==null){d("WALogger").ERROR(v());return d("WAResultOrError").makeError("missing-certificate")}d("WALogger").LOG(u());c=y(c);if(!c.success){d("WALogger").ERROR(t());return d("WAResultOrError").makeError("invalid-certificate")}if(c.value.issuerSerial!==x.SERIAL){d("WALogger").ERROR(s());return d("WAResultOrError").makeError("invalid-certificate")}if(!z(c.value,x.PUBLIC_KEY)){d("WALogger").ERROR(r());return d("WAResultOrError").makeError("invalid-certificate")}d("WALogger").LOG(q());a=y(a);if(!a.success){d("WALogger").ERROR(p());return d("WAResultOrError").makeError("invalid-certificate")}if(a.value.issuerSerial!==c.value.serial){d("WALogger").ERROR(o());return d("WAResultOrError").makeError("invalid-certificate")}var e=d("WASignalKeys").serializeIdentity(new Uint8Array(c.value.key));if(!z(a.value,e)){d("WALogger").ERROR(n());return d("WAResultOrError").makeError("invalid-certificate")}if(!d("WACryptoUtils").arrayBuffersEqual(a.value.key,b)){d("WALogger").ERROR(m());return d("WAResultOrError").makeError("invalid-certificate")}return d("WAResultOrError").makeResult({leaf:a.value,intermediate:c.value})}function y(a){var b=a.details;a=a.signature;if(!b){d("WALogger").ERROR(l());return d("WAResultOrError").makeError("invalid-certificate")}if(!a){d("WALogger").ERROR(k());return d("WAResultOrError").makeError("invalid-certificate")}var c=d("decodeProtobuf").decodeProtobuf(d("WACert.pb").CertChain$NoiseCertificate$DetailsSpec,b),e=c.issuerSerial,f=c.serial,g=c.key,m=c.notAfter;c=c.notBefore;if(e==null){d("WALogger").ERROR(j());return d("WAResultOrError").makeError("invalid-certificate")}if(f==null){d("WALogger").ERROR(i());return d("WAResultOrError").makeError("invalid-certificate")}if(g==null){d("WALogger").ERROR(h());return d("WAResultOrError").makeError("invalid-certificate")}a=d("WASignalOther").ensureSize(new Uint8Array(a),64);return d("WAResultOrError").makeResult({serial:f,issuerSerial:e,key:g,notBefore:c,notAfter:m,details:b,signature:a})}function z(a,b){return d("WASignalSignatures").verifyMsgSignalVariant(b,new Uint8Array(a.details),a.signature)}g.ROOT_CA=x;g.verifyChainCertificateWA6=a;g.parseCertificateWA6=y}),98);
__d("MAWChatSocketPlatformDetails",["FBLogger","MAWClientPayload","MAWQplProxy","Promise","URI","WABase64","WACryptoCurve25519","WACryptoCurve25519Dependencies","WAErrors","WAGetInitialChatSocketDetails","WAGetRoutingInfoApi","WAHex","WALogger","WASetCertificateChain","WASocketTransport","WATreasureHunt","WAVerifyChainCertificateWA6","WAWa5.pb","WAWapDict","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf","err","gkx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["openSocketWithLoop (round ",") failed: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["openSocketWithLoop (round ",") to "," succeeded"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["openSocketWithLoop (round ",") connecting to ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["openSocketWithLoop"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["processCertificate start"]);n=function(){return a};return a}e="wss://web-chat-e2ee.facebook.com/ws/chat";f="wss://web-chat-e2ee.instagram.com/ws/chat";var o=c("gkx")("3577")?f:e,p=c("qpl")._(1056839232,"112");function q(a){return d("encodeProtobuf").encodeProtobuf(d("WAWa5.pb").HandshakeMessageSpec,{clientHello:a}).readByteArray()}function r(a){return d("encodeProtobuf").encodeProtobuf(d("WAWa5.pb").HandshakeMessageSpec,{clientFinish:a}).readByteArray()}function s(a){return d("decodeProtobuf").decodeProtobuf(d("WAWa5.pb").HandshakeMessageSpec,a).serverHello}function t(a){var e=a.certificate;a=a.serverStatic;d("WALogger").LOG(n());e=d("WAVerifyChainCertificateWA6").verifyChainCertificateWA6(e,a);if(!e.success)throw c("err")("processCertificate error: "+e.error);a=e.value;e=a.intermediate;a=a.leaf;a&&e&&d("WASetCertificateChain").setCertificateChain({intermediate:{key:e.key,notAfter:Number(e.notAfter),notBefore:Number(e.notBefore)},leaf:{key:a.key,notAfter:Number(a.notAfter),notBefore:Number(a.notBefore)}})["catch"](function(a){c("FBLogger")("messenger_e2ee_web").catching(a).warn("Error storing certificate chain")});return(i||(i=b("Promise"))).resolve()}function u(a){a=(a=a)!=null?a:{};var b=a.intermediate,c=a.leaf;return function(){if(c&&b){d("MAWQplProxy").sendQPLStringAnnotationThroughBridge(p,"expectedHandshakeType","resume");return c.key}d("MAWQplProxy").sendQPLStringAnnotationThroughBridge(p,"expectedHandshakeType","full");return null}}function v(){d("WALogger").DEV(m());function a(a){var e=new(h||(h=c("URI")))(o).toString(),f=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAGetRoutingInfoApi").getRoutingInfo());a=a.edgeInfo;var b=void 0;a&&(b="?ED="+d("WABase64").encodeB64UrlSafe(a));a=""+e+(b!=null?b:"");return d("WASocketTransport").openWebSocket(a)});return function(){return a.apply(this,arguments)}}();d("WALogger").LOG(l(),a,e);return f().then(function(b){d("WALogger").LOG(k(),a,e);return b})["catch"](function(b){d("WALogger").WARN(j(),a,b).devConsole(b);throw b})}return d("WATreasureHunt").treasureHunt(a,3,15e3,function(a){return void a.close()})["catch"](function(a){if(!navigator.onLine)throw new(d("WAErrors").Offline)("offline when openSocketWithLoop treasureHunt failed");throw a})}function a(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.authKeyPair;var b=(yield d("WAGetInitialChatSocketDetails").getInitialChatSocketDetails()),c=b.edgeInfo==null?null:d("WAHex").bytesToBuffer(b.edgeInfo),e=new Uint8Array([87,65,6,d("WAWapDict").DICT_VERSION]);return{curveSignalDependencies:d("WACryptoCurve25519Dependencies").CURVE25519_SIGNAL_DEPENDENCIES,decodeServerHello:s,edgeInfo:c,encodeHandshakeFinish:r,encodeHandshakeHello:q,getClientPayload:d("MAWClientPayload").getClientPayload,openSocket:v,processCertificate:t,protoHeader:e,serverStaticKeyIfKnown:u(b.certificateChain),staticKeyPair:new(d("WACryptoCurve25519").Curve25519)(d("WACryptoCurve25519Dependencies").CURVE25519_SIGNAL_DEPENDENCIES,a)}});return w.apply(this,arguments)}g.getChatSocketPlatformDetails=a}),98);
__d("WADevToolsStanzaViewer",["WADevToolsBridge","WASmaxParseUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=d("WASmaxParseUtils").attrInt(a,"t");c=c.success?d("WATimeUtils").castToUnixTime(c.value):d("WATimeUtils").unixTime();d("WADevToolsBridge").getDevToolBridge().fireAndForget("devtool","newStanza",{ts:c,type:a.tag,isOutgoing:b,stanza:a.toString()},!0)}g.sendNewStanzaToDevTool=a}),98);
__d("WAFrameSocket",["WABinary","WAErrors","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["FrameSocket: queueing partial frame of "," bytes"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Buffer to send: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["FrameSocket closed"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["FrameSocket error"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["FrameSocket closed, waiting for pending processing"]);l=function(){return a};return a}var m=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c="SocketClosed";a=b.call(this,(a=a)!=null?a:c)||this;a.name=c;return a}return a}(babelHelpers.wrapNativeSuper(Error));a=function(){function a(a,b){var c=this;this.$3=new(d("WABinary").Binary)();this.closed=!1;this.$4=!1;this.onFrame=null;this.onClose=null;this.$5=function(a){c.$3.writeByteArray(a),c.convertBufferedToFrames()};this.$6=function(){if(c.$3.peek(n)){d("WALogger").LOG(l());c.$4=!0;return}c.$9()};this.$7=function(a){d("WALogger").DEV(k()).devConsole(a)};this.$2=b;this.$1=a;a.onData=this.$5;a.onClose=this.$6;a.onError=this.$7}var b=a.prototype;b.sendFrame=function(a){if(this.$4)return;this.throwIfClosed();var b=this.$2,c=a.byteLength,d=this.$1.dataToSend;b?(this.$2=null,d.ensureAdditionalCapacity(b.length+3+c),d.writeByteArray(b)):d.ensureAdditionalCapacity(3+c);this.$8(c);d.writeUint8(c>>16);d.writeUint16(c&65535);d.write(a);this.$1.requestSend()};b.$9=function(){if(this.closed)return;d("WALogger").LOG(j());this.$4=!1;this.closed=!0;var a=this.onClose;a&&a()};b.$8=function(a){if(a>=1<<24){d("WALogger").WARN(i(),a);throw new(d("WAErrors").BufferTooLargeError)("Buffer too large: "+a)}};b.convertBufferedToFrames=function(){var a=this.$3,b=this.onFrame;while(b&&a.peek(n)){var c=o(a);c=a.readByteArray(c);b(c);b=this.onFrame}this.$4&&!a.peek(n)&&this.$9();b&&a.size()&&d("WALogger").LOG(h(),a.size())};b.throwIfClosed=function(){if(this.closed)throw new m()};b.close=function(){this.$1.close()};return a}();function n(a){if(a.size()<3)return!1;var b=o(a);return b<=a.size()}function o(a){return a.readUint8()<<16|a.readUint16()}g.SocketClosed=m;g.FrameSocket=a}),98);
__d("WANoiseSocket",["Promise","WACryptoDependencies","WALogger","WAPromiseQueue","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendFrame adding to queue with frame size: "," bytes"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["NoiseSocket socket closed while encrypting frame"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Sending encrypted frame to web socket"]);k=function(){return a};return a}a=(h||(h=b("Promise"))).reject("UNINITIALIZED HANDSHAKE");var l=new Uint8Array(0);a["catch"](function(){});c=function(){function a(a,b,c){var e=this;this.$4=[];this.$5=new(d("WAPromiseQueue").PromiseQueue)();this.$6=new(d("WAPromiseQueue").PromiseQueue)();this.$7=0;this.$8=0;this.$9=!1;this.$14=function(a){!e.$1.closed?(d("WALogger").DEV(k()).tags("WANoiseSocket"),e.$1.sendFrame(a)):d("WALogger").LOG(j())};this.$12=function(a){var b=e.$7++;e.$5.enqueueHandlers(o(e.$2,b,void 0,a),e.$15)};this.$13=function(){e.$9=!0,e.$5.wait().then(function(){e.$9=!1;var a=e.$11;a&&a()})};this.$15=function(a){e.$10?e.$10(a):e.$4.push(a)};this.$1=a;this.$3=b;this.$2=c;a.onFrame=this.$12;this.$1.onClose=this.$13;a.convertBufferedToFrames()}var c=a.prototype;c.sendFrameAsync=function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(this.sendFrame(a));case 2:c=d.sent;return d.abrupt("return",c);case 4:case"end":return d.stop()}},null,this)};c.sendFrame=function(a){if(this.$9)return(h||(h=b("Promise"))).resolve();this.$1.throwIfClosed();var c=this.$8++;d("WALogger").DEV(i(),a.length).tags("WANoiseSocket");return this.$6.enqueueHandlers(n(this.$3,c,void 0,a),this.$14)};c.setOnFrame=function(a){this.$10=a};c.setOnClose=function(a){this.$11=a};c.close=function(){this.$1.close()};return a}();function m(a){var b=new ArrayBuffer(12),c=new DataView(b);c.setUint32(8,a);return new Uint8Array(b)}function n(a,b,c,e){return d("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-GCM",iv:m(b),additionalData:c?new Uint8Array(c):l},a,e)}function o(a,b,c,e){return d("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-GCM",iv:m(b),additionalData:c?new Uint8Array(c):l},a,e)}g.NoiseSocket=c}),98);
__d("WANoiseHandshake",["Promise","WABinary","WACryptoDependencies","WACryptoHkdf","WACryptoSha256","WAErrors","WANoiseSocket","WAResolvable"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=b("Promise"))).reject("UNINITIALIZED HANDSHAKE"),j=new Uint8Array(0);i["catch"](function(){});a=function(){function a(a){var b=this;this.$2=i;this.$3=i;this.$4=i;this.$5=0;this.$1=a;this.$6=new(d("WAResolvable").Resolvable)();a.onClose=function(){b.$6.reject(new(d("WAErrors").Disconnected)("NoiseHandshake: SocketClosed"))};p(this.$6.promise)}var c=a.prototype;c.start=function(a,c){a=d("WABinary").Binary.build(a).readBuffer();a=a.byteLength===32?(h||(h=b("Promise"))).resolve(a):d("WACryptoSha256").sha256(a);this.$2=a;this.$3=a;this.$4=a.then(l);this.authenticate(c)};c.sendAndReceive=function(a){var c=this.$1,d=new(h||(h=b("Promise")))(function(b){c.onFrame=function(a){c.onFrame=null,b(a)},c.sendFrame(a)});return this.$7(d)};c.send=function(a){this.$1.sendFrame(a)};c.authenticate=function(a){this.$2=(h||(h=b("Promise"))).all([this.$2,a]).then(function(a){var b=a[0];a=a[1];b=d("WABinary").Binary.build(b,a).readByteArray();return d("WACryptoSha256").sha256(b)})};c.encrypt=function(a){var c=this.$5++;a=(h||(h=b("Promise"))).all([this.$4,this.$2,a]).then(function(a){var b=a[0],d=a[1];a=a[2];return m(b,c,d,a)});this.authenticate(a);return this.$7(a)};c.decrypt=function(a){var c=this.$5++,d=(h||(h=b("Promise"))).all([this.$4,this.$2]).then(function(b){var d=b[0];b=b[1];return n(d,c,b,a)});this.authenticate(a);return this.$7(d)};c.finish=function(){var a=this,c=this.$3.then(function(a){return o(a,new Uint8Array(0))}).then(function(a){var c=a[0];a=a[1];return(h||(h=b("Promise"))).all([l(c,["encrypt"]),l(a,["decrypt"])])}).then(function(b){var c=b[0];b=b[1];return new(d("WANoiseSocket").NoiseSocket)(a.$1,c,b)});return this.$7(c)};c.mixIntoKey=function(a){this.$5=0;a=(h||(h=b("Promise"))).all([this.$3,a]).then(function(a){var b=a[0];a=a[1];return o(b,new Uint8Array(a))});this.$3=a.then(function(a){return a[0]});this.$4=a.then(function(a){return l(a[1])});p(this.$3);p(this.$4)};c.$7=function(a){var c=this;return(h||(h=b("Promise"))).race([a,this.$6.promise]).then(function(a){return c.$6.resolveWasCalled()?c.$6.promise:a})};return a}();function k(a){var b=new ArrayBuffer(12),c=new DataView(b);c.setUint32(8,a);return new Uint8Array(b)}function l(a,b){b===void 0&&(b=["encrypt","decrypt"]);return d("WACryptoDependencies").getCrypto().subtle.importKey("raw",new Uint8Array(a),"AES-GCM",!1,b)}function m(a,b,c,e){return d("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-GCM",iv:k(b),additionalData:c?new Uint8Array(c):j},a,e)}function n(a,b,c,e){return d("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-GCM",iv:k(b),additionalData:c?new Uint8Array(c):j},a,e)}function o(a,b){return d("WACryptoHkdf").extractWithSaltAndExpand(b,new Uint8Array(a),"",64).then(function(a){return[a.slice(0,32),a.slice(32)]})}function p(a){a["catch"](function(){})}g.NoiseHandshake=a}),98);
__d("WAOpenChatSocket",["Promise","WABinary","WACryptoCurve25519","WAErr","WAFrameSocket","WALogger","WANoiseHandshake","WAResultOrError","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["openChatSocket performing full handshake"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["openChatSocket performing resume handshake"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["openChatSocket preIntro ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["doFallbackHandshake continuing handshake with given server hello"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake performing fallback handshake"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake deriving secrets"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake continuing resume handshake"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake rcv hello"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake send hello"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake failed to encrypt client login props: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake EC Agreement 2"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake failed to encrypt client static key: ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake encrypt client static key"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake EC Agreement 1"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake authenticate with client ephemeral key"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake authenticate with server static key"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake started"]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["fullNoiseHandshake rcv hello"]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["fullNoiseHandshake send hello"]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["doFullHandshakeCore client finish and deriving secrets"]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["doFullHandshakeCore parsing and verifying server certificate"]);C=function(){return a};return a}var D="Noise_XX_25519_AESGCM_SHA256\0\0\0\0",E="Noise_IK_25519_AESGCM_SHA256\0\0\0\0",F="Noise_XXfallback_25519_AESGCM_SHA256";function G(a,e,f,g,i){e=e||{};var j=e.ephemeral,k=e["static"];e=e.payload;if(j==null||k==null||e==null)return(h||(h=b("Promise"))).reject(c("WAErr")("doFullHandshakeCore server hello invalid proto"));a.authenticate(j);a.mixIntoKey(g.generateSharedSecret(j));k=a.decrypt(k);a.mixIntoKey(k.then(function(a){return g.generateSharedSecret(a)}));e=a.decrypt(e);return(h||(h=b("Promise"))).all([k,e]).then(function(a){var b=a[0];a=a[1];d("WALogger").LOG(C());return i.processCertificate({certificate:a,serverStatic:b})}).then(function(){var c=a.encrypt(i.staticKeyPair.generatePublicKey());a.mixIntoKey(i.staticKeyPair.generateSharedSecret(j));var d=a.encrypt((h||(h=b("Promise"))).resolve(f));return h.all([c,d])}).then(function(b){var c=b[0];b=b[1];d("WALogger").LOG(B());a.send(i.encodeHandshakeFinish({"static":c,payload:b}));return a.finish()})}function H(a,b,c,e){var f=new(d("WANoiseHandshake").NoiseHandshake)(a);f.start(D,e.protoHeader);a=c.generatePublicKey();f.authenticate(a);return a.then(function(a){d("WALogger").LOG(A());return f.sendAndReceive(e.encodeHandshakeHello({ephemeral:a}))}).then(function(a){d("WALogger").LOG(z());a=e.decodeServerHello(a);return G(f,a,b,c,e)})}function I(a,e,f,g,i){var j,k=new(d("WANoiseHandshake").NoiseHandshake)(a);(j=d("WALogger")).LOG(y());k.start(E,i.protoHeader);var l=g.generatePublicKey();j.LOG(x());k.authenticate(f);j.LOG(w());k.authenticate(l);j.LOG(v());k.mixIntoKey(g.generateSharedSecret(f));j.LOG(u());var z=k.encrypt(i.staticKeyPair.generatePublicKey())["catch"](function(a){d("WALogger").ERROR(t(),a);return(h||(h=b("Promise"))).reject(a)});j.LOG(s());k.mixIntoKey(i.staticKeyPair.generateSharedSecret(f));j=k.encrypt((h||(h=b("Promise"))).resolve(e))["catch"](function(a){d("WALogger").ERROR(r(),a);return(h||(h=b("Promise"))).reject(a)});return h.all([l,j,z]).then(function(b){var a=b[0],c=b[1];b=b[2];d("WALogger").LOG(q());return k.sendAndReceive(i.encodeHandshakeHello({ephemeral:a,payload:c,"static":b}))}).then(function(b){d("WALogger").LOG(p());b=i.decodeServerHello(b);var f=b||{},h=f.ephemeral,j=f["static"];f=f.payload;if(j==null){d("WALogger").LOG(o());if(!h)throw c("WAErr")("serverHello missing serverEphemeral");if(!f)throw c("WAErr")("serverHello missing certificateCiphertext");k.authenticate(h);k.mixIntoKey(g.generateSharedSecret(h));k.mixIntoKey(i.staticKeyPair.generateSharedSecret(h));return k.decrypt(f).then(function(){d("WALogger").LOG(n());return k.finish()})}else{d("WALogger").LOG(m());return J(a,b,e,g,i)}})}function J(a,b,c,e,f){a=new(d("WANoiseHandshake").NoiseHandshake)(a);a.start(F,f.protoHeader);var g=e.generatePublicKey();a.authenticate(g);d("WALogger").LOG(l());return G(a,b,c,e,f)}function a(a,c,e){return a.openSocket(e).then(d("WAResultOrError").onResult(function(e){var f,g,l,m,n,o,p,q,r,s;return b("regeneratorRuntime").async(function(t){while(1)switch(t.prev=t.next){case 0:(h||(h=b("Promise"))).resolve().then(c);f=void 0;g=a.edgeInfo;g&&(l=new(d("WABinary").Binary)(),l.write("ED",0,1),l.writeUint8(g.byteLength>>16),l.writeUint16(g.byteLength&65535),l.writeBuffer(g),f=l.readByteArray(),d("WALogger").LOG(k(),f));m=f?d("WABinary").Binary.build(f,a.protoHeader).readByteArray():a.protoHeader;n=new(d("WAFrameSocket").FrameSocket)(e,m);t.next=8;return b("regeneratorRuntime").awrap(a.getClientPayload());case 8:o=t.sent;p=new(d("WACryptoCurve25519").Curve25519)(a.curveSignalDependencies);q=a.serverStaticKeyIfKnown();if(!q){t.next=17;break}d("WALogger").LOG(j());(r=a.preLogging)==null?void 0:r.onBeforeResumeHandshakeStarted==null?void 0:r.onBeforeResumeHandshakeStarted();return t.abrupt("return",I(n,o,q,p,a).then(function(b){var c;(c=a.preLogging)==null?void 0:c.onAfterResumeHandshakeCompleted==null?void 0:c.onAfterResumeHandshakeCompleted();return b})["catch"](function(c){var d;(d=a.preLogging)==null?void 0:d.onHandshakeError==null?void 0:d.onHandshakeError(c);return(h||(h=b("Promise"))).reject(c)}));case 17:d("WALogger").LOG(i());(s=a.preLogging)==null?void 0:s.onBeforeFullHandshakeStarted==null?void 0:s.onBeforeFullHandshakeStarted();return t.abrupt("return",H(n,o,p,a).then(function(b){var c;(c=a.preLogging)==null?void 0:c.onAfterFullHandshakeCompleted==null?void 0:c.onAfterFullHandshakeCompleted();return b})["catch"](function(c){var d;(d=a.preLogging)==null?void 0:d.onHandshakeError==null?void 0:d.onHandshakeError(c);return(h||(h=b("Promise"))).reject(c)}));case 20:case"end":return t.stop()}},null,this)}))}g.doFullHandshake=H;g.openChatSocket=a}),98);
__d("WASmaxInMultiwaydServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInMultiwaydMultiwayNotificationRequest",["WAResultOrError","WASmaxInMultiwaydServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"multiway");if(!b.success)return b;var c=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","fb:multiway");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,b.value,"transaction_id");if(!f.success)return f;var g=d("WASmaxParseUtils").attrInt(b.value,"binary_version");if(!g.success)return g;b=d("WASmaxParseUtils").contentBytesRange(b.value,1,void 0);if(!b.success)return b;a=d("WASmaxInMultiwaydServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:c.value,type:e.value,multiwayTransactionId:f.value,multiwayBinaryVersion:g.value,multiwayElementValue:b.value},a.value))}g.parseMultiwayNotificationRequest=a}),98);
__d("WASmaxOutMultiwaydNotificationClientAckMixin",["WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrDomainJid,a,["from"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").DOMAIN_JID(c.value),"class":"notification",type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNotificationClientAckMixin=a}),98);
__d("WASmaxOutMultiwaydMultiwayNotificationResponseAck",["WASmaxJsx","WASmaxOutMultiwaydNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutMultiwaydNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeMultiwayNotificationResponseAck=a}),98);
__d("WASmaxMultiwaydMultiwayNotificationRPC",["WASmaxInMultiwaydMultiwayNotificationRequest","WASmaxOutMultiwaydMultiwayNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMultiwaydMultiwayNotificationRequest").parseMultiwayNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("MultiwayNotification",{Request:b}));return{parsedRequest:b.value,makeMultiwayNotificationResponseAck:function(){return d("WASmaxOutMultiwaydMultiwayNotificationResponseAck").makeMultiwayNotificationResponseAck(a)}}}g.receiveMultiwayNotificationRPC=a}),98);
__d("MAWCommsConfig",["BroadcastChannelClientServerHandshake","MAWBridge","MAWChatSocketPlatformDetails","MAWGetWorkerStatusApi","MAWODSProxy","MAWQplProxy","MWBroadcastChannel","WAAPI","WAComms","WADevToolsStanzaViewer","WALogger","WAOdsEnums","WAOpenChatSocket","WAResolvable","WASmaxMultiwaydMultiwayNotificationRPC","WATagsLogger","WATimeUtils","asyncToGeneratorRuntime","gkx","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["openChatSocket retried"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["comms change: ",""]);i=function(){return a};return a}var j=12*60*60;function k(a){d("WALogger").LOG(i(),a),a==="connected"&&c("promiseDone")(d("WAComms").startHandlingRequests())}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.authKeyPair;var b=(yield d("MAWChatSocketPlatformDetails").getChatSocketPlatformDetails({authKeyPair:a})),e=!1,f=!1,g=new(d("WAResolvable").Resolvable)();void d("MAWQplProxy").measurePerfInQPL(c("qpl")._(1056839232,"112"),"wai_connection",function(){return g.promise},{bool:{waapi_deferred:c("gkx")("4469")}});var i=function(a){a==="in_handshake"?f===!1?(f=!0,d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(1056839232,"112"),"wai_in_handshake")):d("WATagsLogger").TAGS(["backend"]).LOG(h()):a==="connected"?(g.resolve(),d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.WA_CONNECTIVITY,key:"success"}),f=!1):a==="disconnected"&&(d("MAWQplProxy").sendQPLBoolAnnotationThroughBridge(c("qpl")._(1056839232,"112"),"didWAIConnectionDisconnect",!0),f=!1,d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.WA_CONNECTIVITY,key:"disconnected"}))};return{deadSocketTime:2e4,handlers:{onCastStanza:function(a){c("gkx")("3282")&&d("WADevToolsStanzaViewer").sendNewStanzaToDevTool(a,!0)},onClockSkewUpdate:function(a){var b=d("WATimeUtils").getClockSkew();if(Math.abs(b-a)<=10)return;if(Math.abs(a)>j){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.CLOCK_SKEW_UPDATE,key:"exceeds_max_val"});e||(e=!0,d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.CLOCK_SKEW_UPDATE,key:"exceeds_max_val_alert"}));return}c("promiseDone")(c("WAAPI").updateClockSkew({clockSkew:a}).then(function(){d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"ClockSkewUpdated",value:a}]})}))},onConnectionChange:function(a){i(a),d("MAWGetWorkerStatusApi").setCommsStatus(a),k(a)},onHandleStanza:function(a){c("gkx")("3282")&&d("WADevToolsStanzaViewer").sendNewStanzaToDevTool(a,!1);if(c("gkx")("8923")&&a.tag==="notification"&&a.attrs.type==="fb:multiway"){var b=d("MWBroadcastChannel").MWBroadcastChannel("maw-shared-worker-to-zenon");a=d("WASmaxMultiwaydMultiwayNotificationRPC").receiveMultiwayNotificationRPC(a);var e=a.parsedRequest.multiwayElementValue;c("promiseDone")(d("BroadcastChannelClientServerHandshake").checkAlive(b).then(function(){b.postMessage({type:"ZENON_ON_STANZA_RECEIVED",value:e})}))}}},healthCheckInterval:20,maxRetries:Number.MAX_SAFE_INTEGER,maxSocketLoopWaitTime:6e4,openChatSocket:function(a,c){return d("WAOpenChatSocket").openChatSocket(b,a,c)},shouldBlockReceivingUntilSuccess:!1,shouldCloseStaleSocket:!0}});return l.apply(this,arguments)}g.baseOnConnectionChange=k;g.getCommsConfig=a}),98);
__d("MAWParticipantManagementTxns",["MAWDbParticipantTxns","MAWDbThreadTxns","MAWDexieTable","WAGlobals"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return d("MAWDbParticipantTxns").getParticipantsInThread(a,b).then(function(e){if(c.length===0&&e.length===0)return{addedJids:[],participants:e,removedJids:[],typeUpdateJids:[]};var f=new Map();e.forEach(function(a){f.set(a.userJid,a)});var g=new Set(c.map(function(a){return a.userJid})),h=[],i=[],j=[],k=[];f.forEach(function(a,b){g.has(b)||(a.type!=="invitedParticipant"?h.push(b):(k.push({type:a.type,userJid:a.userJid}),j.push(babelHelpers["extends"]({},a))))});c.forEach(function(a){var b=f.get(a.userJid);b==null?(i.push(a),a.type==="admin"&&k.push({type:a.type,userJid:a.userJid})):(b.type!==a.type&&k.push({type:a.type,userJid:a.userJid}),j.push(babelHelpers["extends"]({},b,a)))});var l=h.indexOf(d("WAGlobals").getMyUserJid())>=0;e=function(){return[d("MAWDbParticipantTxns").bulkAddParticipants(a,b,i),d("MAWDbParticipantTxns").bulkUpdateParticipants(a,j),d("MAWDbParticipantTxns").bulkDeleteParticipantsInThread(a,b,h),l?d("MAWDbThreadTxns").archiveThreads(a,[b],!0):d("MAWDexieTable").dexieResolve()]};return d("MAWDexieTable").dexieAll(e()).then(function(a){var b=a[0];a=a[1];return{addedJids:i.map(function(a){return a.userJid}),participants:[].concat(b,a),removedJids:h,typeUpdateJids:k}})})}g.syncParticipantList=a}),98);
__d("MAWGroupManagementTxns",["MAWAdminWriteChangeParticipantsAdminMsgTxn","MAWAdminWriteGroupNameChangeTxn","MAWDbGroupInfoTxns","MAWDbMsgTxns","MAWDbParticipantTxns","MAWDbThreadTxns","MAWDexieTable","MAWFolderTypes","MAWGetOrCreateThreadTxns","MAWLoadMsgsTxns","MAWParticipantManagementTxns","MAWThreadManagementTxns","WAGlobals","WATimeUtils","isGroupInvitesEnabled"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return d("MAWDexieTable").dexieAll([d("MAWThreadManagementTxns").deleteAllThreadData(a,c),d("MAWDbGroupInfoTxns").deleteGroupInfo(a,b)]).then(function(a){a=a[0];return a}).then(function(a){return a})}b=function(a,b){var e=b.authoritativeThreadKey,f=b.deduplicationKey,g=b.extras,h=b.folder,i=b.groupStatus,j=b.groupToCreate,k=b.serverTs;b=i==="added"?d("WATimeUtils").unixTime():j.creationTs;return d("MAWGetOrCreateThreadTxns").getOrCreateThread(a,{authoritativeThreadKey:e,clientThreadKey:g==null?void 0:g.clientThreadKey,createTs:d("WATimeUtils").castUnixTimeToMillisTime(b),deduplicationKey:f,description:"createGroup",folder:h==null?d("MAWFolderTypes").FOLDER_ID.INBOX:h,jid:j.jid}).then(function(b){var e=b.created,f=b.thread;b=j.participants.map(function(a){return a.error?c("isGroupInvitesEnabled")()&&a.error.errorCode===403?{addressable:!0,type:"invitedParticipant",userJid:a.error.user}:null:{addressable:a.value.addressable,type:a.value.type,userJid:a.value.user}}).filter(Boolean);var g=e?d("MAWDbParticipantTxns").bulkAddParticipants:d("MAWParticipantManagementTxns").syncParticipantList,h=g(a,f.jid,b);g=d("WAGlobals").getMyUserJid();var l=i==="added"&&!e&&j.creator!==g?d("MAWAdminWriteChangeParticipantsAdminMsgTxn").writeAddParticipantAdminMsg(a,{admin:j.inviter,chatJid:f.jid,participants:[g],serverTs:k}):d("MAWDexieTable").dexieResolve();j.description;j.participants;var m=babelHelpers.objectWithoutPropertiesLoose(j,["description","participants"]);return d("MAWDbMsgTxns").getThreadNewestMessageId(a,f).then(function(b){return d("MAWDexieTable").dexieAll([h,d("MAWDbGroupInfoTxns").putGroupInfo(a,m),b==null?d("MAWDexieTable").dexieResolve():d("MAWLoadMsgsTxns").loadMsgsAndMediaFromOffset(a,f.jid,b,10,!0),l]).then(function(b){b[0];b=b[1];return e&&i==="added"?d("MAWAdminWriteGroupNameChangeTxn").writeGroupNameChangeInfo(a,b,f):d("MAWDexieTable").dexieResolve()}).then(function(){return f.archived===!0?d("MAWDbThreadTxns").unarchiveThreads(a,[f.jid]):d("MAWDbThreadTxns").subscribeToThreads(a,[f.jid])}).then(function(a){return f.jid})})})};g.deleteGroup=a;g.createGroupInternal=b}),98);
__d("MAWCreateGroupApi",["MAWDexieTable","MAWGroupManagementTxns","MAWIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b){var c=b.extras,e=b.folder,f=b.groupStatus,g=b.groupToCreate,h=b.key;b=b.serverTs;return d("MAWGroupManagementTxns").createGroupInternal(a,{deduplicationKey:h!=null?h:void 0,extras:c,folder:e,groupStatus:f,groupToCreate:g,serverTs:b})};b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,editMsgHistory:a.READONLY,ftsBackloggedMessages:a.READWRITE,groupInfo:a.READWRITE,media:a.READONLY,messages:a.READWRITE,participants:a.READWRITE,reactions:a.READONLY,threads:a.READWRITE,xma:a.READONLY},"createGroups",function(a){return function(b){return d("MAWDexieTable").dexieAll(b.map(function(b){var c=b.extras,d=b.folder,e=b.groupStatus,f=b.groupToCreate,g=b.key;b=b.serverTs;return h(a,{extras:c,folder:d,groupStatus:e,groupToCreate:f,key:g,serverTs:b})})).then(function(){})}});g.createGroups=b}),98);
__d("MAWDbDyiBatch",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.numberToBatchId=a}),66);
__d("MAWDyiBatchRestoreDataSync",["LSMEBTaskCreationSource","MAWDataSyncQueue","MAWDbDyiBatch","MAWDexieTable","MAWEBBackendQPLUtils","MAWIndexedDb","MAWQplProxy","MAWTransactionMode","Promise","WALogger","gkx","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] User is not eligible to use DYI"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] No message batch entry corresponding to batch id ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Expecting one dyi batch entry with non-null numThreadsRestored entry to track DYI progress. Stopping DYI"]);k=function(){return a};return a}var l=c("justknobx")._("1485");function m(a,b,e,f){b={tag:"RestoreMessageBatch",value:{newerNumMessages:0,numMessages:l,oldestTs:b,qplInstanceKeyE2E:f,qplInstanceKeyForThread:e,taskSource:c("LSMEBTaskCreationSource").MSGR_DYI,threadJid:a}};d("MAWIndexedDb").afterTransaction(b)}function n(a,b){return a.dyiBatch.count().then(function(c){if(c===1)return a.dyiBatch.clear().then(function(){d("MAWIndexedDb").afterTransaction({tag:"UpdateDyiStatus",value:{qplInstanceKeyE2E:b,status:!0}})})})}function o(a,b,e){if(b.length>0){var f=new Set(b);return a.dyiBatch.filter(function(a){return a.threadId!=null&&f.has(a.threadId)}).toArray().then(function(a){a.forEach(function(a){a.threadId!=null&&a.qplInstanceKeyForThread!=null&&d("MAWEBBackendQPLUtils").endSuccessDYIBackupRestoreQplUserFlow(a.qplInstanceKeyForThread,a.threadId)});return a}).then(function(b){var f=b.filter(function(a){return a.isThread}).length;return a.dyiBatch.bulkDelete(b.filter(Boolean).map(function(a){return a.batchId})).then(function(){return a.dyiBatch.filter(function(a){return a.threadId==null&&a.numThreadsRestored!=null}).toArray().then(function(b){if(b.length!==1){d("WALogger").ERROR(k());e!=null&&d("MAWQplProxy").sendQPLFailThroughBridge(c("qpl")._(521478596,"1329"),"dyi_backup_restore_error",void 0,e);return p(a,void 0,e)}b=b[0];if(e!=null&&b.numThreadsRestored!=null){var g=b.numThreadsRestored+f;return a.dyiBatch.update(b.batchId,{numThreadsRestored:g}).then(function(){d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521478596,"1329"),"dyi_backup_restore_update",{annotations:{"int":{numThreadsRestored:g}},instanceKey:e});return n(a,e)})}else return n(a,e)})})})}return d("MAWDexieTable").dexieResolve()}function p(a,b,c){b!=null&&b.forEach(function(a){d("WALogger").ERROR(j(),a)});d("MAWIndexedDb").afterTransaction({tag:"UpdateDyiStatus",value:{qplInstanceKeyE2E:c,status:!1}});return d("MAWEBBackendQPLUtils").cleanupDYIBackupRestoreQplUserFlow(a).then(function(b){return a.dyiBatch.clear()})}var q=d("MAWIndexedDb").makeMsgrTransactor({dyiBatch:d("MAWTransactionMode").READWRITE},"processNextDyiBatchEntry",function(a){return function(b){var c=[];b.forEach(function(a){if(a.type==="put"||a.type==="add"){a=a.value.key;if(typeof a==="number"){a=a;c.push(d("MAWDbDyiBatch").numberToBatchId(a))}}});return a.dyiBatch.count().then(function(b){if(b>0)return a.dyiBatch.bulkGet(c).then(function(b){var e,f=new Map(),g=[];c.map(function(a,c){b[c]!=null&&!b[c].isThread?f.set(a,b[c]):b[c]==null&&g.push(a)});e=(e=b.find(function(a){if((a==null?void 0:a.qplInstanceKeyE2E)!=null)return!0}))==null?void 0:e.qplInstanceKeyE2E;if(g.length>0)p(a,g,e);else{var h=[],i=[];f.forEach(function(a,b){b=a.threadId;a.numMessages<l&&b!=null?(d("MAWEBBackendQPLUtils").addPointDYIBackupRestoreQplUserFlow(!0,a),h.push(b)):(d("MAWEBBackendQPLUtils").addPointDYIBackupRestoreQplUserFlow(!1,a),i.push(a))});i.forEach(function(a){a.threadId!=null&&m(a.threadId,a.oldestTs)});return o(a,h,e)}})})}}),r=function(a){a=a.filter(function(a){return a.value.tableName==="dyiBatch"&&a.type!=="delete"&&a.type!=="deleteRange"});return a.length>0?q(a).then(function(a){return(h||(h=b("Promise"))).resolve()}):(h||(h=b("Promise"))).resolve()};a=function(){if(!c("gkx")("23911")){d("WALogger").WARN(i());return}d("MAWDataSyncQueue").registerDataSyncCallback(r)};g.DYI_BATCH_SIZE=l;g.restoreMessagesForThread=m;g.initDyiBatchUpload=a}),98);
__d("MAWFTSIndexedDb",["Deferred","FBLogger","MAWCurrentUser","MAWDexieTable","MAWErrorObject","MAWIDbSetupQplEventListener","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWQplProxy","MAWTransactionMode","Promise","WALogger","WATagsLogger","asyncToGeneratorRuntime","err","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["DB setup complete, marking as ready"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["FTS DB Open blocked"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Starting DB Setup"]);k=function(){return a};return a}var l=null,m=null,n=new(c("Deferred"))(),o=!1,p=d("WATagsLogger").TAGS(["DBInit","DbSetup"]);function q(){n=null,o=!1}function a(){var a=d("MAWCurrentUser").getID();if(l!=null)return(h||(h=b("Promise"))).resolve();if(o){var e;return((e=n)==null?void 0:e.getPromise())||(h||(h=b("Promise"))).reject("error-setting-up-fts")}m=d("MAWIndexedDbMetadata").ftsDbName(a);var f=d("MAWQplProxy").startQplUserFlow(c("qpl")._(1056836116,"905"),{string:{db:"fts_idb",name:m}});p.LOG(k());o=!0;n=(e=n)!=null?e:new(c("Deferred"))();d("MAWIDbSetupQplEventListener").trackDbSetupFailure(f,function(){var a;(a=n)==null?void 0:a.reject("FTS DB setup failed");q()});l=new(d("MAWDexieTable").DexieTable)(m,function(a){a.version(1).stores({ftsBackloggedMessages:"rowId",ftsEncryptionMeta:"key",ftsIndexV3:"++ftsRowId,id,chatId,*prefixes"}),a.version(2).stores({ftsManifest:"key"}),a.version(3).stores({ftsBackloggedMessages:"rowId,externalId"}),a.version(4).stores({ftsRestoreStatus:"threadId"}),a.on("blocked",function(){p.ERROR(j()),f.endFail("blocked")}),a.on("ready",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){p.LOG(i());if(a==null){d("WALogger").ERROR(["DB is null"]);(a=n)==null?void 0:a.reject("FTS DB is null");f.endFail("db_null");q();return}f.endSuccess();(a=n)==null?void 0:a.resolve();q()});return function(b){return a.apply(this,arguments)}}())},!0,{});return((a=n)==null?void 0:a.getPromise())||(h||(h=b("Promise"))).reject("error-setting-up-fts")}function r(){if(l==null)throw c("err")("IndexDB has not been initialized before executing transactor");return l}function s(){if(l!=null&&!o)return(h||(h=b("Promise"))).resolve(l);n=n||new(c("Deferred"))();return n.getPromise().then(function(){return r()})}function e(){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield s());a!=null&&(a.close(),l=null)});return t.apply(this,arguments)}function f(a){l=a,q()}function u(){l!=null&&(l.close(),l=null)}function v(a){u();var b=m;b===null&&a!=null&&(b=d("MAWIndexedDbMetadata").dbName(a));c("promiseDone")(d("MAWIndexedDBDeletion").deleteDB(b,"maw"))}function w(a){var b=c("FBLogger")("messenger_e2ee_web");if(a)return b.catching(a);else return b}function x(a,b){var c=Object.keys(a),e=c.some(function(b){return a[b]===d("MAWTransactionMode").READWRITE})?d("MAWTransactionMode").READWRITE:d("MAWTransactionMode").READONLY;return function(){for(var a=arguments.length,f=new Array(a),g=0;g<a;g++)f[g]=arguments[g];return s().then(function(a){return a.transact(e,c,function(){return b(a.stores).apply(void 0,f)["catch"](function(a){a=d("MAWErrorObject").getErrorObject(a);throw w(a).mustfixThrow("Error performing FTS transaction")})})})["catch"](function(a){a=d("MAWErrorObject").getErrorObject(a);throw w(a).mustfixThrow("Error performing FTS transaction")})}}g.makeFTSDB=a;g.getDBExn=r;g.getDB=s;g.closeDB_INTERNAL_USE_ONLY=e;g.setDB_INTERNAL_USE_ONLY=f;g.closeDb=u;g.deleteDb=v;g.makeMsgrFTSTransactor=x}),98);
__d("MAWMessageIndexerFtsIndexTableAdapter",["FBLogger","MAWDexieTable","MAWFTSIndexedDb","MAWTransactionMode","asyncToGeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){var b=new Map();for(a of a){var c=a.ftsRowId;if(typeof c!=="number")continue;if(b.has(c))continue;b.set(c,a)}return Array.from(b.values())},i=function(a,b){return a.ftsIndexV3.where("id").anyOf(b.map(function(a){return a.id})).toArray().then(function(d){var e=new Set(d.map(function(a){return a.id})),f=new Map();for(var g of b){var h=g.id;f.set(h,g)}var i=Array.from(f.values()).filter(function(a){return!e.has(a.id)});h=d.map(function(a){return{changes:f.get(a.id),key:a.ftsRowId}}).filter(function(a){var b=a.changes;a=a.key;return b!=null&&a!=null});return a.ftsIndexV3.bulkUpdate(h.map(function(a){var b=a.changes;a=a.key;return{changes:c("nullthrows")(b),key:c("nullthrows")(a)}})).then(function(){return a.ftsIndexV3.bulkPut(i)})}).then(function(){})},j=function(a,b,c){return b==null?d("MAWDexieTable").dexieResolve():a.ftsIndexV3.update(b,c).then(function(){})},k=function(a,b){return a.ftsIndexV3.bulkGet(b.filter(Boolean))},l=function(a,b,e){if(b.length!==1){c("FBLogger")("maw_fts").mustfix("indexNames should have exactly one element");return d("MAWDexieTable").dexieResolve([])}if(e.length===0){c("FBLogger")("maw_fts").mustfix("indexValues should have at least one element");return d("MAWDexieTable").dexieResolve([])}b=b[0];a=a.ftsIndexV3.where(b).equals(e[0]);for(var f=1;f<e.length;++f)a=a.or(b).equals(e[f]);return a.toArray().then(h)};function m(a){a=new Uint8Array(a.slice(0));for(var b=a.length-1;b>=0;--b){if(a[b]!==255){a[b]+=1;return a.buffer}a[b]=0}b=new Uint8Array(a.length+1);b[0]=1;for(var c=1;c<=a.length;++c)b[c]=255;return b.buffer}var n=function(a,b,e){if(b.length!==1){c("FBLogger")("maw_fts").mustfix("indexNames should have exactly one element");return d("MAWDexieTable").dexieResolve([])}if(e.length===0){c("FBLogger")("maw_fts").mustfix("indexValues should have at least one element");return d("MAWDexieTable").dexieResolve([])}b=b[0];var f=e[0];if(typeof f==="string"){var g=a.ftsIndexV3.where(b).startswith(f);for(var i=1;i<e.length;++i){var j=e[i];g=g.or(b).startsWith(j)}return g.toArray()}if(!(f instanceof ArrayBuffer)){c("FBLogger")("maw_fts").mustfix("Expecting an array buffer or a string type for indexValues");return d("MAWDexieTable").dexieResolve([])}j=m(f);i=a.ftsIndexV3.where(b).between(f,j,!0,!1);for(g=1;g<e.length;++g){a=e[g];if(!(a instanceof ArrayBuffer)){c("FBLogger")("maw_fts").mustfix("Expecting an array buffer or a string type for indexValues");return d("MAWDexieTable").dexieResolve([])}f=m(a);i=i.or(b).between(a,f,!0,!1)}return i.toArray().then(h)},o=function(a,b,c,d,e){return a.ftsIndexV3.where(b[0]).between(c,d,(a=e==null?void 0:e.lowerInclusive)!=null?a:!0,(b=e==null?void 0:e.upperInclusive)!=null?b:!1).toArray().then(h)},p=function(a,b,c){return a.ftsIndexV3.where(b[0]).equals(c[0]).primaryKeys().then(function(b){return a.ftsIndexV3.bulkDelete(b)})},q=function(a){return a.ftsIndexV3.clear()};a=function(){function a(a){this.$1=null,this.$2=a}var e=a.prototype;e.$3=function(){return c("nullthrows")(this.$1)};e.transact=function(a){var b=this;a=a;var c=a;return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsIndexV3:d("MAWTransactionMode").READWRITE},function(a){return function(){b.$1=a;return c()["finally"](function(){b.$1=null})}})()};e.bulkPut=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(this.$1!=null){yield i(this.$3(),a);return}return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsIndexV3:d("MAWTransactionMode").READWRITE},function(b){return function(){return i(b,a)}})()});function c(b){return a.apply(this,arguments)}return c}();e.merge=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(this.$1!=null){yield j(this.$3(),a,b);return}return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsIndexV3:d("MAWTransactionMode").READWRITE},function(c){return function(){return j(c,a,b)}})()});function c(b,c){return a.apply(this,arguments)}return c}();e.bulkCreate=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(this.$1!=null){yield i(this.$3(),a);return}return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsIndexV3:d("MAWTransactionMode").READWRITE},function(b){return function(){return i(b,a)}})()});function c(b){return a.apply(this,arguments)}return c}();e.bulkGetByKey=function(a){return this.$1!=null?d("MAWDexieTable").undexify(k(this.$3(),a)):d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsIndexV3:d("MAWTransactionMode").READWRITE},function(b){return function(){return k(b,a)}})()};e.bulkGetAnyOf=function(a,b){return this.$1!=null?d("MAWDexieTable").undexify(l(this.$3(),a,b)):d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsIndexV3:d("MAWTransactionMode").READWRITE},function(c){return function(){return l(c,a,b)}})()};e.bulkGetStartsWithAnyOf=function(a,b){return this.$1!=null?d("MAWDexieTable").undexify(n(this.$3(),a,b)):d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsIndexV3:d("MAWTransactionMode").READWRITE},function(c){return function(){return n(c,a,b)}})()};e.between=function(a,b,c,e){return this.$1!=null?d("MAWDexieTable").undexify(o(this.$3(),a,b,c,e)):d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsIndexV3:d("MAWTransactionMode").READWRITE},function(d){return function(){return o(d,a,b,c,e)}})()};e.bulkRemoveByIndex=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(this.$1!=null){yield p(this.$3(),a,b);return}return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsIndexV3:d("MAWTransactionMode").READWRITE},function(c){return function(){return p(c,a,b)}})()});function c(b,c){return a.apply(this,arguments)}return c}();e.erase=function(){return this.$1!=null?d("MAWDexieTable").undexify(q(this.$3())):d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsIndexV3:d("MAWTransactionMode").READWRITE},function(a){return function(){return q(a)}})()};e.getKey=function(){return this.$2};return a}();g["default"]=a}),98);
__d("MAWMessageSearchFTSKeyUtil",["MAWCryptoConsts","MAWFTSIndexedDb","MAWKeychainCrypto","MAWSubtleCrypto","MAWTransactionMode","WABase64","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return a.ftsEncryptionMeta.toCollection().first()},i=function(){return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsEncryptionMeta:d("MAWTransactionMode").READONLY},function(a){return function(){return h(a)}})()};function j(a){return d("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",d("WABase64").decodeB64(a.key),{name:d("MAWCryptoConsts").HKDF},!1,["deriveKey"])}var k=function(a){return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsEncryptionMeta:d("MAWTransactionMode").READWRITE},function(b){return function(){return h(b).then(function(c){if(c!=null)return c;var d={key:a};return b.ftsEncryptionMeta.add(d).then(function(){return d})})}})()};function l(){var a=new Uint8Array(128);self.crypto.getRandomValues(a);return k(d("WABase64").encodeB64(a.buffer))}function a(){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield i());a=(a=a)!=null?a:yield l();a=(yield j(a));return d("MAWSubtleCrypto").MAWSubtleCrypto.deriveKey({hash:d("MAWCryptoConsts").SHA256,info:new Uint8Array(0),name:d("MAWCryptoConsts").HKDF,salt:d("MAWKeychainCrypto").getAccountKeyBuffer(1)},a,{hash:d("MAWCryptoConsts").SHA256,name:"HMAC"},!1,["sign"])});return m.apply(this,arguments)}g.fetchOrGenerateFTSCryptoKey=a}),98);
__d("WAFtsBaseIndexer",["Promise","WACustomError","WALogger","WANullthrows","WAResolvable","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Finished batch from entry "," of ",". (Took "," msec)"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Current message batch is from entry "," of ","..."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["FTS:Indexer:indexQueuedBatch: Completed"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["FTS:Indexer:indexQueuedBatch: Completed batch"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["FTS:Indexer:indexQueuedBatch: Starting new batch size : ",""]);m=function(){return a};return a}var n=function(){},o=function(){return(h||(h=b("Promise"))).resolve()};a=function(){function a(a,b,c,d){d===void 0&&(d=2e3),this.__progressCallbacks=[],this.__isFullIndexingPending=!1,this.__isProcessingBacklog=!1,this.tokenizer=a,this.messageSource=b,this.tableAdapter=c,this.batchSize=d,this.__currentFullIndexingOp=null,this.__currentQueuedIndexingOp=null,this.__fullIndexingProgress=-1}var e=a.prototype;e.__resetFullIndexingProgress=function(){this.__isFullIndexingPending=!1,this.__fullIndexingProgress=-1};e.__notifyProgress=function(a,b){this.__fullIndexingProgress=a,this.__progressCallbacks.forEach(function(c){try{c(a,b)}catch(a){}}),a===1&&(this.__progressCallbacks=[])};e.__processBatch=function(a){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("BaseIndexer.__processBatch"))};e.getIndexingProgress=function(){return this.__fullIndexingProgress};e.isFullIndexingPending=function(){return this.__isFullIndexingPending};e.isQueuedIndexingPending=function(){return this.__isProcessingBacklog};e.purge=function(a){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("purge"))};e.purgeChat=function(a){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("purge"))};e.purge__DEPRECATED_DO_NOT_USE=function(a,c,e){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("purge"))};e.search=function(a,b){return this.finder.find(a,b)};e.incremental=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this;a===void 0&&(a=o);if(this.isQueuedIndexingPending())return c("WANullthrows")(this.__currentQueuedIndexingOp);var e=new(d("WAResolvable").Resolvable)(),f=!0;try{this.__isProcessingBacklog=!0;this.__currentQueuedIndexingOp=e.promise;e.promise["finally"](function(){b.__isProcessingBacklog=!1});d("WALogger").LOG(m(),this.batchSize);while(f){if(this.signaller!=null&&this.signaller.shouldTerminateAll()){f=!1;break}var g=(yield this.messageSource.getBacklogged({limit:this.batchSize}));if(g==null){f=!1;break}g.length!==0&&(yield this.__processBatch(g),d("WALogger").LOG(l()),yield a(g.map(function(a){return a.id})))}d("WALogger").LOG(k())}catch(a){e.reject(a);return!1}e.resolve(!0);return!0});function e(b){return a.apply(this,arguments)}return e}();e.full=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=this;a===void 0&&(a=n);this.__progressCallbacks.push(a);if(this.isFullIndexingPending())return c("WANullthrows")(this.__currentFullIndexingOp);this.__resetFullIndexingProgress();this.__isFullIndexingPending=!0;a=new(d("WAResolvable").Resolvable)();this.__currentFullIndexingOp=a.promise;a.promise["finally"](function(){return e.__resetFullIndexingProgress()});try{var f=this.batchSize,g=0,h=null,k=(yield this.messageSource.size()),l=[performance.now()];while(g<=k){var m=performance.now();d("WALogger").LOG(j(),g,k);var o=(yield b!=null?this.messageSource.getAllAfterId(b,{offset:g,limit:f,fromMessageId:h}):this.messageSource.getAll({offset:g,limit:f,fromMessageId:h}));if(o==null)break;if(o.length!==0){var p=o[o.length-1];h=p.id;yield this.__processBatch(o);o=Math.min(1,(g+f)/k);this.__notifyProgress(o,p.id)}o=performance.now();d("WALogger").LOG(i(),g,k,o-m);l.push(o-m);g+=f}this.__notifyProgress(1);a.resolve(l);return l}catch(b){this.__resetFullIndexingProgress();a.reject(b);throw b}});function e(b,c){return a.apply(this,arguments)}return e}();e.setSignaller=function(a){this.signaller=a};e.getMessageSource=function(){return this.messageSource};e.eraseIndex=function(){return this.tableAdapter.erase()};return a}();g["default"]=a}),98);
__d("WALruCache",["WAErr","WALogger","WAShiftTimer"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Blob size is larger than the limit of the whole store."]);h=function(){return a};return a}var i=function(a,b){this.key=a,this.value=b,this.prev=null,this.next=null};a=function(){function a(a){var b=this,e;this.$2=new Map();this.purgeNow=function(){for(var a=b.$6.prev;b.$4>b.$3&&a!==b.$5;a=a?a.prev:null){if(a==null)throw c("WAErr")("The linked list is not constructed properly.");var d=a,e=d.key;d=d.value;if(!b.$9(e,d))continue;b["delete"](e);b.$10&&b.$10(e,d)}b.$8&&b.$8(b.$2)};this.$3=a.sizeLimit;this.$7=a.getSize;this.$8=a.onPurge;this.$9=(e=a.shouldEvict)!=null?e:function(){return!0};this.$10=a.onEvict;this.$11=a.onAdd;this.$12=a.onDelete;this.$4=0;this.$5=new i("placeholder-head",null);this.$6=new i("placeholder-tail",null);this.$5.next=this.$6;this.$6.prev=this.$5;this.$1=new(d("WAShiftTimer").ShiftTimer)(function(){return b.purgeNow()})}var b=a.prototype;b.get=function(a){if(!this.$2.has(a))return null;a=this.$2.get(a);if(a==null)return null;var b=a.prev,d=a.next;b&&(b.next=d);d&&(d.prev=b);d=this.$5.next;if(d==null)throw c("WAErr")("The linked list is not constructed properly.");this.$5.next=a;d.prev=a;a.prev=this.$5;a.next=d;return a.value};b.has=function(a){return this.$2.has(a)};b.touch=function(a){this.get(a)};b.put=function(a,b){if(this.$3===0)return;if(this.$7(b)>this.$3){d("WALogger").WARN(h());return}this["delete"](a);this.$14(a,b);this.schedulePurge()};b.$14=function(a,b){var d=new i(a,b);this.$2.set(a,d);var e=this.$5.next;if(e==null)throw c("WAErr")("The linked list is not constructed properly.");this.$5.next=d;e.prev=d;d.prev=this.$5;d.next=e;this.$4+=this.$7(b);this.$11&&this.$11(a,b)};b["delete"]=function(a){if(!this.$2.has(a))return;var b=this.$2.get(a);if(b==null)return;this.$4-=this.$7(b.value);var c=b.prev,d=b.next;c&&(c.next=d);d&&(d.prev=c);this.$2["delete"](a);this.$12&&this.$12(a,b.value)};b.clear=function(){this.$2.clear(),this.$4=0,this.$5.next=this.$6,this.$6.prev=this.$5,this.$13&&this.$13()};b.schedulePurge=function(){this.$1.onOrBefore(1e3)};b.getCurrentSize=function(){return this.$4};b.getPlaceholderHead=function(){return this.$5};return a}();g.LruCache=a}),98);
__d("WAFtsGenBlindIndex",["WABase64","WACryptoDependencies","WALruCache","WATextEncoding","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("WALruCache").LruCache)({sizeLimit:5e4,getSize:function(){return 1}}),i=!1;function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(i)return a;a=(yield k(a,b));return d("WABase64").encodeB64(a)});return j.apply(this,arguments)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=h.get(a);if(c!=null)return c;c=d("WATextEncoding").newTextEncoder().encode(a);b=(yield d("WACryptoDependencies").getCrypto().subtle.sign({name:"HMAC",hash:"SHA-256"},b,c));h.put(a,b);return b});return l.apply(this,arguments)}g.genBlindIndex=a;g.genBlindIndexBuffer=k}),98);
__d("WAFtsConstants",[],(function(a,b,c,d,e,f){"use strict";a=2;f.FTS_MIN_CHARS=a}),66);
__d("WAFtsWWWCompatibleCompiledRegex",[],(function(a,b,c,d,e,f){"use strict";a=/(?!(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]))(?:[#\\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299\uFE0E\uFE0F]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])/;b=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\u3400-\u4DBF\u4E00-\u9FFC\uF900-\uFA6D\uFA70-\uFAD9\uFF66-\uFF6F\uFF71-\uFF9D]|\uD81B[\uDFF0\uDFF1]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67]|\uD83C\uDE00|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/;f.CONTAINS_EMOJI_REGEX=a;f.CONTAINS_HAN_OR_KANA_SCRIPT_REGEX=b}),66);
__d("WAStringz",[],(function(a,b,c,d,e,f){"use strict";var g=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g;function a(a){a=a.match(g);return a?a.length:0}function b(a,b,c){b===void 0&&(b=0);a=a.match(g);return!a?"":a.slice(Math.max(0,b),Math.max(0,c)).join("")}function c(a){return a.match(g)||[]}f.astralRange=g;f.length=a;f.substring=b;f.toArray=c}),66);
__d("WAUnicodeUtils",["WAStringz"],(function(a,b,c,d,e,f,g){"use strict";var h=5e3,i=.5;function a(a,b){return j(a||"",0,b)}function b(a){return d("WAStringz").length(a||"")}function j(a,b,c){if(a==null||a==="")return"";b=b||0;c=c==null?Infinity:c;if(b===0&&c===Infinity)return a;return a.length>=h&&c/a.length<=i?l(a,b,c):d("WAStringz").substring(a,b,c)}function k(a,b,c){a=a||"";b=b||0;c=c==null?Infinity:c;return a.length>=h&&c/a.length<=i?m(a,b,c):d("WAStringz").toArray(a).slice(b,c)}function c(a,b){b===void 0&&(b=0);if(a.codePointAt)return a.codePointAt(b);var c=a.charCodeAt(b);if(c>=55296&&c<=56319){a=a.charCodeAt(b+1);a>=56320&&a<=57343&&(c=65536+(c-55296<<10)+(a-56320))}return c}function e(a,b){if(b==null)return a;if(encodeURI(a).length<=b)return a;var c=0,d=k(a),e=d.length;for(var f=0;f<e;f++){var g=d[f];g=encodeURI(g).length;if(c+g>b)return j(a,0,f);c+=g}return a}function l(a,b,c){b=new RegExp(d("WAStringz").astralRange);var e="",f,g=0;do f=b.exec(a),f&&(e+=f[0]),g++;while(f&&g<c);return e}function m(a,b,c){b=new RegExp(d("WAStringz").astralRange);var e=[],f;do f=b.exec(a),f&&e.push(f[0]);while(f&&e.length<c);return e}g.firstNCodepoints=a;g.numCodepoints=b;g.substring=j;g.toArray=k;g.codePointAt=c;g.firstNEncodedBytes=e}),98);
__d("WAFtsIsSearchQueryEligibleForMessageSearch",["WAFtsConstants","WAFtsWWWCompatibleCompiledRegex","WAUnicodeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.trim().normalize("NFKD");if(d("WAUnicodeUtils").numCodepoints(a)>=d("WAFtsConstants").FTS_MIN_CHARS)return!0;if(d("WAFtsWWWCompatibleCompiledRegex").CONTAINS_EMOJI_REGEX.test(a))return!0;return d("WAFtsWWWCompatibleCompiledRegex").CONTAINS_HAN_OR_KANA_SCRIPT_REGEX.test(a)?!0:!1}g["default"]=a}),98);
__d("WAFtsV3BlindIndexGenerator",["Promise","WAArrayBufferUtils","WACryptoDependencies","WAFtsGenBlindIndex","WAFtsIsSearchQueryEligibleForMessageSearch","WALruCache","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=256/8,j=3;a=function(){function a(a,b,c){b===void 0&&(b=i),c===void 0&&(c=j),this.$1=new(d("WALruCache").LruCache)({sizeLimit:5e4,getSize:function(a){return a.length}}),this.$2=new(d("WALruCache").LruCache)({sizeLimit:1e3,getSize:function(){return 1}}),this.keyGenFn=a,this.blindIndexByteLength=b,this.$3=c}var e=a.prototype;e.generateForToken=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield this.$4(a));return this.$5(a,b)});function c(b,c){return a.apply(this,arguments)}return c}();e.generatePrefixes=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=this,g=[],i=this.$1.get(a);if(i!=null)g=i;else{for(i=0;i<a.length;++i){var j=a.slice(0,i+1);if(i===0&&!c("WAFtsIsSearchQueryEligibleForMessageSearch")(j))continue;else g.push(yield d("WAFtsGenBlindIndex").genBlindIndexBuffer(j,this.keyGenFn()))}this.$1.put(a,g)}return(h||(h=b("Promise"))).all(g.map(function(a){return f.$5(a,e)}))});function e(b,c){return a.apply(this,arguments)}return e}();e.generateBoundsForToken=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield this.$4(a));var c=new Uint8Array(this.blindIndexByteLength).fill(0),d=new Uint8Array(this.blindIndexByteLength).fill(255);return(h||(h=b("Promise"))).all([this.$5(a,c),this.$5(a,d)])});function c(b){return a.apply(this,arguments)}return c}();e.$4=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this.$1.get(a);b!=null?b=b[b.length-1]:b=(yield d("WAFtsGenBlindIndex").genBlindIndexBuffer(a,this.keyGenFn()));return b});function c(b){return a.apply(this,arguments)}return c}();e.$5=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=a.slice(0,this.blindIndexByteLength);if(b==null)return a;var c;typeof b==="string"?c=new Uint8Array(yield this.$6(b)):c=b;return d("WAArrayBufferUtils").concatBuffers([a.slice(0,this.blindIndexByteLength),c.slice(0,this.$3).buffer])});function c(b,c){return a.apply(this,arguments)}return c}();e.$6=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this.$2.get(a);if(b!=null)return b;b=(yield d("WACryptoDependencies").getCrypto().subtle.digest("SHA-1",d("WAArrayBufferUtils").stringToArrayBuffer(a)));this.$2.put(a,b);return b});function c(b){return a.apply(this,arguments)}return c}();return a}();g["default"]=a}),98);
__d("WAFtsBaseFinder",["Promise","WACustomError"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,c,d){d===void 0&&(d=2e3),this.tokenizer=a,this.messageSource=b,this.tableAdapter=c,this.$1=d}var c=a.prototype;c.find=function(a,c){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("purge"))};c.invalidateCache=function(a){throw new(d("WACustomError").UnimplementedMethod)("purge")};c.invalidateAllCaches=function(){throw new(d("WACustomError").UnimplementedMethod)("purge")};return a}();g["default"]=a}),98);
__d("WAFtsSearchResultComparator",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){a=a.timestamp;b=b.timestamp;return b-a};b=a;f["default"]=b}),66);
__d("WAFtsV3Finder",["WAArrayBufferUtils","WAFtsBaseFinder","WAFtsIsSearchQueryEligibleForMessageSearch","WAFtsSearchResultComparator","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=200,i=function(){return{eof:!0,messages:[],status:404}};a=function(a){babelHelpers.inheritsLoose(e,a);function e(b,c,d,e,f){f===void 0&&(f=2e3);b=a.call(this,b,c,d,f)||this;b.blindIndexGenerator=e;return b}var f=e.prototype;f.find=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b={});a=Array.from(this.tokenizer.tokenize(a)).filter(function(a){return a.length>1||c("WAFtsIsSearchQueryEligibleForMessageSearch")(a)}).sort(function(a,b){return b.length-a.length});var d=!1,e=b.remote,f=[];if(a.length===0)d=!0;else{var g=a[0];if(e!=null)f=(yield this.tableAdapter.bulkGetAnyOf(["prefixes"],[yield this.blindIndexGenerator.generateForToken(g,e)])),f=f.filter(function(a){return a.chatId===e});else{g=(yield this.blindIndexGenerator.generateBoundsForToken(g));var h=g[0];g=g[1];f=(yield this.tableAdapter.between(["prefixes"],h,g,{lowerInclusive:!0,upperInclusive:!0}))}for(h=1;h<a.length;h++){f=(yield this.$FtsMessageFinder1(a[h],f,e));if(f.length===0){d=!0;break}}if(!d)for(g=0;g<a.length;g++)if(a[g].length>2){f=(yield this.$FtsMessageFinder1(a[g].slice(0,a[g].length-1),f,e));if(f.length===0){d=!0;break}}}if(d)return i();h=f.map(function(b){var c=b.id,a=b.chatId;b=b.timestamp;return{id:c,chatId:a,timestamp:b}}).sort(c("WAFtsSearchResultComparator"));return this.$FtsMessageFinder2(h,b)});function d(b,c){return a.apply(this,arguments)}return d}();f.$FtsMessageFinder1=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=this;if(c!=null){var f=(yield this.blindIndexGenerator.generateForToken(a,c));return b.filter(function(a){return a.prefixes.some(function(a){return d("WAArrayBufferUtils").arrayBuffersEqualUNSAFE(a,f)})})}else{var g=(yield this.blindIndexGenerator.generateForToken(a));return b.filter(function(a){return a.prefixes.some(function(a){return d("WAArrayBufferUtils").arrayBuffersEqualUNSAFE(a.slice(0,e.blindIndexGenerator.blindIndexByteLength),g)})})}});function c(b,c,d){return a.apply(this,arguments)}return c}();f.$FtsMessageFinder2=function(a,b){var c=b.page;c=c===void 0?1:c;b=b.limit;b=b===void 0?h:b;c=(c-1)*b||0;b=c+b;var d=b>=a.length;a=a.slice(c,b);return{messages:a,eof:d,status:200}};return e}(c("WAFtsBaseFinder"));g["default"]=a}),98);
__d("WAFtsV3IndexEntry",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){return{id:a,chatId:b,timestamp:c,prefixes:d}}function b(a,b,c,d,e){return{ftsRowId:a,id:b,chatId:c,timestamp:d,prefixes:e}}f.buildEntry=a;f.buildDBEntry=b}),66);
__d("WAFtsV3Indexer",["Promise","WAArrayChunk","WAFtsBaseIndexer","WAFtsV3BlindIndexGenerator","WAFtsV3Finder","WAFtsV3IndexEntry","WALogger","WAPromiseDelays","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to write message with id "," to FTS index"]);i=function(){return a};return a}var j=1e3,k=1e3,l=8,m=1e3;a=function(a){babelHelpers.inheritsLoose(e,a);function e(b,d,e,f,g,h,i){var n;f===void 0&&(f=l);g===void 0&&(g=k);h===void 0&&(h=j);i===void 0&&(i=m);n=a.call(this,b,d,e,g)||this;n.$BlindIndicesBasedIndexer2=0;n.$BlindIndicesBasedIndexer3=h;n.$BlindIndicesBasedIndexer1=new(c("WAFtsV3BlindIndexGenerator"))(function(){return n.tableAdapter.getKey()},f);n.$BlindIndicesBasedIndexer4=i;n.finder=new(c("WAFtsV3Finder"))(b,d,e,n.$BlindIndicesBasedIndexer1);return n}var f=e.prototype;f.$BlindIndicesBasedIndexer5=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{yield this.tableAdapter.bulkPut(a),this.$BlindIndicesBasedIndexer2++}catch(b){d("WALogger").ERROR(i(),a[0].id);throw b}finally{this.$BlindIndicesBasedIndexer2>0&&this.$BlindIndicesBasedIndexer2%20===0&&(yield d("WAPromiseDelays").delayMs(this.$BlindIndicesBasedIndexer4))}});function c(b){return a.apply(this,arguments)}return c}();f.__processBatch=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this,e=function*(a){var e=a.id,f=a.textFragments,g=a.chatId,i=a.timestamp;a=Array.from(c.tokenizer.tokenize(f.join(" ")));f=(yield (h||(h=b("Promise"))).all(a.map(function(a){return c.$BlindIndicesBasedIndexer1.generatePrefixes(a,g)})));a=d("WAArrayChunk").chunk(f.flat(),c.$BlindIndicesBasedIndexer3);f=a.map(function(a){return d("WAFtsV3IndexEntry").buildEntry(e,g,i,a)});yield c.$BlindIndicesBasedIndexer5(f)};for(a of a)yield* e(a)});function c(b){return a.apply(this,arguments)}return c}();f.purge=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.tableAdapter.bulkRemoveByIndex(["id"],a);return!0});function c(b){return a.apply(this,arguments)}return c}();f.purgeChat=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.tableAdapter.bulkRemoveByIndex(["chatId"],[a]);return!0});function c(b){return a.apply(this,arguments)}return c}();f.purge__DEPRECATED_DO_NOT_USE=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield this.tableAdapter.bulkRemoveByIndex(["chatId"],[a]);return!0});function c(b,c,d){return a.apply(this,arguments)}return c}();return e}(c("WAFtsBaseIndexer"));g["default"]=a}),98);
__d("MAWFTSVersionsInformation",["MAWMessageIndexerFtsIndexTableAdapter","MAWMessageIndexerMessageSource","MAWMessageSearchFTSKeyUtil","MAWMessageSearchSignaller","Promise","WAFtsMultiLangTokenizer","WAFtsV3Indexer","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new(c("MAWMessageIndexerMessageSource"))();a={indexers:{3.6:function(a){return d("MAWMessageSearchFTSKeyUtil").fetchOrGenerateFTSCryptoKey().then(function(b){b=new(c("WAFtsV3Indexer"))(a,c("nullthrows")(i),new(c("MAWMessageIndexerFtsIndexTableAdapter"))(b),6,500,1e3,200);b.setSignaller(new(c("MAWMessageSearchSignaller"))());return b})}},tokenizers:{1:function(){return(h||(h=b("Promise"))).resolve(new(c("WAFtsMultiLangTokenizer"))())}}};e="3.6";f=!0;var j="1";g.VERSIONS_INFO=a;g.LATEST_INDEXER_VERSION=e;g.SHOULD_DROP_OLDER_VERSION=f;g.LATEST_TOKENIZER_VERSION=j}),98);
__d("MAWDbFTSManifest",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CURR_VERSION:"curr.version",NEXT_VERSION:"next.version",PREV_VERSION:"prev.version"});f.ManifestKeys=a}),66);
__d("MAWMessageSearchManifestReader",["FBLogger","MAWDbFTSManifest","MAWFTSIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.versions=function(){return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsManifest:d("MAWTransactionMode").READONLY},function(a){return function(){return a.ftsManifest.toArray().then(function(a){var b=new Map();for(var a=a,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;var h={isCurrent:g.key===d("MAWDbFTSManifest").ManifestKeys.CURR_VERSION,isFullIndexingComplete:g.isFullIndexingComplete,lastMsgKeyViaFullIndexer:g.lastMsgKeyViaFullIndexer,schemaVersion:g.schemaVersion,tokenizerVersion:g.tokenizerVersion};b.set(g.key,h)}g=b.get(d("MAWDbFTSManifest").ManifestKeys.CURR_VERSION);if(g==null)throw c("FBLogger")("messenger_search_fts").mustfixThrow("current version is missing from manifest table");return{current:g,next:b.get(d("MAWDbFTSManifest").ManifestKeys.NEXT_VERSION),previous:b.get(d("MAWDbFTSManifest").ManifestKeys.PREV_VERSION)}})}})()};return a}();g["default"]=a}),98);
__d("MAWMessageSearchManifestWriter",["FBLogger","MAWDbFTSManifest","MAWFTSIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";var h={3.1:["3"]},i="-1";function j(a,b,c,d){return a!==c&&!((c=h[c])==null?void 0:c.includes(a))||b!==d}var k=function(a,b){return a.ftsManifest.get(b).then(function(c){return c==null?a.ftsManifest.put({isCurrent:b===d("MAWDbFTSManifest").ManifestKeys.CURR_VERSION,isFullIndexingComplete:!0,key:b,lastMsgKeyViaFullIndexer:i,schemaVersion:"",tokenizerVersion:""}).then(function(){}):a.ftsManifest.update(b,{isCurrent:b===d("MAWDbFTSManifest").ManifestKeys.CURR_VERSION,isFullIndexingComplete:!0}).then(function(){})})},l=function(a){return a.ftsManifest.bulkGet([d("MAWDbFTSManifest").ManifestKeys.CURR_VERSION,d("MAWDbFTSManifest").ManifestKeys.NEXT_VERSION]).then(function(b){var e=b[0];b=b[1];var f=[];e!=null&&f.push(babelHelpers["extends"]({},e,{isCurrent:!1,key:d("MAWDbFTSManifest").ManifestKeys.PREV_VERSION}));b!=null&&f.push(babelHelpers["extends"]({},b,{isCurrent:!0,key:d("MAWDbFTSManifest").ManifestKeys.CURR_VERSION}));c("FBLogger")("fts_manifest_writer").info("Upgraded schema version from [%s, %s] to [%s, %s]",e==null?void 0:e.schemaVersion,e==null?void 0:e.tokenizerVersion,b==null?void 0:b.schemaVersion,b==null?void 0:b.tokenizerVersion);return a.ftsManifest.bulkPut(f)}).then(function(){a.ftsManifest["delete"](d("MAWDbFTSManifest").ManifestKeys.NEXT_VERSION)})},m=function(a,b,c){return a.ftsManifest.get(b).then(function(e){return e==null?a.ftsManifest.put({isCurrent:b===d("MAWDbFTSManifest").ManifestKeys.CURR_VERSION,isFullIndexingComplete:!0,key:b,lastMsgKeyViaFullIndexer:c,schemaVersion:"",tokenizerVersion:""}).then(function(){}):a.ftsManifest.update(b,{isCurrent:b===d("MAWDbFTSManifest").ManifestKeys.CURR_VERSION,lastMsgKeyViaFullIndexer:c}).then(function(){})})},n=function(a,b,e){return a.ftsManifest.get(d("MAWDbFTSManifest").ManifestKeys.CURR_VERSION).then(function(f){if(f==null)return a.ftsManifest.put({isCurrent:!0,isFullIndexingComplete:!1,key:d("MAWDbFTSManifest").ManifestKeys.CURR_VERSION,lastMsgKeyViaFullIndexer:i,schemaVersion:b,tokenizerVersion:e}).then(function(){c("FBLogger")("fts_manifest_writer").info("Set current version to [%s, %s]",b,e)});else if(j(f.schemaVersion,f.tokenizerVersion,b,e))return a.ftsManifest.get(d("MAWDbFTSManifest").ManifestKeys.NEXT_VERSION).then(function(f){if(f==null||f.schemaVersion!==b||f.tokenizerVersion!==e)return a.ftsManifest.put({isCurrent:!1,isFullIndexingComplete:!1,key:d("MAWDbFTSManifest").ManifestKeys.NEXT_VERSION,lastMsgKeyViaFullIndexer:i,schemaVersion:b,tokenizerVersion:e}).then(function(){c("FBLogger")("fts_manifest_writer").info("Next version set to [%s, %s]",b,e)});else c("FBLogger")("fts_manifest_writer").info("No changes made as next version is already set to [%s, %s]",b,e)});else c("FBLogger")("fts_manifest_writer").info("FTS:Manifest Writer: No changes made, current:[%s, %s], latest:[%s, %s]",f.schemaVersion,f.tokenizerVersion,b,e)})};a=function(){function a(){}var b=a.prototype;b.setLatestVersion=function(a,b){return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsManifest:d("MAWTransactionMode").READWRITE},function(c){return function(){return n(c,a,b)}})()};b.upgradeVersion=function(){return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsManifest:d("MAWTransactionMode").READWRITE},function(a){return function(){return l(a)}})()};b.markFullIndexingComplete=function(a){return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsManifest:d("MAWTransactionMode").READWRITE},function(b){return function(){return k(b,a?d("MAWDbFTSManifest").ManifestKeys.CURR_VERSION:d("MAWDbFTSManifest").ManifestKeys.NEXT_VERSION)}})()};b.updateLastFullIndexBatch=function(a,b){return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsManifest:d("MAWTransactionMode").READWRITE},function(c){return function(){return m(c,a?d("MAWDbFTSManifest").ManifestKeys.CURR_VERSION:d("MAWDbFTSManifest").ManifestKeys.NEXT_VERSION,b)}})()};return a}();g["default"]=a}),98);
__d("WAFtsIndexerSelector",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(a){this.$1=new Map(),this.versionsInfo=a}var c=a.prototype;c.$2=function(a,b,c){var d;d=(d=this.$1.get(a))!=null?d:new Map();this.$1.get(a)==null&&this.$1.set(a,d);d.set(b,c)};c.$3=function(a,b){return(a=this.$1.get(a))==null?void 0:a.get(b)};c.select=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null)return(g||(g=b("Promise"))).resolve(null);var c=this.$3(a.schemaVersion,a.tokenizerVersion),d=this.versionsInfo,e=d.indexers;d=d.tokenizers;if(c==null&&d[a.tokenizerVersion]&&e[a.schemaVersion]){d=(yield d[a.tokenizerVersion]());c=(yield e[a.schemaVersion](d));c!=null&&this.$2(a.schemaVersion,a.tokenizerVersion,c)}return(g||(g=b("Promise"))).resolve(c)});function c(b){return a.apply(this,arguments)}return c}();return a}();f["default"]=a}),66);
__d("WAFtsBaseOrchestrator",["Promise","WACustomError","WAFtsIndexerSelector","WANullthrows","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,d){this.$3=new(c("WAFtsIndexerSelector"))(d),this.$2=a,this.$1=b}var e=a.prototype;e.__initVersions=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!1);(this.$4==null||a)&&(this.$4=(yield this.$2.versions()));return this.$4});function c(b){return a.apply(this,arguments)}return c}();e.__handleFullIndexerProgress=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d,e){d!=null&&(yield this.$1.updateLastFullIndexBatch(a,d));if(b===1){yield this.$1.markFullIndexingComplete(a);if(!a){yield this.$1.upgradeVersion();yield this.__initVersions(!0);a=(yield this.$3.select(c("WANullthrows")(this.$4).previous));yield c("WANullthrows")(a).eraseIndex()}}e&&(yield e(b,d))});function d(b,c,d,e){return a.apply(this,arguments)}return d}();e.__startFullIndexingForVersion=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var d=this;if(a==null)return(h||(h=b("Promise"))).resolve([]);var e=a.isCurrent,f=a.lastMsgKeyViaFullIndexer;a=a.isFullIndexingComplete;if(!a){a=(yield this.__getIndexer(e));if(a)return a.full(function(a,b){return d.__handleFullIndexerProgress(e,a,b,c)},f)}else e||this.__handleFullIndexerProgress(!1,1,null,null);return(h||(h=b("Promise"))).resolve([])});function c(b,c){return a.apply(this,arguments)}return c}();e.__getIndexer=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!0);yield this.__initVersions();return a?this.$3.select(c("WANullthrows")(this.$4).current):this.$3.select(c("WANullthrows")(this.$4).next)});function d(b){return a.apply(this,arguments)}return d}();e.purge=function(a){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("purge"))};e.purge__DEPRECATED_DO_NOT_USE=function(a,c,e){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("purge"))};e.purgeChat=function(a){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("purge"))};e.search=function(a,c){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("search"))};e.incremental=function(a){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("incremental"))};e.full=function(a,c){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("full"))};return a}();g["default"]=a}),98);
__d("WAFtsQuickSwitchOrchestrator",["Promise","WAFtsBaseOrchestrator","WAFtsSearchResultComparator","WANullthrows","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){return{eof:!0,messages:[],status:200}};function j(a,b){return function(c){return a.getMessageSource().removeFromBacklog(c).then(function(){if(b)return b(c)})}}a=function(a){babelHelpers.inheritsLoose(d,a);function d(){return a.apply(this,arguments)||this}var e=d.prototype;e.purge=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield (h||(h=b("Promise"))).all([this.__getIndexer(!0),this.__getIndexer(!1)])),d=c[0];c=c[1];return h.all([(d=d==null?void 0:d.purge(a))!=null?d:!1,(d=c==null?void 0:c.purge(a))!=null?d:!0]).then(function(a){var b=a[0];a=a[1];return Boolean(b)&&a})});function c(b){return a.apply(this,arguments)}return c}();e.purge__DEPRECATED_DO_NOT_USE=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d){var e=(yield (h||(h=b("Promise"))).all([this.__getIndexer(!0),this.__getIndexer(!1)])),f=e[0];e=e[1];return h.all([(f=f==null?void 0:f.purge__DEPRECATED_DO_NOT_USE(a,c,d))!=null?f:!1,(f=e==null?void 0:e.purge__DEPRECATED_DO_NOT_USE(a,c,d))!=null?f:!0]).then(function(a){var b=a[0];a=a[1];return Boolean(b)&&a})});function c(b,c,d){return a.apply(this,arguments)}return c}();e.purgeChat=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield (h||(h=b("Promise"))).all([this.__getIndexer(!0),this.__getIndexer(!1)])),d=c[0];c=c[1];return h.all([(d=d==null?void 0:d.purgeChat(a))!=null?d:!1,(d=c==null?void 0:c.purgeChat(a))!=null?d:!0]).then(function(a){var b=a[0];a=a[1];return Boolean(b)&&a})});function c(b){return a.apply(this,arguments)}return c}();e.search=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d){var e=(yield (h||(h=b("Promise"))).all([this.__getIndexer(!0),this.__getIndexer(!1)])),f=e[0];e=e[1];e=(yield h.all([(f=f==null?void 0:f.search(a,d))!=null?f:i(),(f=e==null?void 0:e.search(a,d))!=null?f:i()]));a=e[0];d=e[1];f=[].concat(a.messages,d.messages);var g=new Set();if(f.length>0){var j=[];f.forEach(function(a){var b=a.id,c=a.chatId;b=b+","+c;g.has(b)||(j.push(a),g.add(b))});e=j.sort(c("WAFtsSearchResultComparator"));return{eof:a.eof&&d.eof,messages:e,status:200}}return i()});function d(b,c){return a.apply(this,arguments)}return d}();e.incremental=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var d=(yield (h||(h=b("Promise"))).all([this.__getIndexer(!0),this.__getIndexer(!1)])),e=d[0];d=d[1];d=c("WANullthrows")((d=d)!=null?d:e);e=j(d,a);return d.incremental(e)});function d(b){return a.apply(this,arguments)}return d}();e.full=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield this.__initVersions());if(b.next!=null)return this.__startFullIndexingForVersion(b.next,a);else return this.__startFullIndexingForVersion(b.current,a)});function c(b,c){return a.apply(this,arguments)}return c}();return d}(c("WAFtsBaseOrchestrator"));g["default"]=a}),98);
__d("MAWFTSWorker",["FBLogger","MAWDexieTable","MAWFTSIndexedDb","MAWFTSVersionsInformation","MAWIndexedDb","MAWMessageSearchManifestReader","MAWMessageSearchManifestWriter","MAWQplProxy","MAWTransactionMode","MAWTransactor","WAFtsQuickSwitchOrchestrator","WAJids","WAStanzaUtils","asyncToGeneratorRuntime","isWAFTSContentSearchEnabled","justknobx","nullthrows","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=c("isWAFTSContentSearchEnabled")(),i=c("justknobx")._("2608"),j=function(){var e=a.prototype;e.setEphemeralBacklog=function(a){this.$9=a};e.getEphemeralBacklog=function(){return this.$9};e.clearEphemeralBacklog=function(){this.$9=[]};a.getInstance=function(){var b=a.instance;if(b!=null)return b;b=new a();a.instance=b;return b};a.resetInstance=function(){a.instance=null};function a(){this.$1=!1,this.$2=!1,this.$3=null,this.$4=null,this.$5=null,this.$6=!1,this.$7=[],this.$8=[],this.$9=[],c("FBLogger")("fts_worker").info("New MAWFTSWorker instance")}e.shouldTerminateAll=function(){return this.$6};e.forceTerminate=function(){this.$6=!0};e.registerIncrementalIndexCallback=function(a){this.$7.push(a)};e.registerFullIndexCallback=function(a){this.$8.push(a)};e.isInitiated=function(){return this.$1};e.performInit=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!h||this.$1||this.$2)return;this.$2=!0;try{yield this.$10(),this.$1=!0}catch(a){c("FBLogger")("fts_worker").catching(a).mustfix("Failed to initialize FTS worker")}finally{this.$2=!1}});function d(){return a.apply(this,arguments)}return d}();e.dropPreviousIndexingData=function(){return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsIndexV3:d("MAWTransactionMode").READWRITE,ftsRestoreStatus:d("MAWTransactionMode").READWRITE},function(a){return function(){return a.ftsIndexV3.clear().then(function(){return a.ftsRestoreStatus.clear()})}})()};e.deleteThreadFromIndex=function(a){return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsIndexV3:d("MAWTransactionMode").READWRITE},function(b){return function(){return b.ftsIndexV3.where("chatId").anyOf(a)["delete"]().then(function(){})}})()};e.cleanUpPurgeBacklog=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;a=(yield d("MAWTransactor").makeMsgrTransactor({ftsPurgeBacklog:(a=d("MAWTransactionMode")).READONLY,ftsPurgeThreadBacklog:a.READONLY},"search",function(a){return function(){return d("MAWDexieTable").dexieAll([a.ftsPurgeBacklog.toArray(),a.ftsPurgeThreadBacklog.toArray()])}})());var b=a[0];a=a[1];var e=b.map(function(a){a=a.externalId;return a}),f=a.map(function(a){a=a.chatJid;return a});try{yield this.deleteMessagesFromIndex(e),yield this.deleteThreadFromIndex(f)}catch(a){c("FBLogger")("fts_worker").catching(a).mustfix("Failed to delete messages from FTS index");return}yield d("MAWTransactor").makeMsgrTransactor({ftsPurgeBacklog:d("MAWTransactionMode").READWRITE,ftsPurgeThreadBacklog:d("MAWTransactionMode").READWRITE},"search",function(a){return function(){return d("MAWDexieTable").dexieAll([a.ftsPurgeBacklog.bulkDelete(e),a.ftsPurgeThreadBacklog.bulkDelete(f)])}})()});function e(){return a.apply(this,arguments)}return e}();e.deleteMessagesFromIndex=function(a){return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsIndexV3:d("MAWTransactionMode").READWRITE},function(b){return function(){return b.ftsIndexV3.where("id").anyOf(a)["delete"]().then(function(){d("MAWIndexedDb").afterTransaction({tag:"RemoveMessageSearchResult",value:a})})}})()};e.$10=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=new(c("MAWMessageSearchManifestWriter"))(),b=new(c("MAWMessageSearchManifestReader"))();this.$4=a;this.$5=b;var e=!1;try{var f,g=(yield b.versions());e=g.current.schemaVersion!==d("MAWFTSVersionsInformation").LATEST_INDEXER_VERSION&&((f=g.next)==null?void 0:f.schemaVersion)!==d("MAWFTSVersionsInformation").LATEST_INDEXER_VERSION&&((f=g.previous)==null?void 0:f.schemaVersion)!==d("MAWFTSVersionsInformation").LATEST_INDEXER_VERSION&&d("MAWFTSVersionsInformation").SHOULD_DROP_OLDER_VERSION}catch(a){}e&&(yield this.dropPreviousIndexingData());yield a.setLatestVersion(d("MAWFTSVersionsInformation").LATEST_INDEXER_VERSION,d("MAWFTSVersionsInformation").LATEST_TOKENIZER_VERSION);this.$3=new(c("WAFtsQuickSwitchOrchestrator"))(b,a,d("MAWFTSVersionsInformation").VERSIONS_INFO)});function e(){return a.apply(this,arguments)}return e}();e.index=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=this,f=a.estimatedNumMessages;a=a.type;if(!h)return;f=d("MAWQplProxy").startQplUserFlow(c("qpl")._(25304096,"2398"),{"int":{estimatedNumMessages:f},string:{type:a}});f.addPoint("cleaning_backlog_start");yield this.cleanUpPurgeBacklog();f.addPoint("cleaning_backlog_end");a=c("nullthrows")(this.$3);var g=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){for(var b of e.$7)yield b(a)});return function(b){return a.apply(this,arguments)}}();yield a.incremental(g);f.endSuccess()});function e(b){return a.apply(this,arguments)}return e}();e.indexFull=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this;if(!h)return;var e=d("MAWQplProxy").startQplUserFlow(c("qpl")._(25309398,"2399"),void 0,void 0,i),f=c("nullthrows")(this.$3),g=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){e.addPoint("progress",{"double":{progress:b}});b===1&&e.endSuccess();for(var d of a.$8)yield d(b,c)});return function(a,b){return c.apply(this,arguments)}}();yield f.full(g)});function e(){return a.apply(this,arguments)}return e}();e.search=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=c("nullthrows")(this.$3);e=(yield e.search(a,b));if(e.status!==200){c("FBLogger")("maw_fts_worker").mustfix("WA FTS returns with bad status code");return[[],[]]}var f=e.messages.map(function(a){return d("WAStanzaUtils").toStanzaId(a.id)});a=(yield d("MAWTransactor").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY},"search",function(a){return function(){return a.messages.where("externalId").anyOf(f).toArray()}})());b=a.filter(Boolean).sort(function(a,b){return((a=a.sortOrderMs)!=null?a:0)-((a=b.sortOrderMs)!=null?a:0)});var g=b.map(function(a){return a.externalId});k(g);a=e.messages.filter(function(a){a=a.id;return!g.includes(a)}).map(function(a){return{chatJid:d("WAJids").unsafeCoerceToChatJid(a.chatId),externalId:a.id,sortOrderMs:a.timestamp}});return[b,a]});function e(b,c){return a.apply(this,arguments)}return e}();return a}();j.instance=null;function k(a){a=a.toSorted();var b=new Set();for(var d=1;d<a.length;d++)a[d]===a[d-1]&&!b.has(a[d])&&(c("FBLogger")("messenger_web_search_messages").warn("duplicate MAW msg returned for externalId",a[d]),b.add(a[d]))}function a(){return j.getInstance()}function e(){j.resetInstance()}function f(){return j.getInstance().isInitiated()}g.getFTSWorker=a;g.resetFTSWorker=e;g.isFTSInitiated=f}),98);
__d("getDexieCollectionFromRetrievalOptions",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=b==null?void 0:b.offset;b=b==null?void 0:b.limit;a=a;d!=null&&b!=null&&d>0&&c("FBLogger")("message_search").mustfix("offset and limit cannot be used together in getDexieCollectionFromRetrievalOptions");d!=null&&(a=a.offset(d));b!=null&&(a=a.limit(b));return a}g["default"]=a}),98);
__d("MAWMessageIndexerMessageSource",["FBLogger","MAWFTSIndexedDb","MAWFTSIsMessageValidForSearch","MAWFTSWorker","MAWIndexedDb","MAWTransactionMode","MAWVault","Promise","WAStanzaUtils","asyncToGeneratorRuntime","getDexieCollectionFromRetrievalOptions"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return d("MAWIndexedDb").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY},"_getMessagesFromExternalIds",function(b){return function(){return b.messages.where("externalId").anyOf(a).toArray()}})()}function j(a){return(h||(h=b("Promise"))).all([d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsBackloggedMessages:d("MAWTransactionMode").READWRITE},function(b){return function(){return c("getDexieCollectionFromRetrievalOptions")(b.ftsBackloggedMessages.toCollection(),a).toArray()}})(),d("MAWIndexedDb").makeMsgrTransactor({ftsBackloggedMessages:d("MAWTransactionMode").READONLY},"_getAllBackloggedMessages",function(b){return function(){return c("getDexieCollectionFromRetrievalOptions")(b.ftsBackloggedMessages.toCollection(),a).toArray()}})()]).then(function(a){var b=a[0];a=a[1];b=b.map(function(a){a=a.externalId;return a}).concat(a.map(function(a){a=a.rowId;return a}));return i(b)})}function k(){return(h||(h=b("Promise"))).all([d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsBackloggedMessages:d("MAWTransactionMode").READONLY},function(a){return function(){return a.ftsBackloggedMessages.toCollection().first().then(function(a){return a!=null})}})(),d("MAWIndexedDb").makeMsgrTransactor({ftsBackloggedMessages:d("MAWTransactionMode").READONLY},"_hasBackloggedMessages",function(a){return function(){return a.ftsBackloggedMessages.toCollection().first().then(function(a){return a!=null})}})()]).then(function(a){var b=a[0];a=a[1];return b||a})}function l(a){return d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsIndexV3:d("MAWTransactionMode").READONLY},function(b){return function(){return b.ftsIndexV3.where("id").anyOf(a).toArray().then(function(a){return a.map(function(a){return a.id})})}})()}function m(a){return(h||(h=b("Promise"))).all([d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsBackloggedMessages:d("MAWTransactionMode").READWRITE},function(b){return function(){return b.ftsBackloggedMessages.where("externalId").anyOf(a.map(d("WAStanzaUtils").toStanzaId))["delete"]()}})(),d("MAWIndexedDb").makeMsgrTransactor({ftsBackloggedMessages:d("MAWTransactionMode").READWRITE},"_removeFromBacklog",function(b){return function(){return b.ftsBackloggedMessages.where("rowId").anyOf(a.map(d("WAStanzaUtils").toStanzaId))["delete"]()}})()]).then(function(){})}function n(a,b){var e=b==null?void 0:b.fromMessageId;return d("MAWIndexedDb").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY},"getMessagesAfterId",function(f){return function(){return f.messages.where("externalId").equals(d("WAStanzaUtils").toStanzaId(e!=null?e:a)).first().then(function(a){if(a==null)return c("getDexieCollectionFromRetrievalOptions")(f.messages.toCollection(),b).toArray();a=a.rowId;return c("getDexieCollectionFromRetrievalOptions")(f.messages.where("rowId").above(a),b).toArray()})}})()}function o(a){var b=a==null?void 0:a.fromMessageId;return b!=null?n(b,a):d("MAWIndexedDb").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY},"getAllMessages",function(b){return function(){return c("getDexieCollectionFromRetrievalOptions")(b.messages.toCollection(),a).toArray()}})()}function p(){return d("MAWIndexedDb").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY},"getSize",function(a){return function(){return a.messages.count()}})()}function q(a){if(a==null)return null;var b=d("MAWFTSIsMessageValidForSearch").verifyMessageValidity(a);if(b==null)return null;var c=a.externalId;a=a.threadJid;var e=b.content;b=b.sortOrderMs;return{chatId:a,id:c,textFragments:[d("MAWVault").unvault(e)],timestamp:b}}function r(a){if(a==null)return a;else{if(a.limit!=null&&a.offset!=null&&a.offset>0){a.fromMessageId==null&&c("FBLogger")("message_search").mustfix("offset and limit cannot be used together");a.offset;var b=babelHelpers.objectWithoutPropertiesLoose(a,["offset"]);return b}return a}}a=function(){function a(){}var c=a.prototype;c.getBacklogged=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=r(a);a=(yield j(a));var b=(yield this.getEphemeralBacklog()),c=[],d=[];for(a of a){var e=q(a);e!=null?c.push(e):d.push(a.externalId)}d.length>0&&(yield m(d));e=c.concat(b);return e.length===0?null:e});function c(b){return a.apply(this,arguments)}return c}();c.getEphemeralBacklog=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("MAWFTSWorker").getFTSWorker().getEphemeralBacklog(),b=(yield l(a.map(function(a){return a.id})));a=a.filter(function(a){return!b.includes(a.id)});d("MAWFTSWorker").getFTSWorker().setEphemeralBacklog(a);return a});function c(){return a.apply(this,arguments)}return c}();c.hasBacklogged=function(){return k()};c.removeFromBacklog=function(a){var b=d("MAWFTSWorker").getFTSWorker().getEphemeralBacklog();d("MAWFTSWorker").getFTSWorker().setEphemeralBacklog(b.filter(function(b){return!a.includes(b.id)}));return m(a)};c.getAllAfterId=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=r(b);if(a==="")return this.getAll(b);a=(yield n(a,b));return a.map(q).filter(Boolean)});function c(b,c){return a.apply(this,arguments)}return c}();c.getAll=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=r(a);a=(yield o(a));return a.map(q).filter(Boolean)});function c(b){return a.apply(this,arguments)}return c}();c.size=function(){return p()};return a}();g["default"]=a}),98);
__d("MAWMessageSearchSignaller",["MAWFTSWorker"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.shouldTerminateAll=function(){var a=d("MAWFTSWorker").getFTSWorker();return a.shouldTerminateAll()};return a}();g["default"]=a}),98);
__d("isSearchEnabled",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("729")===!0}g["default"]=a}),98);
__d("MAWFTSDataSync",["FBLogger","MAWBridgeParticipants","MAWBridgeSearchMsg","MAWBridgeTypesCreators","MAWDataSyncQueue","MAWDexieTable","MAWFTSIndexedDb","MAWFTSWorker","MAWIndexedDb","MAWSharedCOP","MAWSharedCOPLoop","MAWTransactionMode","WAGlobals","asyncToGeneratorRuntime","gkx","isSearchEnabled","isWAFTSContentSearchEnabled","justknobx","minisearch","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=c("justknobx")._("2685"),i=c("justknobx")._("1146");f=c("gkx")("23913");f=f?{fuzzy:.125,prefix:!0}:{fuzzy:.2,prefix:!0};var j=new(c("minisearch"))({fields:["content"],searchOptions:f}),k=new Set(["groupInfo","messages","participants"]),l=new Map();function m(a,b){return a+":"+b}function n(a,b){b.forEach(function(b){b=m(a,b);var c=l.get(b);c&&(j.remove(c),l["delete"](b))})}function o(a){var b=l.get(a.id);b!=null&&(j.remove(b),l["delete"](a.id));l.set(a.id,a);j.add(a)}function p(a){if(a==null)return;var b=a.name;if(b==null)return;b={content:b,id:m("groupInfo",a.groupJid),raw:a,type:"DbGroupInfo"};o(b)}var q=function(a){return a.threads.get({jid:d("WAGlobals").getMyUserJid()}).then(function(b){if(b==null)return;a.participants.get({threadJid:b.jid,userJid:d("WAGlobals").getMyUserJid()}).then(function(a){if(a==null)return})["catch"](function(){c("FBLogger")("maw_db").mustfix("Failed to fetch participant details for e2ee self thread")})})["catch"](function(){c("FBLogger")("maw_db").mustfix("Failed to fetch self e2ee thread from DB")})};function r(a,b){b===void 0&&(b=!1);if(a==null)return;if(a.userJid===d("WAGlobals").getMyUserJid()&&!b)return;b={content:"",id:m("participants",a.id),raw:a,type:"DbParticipant"};o(b)}var s=d("MAWIndexedDb").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY},"FTSGetExternalId",function(a){return function(b){b=u("messages",b);return a.messages.bulkGet(b)}}),t=d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsBackloggedMessages:d("MAWTransactionMode").READWRITE},function(a){return function(b){return d("MAWDexieTable").dexieAll(b.map(function(b){var c=b.externalId;b=b.item;var d=b.value.tableName;if(d!=="messages")return null;d=b.value.key;if(d==null||typeof d!=="number")return null;if(b.type==="delete")return a.ftsBackloggedMessages["delete"](d);if(c==null)return null;return b.type==="add"||b.type==="put"?a.ftsBackloggedMessages.put({externalId:c,rowId:d}):null}).filter(Boolean))}}),u=function(a,b){return b.filter(function(b){return b.value.tableName===a}).map(function(a){return a.value.key})},v=d("MAWIndexedDb").makeMsgrTransactor({groupInfo:d("MAWTransactionMode").READONLY,messages:d("MAWTransactionMode").READONLY,participants:d("MAWTransactionMode").READONLY,threads:d("MAWTransactionMode").READONLY},"FTS",function(a){return function(b){var c=u("groupInfo",b),e=u("participants",b);return d("MAWDexieTable").dexieAll([c.length>0&&a.groupInfo.bulkGet(c).then(function(a){n("groupInfo",c),a.forEach(p)}),e.length>0&&a.participants.bulkGet(e).then(function(a){n("participants",e),a.forEach(function(a){r(a)})})].filter(Boolean))}}),w=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!c("isWAFTSContentSearchEnabled")())return;var e=a.filter(function(a){return a.value.tableName==="messages"});if(e.length===0)return;if(i){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("MAWFTSWorker").getFTSWorker().index({estimatedNumMessages:e.length,type:"LOCAL"})})());return}var f=(yield s(e));yield t(e.map(function(a,b){return{externalId:(b=f[b])==null?void 0:b.externalId,item:a}}));yield d("MAWFTSWorker").getFTSWorker().index({estimatedNumMessages:f.length,type:"LOCAL"})});return function(b){return a.apply(this,arguments)}}(),x=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.filter(function(a){a=a.value;return k.has(a.tableName)});a.length>0&&(yield v(a))});return function(b){return a.apply(this,arguments)}}(),y=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.filter(function(a){a=a.value;return k.has(a.tableName)});a.length>0&&(yield w(a))});return function(b){return a.apply(this,arguments)}}(),z=d("MAWIndexedDb").makeMsgrTransactor({groupInfo:d("MAWTransactionMode").READONLY,messages:d("MAWTransactionMode").READONLY,participants:d("MAWTransactionMode").READONLY,threads:d("MAWTransactionMode").READONLY},"FTS",function(a){return function(){var b=[a.groupInfo.toCollection().reverse().each(p),a.participants.toCollection().each(function(a){if(a==null)return;r(a)}),q(a)].filter(Boolean);return d("MAWDexieTable").dexieAll(b).then(function(){})}});function A(){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("MAWFTSWorker").getFTSWorker();yield a.performInit()});return B.apply(this,arguments)}function a(){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!c("isSearchEnabled")())return!1;var a=c("isWAFTSContentSearchEnabled")();try{a&&(h?c("promiseDone")(d("MAWSharedCOP").getCOP().awaitBackground(d("MAWSharedCOPLoop").makeCopGUID("InitE2EEFullTextSearch"),b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("MAWFTSWorker").getFTSWorker();yield A();yield a.indexFull();i&&(yield a.index({estimatedNumMessages:0,type:"LOCAL"}),d("MAWDataSyncQueue").registerDataSyncCallback(y))}))):(yield A(),yield d("MAWFTSWorker").getFTSWorker().indexFull()));d("MAWDataSyncQueue").registerDataSyncCallback(x);i||d("MAWDataSyncQueue").registerDataSyncCallback(y);yield z();return!0}catch(a){c("FBLogger")("maw_db").catching(a).mustfix("Error paging results from MAWDB for FTS, searching messages will not work this session");return!1}});return C.apply(this,arguments)}function D(a){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.query;a=a.searchMode;if(a!==d("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH)return[];a=c("isWAFTSContentSearchEnabled")();if(!a)return[];a=d("MAWFTSWorker").getFTSWorker();a=(yield a.search(b));b=a[0];a=a[1];var e=[];return b.map(function(a){return d("MAWBridgeSearchMsg").createBridgeSearchMsg(a)}).filter(Boolean).map(function(a){return babelHelpers["extends"]({matchedTerms:e,recordType:"msg"},a)}).concat(a.map(function(a){return babelHelpers["extends"]({},a,{matchedTerms:e,recordType:"msg"})}))});return E.apply(this,arguments)}function F(a){var b=a.query;a=a.searchMode;if(a===d("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH)return[];a=j.search(b);b=a.map(function(a){var b=a.id;a=a.terms;b=l.get(b);if(b==null)return;switch(b.type){case"DbGroupInfo":return babelHelpers["extends"]({matchedTerms:a,recordType:"groupInfo"},d("MAWBridgeTypesCreators").createBridgeGroupInfo(b.raw));case"DbParticipant":return babelHelpers["extends"]({matchedTerms:a,recordType:"participant"},d("MAWBridgeParticipants").createBridgeParticipant(b.raw));default:return}}).filter(Boolean);return b}function e(a){return G.apply(this,arguments)}function G(){G=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!c("isSearchEnabled")())return[];var b=F(a);a=(yield D(a));b=b.concat(a);return b});return G.apply(this,arguments)}g.initFTS=a;g.search=e}),98);
__d("MAWGetNextDeleteDFMContentTs",["MAWReStoreTiming","MAWTransactionMode","ReQL","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWReStoreTiming").makeShimTransactor("getNextDeleteDFMContentTs",function(a){var b=d("WATimeUtils").unixTime();return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.e2ee_unrenderedMessages.index("messageDeleteForMeTs")).bounds({gte:[b]}).map(function(a){return a.messageDeleteForMeTs}))},{unrenderedMessages:d("MAWTransactionMode").READONLY},function(a){return function(){var b=d("WATimeUtils").unixTime();return a.unrenderedMessages.orderBy("messageDeleteForMeTs").filter(function(a){return(a==null?void 0:a.messageDeleteForMeTs)!=null?a.messageDeleteForMeTs>=b:!1}).first().then(function(a){return a==null?void 0:a.messageDeleteForMeTs})}});g.getNextDeleteDFMContentTs=a}),98);
__d("MAWGetNextDeletePendingStanzaTs",["MAWReStoreTiming","MAWTransactionMode","ReQL","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWReStoreTiming").makeShimTransactor("getNextDeletePendingStanzaTs",function(a){var b=d("WATimeUtils").unixTime();return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.e2ee_pendingStanzas.index("deleteTs"),["deleteTs"]).bounds({gte:[b]}).map(function(a){a=a.deleteTs;return a}))},{pendingStanzas:d("MAWTransactionMode").READONLY},function(a){return function(){var b=d("WATimeUtils").unixTime();return a.pendingStanzas.orderBy("deleteTs").filter(function(a){return a.deleteTs!=null?a.deleteTs>b:!1}).first().then(function(a){return a==null?void 0:a.deleteTs})}});g.getNextDeletePendingStanzaTs=a}),98);
__d("MAWGetNextDeleteUnsendContentTs",["MAWReStoreTiming","MAWTransactionMode","ReQL","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWReStoreTiming").makeShimTransactor("getNextDeleteUnsendContentTs",function(a){var b=d("WATimeUtils").unixTime();return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.e2ee_messages.index("unsendMsgContentDeleteTs"),["unsendMsgContentDeleteTs"]).bounds({gte:[b]}).map(function(a){return a.unsendMsgContentDeleteTs}))},{messages:d("MAWTransactionMode").READONLY},function(a){return function(){var b=d("WATimeUtils").unixTime();return a.messages.where("unsendMsgContentDeleteTs").aboveOrEqual(b).first().then(function(a){return a==null?void 0:a.unsendMsgContentDeleteTs})}});g.getNextDeleteUnsendContentTs=a}),98);
__d("MAWGetNextDeletionTsApi",["MAWReStoreTiming","MAWTransactionMode","ReQL"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWReStoreTiming").makeShimTransactor("getNextDeletionTs",function(a){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.e2ee_messages.index("messageDeleteTs"),["messageDeleteTs"]).map(function(a){return a.messageDeleteTs}))},{messages:d("MAWTransactionMode").READONLY},function(a){return function(){return a.messages.orderBy("messageDeleteTs").first().then(function(a){return a==null?void 0:a.messageDeleteTs})}});g.getNextDeletionTs=a}),98);
__d("MAWGetNextExpirationTsApi",["MAWReStoreTiming","MAWTransactionMode","ReQL","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWReStoreTiming").makeShimTransactor("getNextExpirationTs",function(a){var b=d("WATimeUtils").unixTime();return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.e2ee_messages.index("messageExpirationTs"),["messageExpirationTs"]).bounds({gte:[b]}).map(function(a){a=a.messageExpirationTs;return a}))},{messages:d("MAWTransactionMode").READONLY},function(a){return function(){var b=d("WATimeUtils").unixTime();return a.messages.where("messageExpirationTs").above(b).first().then(function(a){return a==null?void 0:a.messageExpirationTs})}});g.getNextExpirationTs=a}),98);
__d("MAWGetNextExpiredXMATs",["MAWIndexedDb","MAWTransactionMode","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({xma:d("MAWTransactionMode").READONLY},"getNextDeleteUnsendContentTs",function(a){return function(){var b=d("WATimeUtils").unixTime();return a.xma.orderBy("targetExpiringAtSec").filter(function(a){return(a==null?void 0:a.targetExpiringAtSec)!=null?a.targetExpiringAtSec>=b:!1}).first().then(function(a){return a==null?void 0:a.targetExpiringAtSec})}});g.getNextExpiredXMATs=a}),98);
__d("MAWHandleReachabilityErrorAdminMsgApi",["MAWAdminMsgTxns","MAWIndexedDb","MAWTransactionMode","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleReachabilityErrorAdminMsg: chat ",""]);h=function(){return a};return a}b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,ftsBackloggedMessages:a.READWRITE,groupInfo:a.READONLY,media:a.READONLY,messages:a.READWRITE,threads:a.READWRITE},"handleReachabilityErrorAdminMsg",function(a){return function(b){d("WALogger").DEV(h(),b);return d("MAWAdminMsgTxns").writeReachabilityErrorAdminMsg(a,b).then(function(){})}});g.handleReachabilityErrorAdminMsg=b}),98);
__d("MAWLoadRecentParticipantsApi",["MAWIndexedDb","MAWTransactionMode","WAJids"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({threads:d("MAWTransactionMode").READONLY},"loadRecentParticipants",function(a){return function(b,c){return a.threads.orderBy("threadOrder").filter(function(a){return d("WAJids").interpretAsGroupJid(a.jid)==null}).reverse().limit(b).toArray().then(function(a){var b=[];a.forEach(function(a){a=d("WAJids").interpretAsUserJid(a.jid);a!=null&&a!==c&&b.push(a)});return new Set(b)})}});g.loadRecentParticipants=a}),98);
__d("MAWMessageReceiveReliabilityLogger",["MAWQplProxy","MAWSharedOfflineQueueMetric","WAGetPlatformFromStanzaId","WAGetStorageQplAnnotations","WAGlobals","WAJids","WALogger","WAMapContentTypeToFbType","WAPREList","WAPREMetrics","WATimeUtils","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["start decrypt"]);h=function(){return a};return a}var i=new Map(),j=new Map();function a(a){a.subscribe(function(a){switch(a.type){case"new-message":var b=o(a.commonMessageBase,a.msg,a.id);c("promiseDone")(d("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(a){b.addAnnotations(a)}));i.set(a.id,b);var e=[];a.msg.type==="Available"?e.push(a.msg.encType):a.msg.type==="SingleEnc"?e.push(a.msg.enc.encType):a.msg.type==="DualEnc"&&e.push(a.msg.senderKeyDistributionEnc.encType,a.msg.senderKeyMessageEnc.encType);b.addPoint("wa-receive-message",{string_array:{encTypes:e}});a.msg.type==="Unavailable"&&n(b);return;case"unavailable-reaction":e=i.get(a.id);if(e==null)return;e.endFail("drop_unavailable_reaction_msg");i["delete"](a.id);return;case"decrypt-start":d("WALogger").DEV(h());m(a);break;case"decrypt-skdm-done":var f;e={bool:{skdmSuccess:!!a.result.success},string:{skdmError:(e=a.result.error)!=null?e:""}};(f=i.get(a.id))==null?void 0:f.addPoint("skdm-done",e);(f=j.get(a.id))==null?void 0:f.addPoint("skdm-done",e);break;case"decrypt-fail":l(a.errorResult,a.id);break;case"decrypt-end":k(a.id);break;case"duplicated-msg":(f=i.get(a.id))==null?void 0:f.addPoint("errDuplicateMsg_with_msg_"+a.duplicationType,{string:{decryptResult:a.duplicationType==="exist"||a.duplicationType==="in-stanzaQueue"?"SUCCESS":"errDuplicateMsg"}});if(a.duplicationType==="exist"||a.duplicationType==="in-stanzaQueue"){(e=i.get(a.id))==null?void 0:e.endSuccess();i["delete"](a.id)}break;case"persist-start":(f=i.get(a.id))==null?void 0:f.addPoint("message_protocol_queue_persist_start");break;case"persist-end":(e=i.get(a.id))==null?void 0:e.addPoint("message_protocol_queue_persist_end");i["delete"](a.id);break;case"persist-fail":(f=i.get(a.id))==null?void 0:f.endFail("message_protocol_queue_persist_fail",{string:{errorDescription:a.error.message,errorStack:a.error.stack}});i["delete"](a.id);break;case"issue-retry":(e=i.get(a.id))==null?void 0:e.addPoint("process_retries");(f=d("MAWSharedOfflineQueueMetric").getOfflineQueueMetric())==null?void 0:f.addRetriesTrack(1);break;case"franking-drop":(e=i.get(a.id))==null?void 0:e.endFail("drop_franking_invalid_msg");i["delete"](a.id);break;case"invisible-msg-done":(f=i.get(a.id))==null?void 0:f.endSuccess();i["delete"](a.id);break;default:a;return}})}function k(a){var b;(b=j.get(a))==null?void 0:b.endSuccess();j["delete"](a);b=i.get(a);if(b==null)return;a=(a=(a=d("MAWSharedOfflineQueueMetric").getOfflineQueueMetric())==null?void 0:a.getDetails())!=null?a:{};var c=a.expectedCount;a=a.expectedMessage;c={"int":{mailboxMessagesSize:(a=a)!=null?a:0,mailboxSize:(a=c)!=null?a:0},string:{decryptResult:"SUCCESS"}};b.addPoint("decrypt_end",c)}function l(a,b){var c=a.error;a=a.payload;if(c==="errDuplicateMsg"){var e;(e=j.get(b))==null?void 0:e.addPoint(c);(e=j.get(b))==null?void 0:e.endSuccess()}else{(e=j.get(b))==null?void 0:e.endFail(c)}j["delete"](b);(e=d("MAWSharedOfflineQueueMetric").getOfflineQueueMetric())==null?void 0:e.addDecryptionError();e=i.get(b);if(e==null)return;b=(b=(b=d("MAWSharedOfflineQueueMetric").getOfflineQueueMetric())==null?void 0:b.getDetails())!=null?b:{};var f=b.expectedCount;b=b.expectedMessage;b={"int":{mailboxMessagesSize:(b=b)!=null?b:0,mailboxSize:(b=f)!=null?b:0},string:{decryptResult:c,payload:a==null?void 0:(f=a.message)==null?void 0:f.toString==null?void 0:f.toString()}};e.addPoint("decrypt_failure",b);e.addPoint("decrypt_end")}function m(a){var b=a.commonMessageBase,c=a.id,e=a.msg,f=[],g=0;e.type==="Available"?(f.push(e.encType),g=e.ciphertext.byteLength):e.type==="SingleEnc"?(f.push(e.enc.encType),g=e.enc.ciphertext.byteLength):(e.type,f.push(e.senderKeyDistributionEnc.encType,e.senderKeyMessageEnc.encType),g=e.senderKeyDistributionEnc.ciphertext.byteLength+e.senderKeyMessageEnc.ciphertext.byteLength);(a=i.get(a.id))==null?void 0:a.addPoint("decrypt_start",{"int":{ciphertextByteLength:g}});a=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.MESSAGE_DECRYPTION,{bool:{hideDecryptError:b.hideDecryptionFailure,isGroup:e.type!=="Available",isPeerDevice:d("WAJids").isAuthorMe(e.author),useIncreasedSignalFutureMessagesMax:d("WAGlobals").getConfig().getSignalFutureMessagesMax()>2e3,useLongSessionDrop:d("WAGlobals").getConfig().useLongSessionDrop(),useUpdatedSenderKeySession:d("WAGlobals").getConfig().useUpdatedSenderKeySession()},"int":{msgId:c,offlineCount:b.offline,retryCount:e.retryCount,signalFutureMessagesMax:d("WAGlobals").getConfig().getSignalFutureMessagesMax()},string:{e2eePlatform:d("WAGetPlatformFromStanzaId").getPlatformFromStanzaId(b.stanzaId),jid:e.chat,queue:b.offline!=null?"offline":"online",type:f[0],userHash:d("WAGlobals").getDependencies().isEmployee()&&d("WAGlobals").getDependencies().isUseridAnnotationEnabled()?d("WAJids").extractUserId(d("WAGlobals").getMyUserJid()).slice(-5):null},string_array:{encTypes:f}},void 0);j.set(c,a)}function n(a){var b;b=(b=(b=d("MAWSharedOfflineQueueMetric").getOfflineQueueMetric())==null?void 0:b.getDetails())!=null?b:{};var c=b.expectedCount;b=b.expectedMessage;a.addPoint("unavailable-message",{"int":{mailboxMessagesSize:(a=b)!=null?a:0,mailboxSize:(b=c)!=null?b:0},string:{decryptedMsgType:"UnavailableMsg",decryptResult:"SUCCESS"}})}function o(a,b,e){b={bool:{waDanglingQueue:d("WAGlobals").getConfig().waDanglingQueue()},"int":{messageAge:d("WATimeUtils").unixTime()-a.serverTs,msgId:e,offlineDelivery:a.offline},string:{jid:b.chat,msgType:d("WAMapContentTypeToFbType").mapContentTypeToFbType(b.contentType),queueType:a.offline!=null?"offline":"online",threadType:"device",userHash:d("WAGlobals").getDependencies().isEmployee()&&d("WAGlobals").getDependencies().isUseridAnnotationEnabled()?d("WAJids").extractUserId(d("WAGlobals").getMyUserJid()).slice(-5):null}};return d("MAWQplProxy").startQplUserFlow(c("qpl")._(1056840931,"814"),b,e)}g.subscribeToIncomingMessageEvents=a}),98);
__d("MAWPREListeners",["MAWODSProxy","MAWQplProxy","MAWSendMsgUtil","WALogger","WAMapWithDefault","WAOdsEnums","WAPREList","WAPREMetrics","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received unreachable stage value for the event"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["The QPL event of "," was processed already"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["The QPL event of "," was processed already"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["The QPL event of "," was completed or failed already"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot RESUME without instanceKey"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["The QPL event of "," was completed or failed already"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received unreachable stage value for the ODS event"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Event "," not implemented"]);o=function(){return a};return a}function a(){d("WAPREMetrics").subscribe(q)}var p=new(d("WAMapWithDefault").MapWithDefault)(function(){return new Map()});function b(a){return q(a)}function q(a){switch(a.name){case d("WAPREList").PRE_METRIC.DELETE_THREAD:t(c("qpl")._(1056845732,"691"),a);break;case d("WAPREList").PRE_METRIC.FRANKING_VALIDATION:t(c("qpl")._(25299246,"150"),a);break;case d("WAPREList").PRE_METRIC.RETRY_RECEIPTS_SENT:t(c("qpl")._(25301644,"165"),a);break;case d("WAPREList").PRE_METRIC.QUERY_GROUPS:t(c("qpl")._(741087294,"2028"),a);break;case d("WAPREList").PRE_METRIC.QUERY_GROUP:s(d("WAOdsEnums").Entity.WA_QUERY_GROUP,a);break;case d("WAPREList").PRE_METRIC.OFFLINE_RETRY:t(c("qpl")._(25309990,"124"),a);break;case d("WAPREList").PRE_METRIC.MEDIA_DOWNLOAD:t(c("qpl")._(25312150,"83"),a);break;case d("WAPREList").PRE_METRIC.MEDIA_UPLOAD:t(c("qpl")._(25313100,"131"),a);break;case d("WAPREList").PRE_METRIC.MEDIA_VALIDATE:t(c("qpl")._(25304678,"2352"),a);break;case d("WAPREList").PRE_METRIC.GET_DEVICES:s(d("WAOdsEnums").Entity.GET_DEVICES,a);break;case d("WAPREList").PRE_METRIC.MESSAGE_DECRYPTION:t(c("qpl")._(25306682,"11176"),a);s(d("WAOdsEnums").Entity.DECRYPTION,a);break;case d("WAPREList").PRE_METRIC.DECRYPT_MESSAGE_FINAL:t(c("qpl")._(741087294,"2028"),a);break;case d("WAPREList").PRE_METRIC.PROTOCOL_QUEUE_CONSUMER:t(c("qpl")._(1056845300,"1338"),a);break;case d("WAPREList").PRE_METRIC.MESSAGE_ENCRYPTION:t(c("qpl")._(25299294,"12933"),a);t(c("qpl")._(741087294,"2028"),a);break;case d("WAPREList").PRE_METRIC.OFFLINE_QUEUE:t(c("qpl")._(25306361,"5664"),a);break;case d("WAPREList").PRE_METRIC.SYNCD_FATAL_ERROR:t(c("qpl")._(25310891,"540"),a);break;case d("WAPREList").PRE_METRIC.SEND_MESSAGE:c("justknobx")._("1574")?d("MAWSendMsgUtil").checkS2SInstanceKeyExist(a.instanceKey)?r(a):s(d("WAOdsEnums").Entity.S2S_QPL_MISSING_INSTANCE_KEY,a):r(a);break;case d("WAPREList").PRE_METRIC.CREATE_GROUP:t(c("qpl")._(25307987,"970"),a);break;case d("WAPREList").PRE_METRIC.REMOVE_PARTICIPANTS:t(c("qpl")._(25312342,"971"),a);break;case d("WAPREList").PRE_METRIC.RECEIVE_MESSAGE:t(c("qpl")._(1056840931,"814"),a);break;case d("WAPREList").PRE_METRIC.SYNCD_CRITICAL_EVENT:t(c("qpl")._(25311142,"804"),a);break;case d("WAPREList").PRE_METRIC.SYNCD_CRITICAL_BOOTSTRAP_STAGE:t(c("qpl")._(741087294,"2028"),a);break;case d("WAPREList").PRE_METRIC.SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:t(c("qpl")._(741087294,"2028"),a);break;case d("WAPREList").PRE_METRIC.SYNCD_DECRYPT_MUTATIONS:t(c("qpl")._(741087294,"2028"),a);break;case d("WAPREList").PRE_METRIC.SYNCD_BOOTSTRAP_DATA_APPLIED:t(c("qpl")._(741087294,"2028"),a);break;case d("WAPREList").PRE_METRIC.SYNCD:t(c("qpl")._(741087294,"2028"),a);break;case d("WAPREList").PRE_METRIC.APP_STATE_SYNC_DAILY:t(c("qpl")._(25306941,"813"),a);break;case d("WAPREList").PRE_METRIC.ICDC_ERROR:t(c("qpl")._(25313187,"948"),a);break;case d("WAPREList").PRE_METRIC.WA_DISCONNECT:s(d("WAOdsEnums").Entity.WA_DISCONNECT,a);break;case d("WAPREList").PRE_METRIC.WA_FAIL_STANZA_QUEUE_ITEM:s(d("WAOdsEnums").Entity.WA_FAIL_STANZA_QUEUE_ITEM,a);break;case d("WAPREList").PRE_METRIC.WA_JOBS_ORCHESTRATOR:t(c("qpl")._(25311870,"1004"),a);break;case d("WAPREList").PRE_METRIC.WA_JOB_MANAGER:t(c("qpl")._(25308825,"136"),a);break;case d("WAPREList").PRE_METRIC.SYNCD_KEY_ROTATION:t(c("qpl")._(25304909,"1204"),a);break;case d("WAPREList").PRE_METRIC.STANZA_QUEUE_MESSAGE_CONSUMER:break;case d("WAPREList").PRE_METRIC.DOWNLOAD_AND_DECRYPT:d("WALogger").ERROR(o(),a.name);break;case d("WAPREList").PRE_METRIC.ONE_QUEUE:t(c("qpl")._(25308201,"2007"),a);break;case d("WAPREList").PRE_METRIC.WORM:t(c("qpl")._(1056839327,"560"),a);break;case d("WAPREList").PRE_METRIC.WA_NO_SIGNED_PRE_KEY:s(d("WAOdsEnums").Entity.WA_NO_SIGNED_PRE_KEY,a);break;case d("WAPREList").PRE_METRIC.EB_RESTORE_WITH_HIM:t(c("qpl")._(1056840931,"814"),a);break}}function r(a){t(c("qpl")._(25313175,"1551"),a),(a.stage==="SUCCESS"||a.stage==="FAIL")&&d("MAWSendMsgUtil").removeS2SInstanceKey(a.instanceKey)}function s(a,b){var c;switch(b.stage){case"START":break;case"RESUME":case"POINT":break;case"SUCCESS":d("MAWODSProxy").odsBumpEntityKey({entity:a,key:(c=(c=b.annotations)==null?void 0:(c=c.string)==null?void 0:c.key)!=null?c:"success"},!0);break;case"FAIL":d("MAWODSProxy").odsBumpEntityKey({entity:a,key:b.reason},!0);break;default:d("WALogger").ERROR(n());break}}function t(a,b){var c=babelHelpers["extends"]({},b.annotations);switch(b.stage){case"START":if(p.get(a).has(b.instanceKey))return;var e=d("MAWQplProxy").startQplUserFlow(a,c,void 0,b.timeoutInMs);p.get(a).set(b.instanceKey,e);break;case"ANNOTATE":e=p.get(a).get(b.instanceKey);if(e==null){d("WALogger").WARN(m(),b.name);return}e.addAnnotations(c);break;case"RESUME":if(b.instanceKey==null){d("WALogger").ERROR(l());return}if(p.get(a).has(b.instanceKey))return;e=d("MAWQplProxy").startQplUserFlow(a,c,b.instanceKey);p.get(a).set(b.instanceKey,e);break;case"POINT":e=p.get(a).get(b.instanceKey);if(e==null){d("WALogger").WARN(k(),b.name);return}e.addPoint(b.reason,c);break;case"SUCCESS":e=p.get(a).get(b.instanceKey);if(e==null){d("WALogger").WARN(j(),b.name);return}e.endSuccess(c);p.get(a)["delete"](b.instanceKey);break;case"FAIL":e=p.get(a).get(b.instanceKey);if(e==null){d("WALogger").WARN(i(),b.name);return}e.endFail(b.reason,c);p.get(a)["delete"](b.instanceKey);break;default:d("WALogger").ERROR(h());break}}g.initializeWAPREMetrics=a;g.testOnly_logger=b}),98);
__d("MAWPreloadJobs",["JSResourceForInteraction","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=c("gkx")("3021")&&c("JSResourceForInteraction")("MAWSendMediaMsg").__setRef("MAWPreloadJobs"),i=c("gkx")("3021")&&c("JSResourceForInteraction")("MAWSendMsg").__setRef("MAWPreloadJobs");function a(){h&&h.preload(),i&&i.preload()}g["default"]=a}),98);
__d("MAWDbHistorySyncQRCodeData",[],(function(a,b,c,d,e,f){"use strict";a="qrCodeRowId";f.qrCodeRowId=a}),66);
__d("MAWHandleEncryptedBackupsSecretsApi",["MAWDbHistorySyncQRCodeData","MAWIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({historySyncQRCodeData:d("MAWTransactionMode").READWRITE},"handleEncryptedBackupsSecret",function(a){return function(b){var c=b.backupId,e=b.epoch,f=b.mailboxRootKey,g=b.obliviousValidationToken,i=b.serverDataId,j=b.tempOcmfClientState;return a.historySyncQRCodeData.get(d("MAWDbHistorySyncQRCodeData").qrCodeRowId).then(function(b){if(!(b==null?void 0:b.isQRScanned))return a.historySyncQRCodeData.put({isQRScanned:!0,rowId:d("MAWDbHistorySyncQRCodeData").qrCodeRowId}).then(function(a){d("MAWIndexedDb").afterTransaction({tag:"CallFinishAddDevice",value:{backupId:c.toString(),epoch:h(e),mailboxRootKey:f,obliviousValidationToken:g,serverDataId:i.toString(),tempOcmfClientState:j}});return})["catch"](function(b){return a.historySyncQRCodeData.put({isQRScanned:!1,rowId:d("MAWDbHistorySyncQRCodeData").qrCodeRowId}).then(function(){})})})}});function h(a){return a.map(function(a){var b=a.anonId,c=a.id,d=a.rootKey;a=a.status;return{epoch_anon_id:b,epoch_id:c.toString(),epoch_root_key:d,epoch_status:a.toString()}})}g.handleEncryptedBackupsSecret=a}),98);
__d("MAWProtocolQueueAppdata",["MAWHandleEncryptedBackupsSecretsApi","MAWHandleMetaSyncAction","MAWSharedCOPLogger","Promise","WAConvertAppData","WAMsgApplication.pb","WAParseMessageApplication","WAProtocolQueue","WAResultOrError","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata type: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Handle appdata: backup secret"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Handle appdata: meta sync"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Handle appdata"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Appdata contains unparseable message application."]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parse Appdata application protocol"]);n=function(){return a};return a}function a(a){var c=a.map(function(a){return o(a.appdata)});return(h||(h=b("Promise"))).all(c.map(function(a){a=p(a);return a})).then(function(b){var c=[];b.map(function(b,d){b.success===!0&&c.push(a[d].stanzaQueueId)});return{followUpParams:void 0,toAck:c}})}function o(a){c("MAWSharedCOPLogger").DEV(n());a=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMsgApplication.pb").MessageApplicationSpec,d("WAProtocolQueue").extractSubProtocolFromAppdataProtocol(a).payload);a=d("WAParseMessageApplication").parseMessageApplication(a);if(a.type==="error"){c("MAWSharedCOPLogger").ERROR(m());return}return d("WAConvertAppData").parseAppData(a)}function p(a){c("MAWSharedCOPLogger").LOG(l());if(a==null)return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult());switch(a.type){case"meta_sync":c("MAWSharedCOPLogger").LOG(k());return d("MAWHandleMetaSyncAction").handleMetaSyncActions(a).then(function(){return d("WAResultOrError").makeResult()});case"backups_secrets":c("MAWSharedCOPLogger").LOG(j());return d("MAWHandleEncryptedBackupsSecretsApi").handleEncryptedBackupsSecret(a.encryptedBackupsSecrets).then(function(){return d("WAResultOrError").makeResult()});case"sync_key_share":return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult());case"sync_key_request":return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult());default:a.type;c("MAWSharedCOPLogger").WARN(i(),a.type);return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult())}}g.handleAppdataStanzas=a}),98);
__d("MAWCOPAppdataHandler",["MAWIsQuotaExceededError","MAWProtocolQueueAppdata","MAWSharedCOPLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Errors occurred while processing appdata batch, see transactor error reports."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["appdata consumer: ",""]);i=function(){return a};return a}function a(a){return j(a)["catch"](function(a){if(d("MAWIsQuotaExceededError").isQuotaExceededError(a))throw a;c("MAWSharedCOPLogger").ERROR(i(),a);return[]})}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return[];var b=(yield d("MAWProtocolQueueAppdata").handleAppdataStanzas(a));b.toAck.length!==a.length&&c("MAWSharedCOPLogger").WARN(h());return b.toAck});return k.apply(this,arguments)}g["default"]=a}),98);
__d("MAWDbDeviceChangeAlerts",[],(function(a,b,c,d,e,f){"use strict";b="add";c="keyChange";d="remove";function a(a){return a}f.ADD=b;f.KEY_CHANGE=c;f.REMOVE=d;f.unsafeCoerceToDeviceChangeAlertsID=a}),66);
__d("WAUpdateDevicesForUserApi",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.identity.where("userJid").equals(b).toArray().then(function(a){return a.map(function(a){return a.deviceJid})})}function b(a){var b=a.allowSecurityAlertForContact;a=a.isMe;return!a&&b}f.getAllDeviceJidsForUser=a;f.getShouldShowAdminMessages=b}),66);
__d("WAUpdateRotateSenderKeyToTrue",["MAWTransactionMode","WADbPersonalSenderKeyStatusTxns","WADbTransactor"],(function(a,b,c,d,e,f,g){"use strict";a=d("WADbTransactor").makeSignalTransactor({personalSenderKeyStatuses:d("MAWTransactionMode").READWRITE},"updateRotateSenderKeyToTrue",function(a){return function(b){return d("WADbPersonalSenderKeyStatusTxns").bulkSetRotateSenderKeyToTrueTxn(a,b)}});g.updateRotateSenderKeyToTrue=a}),98);
__d("MAWProtocolQueueInstructions",["MAWAdminWriteUserDeviceMsgTxn","MAWBridge","MAWDbAddDeviceChangeAlertsTxn","MAWDbDeviceChangeAlerts","MAWDbGetAlertsWithDeviceJidTxn","MAWDbGetUnArchivedDeviceChangeAlertsCountTxn","MAWDbMsgTypeVersionTxns","MAWDbThreadTxns","MAWDbUpdateDeviceChangeAlertsLogInStatusTxn","MAWDexieTable","MAWIndexedDb","MAWODSProxy","MAWTransactionMode","WAAssertUnreachable","WADbContact","WAGlobals","WAJids","WALogger","WAOdsEnums","WAUpdateDevicesForUserApi","WAUpdateRotateSenderKeyToTrue","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["ICDC error instruction for thread "," not found"]);h=function(){return a};return a}function i(a,b){b=new Set(b.map(function(a){return a.jid}));return d("MAWDexieTable").dexieAll([d("MAWDbMsgTypeVersionTxns").maybeBulkGetSecuritySetting(a),d("MAWDbThreadTxns").getAllThreadsForUsers(a,Array.from(b))])}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("MAWBridge").getBridge().sendAndReceive("event","getLSDBUsersRelationships",{users:Array.from(new Set(a.map(function(a){return a.jid})))}));a=(yield k(a,b));b=a.followUpParams;a=a.toAck;b=b.groupsToUpdateForIdentityRemoved.flat();yield d("WAUpdateRotateSenderKeyToTrue").updateRotateSenderKeyToTrue(b);return{followUpParams:void 0,toAck:a}});return j.apply(this,arguments)}var k=d("MAWIndexedDb").makeMsgrTransactor({appMeta:(e=d("MAWTransactionMode")).READONLY,deviceChangeAlerts:e.READWRITE,ftsBackloggedMessages:e.READWRITE,groupInfo:e.READONLY,messages:e.READWRITE,participants:e.READONLY,threads:e.READWRITE},"handleInstructions",function(a){return function(b,c){return i(a,b).then(function(e){var f=e[0],g=f.allowSecurityAlertForContact,h=f.allowSecurityAlertForSelf,i=e[1];return d("MAWDexieTable").dexieSequentialAll(b.map(function(b){var e=b.jid,f=e===d("WAGlobals").getMyUserJid(),j=d("WAUpdateDevicesForUserApi").getShouldShowAdminMessages({allowSecurityAlertForContact:g,isMe:f})&&c.get(e)===d("WADbContact").TWO_WAY_CONTACT,k={allowSecurityAlertForSelf:h,isMe:f,shouldShowAdminMessages:j,threads:(f=i.get(e))!=null?f:[],user:e};return function(){return l(a,b,k)}})).then(function(){var a=b.filter(function(a){return a.instruction==="identityRemoved"}).map(function(a){a=(a=i.get(a.jid))!=null?a:[];a=a.map(function(a){return d("WAJids").interpretAsGroupJid(a.jid)}).filter(Boolean);return a});return{followUpParams:{groupsToUpdateForIdentityRemoved:a},toAck:b.map(function(a){return a.stanzaQueueId})}})})}});function l(a,b,d){switch(b.instruction){case"identityChanged":return m(a,b,d);case"identityAdded":return n(a,b,d);case"identityRemoved":return o(a,b,d);case"icdcError":return p(a,b,d);default:throw c("WAAssertUnreachable")(b)}}function m(a,b,c){var e=c.allowSecurityAlertForSelf,f=c.isMe,g=c.shouldShowAdminMessages;c=c.threads;var h=f&&b.model!=null&&b.platform!=null&&b.notificationTs!=null;return d("MAWDexieTable").dexieAll([h&&b.model!=null&&b.platform!=null&&b.notificationTs!=null?d("MAWDbAddDeviceChangeAlertsTxn").addDeviceChangeAlertsTxn(a,{action:d("MAWDbDeviceChangeAlerts").KEY_CHANGE,deviceJid:b.device,identity:b.identity,isArchived:!e,model:b.model,platform:b.platform,ts:b.notificationTs}).then(function(){return d("MAWDbGetUnArchivedDeviceChangeAlertsCountTxn").getUnArchivedDeviceChangeAlertsCountTxn(a)}):d("MAWDexieTable").dexieResolve()].concat(g?c.map(function(c){return d("WAJids").interpretAsGroupJid(c.jid)==null&&d("MAWAdminWriteUserDeviceMsgTxn").writeUserDeviceAdminMsg(a,b.jid,c,d("MAWAdminWriteUserDeviceMsgTxn").DeviceChange.update,b.notificationTs)}):[])).then(function(){(h||g)&&d("MAWODSProxy").odsBumpEntityKey({entity:f?d("WAOdsEnums").Entity.SECURITY_ALERT_FOR_SELF:d("WAOdsEnums").Entity.SECURITY_ALERT_FOR_CONTACT,key:d("MAWDbDeviceChangeAlerts").KEY_CHANGE})})}function n(a,b,c){var e=c.allowSecurityAlertForSelf,f=c.isMe,g=c.shouldShowAdminMessages,h=c.threads,i=c.user,j=f&&b.model!=null&&b.platform!=null&&b.notificationTs!=null;return d("MAWDexieTable").dexieAll([j&&b.model!=null&&b.platform!=null&&b.notificationTs!=null?d("MAWDbAddDeviceChangeAlertsTxn").addDeviceChangeAlertsTxn(a,{action:d("MAWDbDeviceChangeAlerts").ADD,deviceJid:b.device,identity:b.identity,isArchived:!e,model:b.model,platform:b.platform,ts:b.notificationTs}).then(function(){return d("MAWDbGetUnArchivedDeviceChangeAlertsCountTxn").getUnArchivedDeviceChangeAlertsCountTxn(a)}):d("MAWDexieTable").dexieResolve()].concat(g?h.map(function(c){return d("WAJids").interpretAsGroupJid(c.jid)==null&&d("MAWAdminWriteUserDeviceMsgTxn").writeUserDeviceAdminMsg(a,i,c,d("MAWAdminWriteUserDeviceMsgTxn").DeviceChange.add,b.notificationTs)}):[])).then(function(){(j||g)&&d("MAWODSProxy").odsBumpEntityKey({entity:f?d("WAOdsEnums").Entity.SECURITY_ALERT_FOR_SELF:d("WAOdsEnums").Entity.SECURITY_ALERT_FOR_CONTACT,key:d("MAWDbDeviceChangeAlerts").ADD})})}function o(a,b,c){var e=c.isMe,f=c.shouldShowAdminMessages,g=c.threads,h=c.user;return d("MAWDexieTable").dexieAll([e?d("MAWDbGetAlertsWithDeviceJidTxn").getAlertsWithDeviceJidTxn(a,b.device).then(function(){return d("MAWDbUpdateDeviceChangeAlertsLogInStatusTxn").updateDeviceChangeAlertsLogInStatusTxn(a,b.device)}).then(function(){return d("MAWDbGetUnArchivedDeviceChangeAlertsCountTxn").getUnArchivedDeviceChangeAlertsCountTxn(a)}):d("MAWDexieTable").dexieResolve()].concat(f?g.map(function(c){return d("WAJids").interpretAsGroupJid(c.jid)==null&&d("MAWAdminWriteUserDeviceMsgTxn").writeUserDeviceAdminMsg(a,h,c,d("MAWAdminWriteUserDeviceMsgTxn").DeviceChange.remove,b.notificationTs)}):[])).then(function(){(e||f)&&d("MAWODSProxy").odsBumpEntityKey({entity:e?d("WAOdsEnums").Entity.SECURITY_ALERT_FOR_SELF:d("WAOdsEnums").Entity.SECURITY_ALERT_FOR_CONTACT,key:d("MAWDbDeviceChangeAlerts").REMOVE})})}function p(a,b,c){c=c.threads;if(!d("WAGlobals").getConfig().isICDCErrorEnabled())return d("MAWDexieTable").dexieResolve();c=c.find(function(a){return a.jid===b.jid});if(c==null){d("WALogger").ERROR(h(),b.jid);return d("MAWDexieTable").dexieResolve()}return d("MAWAdminWriteUserDeviceMsgTxn").writeICDCAlert(a,b.jid,c,b.notificationTs)}g.handleInstructions=a}),98);
__d("MAWCOPInstructionsHandler",["MAWIsQuotaExceededError","MAWProtocolQueueInstructions","MAWSharedCOPLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Errors occurred while processing instructions batch, see transactor error reports."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["instruction consumer: ",""]);i=function(){return a};return a}function a(a){return j(a)["catch"](function(a){if(d("MAWIsQuotaExceededError").isQuotaExceededError(a))throw a;c("MAWSharedCOPLogger").ERROR(i(),a);return[]})}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return[];var b=(yield d("MAWProtocolQueueInstructions").handleInstructions(a));b.toAck.length!==a.length&&c("MAWSharedCOPLogger").WARN(h());return b.toAck});return k.apply(this,arguments)}g["default"]=a}),98);
__d("MAWChangeGroupMemberAddModeApi",["MAWAdminMsgHelpers","MAWRunInTransaction","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return d("MAWRunInTransaction").runInTransaction({GroupInfoStore:!0,MessagesStore:!0},function(a){return h.apply(void 0,[a].concat(b))},"changeGroupMemberAddMode")};var h=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=a.GroupInfoStore;a=a.MessagesStore;var g=(yield f.get(b));if(!g.success)return d("WAResultOrError").makeError("missing_group");yield f.update(b,function(a){return babelHelpers["extends"]({},a,{memberAddMode:e})});g=d("MAWAdminMsgHelpers").createMemberAddModeChangeAdminMsg(b,e,c);g!=null&&(yield a.create(g));return d("WAResultOrError").makeResult()});return function(b,c,d,e){return a.apply(this,arguments)}}();g.changeGroupMemberAddMode=a;g.changeGroupMemberAddModeTransactor=h}),98);
__d("MAWThreadTypes",["MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";b={chunk:(a=d("MAWTransactionMode")).READWRITE,deletedMessages:a.READWRITE,editMsgHistory:a.READWRITE,groupInfo:a.READWRITE,groupInvites:a.READWRITE,media:a.READWRITE,messages:a.READWRITE,participants:a.READWRITE,pendingStanzas:a.READWRITE,reactions:a.READWRITE,threads:a.READWRITE,unrenderedMessages:a.READWRITE,xma:a.READWRITE};g.ThreadRelatedTablesPermissions=b}),98);
__d("MAWDeleteGroupsApi",["MAWDbThreadTxns","MAWDexieTable","MAWGroupManagementTxns","MAWIndexedDb","MAWThreadTypes","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor(d("MAWThreadTypes").ThreadRelatedTablesPermissions,"deleteGroups",function(a){return function(b){return d("MAWDexieTable").dexieAll(b.map(function(b){var c=b.group;return d("MAWDbThreadTxns").getThread(a,c).then(function(b){return!b.success?d("WAResultOrError").makeError("missing_thread"):d("MAWGroupManagementTxns").deleteGroup(a,c,b.value).then(function(a){return d("WAResultOrError").makeResult({deletedGroupId:c,deletedMsgIds:a.deletedMessages})})})})).then(function(a){return a})}});g.deleteGroupsFromMAW=a}),98);
__d("WADeleteGroupFollowUpLowLevelApi",["MAWDexieTable","MAWTransactionMode","WADbPersonalSenderKeyStatusTxns","WADbSenderKeySessionTxns","WADbTransactor"],(function(a,b,c,d,e,f,g){"use strict";a=d("WADbTransactor").makeSignalTransactor({personalSenderKeyStatuses:d("MAWTransactionMode").READWRITE,receipts:d("MAWTransactionMode").READWRITE,senderKeySessions:d("MAWTransactionMode").READWRITE},"deleteGroupFollowUpLowLevel",function(a){return function(b,c){return d("MAWDexieTable").dexieAll([d("WADbPersonalSenderKeyStatusTxns").bulkDeletePersonalSenderKeyStatus(a,[b]),d("WADbSenderKeySessionTxns").deleteSenderKeysByGroupJid(a,b),h(a,c)]).then(function(){})}});function h(a,b){return a.receipts.where("waMsgId").anyOf(b)["delete"]().then(function(){})}g.deleteGroupFollowUpLowLevel=a}),98);
__d("MAWDeleteGroup",["MAWDeleteGroupsApi","Promise","WADeleteGroupFollowUpLowLevelApi","WALogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["deleteGroups failed to delete group to a non-existent thread"]);i=function(){return a};return a}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c=(yield d("MAWDeleteGroupsApi").deleteGroupsFromMAW(c.map(function(b){return{deleter:a,group:b}})));return(h||(h=b("Promise"))).all(c.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!a.success)d("WALogger").ERROR(i());else{a=a.value;var b=a.deletedGroupId;a=a.deletedMsgIds;yield d("WADeleteGroupFollowUpLowLevelApi").deleteGroupFollowUpLowLevel(b,a)}});return function(b){return a.apply(this,arguments)}}())).then(function(){})});return j.apply(this,arguments)}g["default"]=a}),98);
__d("MAWUpdateGroupSubjectApi",["MAWAdminMsgHelpers","MAWRunInTransaction","WAJids","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return d("MAWRunInTransaction").runInTransaction({GroupInfoStore:!0,MessagesStore:!0,ParticipantsStore:!0},function(a){return h.apply(void 0,[a].concat(b))},"updateGroupSubject")};var h=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=a.GroupInfoStore;a=a.MessagesStore;var f=(yield e.get(b));if(!f.success)return d("WAResultOrError").makeError("missing_group");f=f.value;if(f.subject.ts!=null&&(c.ts==null||f.subject.ts>c.ts))return d("WAResultOrError").makeResult();yield e.update(b,function(a){return babelHelpers["extends"]({},a,{subject:c})});e=(yield e.get(f.jid));if(!e.success)return d("WAResultOrError").makeError("missing_group");f=e.value;e=f.subject.user;b=d("MAWAdminMsgHelpers").createGroupNameChangeAdminMsg(b,f,e!=null?d("WAJids").userIdFromJid(e):void 0);b!=null&&(yield a.create(b));return d("WAResultOrError").makeResult()});return function(b,c,d){return a.apply(this,arguments)}}();g.updateGroupSubject=a;g.updateGroupSubjectTransactor=h}),98);
__d("MAWHandleGroupNotifications",["MAWAddGroupParticipantsApi","MAWChangeGroupMemberAddModeApi","MAWChangeGroupParticipantAdminStatusApi","MAWDeleteGroup","MAWRemoveGroupInvitesApi","MAWRemoveGroupParticipantsApi","MAWUpdateGroupSubjectApi","Promise","WAAPI","WACreateGroup","WAGlobals","WAResultOrError","asyncToGeneratorRuntime","err","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=a.notification;switch(a.type){case"join":return i(a).then(function(){return d("WAResultOrError").makeResult()});case"add":return k(a);case"remove":return l(a);case"promote":return n(a);case"demote":return m(a);case"delete":var e=a.groupJid,f=a.participant;if(f==null)throw c("err")("Group delete notification without deleter JID: "+e);return c("MAWDeleteGroup")(f,[e]).then(function(){return d("WAResultOrError").makeResult()});case"subject":return o(a).then(function(){return d("WAResultOrError").makeResult()});case"memberAddMode":return p(a);default:a.type;return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult())}}function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.isE2EEMigration)return;var b=a.group,e=a.isNew,f=a.key,g=a.serverTs;yield d("WACreateGroup").createGroups([{extras:f!=null?{deduplicationKey:f,platform:"msgr"}:null,folder:null,groupStatus:e?"new":"added",groupToCreate:b,key:f,serverTs:g}]);e=a.group.participants.map(function(a){if(a.success)return a.value.user;else return a.error.user});var h=d("WAGlobals").getMyUserJid();f=c("justknobx")._("1162");f&&e.find(function(a){return a===h})&&(yield d("MAWRemoveGroupInvitesApi").removeGroupInvites(b.jid,h));yield c("WAAPI").getDevices({ignoreDhash:!1,reason:"added-to-group",users:new Set(e)})});return j.apply(this,arguments)}function k(a){var b=a.groupJid,e=a.participant,f=a.participants,g=a.previousVersionId,h=a.reason;a=a.versionId;if(e==null)throw c("err")("Group add participant notification without adder JID: "+b);return d("MAWAddGroupParticipantsApi").addGroupParticipants({current:a,previous:g},b,e,f,!1,h)}function l(a){var b=a.groupJid,e=a.participant,f=a.participants,g=a.previousVersionId;a=a.versionId;if(e==null)throw c("err")("Group remove participant notification without remover JID: "+b);var h=null;a!=null&&(h={current:a,previous:g});return d("MAWRemoveGroupParticipantsApi").removeGroupParticipants(h,b,e,f,!1)}function m(a){var b=a.groupJid,c=a.participant,e=a.participants,f=a.previousVersionId;a=a.versionId;return d("MAWChangeGroupParticipantAdminStatusApi").changeGroupParticipantAdminStatus({current:a,previous:f},b,c,e,"participant")}function n(a){var b=a.groupJid,c=a.participant,e=a.participants,f=a.previousVersionId;a=a.versionId;return d("MAWChangeGroupParticipantAdminStatusApi").changeGroupParticipantAdminStatus({current:a,previous:f},b,c,e,"admin")}function o(a){var b=a.groupJid,c=a.participant,e=a.subject;a=a.ts;return d("MAWUpdateGroupSubjectApi").updateGroupSubject(b,{content:e,ts:a,user:c}).then(function(a){})}function p(a){var e=a.groupJid,f=a.memberAddMode;a=a.participant;return c("gkx")("33036")?d("MAWChangeGroupMemberAddModeApi").changeGroupMemberAddMode(e,a,f):(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult())}g.persistGroupNotification=a}),98);
__d("WASyncParticipantsApi",["WAResultOrError","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,c,e){var f,g,h,i,j,k,l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:f=a.ParticipantsStore;n.next=3;return b("regeneratorRuntime").awrap(f.bulkGetInGroup(c));case 3:g=n.sent;if(!(g.success!==!0)){n.next=6;break}return n.abrupt("return",d("WAResultOrError").makeError("missing_participants"));case 6:if(!(e.length===0&&g.value.length===0)){n.next=8;break}return n.abrupt("return",d("WAResultOrError").makeResult({removedJids:[],addedJids:[],typeUpdateJids:[]}));case 8:h=new Map();g.value.forEach(function(a){h.set(a.user,a)});i=new Set(e.map(function(a){return a.user}));j=[];k=[];l=[];m=[];h.forEach(function(a,b){i.has(b)||(a.type!=="invitedParticipant"?j.push({userJid:b,groupJid:c}):(m.push({type:a.type,userJid:a.user}),l.push(babelHelpers["extends"]({},a))))});e.forEach(function(a){var b=h.get(a.user);b==null?(k.push(a),a.type==="admin"&&m.push({type:a.type,userJid:a.user})):(b.type!==a.type&&m.push({type:a.type,userJid:a.user}),l.push(babelHelpers["extends"]({},b,a)))});n.next=19;return b("regeneratorRuntime").awrap(f.bulkPut(k));case 19:n.next=21;return b("regeneratorRuntime").awrap(f.bulkPut(l));case 21:n.next=23;return b("regeneratorRuntime").awrap(f.bulkDelete(j));case 23:return n.abrupt("return",d("WAResultOrError").makeResult({removedJids:j.map(function(a){a=a.userJid;return a}),addedJids:k.map(function(a){return a.user}),typeUpdateJids:m}));case 24:case"end":return n.stop()}},null,this)};g.syncParticipantsTransactor=a}),98);
__d("MAWResetGroupParticipantInfoApi",["MAWAdminMsgHelpers","MAWRunInTransaction","Promise","WAAPI","WALogger","WAResultOrError","WASyncParticipantsApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpectedly received an error when sync-ing participants"]);i=function(){return a};return a}a=function(){for(var a=arguments.length,e=new Array(a),f=0;f<a;f++)e[f]=arguments[f];return d("MAWRunInTransaction").runInTransaction({GroupInfoStore:!0,MessagesStore:!0,ParticipantsStore:!0},function(a){return j.apply(void 0,[a].concat(e))},"resetGroupParticipantInfo").then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a.success&&(yield c("WAAPI").setRotateSenderKeyToTrue([e[0]]));return a});return function(b){return a.apply(this,arguments)}}())};var j=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){var g=a.GroupInfoStore,j=a.MessagesStore;a=a.ParticipantsStore;e=e.map(function(a){return{addressable:a.addressable,chatJid:c,type:a.type,user:a.user}});a=(yield d("WASyncParticipantsApi").syncParticipantsTransactor({ParticipantsStore:a},c,e));if(f!=null){e=(yield g.update(c,function(a){return babelHelpers["extends"]({},a,{participantVersion:f})}));if(!e.success)return e}if(a.success!==!0){d("WALogger").ERROR(i());return a}g=a.value;e=[];if(g.removedJids.length>0){a=d("MAWAdminMsgHelpers").createParticipantRemoveAdminMsg(c,g.removedJids,null);e.push(j.create(a))}if(g.addedJids.length>0){a=d("MAWAdminMsgHelpers").createParticipantAddAdminMessage(c,g.addedJids,null);e.push(j.create(a))}if(g.typeUpdateJids.length>0)for(a=0;a<g.typeUpdateJids.length;a++){var k=g.typeUpdateJids[a].type==="admin"?d("MAWAdminMsgHelpers").createParticipantPromoteAdminMsg(c,g.typeUpdateJids[a].userJid,null):d("MAWAdminMsgHelpers").createParticipantDemoteAdminMsg(c,g.typeUpdateJids[a].userJid,null);e.push(j.create(k))}return(h||(h=b("Promise"))).all(e).then(function(){return d("WAResultOrError").makeResult()})});return function(b,c,d,e){return a.apply(this,arguments)}}();g.resetGroupParticipantInfo=a;g.resetGroupParticipantInfoTransactor=j}),98);
__d("MAWProtocolQueueGroupNotification",["MAWHandleGroupNotifications","MAWResetGroupParticipantInfoApi","MAWSendSenderKeyDistributionMsg","Promise","WAAPI","WACreateGroup","WALogger","WAQueryGroup","WAResultOrError","WATimeUtils","WAWaitForUser","asyncToGeneratorRuntime","err","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to create group infos"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to recover missing group info"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[doGroupRecovery] Cannot get a group, as per ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to query groups"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to query groups"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to get group info"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpectedly received a participant with an error"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ParticipantRecovery] Cannot get a group, as per ",""]);p=function(){return a};return a}function a(a){var b=a.notification;return d("MAWHandleGroupNotifications").persistGroupNotification(a).then(function(a){return a.success?a:d("WAResultOrError").makeResult({errorResult:a,groupNotification:b})})}function e(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=[];yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{var b=(yield d("WAQueryGroup").queryGroup(a,"participant_change_recovery"));if(b.success===!1){var f;d("WALogger").ERROR(p(),b.error);throw c("err")("[ParticipantRecovery] Cannot get a group, as per "+JSON.stringify((f=b.error)!=null?f:null))}f=b.value;b=f.participants.map(function(a){if(a.error){d("WALogger").ERROR(o());return null}return a.value}).filter(Boolean);b=(yield d("MAWResetGroupParticipantInfoApi").resetGroupParticipantInfo(a,b,f.participantVersion));f=b.error;!b.success&&f==="missing_group"&&e.push(a)}catch(a){d("WALogger").DEV(n()).devConsole(a)}});return function(b){return a.apply(this,arguments)}}()));try{c("WAAPI").queryGroups({groups:e,type:"array"})["catch"](function(a){d("WALogger").DEV(m()).devConsole(a)})}catch(a){d("WALogger").DEV(l()).devConsole(a)}});return q.apply(this,arguments)}function f(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=[];yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=(yield d("WAQueryGroup").queryGroup(a,"interactive"));if(a.success===!1){var b;d("WALogger").ERROR(k(),a.error);throw c("err")("[doGroupRecovery] Cannot get a group, as per "+JSON.stringify((b=a.error)!=null?b:null))}e.push(a.value)}catch(a){d("WALogger").DEV(j()).devConsole(a)}});return function(b){return a.apply(this,arguments)}}()));try{yield d("WACreateGroup").createGroups(e.map(function(a){return{extras:null,folder:null,groupStatus:"queried",groupToCreate:a,key:null,serverTs:d("WATimeUtils").unixTime()}})),c("promiseDone")(d("WAWaitForUser").waitForUserUnblocked().then(function(){e.forEach(function(a){return d("MAWSendSenderKeyDistributionMsg").maybePreEstablishSessionsAndSendSenderKeyDistributionMsg(a.jid,a.participants.map(function(a){return a.success?a.value.user:null}).filter(Boolean))})}))}catch(a){d("WALogger").DEV(i()).devConsole(a)}});return r.apply(this,arguments)}g.handleProtocolQueueGroupNotification=a;g.doParticipantRecovery=e;g.doGroupRecovery=f}),98);
__d("MAWHandleConnectedAdminMsgApi",["MAWAdminWriteUsersConnectedMsgTxn","MAWIndexedDb","MAWTransactionMode","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleConnectedAdminMsg: chat ",""]);h=function(){return a};return a}b=d("MAWIndexedDb").makeMsgrTransactor({ftsBackloggedMessages:(a=d("MAWTransactionMode")).READWRITE,groupInfo:a.READONLY,messages:a.READWRITE,threads:a.READWRITE},"handleConnectedAdminMsg",function(a){return function(b){var c=b.chatJid,e=b.isOtherContactMsplit;b=b.notificationTs;d("WALogger").LOG(h(),c);return d("MAWAdminWriteUsersConnectedMsgTxn").writeUsersConnectedAdminMsg(a,c,e,b)}});g.handleConnectedAdminMsg=b}),98);
__d("MAWUpdateThreadFolderApi",["MAWBridgeTypesCreators","MAWDbThreadTxns","MAWIndexedDb","MAWTransactionMode","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Update thread "," folder with folder id ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Update thread ",""]);i=function(){return a};return a}a=d("MAWIndexedDb").makeMsgrTransactor({threads:d("MAWTransactionMode").READWRITE},"updateThreadFolder",function(a){return function(b,c){d("WALogger").LOG(i(),b);return d("MAWDbThreadTxns").getThread(a,b).then(function(b){if(!b.success)return;return d("MAWDbThreadTxns").updateThread(a,babelHelpers["extends"]({},b.value,{folder:c})).then(function(a){d("WALogger").LOG(h(),b.value.jid,c);d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedThread({folder:c,threadJid:b.value.jid})});return})})}});g.updateThreadFolder=a}),98);
__d("MAWProtocolQueueNotification",["MAWBridge","MAWFolderTypes","MAWHandleConnectedAdminMsgApi","MAWProtocolQueueGroupNotification","MAWUpdateThreadFolderApi","Promise","WAJids","WALogger","WAResultOrError","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleThreadNotification (",") unknown thread action, jid: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleThreadNotification (",") connected, jid: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleThreadNotification (",") with folder id ",", jid: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received unsupported notification type: ",""]);l=function(){return a};return a}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.stanzaId;a=a.notification;var e=a.actions,f=a.chatJid,g=a.ts,l=d("WAJids").interpretAsUserJid(f),m=(yield d("MAWBridge").getBridge().sendAndReceive("event","getLSDBUsersIsMsplit",{users:[l].filter(Boolean)}));return(h||(h=b("Promise"))).all(e.map(function(a){switch(a.type){case"folder":var e;e=(e=a.folderId)!=null?e:d("MAWFolderTypes").FOLDER_ID.INBOX;d("WALogger").LOG(k(),c,e,f);return d("MAWUpdateThreadFolderApi").updateThreadFolder(f,e);case"connected":d("WALogger").LOG(j(),c,f);e=l!=null&&m.get(l)===!0;return d("MAWHandleConnectedAdminMsgApi").handleConnectedAdminMsg({chatJid:f,isOtherContactMsplit:e,notificationTs:g});default:a.type;d("WALogger").ERROR(i(),c,f);return(h||(h=b("Promise"))).reject("Handle thread notification: unknown thread action")}})).then(function(){})});return n.apply(this,arguments)}function a(a){return(h||(h=b("Promise"))).all(a.map(function(a){a=a.notification;a=o(a);return a})).then(function(b){var c={groupRecoveries:[],participantRecoveries:[]},d=[];b.map(function(b,e){if(b.success===!0){d.push(a[e].stanzaQueueId);if(b.value!=null){e=b.value;e.type==="group"&&(e.data.errorResult.error==="mismatch"?c.participantRecoveries.push(e.data.groupNotification.groupJid):c.groupRecoveries.push(e.data.groupNotification.groupJid))}}});return{followUpParams:c,toAck:d}})}function o(a){switch(a.type){case"group":return d("MAWProtocolQueueGroupNotification").handleProtocolQueueGroupNotification(a).then(function(a){return a.value?d("WAResultOrError").makeResult({data:a.value,type:"group"}):d("WAResultOrError").makeResult()});case"thread":return m(a).then(function(){return d("WAResultOrError").makeResult()});default:a;d("WATagsLogger").TAGS(["ProtocolQueue"]).ERROR(l(),a.type);return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult())}}g.handleIncomingNotificationStanzas=a}),98);
__d("MAWCOPNotificationsHandler",["MAWIsQuotaExceededError","MAWProtocolQueueGroupNotification","MAWProtocolQueueNotification","MAWSharedCOPLogger","MAWSharedCOPLoop","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Errors occurred while processing notifications batch, see transactor error reports."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["notification consumer: ",""]);i=function(){return a};return a}function a(a,b){return j(a,b)["catch"](function(a){if(d("MAWIsQuotaExceededError").isQuotaExceededError(a))throw a;c("MAWSharedCOPLogger").ERROR(i(),a);return[]})}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a.length===0)return[];var e=(yield d("MAWProtocolQueueNotification").handleIncomingNotificationStanzas(a));e.toAck.length!==a.length&&c("MAWSharedCOPLogger").WARN(h());a=e.followUpParams;var f=a.groupRecoveries,g=a.participantRecoveries;g.length>0&&c("promiseDone")(b.awaitBackground(d("MAWSharedCOPLoop").makeCopGUID("ParticipantsRecovery"),function(){return d("MAWProtocolQueueGroupNotification").doParticipantRecovery(g)},d("MAWSharedCOPLoop").COPBehaviour.NON_BLOCKING));f.length>0&&c("promiseDone")(b.awaitBackground(d("MAWSharedCOPLoop").makeCopGUID("GroupsRecovery"),function(){return d("MAWProtocolQueueGroupNotification").doGroupRecovery(f)},d("MAWSharedCOPLoop").COPBehaviour.NON_BLOCKING));return e.toAck});return k.apply(this,arguments)}g["default"]=a}),98);
__d("MAWIncomingReceiptDataFormatTxns",["MAWDbMsgTxns","MAWDbUnrenderedMsgTxns","MAWDexieTable","MAWMsgType","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to map the threadId of a message to its threadJid during receipt-writing"]);h=function(){return a};return a}function i(a){var b=a.author,c=a.chat;a=a.externalId;return c+"_"+a+"_"+b}function a(a,b){if(b.length===0)return d("MAWDexieTable").dexieResolve();var c=new Map(),e=new Set();b.forEach(function(a){a=a.msgs;a.forEach(function(a){return e.add(babelHelpers["extends"]({},a))})});a=d("MAWDexieTable").dexieAll([d("MAWDbMsgTxns").getMsgsByProtocolMsgId(a,Array.from(e)),d("MAWDbUnrenderedMsgTxns").getUnrenderedMsgsByProtocolMsgId(a,Array.from(e))]).then(function(a){var b=a[0];a=a[1];var c=[];b.forEach(function(a){return c.push({msg:a,renderType:"regular"})});a.forEach(function(a){return c.push({msg:a,renderType:"unrendered"})});return{msgs:c}});return a.then(function(a){a=a.msgs;b.forEach(function(a){var b=a.msgs,d=a.receivers,e=a.type;b.forEach(function(a){var b=i(a),f=c.get(b)||{deliveryReceipts:[],protocolMsgId:a,readReceipts:[],senderReceipts:[]};d.forEach(function(a){if(e==="read"||e==="read-self"){f.readReceipts.push(a);return}else if(e==="delivered"){f.deliveryReceipts.push(a);return}else if(e==="sender"){f.senderReceipts.push(a);return}else if(e==="inactive"){f.deliveryReceipts.push(a);return}e});c.set(b,f)})});var e=new Map(),f=new Map(),g=[];a.forEach(function(a){var b=a.msg,g=b.author,j=b.externalId,k=b.msgId,l=b.threadJid;b=b.type;if(l==null){d("WALogger").ERROR(h());return}if(b!==d("MAWMsgType").MSG_TYPE.CIPHERTEXT){b=i({author:g,chat:l,externalId:j});g=c.get(b);if(g!=null){g.protocolMsgId;l=babelHelpers.objectWithoutPropertiesLoose(g,["protocolMsgId"]);j=babelHelpers["extends"]({msgId:k},l);f.set(k,j);c["delete"](b)}}e.set(k,a)});c.forEach(function(a){var b=a.deliveryReceipts,c=a.protocolMsgId;a=a.readReceipts;if(b.length===0&&a.length===0)return;var d=c.author,e=c.chat;c=c.externalId;g.push({author:d,deliveryReceipts:b,externalId:c,readReceipts:a,thread:e})});return{msgIdToDbMsgMap:e,pendingReceiptsToWrite:g,receiptsToWriteMap:f}})}g.prepareDataForReceiptsToWrite=a}),98);
__d("MAWIncomingReceiptDataFormatUtils",["MAWAckLevel","MAWDbMsg"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=[],e=[];a.forEach(function(a){var f=null,g=a.receipt.msgId,h=a.receipt.statusTsPerUser,i=b.get(g);if(i==null)return;var j=i.msg;i=i.renderType;a.affectedUserJids.forEach(function(a){var b,c=null;((b=h.get(a))==null?void 0:b.readTs)!=null?c=d("MAWAckLevel").ACK.read:((b=h.get(a))==null?void 0:b.deliveredTs)!=null&&(c=d("MAWAckLevel").ACK.received);f=f==null||c!=null&&c>f?c:f});f!=null&&f>j.ack&&(i==="regular"?c.push({ack:f,msgId:g,reportingMeta:null}):(i,e.push({ack:f,msgId:g})))});return{regular:c,unrendered:e}}function b(a,b,c){return a.map(function(a){var e=b.get(a.receipt.msgId);if(e==null)return null;var f=e.msg,g=c.get(f.msgId);return g==null||g.deliveryReceipts.length===0&&g.readReceipts.length===0?null:babelHelpers["extends"]({},a,{externalId:f.externalId,msgRenderType:e.renderType,msgTs:d("MAWDbMsg").getCanonicalTsFromMsg(f),threadJid:f.threadJid})}).filter(Boolean)}g.createUpdateSystemAckParams=a;g.formatWriteReceiptResultsWithExtras=b}),98);
__d("MAWReceiptTrace",["ArmadilloDataTraceType","MAWBridgeTrace","MAWBridgeTraceEvent","MAWIndexedDb"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(a==="delivered"){a=b.reduce(function(a,b){return b.externalId!=null?[].concat(a,[b.externalId]):a},[]);a.length>0&&d("MAWIndexedDb").afterTransaction({tag:"UpdateTrace",value:d("MAWBridgeTrace").createBridgeUpdateTraceData(a,c("MAWBridgeTraceEvent").ReceivedReceipt,d("ArmadilloDataTraceType").armadilloMessageSend)})}}g.flushTrace=a}),98);
__d("MAWIncomingReceiptTxns",["MAWAckAndTimestampUpdatesForReceiptsTxns","MAWDbPendingReceiptTxns","MAWDbReceiptTxns","MAWDexieTable","MAWIncomingReceiptDataFormatUtils","MAWReceiptTrace"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b==null)return d("MAWDexieTable").dexieResolve();var c=b.msgIdToDbMsgMap,e=b.pendingReceiptsToWrite,f=b.receiptsToWriteMap;b=Array.from(f.values());return d("MAWDexieTable").dexieAll([d("MAWDbReceiptTxns").bulkWriteReceiptsForDevices(b),d("MAWDbPendingReceiptTxns").bulkAddPendingReceipts(a,e)]).then(function(b){b=b[0];var e=d("MAWIncomingReceiptDataFormatUtils").createUpdateSystemAckParams(b,c);b=d("MAWIncomingReceiptDataFormatUtils").formatWriteReceiptResultsWithExtras(b,c,f);var g=b.filter(function(a){a=((a=f.get(a.receipt.msgId))==null?void 0:a.deliveryReceipts)||[];return a.length>0});g.length>0&&d("MAWReceiptTrace").flushTrace("delivered",g);return d("MAWAckAndTimestampUpdatesForReceiptsTxns").handleAckAndTimestampUpdatesForReceipts(a,b,e)})}g.bulkHandleIncomingReceipts=a}),98);
__d("MAWWriteAppDataReceiptsApi",["MAWDexieTable","MAWIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({appData:d("MAWTransactionMode").READWRITE},"writeAppDataReceipts",function(a){return function(b){return h(a,b).then(function(b){return i(a,b)})}});function h(a,b){if(b.length===0)return d("MAWDexieTable").dexieResolve();b=b.reduce(function(a,b){var c=a.appDataExternalIdSet,d=a.appDataReceiversSet;a=b.externalIds;b=b.receivers;a.forEach(function(a){c.add(a)});b.forEach(function(a){d.add(a)});return{appDataExternalIdSet:c,appDataReceiversSet:d}},{appDataExternalIdSet:new Set(),appDataReceiversSet:new Set()});var c=b.appDataExternalIdSet;b=b.appDataReceiversSet;c=Array.from(c);var e=Array.from(b);return a.appData.where("externalId").anyOf(c).toArray().then(function(a){if(a.length===0)return;return j(a,e)})}function i(a,b){if(b==null)return d("MAWDexieTable").dexieResolve();var c=b.toDelete;b=b.toUpdate;return d("MAWDexieTable").dexieAll([c.length>0?a.appData.bulkDelete(c):d("MAWDexieTable").dexieResolve(),b.length>0?a.appData.bulkPut(b):d("MAWDexieTable").dexieResolve()]).then(function(){})}function j(a,b){return a.reduce(function(a,c){if(c==null)return a;for(var d=0;d<b.length;d++){var e=b[d];c.permittedIdentitiesPerDevice["delete"](e)}if(c.permittedIdentitiesPerDevice.size===0){a.toDelete.push(c.appDataId);return a}else{a.toUpdate.push(c);return a}},{toDelete:[],toUpdate:[]})}g.writeAppDataReceipts=a;g.prepareBulkAppDataReceipts=h;g.writeBulkAppDataReceipts=i}),98);
__d("MAWWritePeerMsgReceiptsApi",["MAWDbMsg","MAWDbMsgTxns","MAWDbPendingReceiptTxns","MAWDexieTable","MAWLoggerUtils","MAWMarkThreadAsReadTxns","MAWMsgType","WAGlobals","WAJids","WATagsLogger","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Processing "," receipt for messages not from me"]);h=function(){return a};return a}function i(a,b,c){return d("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(a,b).then(function(a){return a==null||a.type===d("MAWMsgType").MSG_TYPE.CIPHERTEXT?{msg:b,readReceipt:c,type:"missing"}:{dbMsg:a,msg:b,readReceipt:c,type:"found"}})}function j(a){a=a.map(function(a){return a.type==="missing"?null:a.dbMsg}).filter(Boolean);return a.reduce(function(a,b){var c=b.threadJid,e=d("WATimeUtils").castToMillisTime(d("MAWDbMsg").getSortOrderWithFallback(b)),f=a.get(c);(f==null||e>f.msgSortOrderMs)&&a.set(c,{msgId:b.msgId,msgSortOrderMs:e});return a},new Map())}function a(a,b){if(b.length===0)return d("MAWDexieTable").dexieResolve([]);b=b.map(function(a){d("WATagsLogger").TAGS([d("MAWLoggerUtils").Tag.Ephemeral,d("MAWLoggerUtils").Tag.PeerReceipt]).LOG(h(),a.type);if(a.type==="delivered")return;var b={device:void 0,ts:void 0};a.receivers.forEach(function(a){var c=a.device;a=a.ts;var e=d("WAJids").extractUserJid(c);e===d("WAGlobals").getMyUserJid()&&(b.ts==null||a<b.ts)&&(b.device=c,b.ts=a)});if(b.device!=null&&b.ts!=null)return babelHelpers["extends"]({},a,{receivers:{device:b.device,ts:b.ts}});else return}).filter(Boolean);var c=[];b.forEach(function(a){a.msgs.forEach(function(b){c.push([b,a.receivers])})});return d("MAWDexieTable").dexieAll(c.map(function(b){var c=b[0];b=b[1];return i(a,c,b)}))}function b(a,b){if(b.length===0)return d("MAWDexieTable").dexieResolve();var c=[],e=[];b.map(function(a){a.type==="missing"?c.push({author:a.msg.author,deliveryReceipts:[],externalId:a.msg.externalId,readReceipts:[a.readReceipt],thread:a.msg.chat}):e.push({msgId:a.msg,ts:a.readReceipt.ts})});var f=j(b);b=b.reduce(function(a,b){b=b.msg.chat;var c=f.get(b);c!=null&&a.set(b,{msgId:c.msgId,sortOrderMs:c.msgSortOrderMs});return a},new Map());return d("MAWDexieTable").dexieAll([d("MAWDbPendingReceiptTxns").bulkAddPendingReceipts(a,c),d("MAWMarkThreadAsReadTxns").bulkMarkThreadAsReadUpToMsgSortOrderMs(a,b)]).then(function(){})}g.getResultByProtocolMsgId=i;g.prepareReceiptsForMeToWrite=a;g.bulkWritePeerReceiptsForMsgsNotFromMeInternal=b}),98);
__d("MAWBulkWriteReceiptsApi",["MAWDexieTable","MAWIncomingReceiptDataFormatTxns","MAWIncomingReceiptTxns","MAWIndexedDb","MAWTransactionMode","MAWWriteAppDataReceiptsApi","MAWWritePeerMsgReceiptsApi"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=[],e=[],f=[];b.forEach(function(a){switch(a.type){case"msg-receipt":c.push(a.params);break;case"not-from-me":e.push(a.params);break;default:f.push(a.params);break}});return d("MAWDexieTable").dexieAll([f.length>0?d("MAWWriteAppDataReceiptsApi").prepareBulkAppDataReceipts(a,f):d("MAWDexieTable").dexieResolve(),c.length>0?d("MAWIncomingReceiptDataFormatTxns").prepareDataForReceiptsToWrite(a,c):d("MAWDexieTable").dexieResolve(),e.length>0?d("MAWWritePeerMsgReceiptsApi").prepareReceiptsForMeToWrite(a,e):d("MAWDexieTable").dexieResolve([])]).then(function(a){var b=a[0],c=a[1];a=a[2];if(b==null)return{incomingReceiptData:c,processedPeerReceiptsNotForMeResults:a};var d=b.toDelete;b=b.toUpdate;return{appDataReceipts:{toDelete:d,toUpdate:b},incomingReceiptData:c,processedPeerReceiptsNotForMeResults:a}})}b=d("MAWIndexedDb").makeMsgrTransactor({appData:(a=d("MAWTransactionMode")).READWRITE,chunk:a.READONLY,media:a.READONLY,messages:a.READWRITE,participants:a.READWRITE,pendingReceipts:a.READWRITE,threads:a.READWRITE,unrenderedMessages:a.READWRITE,xma:a.READONLY},"bulkWriteReceipts",function(a){return function(b){return b.length===0?d("MAWDexieTable").dexieResolve():h(a,b).then(function(b){var c=b.appDataReceipts,e=b.incomingReceiptData;b=b.processedPeerReceiptsNotForMeResults;return d("MAWDexieTable").dexieAll([c!=null&&(c==null?void 0:c.toDelete.length)>0&&(c==null?void 0:c.toUpdate.length)>0?d("MAWWriteAppDataReceiptsApi").writeBulkAppDataReceipts(a,c):d("MAWDexieTable").dexieResolve(),e!=null?d("MAWIncomingReceiptTxns").bulkHandleIncomingReceipts(a,e):d("MAWDexieTable").dexieResolve(),b.length>0?d("MAWWritePeerMsgReceiptsApi").bulkWritePeerReceiptsForMsgsNotFromMeInternal(a,b):d("MAWDexieTable").dexieResolve()]).then(function(){})})}});g.bulkWriteReceipts=b}),98);
__d("MAWSharedProtocolQueueReceipt",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";function g(a){if(a.receiptType==="appdata")return{params:{externalIds:a.externalIds,receivers:[a.from]},type:"appdata"};var b,c,d=a.chat;switch(a.receiptType){case"user":c=a.externalIds;b=[{device:a.from.author,ts:a.ts}];break;case"group":c=a.externalIds;b=[{device:a.from.author,ts:a.ts}];break;default:a.receiptType;c=[a.externalId];b=a.receivers;break}var e=a.messageAuthor;a=a.type;if(e==="@me"||a==="sender")return{params:{msgs:c.map(function(a){return{author:"@me",chat:d,externalId:a}}),receivers:b,type:a},type:"msg-receipt"};else return{params:{msgs:c.map(function(a){return{author:e,chat:d,externalId:a}}),receivers:b,type:a},type:"not-from-me"}}function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.map(function(a){a=g(a.receipt);return a});yield b(c);return{followUpParams:void 0,toAck:a.map(function(a){return a.stanzaQueueId})}});return h.apply(this,arguments)}f.sharedHandleIncomingReceiptStanza=a}),66);
__d("WADbHandlePermitedIdentitiesApi",["MAWTransactionMode","WADbTransactor"],(function(a,b,c,d,e,f,g){"use strict";a=d("WADbTransactor").makeSignalTransactor({receipts:d("MAWTransactionMode").READWRITE},"handlePermitedIdentitiesPerDevice",function(a){return function(b){var c=Array.from(b.keys());return a.receipts.where("waMsgId").anyOf(c).toArray().then(function(a){return a.map(function(a){var c;c=(c=b.get(a.waMsgId))!=null?c:new Set();for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f,g;if(d){if(e>=c.length)break;g=c[e++]}else{e=c.next();if(e.done)break;g=e.value}g=g;(f=a.permittedIdentitiesPerDevice)==null?void 0:f["delete"](g)}return a})}).then(function(b){return a.receipts.bulkPut(b).then(function(){})})}});g.handlePermitedIdentitiesPerDevice=a}),98);
__d("WAPreKeysStanzaUtils",["WAWap"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b;return(b=d("WAWap")).wap("key",null,b.wap("id",null,b.BIG_ENDIAN_CONTENT(a.id,3)),b.wap("value",null,a.keyPair.publicKey))}function b(a){var b;return(b=d("WAWap")).wap("skey",null,b.wap("id",null,b.BIG_ENDIAN_CONTENT(a.id,3)),b.wap("value",null,a.keyPair.publicKey),b.wap("signature",null,a.signature))}function c(a){var b=a.child("skey"),c=null;if(a.hasChild("key")){var d=a.child("key");c={id:d.child("id").contentUint(3),publicKey:d.child("value").contentSerializedPubKey()}}return{identity:a.child("identity").contentSerializedPubKey(),signedKey:{id:b.child("id").contentUint(3),publicKey:b.child("value").contentSerializedPubKey(),signature:b.child("signature").contentBytes(64)},oneTimeKey:c}}g.xmppPreKey=a;g.xmppSignedPreKey=b;g.readSessionInfo=c}),98);
__d("WAReceiptUtils",["WACryptoManagerUtils","WADeprecatedSendIq","WAMapWithDefault","WAMsg","WAPREList","WAPREMetrics","WAPreKeysStanzaUtils","WARequestPreKeyDigest","WAWap","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.retryCount;c=c+1;var e=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.RETRY_RECEIPTS_SENT,{"int":{retries:c}});c>=3&&(yield d("WARequestPreKeyDigest").requestPreKeyDigestFn(function(a){return a(b)}));var f=null;c>=2&&(f=(yield d("WACryptoManagerUtils").getSignalInfoForRetry(b.cryptoManager)));var g=b.cryptoManager.regInfo.regId;e.endSuccess();return k(a,c,g,f)});return i.apply(this,arguments)}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.externalId,e=a.from,f=a.participant,g;e.type==="group"?g=e.groupJid:(e.type,g=e.deviceJid);yield d("WADeprecatedSendIq").deprecatedSendStanzaAndWaitForAck(yield h(a,b),{id:c,"class":"receipt",from:g,participant:f})});return j.apply(this,arguments)}function k(a,b,c,e){var f=null;if(e!=null){var g=e.keyType,h=e.signedPreKey,i=e.preKey;e=e.publicKey;var j=a.deviceIdentity!=null?d("WAWap").wap("device-identity",null,a.deviceIdentity):null;f=d("WAWap").wap("keys",null,d("WAWap").wap("type",null,d("WAWap").BIG_ENDIAN_CONTENT(g,1)),d("WAWap").wap("identity",null,e),d("WAPreKeysStanzaUtils").xmppPreKey(i),d("WAPreKeysStanzaUtils").xmppSignedPreKey(h),j)}a.from.type==="group"?g=a.from.groupJid:(a.from.type,g=a.from.deviceJid);return d("WAWap").wap("receipt",{category:a.category!=null?d("WAWap").CUSTOM_STRING(a.category):d("WAWap").DROP_ATTR,id:d("WAWap").CUSTOM_STRING(a.externalId),participant:a.participant?d("WAWap").DEVICE_JID(a.participant):d("WAWap").DROP_ATTR,recipient:a.recipient?d("WAWap").USER_JID(a.recipient):d("WAWap").DROP_ATTR,to:d("WAWap").JID(g),type:"retry"},d("WAWap").wap("retry",{count:d("WAWap").INT(b),id:d("WAWap").CUSTOM_STRING(a.externalId),t:d("WAWap").INT(a.ts),v:"1"}),d("WAWap").wap("registration",null,d("WAWap").BIG_ENDIAN_CONTENT(c)),f)}function c(a){var b=new(d("WAMapWithDefault").MapWithDefault)(function(a){return new Set()});for(a of a){var c=a.receipt;if(c.receiptType==="group"||c.receiptType==="user")for(var e of c.externalIds)b.get(d("WAMsg").craftWAMsgIdString({author:c.messageAuthor,chat:c.chat,externalId:e})).add(c.from.author);else if(c.receiptType==="group-server-agg")for(e of c.receivers)b.get(d("WAMsg").craftWAMsgIdString({author:c.messageAuthor,chat:c.chat,externalId:c.externalId})).add(e.device)}return b.toMap()}g.makeRetryReceipt=h;g.sendRetryReceipt=a;g.calculateIdentitiesToDelete=c}),98);
__d("MAWProtocolQueueReceipt",["MAWBulkWriteReceiptsApi","MAWSharedProtocolQueueReceipt","WADbHandlePermitedIdentitiesApi","WAReceiptUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("WADbHandlePermitedIdentitiesApi").handlePermitedIdentitiesPerDevice(d("WAReceiptUtils").calculateIdentitiesToDelete(a)).then(function(){return d("MAWSharedProtocolQueueReceipt").sharedHandleIncomingReceiptStanza(a,d("MAWBulkWriteReceiptsApi").bulkWriteReceipts)})}g.handleIncomingReceiptStanza=a}),98);
__d("MAWCOPReceiptsHandler",["MAWIsQuotaExceededError","MAWProtocolQueueReceipt","MAWSharedCOPLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Errors occurred while processing receipts batch, see transactor error reports."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["receipt consumer: ",""]);i=function(){return a};return a}function a(a){return j(a)["catch"](function(a){if(d("MAWIsQuotaExceededError").isQuotaExceededError(a))throw a;c("MAWSharedCOPLogger").ERROR(i(),a);return[]})}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return[];var b=(yield d("MAWProtocolQueueReceipt").handleIncomingReceiptStanza(a));b.toAck.length!==a.length&&c("MAWSharedCOPLogger").WARN(h());return b.toAck});return k.apply(this,arguments)}g["default"]=a}),98);
__d("MAWBulkGetAppDataForRetryApi",["MAWIndexedDb","MAWTransactionMode","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=30*d("WATimeUtils").DAY_SECONDS;a=d("MAWIndexedDb").makeMsgrTransactor({appData:d("MAWTransactionMode").READONLY},"bulkGetAppDataForRetry",function(a){return function(b){var c=b.map(function(a){a=a.externalId;return a});return a.appData.where("externalId").anyOf(c).toArray().then(function(a){var c=new Map(a.map(function(a){return[a.externalId,a]}));return b.map(function(a){var b=a.deviceJid;a=a.externalId;a=c.get(a);if(a==null)return{type:"missing"};b=a.permittedIdentitiesPerDevice.get(b);return b==null||!d("WATimeUtils").happenedWithin(a.ts,h)?{type:"unauthorized"}:{appData:a.contents,deviceIdentity:b,permittedIdentitiesPerDevice:a.permittedIdentitiesPerDevice,type:"unacked"}})})}});g.bulkGetAppDataForRetry=a}),98);
__d("MAWWriteAppDataRetryApi",["MAWIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({appData:d("MAWTransactionMode").READWRITE},"writeAppDataRetry",function(a){return function(b,c,d){return a.appData.get({externalId:b}).then(function(b){if(b==null)return;var e=b.permittedIdentitiesPerDevice,f=e.get(c);if(f==null)return;f.baseKey=d;e.set(c,f);return a.appData.update(b.appDataId,{permittedIdentitiesPerDevice:e}).then(function(){})})}});g.writeAppDataRetry=a}),98);
__d("WAMarkParticipantNeedsKeyApi",["MAWTransactionMode","WADbPersonalSenderKeyStatusTxns","WADbTransactor"],(function(a,b,c,d,e,f,g){"use strict";a=d("WADbTransactor").makeSignalTransactor({personalSenderKeyStatuses:d("MAWTransactionMode").READWRITE},"markParticipantNeedsKey",function(a){return function(b,c){return d("WADbPersonalSenderKeyStatusTxns").removeDevicesToMultiplePersonalSenderKeyStatuses(a,[b],[c]).then(function(){})}});g.markParticipantNeedsKey=a}),98);
__d("WASendAppDataIndividualProtocol",["WAAsMessageApplication","WAConvertAppData","WAEncUserMsg","WAErrorMessage","WAGetCurrentUserDeviceInfoApi","WAGlobals","WAMsgApplication.pb","WAResultOrError","WASmaxAppdataPublishPeerRPC","WATagsLogger","WATimeUtils","asyncToGeneratorRuntime","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to send appdata. Error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to fetch current device public identity key"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWSendAppData Failed to encrypt appdata"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Sending appdata, externalId: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to send appdata retry to device with error: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to send appdata to device with error: ",""]);m=function(){return a};return a}var n=d("WATagsLogger").TAGS(["sendAppDataIndividual"]);function a(a,b,c,e,f){return o(a,b,c,void 0,e,f)["catch"](function(a){a=d("WAErrorMessage").maybeGetMessageFromError(a);n.ERROR(m(),a);return d("WAResultOrError").makeError("runtime-error")})}function c(a,b,c,e,f,g){return o(a,b,c,e,f,g)["catch"](function(a){a=d("WAErrorMessage").maybeGetMessageFromError(a);n.ERROR(l(),a);return d("WAResultOrError").makeError("runtime-error")})}function o(a,b,c,d,e,f){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g){n.LOG(k(),b);a=d("WAConvertAppData").convertAppData(a);var l={bytes:d("WAAsMessageApplication").castToMessageApplicationBytes(d("encodeProtobuf").encodeProtobuf(d("WAMsgApplication.pb").MessageApplicationSpec,a).readByteArray()),version:"v3"};a=(yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return d("WAEncUserMsg").encryptDeviceJidMessage(c,{messageBytes:l,type:"appdata"},{cryptoManager:a},void 0,g,f)},{operationType:"encrypt",flush:!0}));if(a==null){n.LOG(j());return d("WAResultOrError").makeError("encrypt-failure")}var m;e!=null&&(m={appdataT:d("WATimeUtils").unixTime(),encRetryMixinArgs:{encCount:e}});e={appdataTo:c,encVersionFutureproofMixinArgs:{encV:parseInt(a.v,10)},encTypeIndividualMixinArgs:{encType:a.type,encElementValue:a.ciphertext},retryMixinArgs:m};e={peerPeerSingle:e};var o=void 0;if(a.type==="pkmsg"){var p=(yield d("WAGetCurrentUserDeviceInfoApi").getCurrentUserDeviceInfo());p=p==null?void 0:p.identityKey;if(p==null){n.ERROR(i());return d("WAResultOrError").makeError("no-public-identity")}o={deviceIdentityElementValue:p}}p={appdataId:b,peerPeerFanoutOrPeerSingleMixinGroupArgs:e,deviceIdentityMixinArgs:o};b=(yield d("WASmaxAppdataPublishPeerRPC").sendPeerRPC(p));switch(b.name){case"PeerResponseSuccess":return d("WAResultOrError").makeResult({baseKey:a.baseKey});default:b.name;n.ERROR(h(),b.value.error);return d("WAResultOrError").makeError("ack-failure")}});return p.apply(this,arguments)}g.sendAppDataToIndividualDeviceProtocol=a;g.sendAppDataRetryToIndividualDeviceProtocol=c}),98);
__d("WAWriteMsgRetryApi",["MAWTransactionMode","WADbTransactor","WAMsg"],(function(a,b,c,d,e,f,g){"use strict";a=d("WADbTransactor").makeSignalTransactor({receipts:d("MAWTransactionMode").READWRITE},"writeMsgRetry",function(a){return function(b,c,e){return h(a,d("WAMsg").craftWAMsgIdString({author:b.author,chat:b.chat,externalId:b.externalId}),c,e)}});function h(a,b,c,d){return a.receipts.get({waMsgId:b}).then(function(b){if(b==null||b.permittedIdentitiesPerDevice==null)return;var e=b.permittedIdentitiesPerDevice,f=e.get(c);if(f==null)return;f.baseKey=d;e.set(c,f);return a.receipts.put(babelHelpers["extends"]({},b,{permittedIdentitiesPerDevice:e})).then(function(){})})}g.writeMsgRetry=a}),98);
__d("WAWriteMsgRetryCountApi",["MAWTransactionMode","WADbTransactor","WAMsg"],(function(a,b,c,d,e,f,g){"use strict";a=d("WADbTransactor").makeSignalTransactor({receipts:d("MAWTransactionMode").READWRITE},"writeMsgRetryCount",function(a){return function(b,c,e){return h(a,d("WAMsg").craftWAMsgIdString({author:b.author,chat:b.chat,externalId:b.externalId}),c,e)}});function h(a,b,c,d){return a.receipts.get({waMsgId:b}).then(function(b){var e;if(b==null||d==null)return;e=(e=b.retryCountsPerDevice)!=null?e:new Map();e.set(c,d);return a.receipts.put(babelHelpers["extends"]({},b,{retryCountsPerDevice:e})).then(function(){})})}g.writeMsgRetryCount=a}),98);
__d("MAWSharedHandleRetryRequest",["MAWBulkGetAppDataForRetryApi","MAWConstants","MAWDebugMsg","MAWQplProxy","MAWWriteAppDataRetryApi","Promise","WACryptoManagerUtils","WACryptoUtils","WAGenReportingMeta","WAGlobals","WAJids","WALoadReceiptApi","WALogger","WAMarkParticipantNeedsKeyApi","WASendAppDataIndividualProtocol","WASendMsgInternal","WASentBytesCache","WAWap","WAWriteMsgRetryApi","WAWriteMsgRetryCountApi","asyncToGeneratorRuntime","gkx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleRetryRequest denied because receipt is null"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleRetryRequest denied because (messageId, deviceJID, retryCount) is already executed for retryCount ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleRetryRequest denied with type ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleRetryRequest denied with type "," id: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkHandleRetryRequest unexpected receipt"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkHandleRetryRequest called for ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unknown receipt categories: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleRetryRequest denied due to retry count"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received retry request from peer without recipient set"]);q=function(){return a};return a}function r(){var a=0,b=0,c=new Map();return{getMetrics:function(){var d;return{appDataMissing:(d=c.get("appDatamissing"))!=null?d:0,appDataUnauthorized:(d=c.get("appDataunauthorized"))!=null?d:0,appDataUnsupported:(d=c.get("appDataunsupported"))!=null?d:0,msgMissing:(d=c.get("msgmissing"))!=null?d:0,msgUnauthorized:(d=c.get("msgunauthorized"))!=null?d:0,msgUnsupported:(d=c.get("msgunsupported"))!=null?d:0,receiptFailures:b,receiptSuccesses:a}},markError:function(){return b++},markSuccess:function(){return a++},setError:function(a){var b=c.get(a);b!=null?c.set(a,b+1):c.set(a,1)}}}function s(a,b){return b+"_"+a}function a(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return[];d("WALogger").LOG(n(),a.map(function(a){a=a.externalId;return a}).join(","));var e=d("MAWQplProxy").startQplUserFlow(c("qpl")._(25308942,"164"),{bool:{bulk:!0},"int":{receipts:a.length},string:{origin:self.location.origin}}),f=new Set(a.filter(function(a){return a.category!=null&&!C(a)||D(a)}).map(function(a){return a.externalId})),g=a.filter(function(a){return!f.has(a.externalId)&&!C(a)}),i=a.filter(C);i=(yield (h||(h=b("Promise"))).all([u(i),x(g)]));g=i[0];i=i[1];e.addPoint("get_msg_for_retry_complete");var j=[],k=r();for(a of a){var l=g.get(a.externalId),o=i.get(s(a.from.author,a.externalId));f.has(a.externalId)?(e.addPoint("just_ack"),k.markError(),k.setError("just_ack"),E(a)):l!=null?(e.addPoint("app_data_for_retry"),yield F(a,l,e,!1,k),e.addPoint("app_data_for_retry_complete")):o!=null?(e.addPoint("msg_for_retry"),yield H(a,o,e,!1,k),e.addPoint("msg_for_retry_complete")):(d("WALogger").ERROR(m()),k.markError(),k.setError("unexpected_receipt"));j.push(B(a))}e.endSuccess({"int":babelHelpers["extends"]({},k.getMetrics())});return j});return t.apply(this,arguments)}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return new Map();var b=a.map(function(a){var b=a.externalId;a=a.from;return{deviceJid:a.author,externalId:b}});b=(yield d("MAWBulkGetAppDataForRetryApi").bulkGetAppDataForRetry(b));return new Map(b.map(function(b,c){c=a[c];return[c.externalId,b]}))});return v.apply(this,arguments)}function w(a){return a.map(function(a){var b=a.externalId,c=a.from,e=a.recipient,f=c.chat;if(c.type==="device"&&d("WAJids").extractUserJid(c.author)===d("WAJids").extractUserJid(d("WAGlobals").getMyDeviceJid())){if(e==null){d("WALogger").ERROR(q());return}f=e}e={author:"@me",chat:f,externalId:b};return{deviceJid:c.author,protocolMsgId:e,retryCount:a.retryCount}})}function x(a){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return new Map();var b=w(a),c=a.filter(function(a,c){return b[c]!=null}),e=b.filter(Boolean);a=(yield d("WASentBytesCache").sentBytesCache().getMsgsForRetry(e));a=new Map(a.map(function(a,b){return[s(e[b].deviceJid,c[b].externalId),{msgForRetry:a,retryRequest:e[b]}]}));return a});return y.apply(this,arguments)}function z(a,b){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=void 0,e=(yield d("WAGlobals").getWaOneQueue().enqueue(function(b){b=b.cryptoManager;return d("WACryptoManagerUtils").getParticipantInfo(a.from.author,b)},{flush:!1,operationType:"get_participant_info"}));if(a.keys!=null){var f=a.keys,g=a.timestamp;b={baseKey:b.baseKey,keys:f,timestamp:g};f=J(a,e);f?c={session:b,type:"compareTSAndUseSession"}:c={session:b,type:"useSession"}}else{g=e==null||a.regId!==e.regId;g&&(c={type:"requestNewSession"})}return c});return A.apply(this,arguments)}function B(a){var b,c=a.externalId;a=a.from;return(b=d("WAWap")).wap("ack",{"class":"receipt",id:b.CUSTOM_STRING(c),participant:b.PARTICIPANT_JID(a),to:b.TO_JID(a),type:"retry"})}function C(a){a=a.category;return a==="peer_appdata"||a==="peer"}function D(a){a=a.retryCount;return a>=d("MAWConstants").MESSAGE_RETRY_COUNT_LIMIT}function E(a){if(D(a)){d("WALogger").LOG(p());return}if(a.category!=null){d("WALogger").WARN(o(),a.category);return}}function F(a,b,c,d,e){return G.apply(this,arguments)}function G(){G=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){e===void 0&&(e=!0);var g=a.externalId,h=a.from,i=a.retryCount;c.addPoint("get_app_data_for_retry");if(b.type!=="unacked"){d("WALogger").LOG(l(),b.type,g);e?c.endFail(b.type):c.addPoint(b.type);f==null?void 0:f.markError();f==null?void 0:f.setError("appData"+b.type);return}e=b.appData;b=b.deviceIdentity;a=(yield z(a,b));c.addPoint("get_session_info");e=(yield d("WASendAppDataIndividualProtocol").sendAppDataRetryToIndividualDeviceProtocol(e,g,h.author,i,b.pubKey,a));c.addPoint("send_app_data");if(i>=2&&e.success===!0&&e.value.baseKey!=null){b=e.value.baseKey;yield d("MAWWriteAppDataRetryApi").writeAppDataRetry(g,h.author,b)}f==null?void 0:f.markSuccess();return e});return G.apply(this,arguments)}function H(a,b,c,d,e){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var h;f===void 0&&(f=!0);var l=b.msgForRetry;b=b.retryRequest;var m=a.externalId,n=a.from,o=a.retryCount,p=b.protocolMsgId.chat;if(l.type!=="unacked"){f&&e.endFail(l.type);d("WALogger").LOG(k(),l.type);g==null?void 0:g.markError();g==null?void 0:g.setError("msg"+l.type);return}if(l.retryCount!=null&&l.retryCount>0&&l.retryCount===o){f&&e.endFail("unauthorized");d("WALogger").LOG(j(),o);g==null?void 0:g.markError();g==null?void 0:g.setError("msgunauthorized");return}n.type==="group"&&(yield d("WAMarkParticipantNeedsKeyApi").markParticipantNeedsKey(n.chat,n.author),e.addPoint("mark_participant_needs_key_complete"));var q=l.frankingKey,r=l.frankingVersion,s=l.isInstamadillo,t=l.messageBytes,u=l.messageType,v=l.protocolMsgId,w=(yield d("WALoadReceiptApi").loadReceipt({author:v.author,chat:v.chat,externalId:v.externalId}).then(function(a){return a.success?a.value:null}));h=w==null?void 0:(h=w.permittedIdentitiesPerDevice)==null?void 0:h.get(b.deviceJid);if(w==null||h==null){f&&e.endFail("unauthorized");d("WALogger").LOG(i());g==null?void 0:g.markError();g==null?void 0:g.setError("msgunauthorized");return}w=(yield z(a,h));e.addPoint("get_session_info_complete");c("gkx")("24021")&&(yield d("MAWDebugMsg").writeDebugMsg(p,"Handling retry request for message: "+l.protocolMsgId.externalId.toString()+" to user "+n.author));f=(yield d("WAGenReportingMeta").genReportingMeta(t.bytes,q,r));a=(yield d("WASendMsgInternal").sendMessage({chat:p,count:o,deviceIdentity:null,externalId:m,identityKey:h.pubKey,messageBytes:t,messageType:u,protocolMsgId:v,reportingMeta:f,sessionInfo:w,to:n.author,type:"direct"},null,s));e.addPoint("send_message_complete");if(o>=2&&a.success&&a.value.baseKey!=null){l=a.value.baseKey;yield d("WAWriteMsgRetryApi").writeMsgRetry(b.protocolMsgId,n.author,l)}o>=1&&a.success&&(yield d("WAWriteMsgRetryCountApi").writeMsgRetryCount(b.protocolMsgId,n.author,o));g==null?void 0:g.markSuccess()});return I.apply(this,arguments)}function J(a,b){if(a.offline==null)return!1;var c=b==null||a.regId!==b.regId;b=b!=null&&a.keys!=null&&!d("WACryptoUtils").uint8ArraysEqual(b.pubKey,a.keys.identity);return c||b}g.bulkHandleRetryRequest=a}),98);
__d("MAWCOPRetryHandler",["MAWIsQuotaExceededError","MAWSharedCOPLogger","MAWSharedHandleRetryRequest","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["receipt consumer: ",""]);h=function(){return a};return a}function a(a){return i(a)["catch"](function(a){if(d("MAWIsQuotaExceededError").isQuotaExceededError(a))throw a;c("MAWSharedCOPLogger").ERROR(h(),a);return[]})}function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return[];yield d("MAWSharedHandleRetryRequest").bulkHandleRetryRequest(a.map(function(a){return a.retry}));return a.map(function(a){return a.stanzaQueueId})});return j.apply(this,arguments)}g["default"]=a}),98);
__d("MAWSplitProtocolEntityByType",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b={appdatas:[],instructions:[],messages:[],notifications:[],receipts:[],retries:[]};a.forEach(function(a){switch(a.type){case"message":b.messages.push(a);return;case"retryReceipt":b.retries.push(a);return;case"appdata":b.appdatas.push(a);return;case"notification":b.notifications.push(a);return;case"receipt":b.receipts.push(a);return;default:a;b.instructions.push(a);return}});return b}f["default"]=a}),66);
__d("MAWProtocolQueueProcess",["MAWCOPAppdataHandler","MAWCOPInstructionsHandler","MAWCOPMessagesHandler","MAWCOPNotificationsHandler","MAWCOPReceiptsHandler","MAWCOPRetryHandler","MAWSharedCOP","MAWSharedCOPHandler","MAWSharedCOPLogger","MAWSplitProtocolEntityByType","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["New COP handler for "," msgs, "," appdatas, "," notifications, "," receipts, "," retries, "," instructions"]);i=function(){return a};return a}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a=c("MAWSplitProtocolEntityByType")(a);c("MAWSharedCOPLogger").LOG(i(),a.messages.length,a.appdatas.length,a.notifications.length,a.receipts.length,a.retries.length,a.instructions.length);e.startPoint(d("MAWSharedCOPHandler").ConsumerProcessingStages.PERSIST);e.startPoint(d("MAWSharedCOPHandler").ConsumerProcessingStages.PERSIST);var f=d("MAWSharedCOP").getCOP();f=(yield (h||(h=b("Promise"))).all([c("MAWCOPMessagesHandler")(a.messages,f.queue),c("MAWCOPInstructionsHandler")(a.instructions),c("MAWCOPReceiptsHandler")(a.receipts),c("MAWCOPAppdataHandler")(a.appdatas),c("MAWCOPNotificationsHandler")(a.notifications,f.queue),c("MAWCOPRetryHandler")(a.retries)])).flat();e.endPoint(d("MAWSharedCOPHandler").ConsumerProcessingStages.PERSIST);e.endSuccess();return f});return j.apply(this,arguments)}g.processProtocolQueueEntries=a}),98);
__d("MAWRemoveExpiredDFMMsgsContent",["MAWDbEditMsgHistoryTxns","MAWDeleteExpiredMsgsApi","MAWDexieTable","MAWIndexedDb","MAWJidUtils","MAWMsgType","MAWTransactionMode","MAWXMAUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READWRITE,editMsgHistory:a.READWRITE,media:a.READWRITE,mediaBackup:a.READWRITE,unrenderedMessages:a.READWRITE,xma:a.READWRITE},"removeExpiredDFMMsgsContent",function(a){return function(){var b=d("WATimeUtils").unixTime();return a.unrenderedMessages.where("messageDeleteForMeTs").belowOrEqual(b).toArray().then(function(b){var c=b.map(function(a){if(a.mediaId!=null)return[a.mediaId,a.msgId]}).filter(Boolean),e=b.map(function(a){if(a.type===d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME)return babelHelpers["extends"]({},a,{mediaId:void 0,msgContent:void 0,quote:void 0,serverTs:void 0,xmaMessageType:void 0})}).filter(Boolean),f=b.map(function(a){var b;b=(b=a.quote)==null?void 0:b.content;if(d("MAWXMAUtils").isXMAShare(a.xmaMessageType)&&a.externalId!=null){var c=d("MAWJidUtils").maybeToProtocolMsgId(a.author,a.threadJid,a.externalId);if(c!=null)return[c,a.msgId]}else if(b!=null&&d("MAWXMAUtils").isXMAStoryReply(b.xmaMessageType)){c=d("MAWJidUtils").maybeToProtocolMsgId(b.author,a.threadJid,b.externalId);if(c!=null)return[c,a.msgId]}}).filter(Boolean),g=b.map(function(a){return[a.externalId,a.threadJid]});return d("MAWDexieTable").dexieAll([d("MAWDeleteExpiredMsgsApi").deleteOrUpdateXMAForExpiredMsgs(a,f),d("MAWDeleteExpiredMsgsApi").deleteOrUpdateMediaAndChunkForExpiredMsgs(a,c),d("MAWDbEditMsgHistoryTxns").deleteExpiredEditMsgHistory(a,g),a.unrenderedMessages.bulkPut(e)]).then(function(){return d("MAWDexieTable").dexieResolve(b.length)})})}});g.removeExpiredDFMMsgsContent=b}),98);
__d("MAWRemoveExpiredMsgsFromUIApi",["MAWBridgeTypesCreators","MAWBridgeXMA","MAWDbMsg","MAWDbXMATxns","MAWDexieTable","MAWEphemeralMsgTxns","MAWIndexedDb","MAWJidUtils","MAWMsgType","MAWTransactionMode","MAWUpdateQuotedMsgTxns","MAWXMAUtils","WATimeUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";b=d("MAWIndexedDb").makeMsgrTransactor({groupInfo:(a=d("MAWTransactionMode")).READONLY,media:a.READONLY,messages:a.READWRITE,threads:a.READWRITE,xma:a.READONLY},"removeExpiredMsgsFromUI",function(a){return function(){return a.messages.where("messageExpirationTs").belowOrEqual(d("WATimeUtils").unixTime()).filter(function(a){return a.ephemeralMsgDisappeared!==!0}).toArray().then(function(b){if(b.length===0)return 0;var e=b.reduce(function(a,b){var c;c=(c=a.get(b.threadJid))!=null?c:new Set();c.add(b.msgId);a.set(b.threadJid,c);return a},new Map()),f=b.map(function(a){return babelHelpers["extends"]({},a,{ephemeralMsgDisappeared:!0})}),g=a.messages.bulkPut(f);b=b.map(function(b){return d("MAWUpdateQuotedMsgTxns").disassociateQuotedMsg(a,b.threadJid,b.externalId,b.author,d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL)});return d("MAWDexieTable").dexieAll([g,d("MAWEphemeralMsgTxns").updateThreadsOnMessagesExpiredFromUi(a,e)].concat(b)).then(function(){var b=[];f.forEach(function(e){d("MAWIndexedDb").afterTransaction({tag:"DeleteMessages",value:d("MAWBridgeTypesCreators").createBridgeDeleteMessages(e.threadJid,[e])});if(d("MAWDbMsg").isMediaMsg(e)){var f=e.mediaId,g=e.plaintextHash;f!=null&&(c("gkx")("2419")&&g!=null?d("MAWIndexedDb").afterTransaction({tag:"MediaExpired",value:{mediaId:f,msgId:e.msgId,plaintextHash:g,threadJid:e.threadJid}}):d("MAWIndexedDb").afterTransaction({tag:"MediaExpired",value:{mediaId:f,msgId:e.msgId,threadJid:e.threadJid}}))}d("MAWXMAUtils").isXMAShare(e.xmaMessageType)&&b.push(d("MAWDbXMATxns").maybeGetXMAFromProtocolMsgId(a,d("MAWJidUtils").maybeToProtocolMsgId(e.author,e.threadJid,e.externalId)).then(function(a){a!=null&&d("MAWIndexedDb").afterTransaction({tag:"XMAShareExpired",value:d("MAWBridgeXMA").createBridgeXMAShareExpired(e,a.xmaId)})}))});return d("MAWDexieTable").dexieAll(b).then(function(a){return f.length})})})}});g.removeExpiredMsgsFromUI=b}),98);
__d("MAWRemoveExpiredPendingStanzas",["MAWIndexedDb","MAWTransactionMode","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({pendingStanzas:d("MAWTransactionMode").READWRITE},"removeExpiredPendingStanzas",function(a){return function(){var b=d("WATimeUtils").unixTime();return a.pendingStanzas.where("deleteTs").belowOrEqual(b).toArray().then(function(b){var c=b.map(function(a){return a.rowId});return a.pendingStanzas.bulkDelete(c).then(function(){return c.length})})}});g.removeExpiredPendingStanzas=a}),98);
__d("MAWXMAExpirationTxns",["MAWAuthor","MAWDbMsgTxns","MAWDexieTable","MAWXMAUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWDbMsgTxns").getMsgsByMsgIds(a,b).then(function(b){var c=b.map(function(a){if(a.quote!=null&&d("MAWXMAUtils").isXMAStoryReply(a.quote.content.xmaMessageType)){var b=babelHelpers["extends"]({},a.quote.content,{mediaId:void 0});b={content:b,remoteJid:a.quote.remoteJid};return babelHelpers["extends"]({},a,{quote:b})}}).filter(Boolean);return a.messages.bulkPut(c).then(function(){return c})})}function b(a,b){b=b.map(function(b){return h(a,b)});return d("MAWDexieTable").dexieAll(b).then(function(a){return a.flat()})}function h(a,b){var c=d("MAWAuthor").getAuthorUserJid(b.author);return a.messages.where("quoteExternalId").equals(b.externalId).toArray().then(function(a){return a.length===0?[]:a.filter(function(a){var e=a.quote;a=a.threadJid;return d("MAWAuthor").getAuthorUserJid(e==null?void 0:e.content.author)===c&&a===b.chat})})}g.updateExpiredStoryReplyMsg=a;g.getXMAShareReplyMsgsToUpdate=b}),98);
__d("MAWRemoveExpiredXMAMsgsContentApi",["MAWBridgeMsg","MAWBridgeXMA","MAWDbMsgTxns","MAWDeleteExpiredMsgsApi","MAWDexieTable","MAWIndexedDb","MAWTransactionMode","MAWXMAExpirationTxns","MAWXMAUtils","WALogger","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMAId is null when handling tombstone, something went wrong"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Trying to expire an non-story share XMA in XMA Cleaner"]);i=function(){return a};return a}b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READWRITE,media:a.READWRITE,mediaBackup:a.READWRITE,messages:a.READWRITE,xma:a.READWRITE},"removeExpiredXMAMsgsContent",function(a){return function(){var b=d("WATimeUtils").unixTime();return a.xma.where("targetExpiringAtSec").belowOrEqual(b).filter(function(a){return a.isTombstoned!=null&&!a.isTombstoned||a.isTombstoned==null}).toArray().then(function(b){var c=[],e=new Map(),f=[],g=[],h=[];b.forEach(function(a){d("MAWXMAUtils").isXMAShare(a.targetType)&&!d("MAWXMAUtils").isXMAStoryShare(a.targetType)&&d("WALogger").ERROR(i());var b=a.msgId;if(b==null)return;d("MAWXMAUtils").isXMAStoryShare(a.targetType)&&(e.set(b,a.xmaId),f.push({author:a.author,chat:a.threadJid,externalId:a.externalId}));d("MAWXMAUtils").isXMAStoryReply(a.targetType)&&(g.push(b),a.associatedMessageId!=null&&h.push(a.associatedMessageId));var j=a.previewMediaIds;j!=null&&j.forEach(function(a){c.push([a,b])});a.faviconMediaId!=null&&c.push([a.faviconMediaId,b]);a.headerMediaId!=null&&c.push([a.headerMediaId,b])});var l=b.map(function(a){return d("MAWXMAUtils").buildTombstonedDbXMA(a)}),m=Array.from(e.keys());return d("MAWDexieTable").dexieAll([d("MAWDbMsgTxns").bulkUpdateDbMsgXMAExpired(a,[].concat(m,g)),d("MAWXMAExpirationTxns").getXMAShareReplyMsgsToUpdate(a,f),d("MAWXMAExpirationTxns").updateExpiredStoryReplyMsg(a,h),d("MAWDeleteExpiredMsgsApi").deleteOrUpdateMediaAndChunkForExpiredMsgs(a,c),a.xma.bulkPut(l)]).then(function(a){var c=a[0],f=a[1];a=a[2];j(c,e,f);k(a);return d("MAWDexieTable").dexieResolve(b.length)})})}});function j(a,b,c){a.forEach(function(a){if(!d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType))return;d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(a)});var c=b.get(a.msgId);if(c==null){d("WALogger").ERROR(h());return}d("MAWIndexedDb").afterTransaction({tag:"XMAShareTombstoned",value:d("MAWBridgeXMA").createBridgeXMAShareTombstoned(a,c)})}),c.forEach(function(a){d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(a,void 0,void 0)})})}function k(a){a.map(function(a){d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(a)})})}g.removeExpiredXMAMsgsContent=b}),98);
__d("MAWPreKeysCleaner",["WACryptoManagerUtils","WAGlobals","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=60*d("WATimeUtils").DAY_SECONDS;function a(){return d("WAGlobals").getWaOneQueue().enqueue(function(a){var b=a.cryptoManager;return d("WACryptoManagerUtils").getPreKeyGenerationsTimestamps(b).then(function(a){a=i(a);if(a.length>0)return d("WACryptoManagerUtils").deletePreKeyGenerations(a,b)})},{afterInit:!0,flush:!0,operationType:"clear_expired_prekeys"})}function i(a){var b=[];for(var c=0;c+2<a.length;++c)d("WATimeUtils").happenedWithin(a[c+2].timestamp,h)||b.push(a[c].id);return b}g.EXPIRATION_SECONDS=h;g.clearExpiredPreKeys=a}),98);
__d("WADbTasks",[],(function(a,b,c,d,e,f){"use strict";a={cleanupExcessiveLogs:"cleanupExcessiveLogs",deleteExpiredKeys:"deleteExpiredKeys",generatePrekeys:"generatePrekeys",notifyDeviceRegistration:"notifyDeviceRegistration",queryGroups:"queryGroups",reprocessRevokeStanzasS397680:"reprocessRevokeStanzasS397680",rotateCAT:"rotateCAT",rotateKey:"rotateKey",syncAbProps:"syncAbProps"};f.Tasks=a}),66);
__d("WATaskScheduleApi",["MAWTransactionMode","Promise","WADbTransactor","WALogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["setTaskScheduledTime "," ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["getTaskScheduledTime ",""]);j=function(){return a};return a}var k=new Map(),l=d("WADbTransactor").makeSignalTransactor({tasks:d("MAWTransactionMode").READONLY},"getTasksScheduledTime",function(a){return function(b){return a.tasks.get(b).then(function(a){return a==null?null:a.scheduledTime})}});f=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(j(),a);if(k.has(a))return(h||(h=b("Promise"))).resolve(k.get(a));var c=(yield l(a));c!=null&&k.set(a,c);return c});return function(b){return a.apply(this,arguments)}}();var m=d("WADbTransactor").makeSignalTransactor({tasks:d("MAWTransactionMode").READWRITE},"setTaskScheduledTime",function(a){return function(b,c){d("WALogger").DEV(i(),b,c);k.set(b,c);return a.tasks.put({scheduledTime:c,taskName:b}).then(function(){})}});function a(){return k}function c(a,b){k.set(a,b)}function e(){k.clear()}g.getTaskScheduledTime=f;g.setTaskScheduledTime=m;g.getTaskScheduleCache=a;g.setTaskScheduleCache=c;g.clearTaskScheduleCache=e}),98);
__d("WATaskScheduler",["Promise","WAErr","WALogger","WAPromiseBackoffs","WAResolvable","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["taskScheduler: reschedule eventually failed for task ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["startScheduler invoked"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Task "," failed, try again later: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Task "," will try again later"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Task "," complete, waiting ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Task "," complete, deactivating"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Firing task ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Scheduling task "," in ","ms"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Task "," deactivated"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Tried to start task "," before registering its implementation"]);r=function(){return a};return a}var s="no_reschedule",t=function(){function a(a){this.$1=!1,this.$2={},this.$3={},this.$4={},this.$5=new Map(),this.$6=a.scheduledTimeResolver}var c=a.prototype;c.$7=function(a){var c=this,e=this.$5.get(a);if(e==null){d("WALogger").ERROR(r(),a).devConsole("start-task-without-impl");return}this.$6.get(a).then(function(f){var g=f==null,i=!g&&f===d("WATimeUtils").DEFAULT_UNIXTIME;if(i){d("WALogger").LOG(q(),a);return}i=f==null?0:f*1e3-d("WATimeUtils").unixTimeMs();i=Math.max(0,i);i=Math.min(i,~(1<<31));d("WALogger").LOG(p(),a,i);c.$4[a]=setTimeout(function(){delete c.$4[a],d("WALogger").LOG(o(),a),e(g).then(function(e){if(e==="no_reschedule")return new(h||(h=b("Promise")))(function(){});var f;e===d("WATimeUtils").DEFAULT_UNIXTIME?(d("WALogger").LOG(n(),a),delete c.$3[a],f=d("WATimeUtils").DEFAULT_UNIXTIME):e>=0?(d("WALogger").LOG(m(),a,e),delete c.$3[a],f=d("WATimeUtils").futureUnixTime(e)):(d("WALogger").LOG(l(),a),f=c.$8(a));return c.$6.set(a,f)}).then(function(){c.$7(a),c.$2[a]&&(c.$2[a].forEach(function(a){return a()}),delete c.$2[a])})["catch"](function(b){d("WALogger").LOG(k(),a,b);return c.$6.set(a,c.$8(a)).then(function(){c.$7(a)})})},i)})};c.$8=function(a){this.$3[a]||(this.$3[a]=d("WAPromiseBackoffs").createTimer({jitter:.1,max:d("WATimeUtils").HOUR_SECONDS*1e3,algo:{type:"fibonacci",first:1e3,second:2e3}}));return d("WATimeUtils").futureUnixTime(Math.round(this.$3[a]()/1e3))};c.$9=function(a,b){this.$2[a]||(this.$2[a]=[]),this.$2[a].push(b)};c.awaitTaskPromise=function(a){var c=this;return new(h||(h=b("Promise")))(function(b){c.$9(a,b)})};c.reschedule=function(a,b){this.$1?(this.$6.set(a,b),this.$4[a]!=null&&clearTimeout(this.$4[a]),this.$7(a)):this.$6.set(a,b)};c.registerTask=function(a,b){this.$1||(this.$1=!0),this.$5.set(a,b),this.$7(a)};c.getScheduledTime=function(a){return this.$6.get(a)};return a}(),u=null,v=new(d("WAResolvable").Resolvable)();function a(a){d("WALogger").LOG(j()),u||(u=new t(a),v.resolve())}function e(a){var b=B("awaitTaskPromise");return b.awaitTaskPromise(a)}function w(a,b){var c=B("reschedule");c.reschedule(a,b)}function x(a,b){v.resolveWasCalled()?w(a,b):v.promise.then(function(){w(a,b)})["catch"](function(b){d("WALogger").ERROR(i(),a).devConsole(b).sendLogs("task-scheduler-reschedule-failed")})}function f(a){x(a,d("WATimeUtils").unixTime())}function y(a){x(a,d("WATimeUtils").DEFAULT_UNIXTIME)}function z(a){var b=B("getScheduledTime");return b.getScheduledTime(a)}function A(a,b){var c=B("registerTask");c.registerTask(a,b)}function B(a){if(u)return u;else throw c("WAErr")("TaskScheduler::"+a+" called before startScheduler")}g.DO_NOT_RESCHEDULE=s;g.startScheduler=a;g.awaitTaskPromise=e;g._doReschedule=w;g.reschedule=x;g.rescheduleNow=f;g.deactivate=y;g.getScheduledTime=z;g.registerTask=A}),98);
__d("MAWTaskDefinitions",["MAWDeleteOldLogsFromDisk","MAWJobDefinitions","MAWJobManager","MAWLoggingSwitches","MAWPreKeysCleaner","MAWRotateCAT","Promise","WAAPI","WAAbPropsInit","WADbTasks","WAGlobals","WALogger","WATagsLogger","WATaskScheduleApi","WATaskScheduler","WATimeUtils","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to reprocess revoked messages: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to notify "," contacts of device change"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Notified "," contacts of device change"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["rotateCAT skip first run"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["DeleteExpiredPreKeys skip first run"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["RotateKeyTask skip first run"]);o=function(){return a};return a}var p=c("requireDeferred")("WARotateSignedPreKey").__setRef("MAWTaskDefinitions"),q=27*(e=d("WATimeUtils")).DAY_SECONDS,r=7*e.DAY_SECONDS,s=e.DAY_SECONDS/2;f=e.HOUR_SECONDS*6;var t=e.MINUTE_SECONDS*5,u=Object.keys(d("WADbTasks").Tasks);function v(){return{scheduledTimeResolver:{get:function(a){return d("WATaskScheduleApi").getTaskScheduledTime(a)},set:function(a,b){return d("WATaskScheduleApi").setTaskScheduledTime(a,b)}}}}function a(a){d("WATaskScheduler").startScheduler(v()),u.forEach(function(b){var c=w(b,a);d("WATaskScheduler").registerTask(b,c)})}function w(a,e){switch(a){case"rotateKey":return function(a){a?(d("WALogger").LOG(o()),a=(h||(h=b("Promise"))).resolve()):a=e.then(function(){return p.load()}).then(function(a){a=a.rotateSignedPreKey;return a()});return a.then(function(){return q})};case"syncAbProps":return function(a){var b=!a;return e.then(function(){return c("WAAPI").syncAbProps({sendHash:b}).then(function(){return d("WAAbPropsInit").getRefreshSecs()})})};case"deleteExpiredKeys":return function(a){a?(d("WALogger").LOG(n()),a=(h||(h=b("Promise"))).resolve()):a=d("MAWPreKeysCleaner").clearExpiredPreKeys();return a.then(function(){return r})};case"rotateCAT":return function(a){a?(d("WALogger").LOG(m()),a=(h||(h=b("Promise"))).resolve()):a=d("MAWRotateCAT").tryRotateCAT();return a.then(function(){return s})};case"generatePrekeys":return function(a){a?a=c("WAAPI").generateAndUploadPreKeys({reason:"on start"}):a=(h||(h=b("Promise"))).resolve();return a.then(function(){return d("WATimeUtils").DEFAULT_UNIXTIME})};case"queryGroups":return function(a){return(h||(h=b("Promise"))).resolve().then(function(){return d("WATimeUtils").DEFAULT_UNIXTIME})};case"notifyDeviceRegistration":return function(a){if(!a)return(h||(h=b("Promise"))).resolve(d("WATimeUtils").DEFAULT_UNIXTIME);a=d("WAGlobals").getMyUserJid();return d("WAGlobals").getDependencies().loadRecentParticipants(d("WAGlobals").getConfig().maxUsersForNotifyDeviceChange(),a).then(function(a){var b=d("WATagsLogger").TAGS(["notifyDeviceRegistration"]);return c("WAAPI").notifyDeviceChange({users:a}).then(function(){b.LOG(l(),a.size)})["catch"](function(c){b.LOG(k(),a.size),b.ERROR(j(),c)})}).then(function(){return d("WATimeUtils").DEFAULT_UNIXTIME})};case"cleanupExcessiveLogs":return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("MAWLoggingSwitches").removeLoggingFromBridge)return d("WATimeUtils").DEFAULT_UNIXTIME;a?yield d("MAWDeleteOldLogsFromDisk").deleteOldLogsOnStartup():yield d("MAWDeleteOldLogsFromDisk").deleteOldLogs();return t});return function(b){return a.apply(this,arguments)}}();case"reprocessRevokeStanzasS397680":return function(a){return!a?(h||(h=b("Promise"))).resolve(d("WATimeUtils").DEFAULT_UNIXTIME):d("MAWJobManager").getJobManager().waitUntilCompletedNonPersisted(d("MAWJobDefinitions").createStartJobInfo("rerevokeMsgs",{})).then(function(){})["catch"](function(a){d("WATagsLogger").TAGS(["RevokeReprocessing"]).ERROR(i(),a)}).then(function(){return d("WATimeUtils").DEFAULT_UNIXTIME})}}}g.ROTATE_SIGNED_PRE_KEY_TIMESPAN=q;g.DELETE_EXPIRED_KEYS_TIMESPAN=r;g.ROTATE_CAT_TIMESPAN=s;g.DO_NOT_RESCHEDULE=e.DEFAULT_UNIXTIME;g.SYNCD_REQUEST_ALL_MISSING_KEYS_TIMESPAN=f;g.CLEANUP_EXCESSIVE_LOGS=t;g.TASK_TYPES=u;g.getSchedulerOptions=v;g.registerTasks=a;g.getTaskExecution=w}),98);
__d("WABridgedAPIHandler",["WAAPI"],(function(a,b,c,d,e,f,g){"use strict";a={queryGroups:function(){return c("WAAPI").queryGroups.apply(c("WAAPI"),arguments)},preEstablishSession:function(){return c("WAAPI").preEstablishSession.apply(c("WAAPI"),arguments)},getDevices:function(){return c("WAAPI").getDevices.apply(c("WAAPI"),arguments)},removeCurrentDevice:function(){return c("WAAPI").removeCurrentDevice()},removeDevice:function(){return c("WAAPI").removeDevice.apply(c("WAAPI"),arguments)},getCurrentUserDeviceList:function(){return c("WAAPI").getCurrentUserDeviceList()}};g.waapi=a}),98);
__d("WAMessageLoggingPublisher",["WAHashStringToNumber","WAPubSub"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("WAHashStringToNumber").hashStringToNumber(a)}b=d("WAPubSub").simplePubSub();g.getWAIncomingMsgLoggingId=a;g.messageLoggingPublisher=b}),98);
__d("WAMockServerShell",["cr:8600"],(function(a,b,c,d,e,f,g){"use strict";a=b("cr:8600")!=null;g.isMockServerMode=a;g.getMockServer=b("cr:8600")}),98);
__d("WAHandleErrorStanza",["Promise","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid stanza sent (smax-invalid)"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unknown error code: ",""]);j=function(){return a};return a}a=function(a){a=a.code;d("WALogger").ERROR(j(),a).sendLogs("unknown-error-code");return(h||(h=b("Promise"))).resolve("NO_ACK")};c=function(){d("WALogger").ERROR(i()).devConsole("check tracelogs for more info").sendLogs("smax-invalid");return(h||(h=b("Promise"))).resolve("NO_ACK")};g.handleErrorStanza=a;g.handleSmaxErrorStanza=c}),98);
__d("WAICDCFlushable",["WABulkPutContactsApi","WADevicesState","WAGlobals","WAICDCUtils","WAJids","WALoadContactsApi","WALogger","WAProtocolQueue","WASignalKeys","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to wait for user devices: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["The number of ICDC failures is higher "," than allowed amount ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["flushing ICDC payload with "," entries from ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["flushing ICDC payload returned early"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["flushing ICDC payload"]);l=function(){return a};return a}a=function(){function a(){this.$1=[]}var c=a.prototype;c.enqueue=function(a){this.$1.push(a)};c.flush=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b.LOG(l());a=new Map();for(c of this.$1){var e=c.from;a.set(e,c)}c=Array.from(a.values());if(c.length===0){b.LOG(k());return}else b.LOG(j(),c.length,Array.from(a.keys()).join(","));b=new Set(c.map(function(a){a=a.from;return d("WAJids").extractUserJid(a)}));var f=(yield d("WALoadContactsApi").loadContacts(Array.from(b))),g=new Set(),m=new Set(),n=[];for(a of c.slice()){b=a.icdc;var e=a.from,o=a.serverTs,p=d("WAJids").extractUserJid(e),q=f.get(p),r=d("WAICDCUtils").validateICDCInfo(b.senderIdentity,q==null?void 0:q.icdcInfo,(q==null?void 0:(c=q.icdcInfo)==null?void 0:c.devices.map(function(a){return d("WASignalKeys").serializeIdentity(a)}))||[]);if(r.action==="error"){b=function(){var a;r.sync&&g.add(p);var b=r.failureTs;a=((a=q==null?void 0:q.icdcFails)!=null?a:[]).filter(function(a){return a.timeBucket>=d("WATimeUtils").pastUnixTime(d("WAGlobals").getConfig().icdcIntervalInMinutes()*60,b)});if(a.length>0&&d("WATimeUtils").futureUnixTime(d("WAGlobals").getConfig().icdcCooldownIntervalInMinutes()*60,a[a.length-1].timeBucket)>b)return"continue";q!=null&&(m.add(p),f.set(p,babelHelpers["extends"]({},q,{icdcFails:[].concat(a,[{timeBucket:b,alert:!0}])})));var c=d("WAGlobals").getConfig().icdcAlertTriggerFailureCounter(),h=a.filter(function(a){return a.alert===!0}).length>=c;h&&(d("WALogger").WARN(i(),a.length,c),n.push({type:"instruction",instruction:"icdcError",jid:d("WAJids").extractUserJid(e),notificationTs:o,priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow}))}();if(b==="continue")continue}}g.size>0&&d("WADevicesState").getDevicesState().waitForUserDevices(Array.from(g),"ICDC")["catch"](function(a){d("WALogger").ERROR(h(),a)});m.size>0&&(yield d("WABulkPutContactsApi").bulkPutContacts(Array.from(m).flatMap(function(a){a=f.get(a);return a?[a]:[]})));n.forEach(function(a){void d("WAProtocolQueue").protocolQueue().addPending(a)});this.$1=[]});function c(b,c,d){return a.apply(this,arguments)}return c}();return a}();c=new a();g.ICDCFlushable=a;g.icdcFlushable=c}),98);
__d("WAHandleICDC",["WAICDCFlushable"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.icdc,c=a.from;a=a.serverTs;d("WAICDCFlushable").icdcFlushable.enqueue({icdc:b,from:c,serverTs:a})}g.handleICDCPayloadFromIncomingMsg=a}),98);
__d("WAMediaKeysFlushable",["WABulkPutMediaKeysApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["failed to persist media Keys: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["flushing media keys payload"]);i=function(){return a};return a}a=function(){function a(){this.$1=[]}var c=a.prototype;c.putMediaKey=function(a){this.$1.push(a)};c.flush=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b.LOG(i());if(this.$1.length===0){c.addPoint("media_Key_flushable_flush_empty");return}c.addPoint("media_Key_flushable_flush_start");a=this.$1.slice();this.$1=[];yield d("WABulkPutMediaKeysApi").bulkPutMediaKeys(a)["catch"](function(a){b.ERROR(h(),a);c.addPoint("media_Key_flushable_flush_error");throw a});c.addPoint("media_Key_flushable_flush_end")});function c(b,c,d){return a.apply(this,arguments)}return c}();return a}();c=new a();g.MediaKeysFlushable=a;g.mediaKeysFlushable=c}),98);
__d("WAReportingMeta",["WAFranking","WAFrankingTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.frankingTag==null&&a.reportingTag==null?null:{frankingKey:null,frankingTag:a.frankingTag!=null?d("WAFrankingTypes").castToFrankingTag(a.frankingTag):null,frankingVersion:d("WAFranking").getFrankingVersion(),reportingContent:null,reportingTag:a.reportingTag}}g.getReportingMeta=a}),98);
__d("WAHandleAvailableIndividualMsg",["Promise","WACryptoManagerUtils","WADecodeIncomingMsg","WAErr","WAFranking","WAGlobals","WAHandleICDC","WAMediaKeysFlushable","WAMessageLoggingPublisher","WAParseMediaTransportProtocol","WAProtocolQueue","WAReportingMeta","WAResultOrError","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received message with invalid or missing franking tag"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unsupported type ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Decoding error ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Decoded not v3 protobuff"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received not v3 protobuff"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Decrypted msg with error ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Fail to persist the msg ",""]);o=function(){return a};return a}var p=d("WATagsLogger").TAGS(["AvailableIndividualMsgHandling"]);function q(a,b,c){d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({commonMessageBase:a,id:c,msg:b,type:"decrypt-start"})}function r(a){d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({id:a,type:"persist-start"})}function s(a){d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({id:a,type:"persist-end"})}function t(a,b){p.ERROR(o(),b),d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({error:b,id:a,type:"persist-fail"})}function u(a,b,c,d,e,f){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h){d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({id:e,type:"decrypt-end"});if(b.encVersion!=="3"){p.ERROR(m());throw c("WAErr")("Received not v3 protobuff")}var n=a.internalTestConfig==="armadillo_express";n=d("WADecodeIncomingMsg").decodeIncomingMsg(h.plaintext,"v3",null,n);if(n.version==="v2"){p.ERROR(l());throw c("WAErr")("Decoded not v3 protobuff")}if(n.type==="error"){p.ERROR(k(),n.error);throw c("WAErr")("Decoding error "+n.error)}if(n.type==="msgWithSKDM"||n.type==="skdm"){p.ERROR(j(),n.type);throw c("WAErr")("Unsupported type "+n.type)}var o=(yield d("WAFranking").handleAndValidateFrankingFromIncomingMsg(n,d("WAReportingMeta").getReportingMeta(a)));if(o.decision===d("WAFranking").FrankingDecision.DROP){p.ERROR(i());d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({id:e,type:"franking-drop"});return f()}n.version==="v3"&&n.type==="subprotocol"&&n.icdc!=null&&d("WAHandleICDC").handleICDCPayloadFromIncomingMsg({from:b.from,icdc:n.icdc,serverTs:a.serverTs});if(n.version==="v3"&&n.type==="subprotocol"&&d("WAGlobals").getConfig().useProtocolMediaKey()){f=d("WAParseMediaTransportProtocol").parseMediaKey({msg:n});for(f of f)d("WAMediaKeysFlushable").mediaKeysFlushable.putMediaKey(f)}r(e);if(n.type==="instamadillo"){f={contentType:b.contentType,fbFolderId:a.fbFolderId,from:b.from,jid:b.chat,message:n,offline:a.offline,priority:d("WAProtocolQueue").WAProtocolQueuePriorityHigh,recipient:b.recipient,remoteIdentity:h.remoteIdentity,reportingMeta:o.updatedReportingMeta,retryCount:b.retryCount,serverTs:a.serverTs,stanzaId:a.stanzaId,subtype:"instamadillo",type:"message"};f=f}else{n={contentType:b.contentType,fbFolderId:a.fbFolderId,from:b.from,incomingType:"wa",jid:b.chat,message:n,offline:a.offline,priority:d("WAProtocolQueue").WAProtocolQueuePriorityHigh,recipient:b.recipient,remoteIdentity:h.remoteIdentity,reportingMeta:o.updatedReportingMeta,retryCount:b.retryCount,serverTs:a.serverTs,stanzaId:a.stanzaId,subtype:"armadillo",type:"message"};f=n}d("WAProtocolQueue").protocolQueue().addPending(f,function(){return s(e)},function(a){return t(e,a)});return g({chat:b.chat,from:b.from,stanzaId:a.stanzaId})});return v.apply(this,arguments)}function w(a,c,e,f,g,i,j){d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({errorResult:i,id:e,type:"decrypt-fail"});p.WARN(n(),i.error);r(e);var k={contentType:c.contentType,decryptionError:i.error,fbFolderId:a.fbFolderId,from:c.from,jid:c.chat,offline:a.offline,priority:d("WAProtocolQueue").WAProtocolQueuePriorityHigh,recipient:c.recipient,reportingMeta:d("WAReportingMeta").getReportingMeta(a),retryCount:c.retryCount,serverTs:a.serverTs,stanzaId:a.stanzaId,subtype:"ciphertext",type:"message"};d("WAProtocolQueue").protocolQueue().addPending(k,function(){return s(e)},function(a){return t(e,a)});if(i.error==="errDuplicateMsg")return(h||(h=b("Promise"))).resolve(f({chat:c.chat,from:c.from,stanzaId:a.stanzaId}));d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({id:e,type:"issue-retry"});return g({author:c.author,chat:c.chat,deviceIdentity:null,error:i.error,from:c.from,retryCount:c.retryCount,serverTs:a.serverTs,stanzaId:a.stanzaId},j)}function a(a,b,c,d,e,f){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g){var h=d("WAMessageLoggingPublisher").getWAIncomingMsgLoggingId(a.stanzaId);d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({commonMessageBase:a,id:h,msg:b,type:"new-message"});q(a,b,h);var i=(yield d("WACryptoManagerUtils").decryptMsg(b.encType,b.from,b.ciphertext,g));if(i.success===!1)return w(a,b,h,e,f,i,g);return i.value==null?w(a,b,h,e,f,d("WAResultOrError").makeError("empty-content"),g):u(a,b,h,c,e,i.value)});return x.apply(this,arguments)}g.handleIndividualMsg=a}),98);
__d("WAHandleGroupMsg",["Promise","WACryptoManagerUtils","WADecodeIncomingMsg","WAErr","WAFranking","WAJids","WAMessageLoggingPublisher","WAProtocolQueue","WAReportingMeta","WAResultOrError","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unsupported type ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unsupported type ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unsupported type ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Sender key session is saved"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Fail to save senderKeySession ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Saving sender key session"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Group mismatch "," vs ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Decoded not v3 protobuff"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unsupported type ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unsupported type ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["DualEnc cannot receive SKMSG first"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["Fail to save senderKeySession ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["Group mismatch "," vs ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received message with invalid or missing franking tag"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unsupported type instamadillo"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["msgWithSKDM skdm decoding error"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["Decoding error ",""]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["Decoded not v3 protobuff"]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["Decrypted msg with error ",""]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["Fail to persist the msg ",""]);B=function(){return a};return a}var C=d("WATagsLogger").TAGS(["GroupMsgHandling"]);function D(a){d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({id:a,type:"persist-end"})}function E(a,b){C.ERROR(B(),b),d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({error:b,id:a,type:"persist-fail"})}function F(a,b,c,d,e,f,g,h,i){return G.apply(this,arguments)}function G(){G=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h,i,j,k){a=a;if(a.version==="v2"){C.ERROR(z());throw c("WAErr")("Decoded not v3 protobuff")}if(a.type==="error"){C.ERROR(y(),a.error);throw c("WAErr")("Decoding error "+a.error)}if(a.type==="msgWithSKDM"){var l=a.skdm;if(l.type==="error"){C.ERROR(x());throw c("WAErr")("msgWithSKDM skdm decoding error")}yield I(l,e.chat,e.from,k);return F(a.msg,b,e,f,g,h,i,j,k)}if(a.type==="skdm"){yield I(a,e.chat,e.from,k);d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({id:f,type:"invisible-msg-done"});return g()}if(a.type==="instamadillo"){C.ERROR(w());throw c("WAErr")("Unsupported type instamadillo")}l=(yield d("WAFranking").handleAndValidateFrankingFromIncomingMsg(a,d("WAReportingMeta").getReportingMeta(b)));if(l.decision===d("WAFranking").FrankingDecision.DROP){C.ERROR(v());d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({id:f,type:"franking-drop"});return g()}d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({id:f,type:"persist-start"});k={contentType:e.contentType,fbFolderId:b.fbFolderId,from:e.from,incomingType:"wa",jid:e.chat,message:a,offline:b.offline,priority:d("WAProtocolQueue").WAProtocolQueuePriorityHigh,recipient:void 0,remoteIdentity:i,reportingMeta:l.updatedReportingMeta,retryCount:j,serverTs:b.serverTs,stanzaId:b.stanzaId,subtype:"armadillo",type:"message"};d("WAProtocolQueue").protocolQueue().addPending(k,function(){return D(f)},function(a){return E(f,a)});return h({chat:e.chat,from:e.from,stanzaId:b.stanzaId})});return G.apply(this,arguments)}function H(a,c,e,f,g,i,j,k){d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({errorResult:i,id:e,type:"decrypt-fail"});C.WARN(A(),i.error);if(a.hideDecryptionFailure===!1){d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({id:e,type:"persist-start"});var l={contentType:c.contentType,decryptionError:i.error,fbFolderId:a.fbFolderId,from:c.from,jid:c.chat,offline:a.offline,priority:d("WAProtocolQueue").WAProtocolQueuePriorityHigh,recipient:void 0,reportingMeta:d("WAReportingMeta").getReportingMeta(a),retryCount:j,serverTs:a.serverTs,stanzaId:a.stanzaId,subtype:"ciphertext",type:"message"};void d("WAProtocolQueue").protocolQueue().addPending(l,function(){return D(e)},function(a){return E(e,a)})}if(i.error==="errDuplicateMsg")return(h||(h=b("Promise"))).resolve(f({chat:c.chat,from:c.from,stanzaId:a.stanzaId}));d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({id:e,type:"issue-retry"});return g({author:c.author,chat:c.chat,deviceIdentity:null,error:i.error,from:c.from,retryCount:j,serverTs:a.serverTs,stanzaId:a.stanzaId},k)}function I(a,b,c,d){return J.apply(this,arguments)}function J(){J=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){if(d("WAJids").toGroupJid(a.msg.groupId)!==b){C.ERROR(u(),a.msg.groupId,b);throw c("WAErr")("group-mismatch")}b=(yield d("WACryptoManagerUtils").saveSenderKeySession(b,e,new Uint8Array(a.msg.senderKey),f));if(!b.success){C.ERROR(t(),b.error);throw c("WAErr")("fail-to-save")}});return J.apply(this,arguments)}function K(a,b){return L.apply(this,arguments)}function L(){L=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=a.senderKeyDistributionEnc,f;switch(e.encType){case"skmsg":C.ERROR(s());throw c("WAErr")("DualEnc cannot receive SKMSG first");case"pkmsg":case"msg":f=(yield d("WACryptoManagerUtils").decryptMsg(e.encType,a.from,e.ciphertext,b));break;case"msmsg":C.ERROR(r(),e.encType);throw c("WAErr")("Unsupported type "+e.encType);default:e.encType;C.ERROR(q(),e.encType);throw c("WAErr")("Unsupported type "+e.encType)}if(f.success===!1)return d("WAResultOrError").makeError(f.error);if(f.value==null)return d("WAResultOrError").makeError("empty");e=d("WADecodeIncomingMsg").decodeIncomingMsg(f.value.plaintext,"v3");if(e.version!=="v3"){C.ERROR(p());return d("WAResultOrError").makeError("not-v3")}if(e.type==="skdm"){if(d("WAJids").toGroupJid(e.msg.groupId)!==a.chat){C.ERROR(o(),e.msg.groupId,a.chat);return d("WAResultOrError").makeError("group-mismatch")}C.LOG(n());a=(yield d("WACryptoManagerUtils").saveSenderKeySession(a.chat,a.from,new Uint8Array(e.msg.senderKey),b));if(!a.success){C.ERROR(m(),a.error);return d("WAResultOrError").makeError("fail-to-save")}C.LOG(l());return d("WAResultOrError").makeResult()}else{C.ERROR(k(),e.type);return d("WAResultOrError").makeError("fail-to-save")}});return L.apply(this,arguments)}function a(a,b,c,d,e,f){return M.apply(this,arguments)}function M(){M=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h){var k=d("WAMessageLoggingPublisher").getWAIncomingMsgLoggingId(a.stanzaId);d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({commonMessageBase:a,id:k,msg:b,type:"new-message"});d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({commonMessageBase:a,id:k,msg:b,type:"decrypt-start"});var l=0;if(b.type==="DualEnc"){var m=(yield K(b,h));d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({id:k,result:m,type:"decrypt-skdm-done"});m=b.senderKeyMessageEnc}else{var n;m=b.enc;l=(n=b.enc.retryCount)!=null?n:0}var o;switch(m.encType){case"skmsg":o=(yield d("WACryptoManagerUtils").decryptGroupMsg(b.chat,b.from,m.ciphertext,h));break;case"pkmsg":case"msg":o=(yield d("WACryptoManagerUtils").decryptMsg(m.encType,b.from,m.ciphertext,h));break;case"msmsg":C.ERROR(j(),m.encType);throw c("WAErr")("Unsupported type "+m.encType);default:m.encType;C.ERROR(i(),m.encType);throw c("WAErr")("Unsupported type "+m.encType)}if(o.success===!1)return H(a,b,k,f,g,o,l,h);if(o.value==null)return H(a,b,k,f,g,d("WAResultOrError").makeError("empty-content"),l,h);n=o.value;m=n.plaintext;g=n.remoteIdentity;d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({id:k,type:"decrypt-end"});return F(d("WADecodeIncomingMsg").decodeIncomingMsg(m,"v3"),a,b,k,e,f,g,l,h)});return M.apply(this,arguments)}g.handleGroupMsg=a}),98);
__d("WAHandleUnavailableIndividualMsg",["Promise","WAMessageLoggingPublisher","WAProtocolQueue","WAReportingMeta"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,c,e){var f=d("WAMessageLoggingPublisher").getWAIncomingMsgLoggingId(a.stanzaId);d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({commonMessageBase:a,id:f,msg:c,type:"new-message"});if(c.contentType==="reaction"){d("WAMessageLoggingPublisher").messageLoggingPublisher.publish({id:f,type:"unavailable-reaction"});return(h||(h=b("Promise"))).resolve(e())}if(a.hideDecryptionFailure)return(h||(h=b("Promise"))).resolve(e());f={contentType:c.contentType,fbFolderId:a.fbFolderId,from:c.from,jid:c.chat,offline:a.offline,priority:d("WAProtocolQueue").WAProtocolQueuePriorityHigh,recipient:c.recipient,reportingMeta:d("WAReportingMeta").getReportingMeta(a),retryCount:0,serverTs:a.serverTs,stanzaId:a.stanzaId,subtype:"unavailable",type:"message"};void d("WAProtocolQueue").protocolQueue().addPending(f);return(h||(h=b("Promise"))).resolve(e())}g.handleUnavailableMsg=a}),98);
__d("WAHandleIncomingMsg",["WAHandleAvailableIndividualMsg","WAHandleGroupMsg","WAHandleUnavailableIndividualMsg","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["HandleIncomingMsgV2"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["HandleIncomingMsgV2"]);i=function(){return a};return a}a=function(a,b){a.decodeMessage;var c=a.makeAck,e=a.makeDeliveryReceipt,f=a.makeRetryReceipt,g=a.parsedMessage;a.sendDeliveryReceipt;a.sendRetryReceipt;a=babelHelpers.objectWithoutPropertiesLoose(a,["decodeMessage","makeAck","makeDeliveryReceipt","makeRetryReceipt","parsedMessage","sendDeliveryReceipt","sendRetryReceipt"]);d("WALogger").LOG(i());return g.type==="Unavailable"?d("WAHandleUnavailableIndividualMsg").handleUnavailableMsg(a,g,c):d("WAHandleAvailableIndividualMsg").handleIndividualMsg(a,g,c,e,f,b)};b=function(a,b){var c=a.makeAck,e=a.makeDeliveryReceipt,f=a.makeRetryReceipt,g=a.parsedMessage;a=babelHelpers.objectWithoutPropertiesLoose(a,["makeAck","makeDeliveryReceipt","makeRetryReceipt","parsedMessage"]);d("WALogger").LOG(h());return d("WAHandleGroupMsg").handleGroupMsg(a,g,c,e,f,b)};g.handleIncomingIndividualMsg=a;g.handleGroupMessage=b}),98);
__d("WASetRoutingInfoApi",["WASetMetaApi"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return d("WASetMetaApi").setMeta({edgeInfo:(a=a.edgeInfo)!=null?a:void 0})};g.setRoutingInfo=a}),98);
__d("WAHandleInfoBulletin",["Promise","WACryptoUtils","WAGetRoutingInfoApi","WAGlobals","WALogger","WASetRoutingInfoApi"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error while processing <offline> ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleInfoBulletin setting edge info"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleInfoBulletin no change to edge info"]);k=function(){return a};return a}function a(a){var b=a.edgeInfo;return d("WAGetRoutingInfoApi").getRoutingInfo().then(function(a){a=a.edgeInfo;if(a!=null&&d("WACryptoUtils").uint8ArraysEqual(a,b))d("WALogger").LOG(k());else{d("WALogger").LOG(j());return d("WASetRoutingInfoApi").setRoutingInfo({edgeInfo:b})}}).then(function(){return"NO_ACK"})}function c(a){d("WAGlobals").getWaOneQueue().handleOfflineStartStanza(a);return(h||(h=b("Promise"))).resolve("NO_ACK")}function e(){d("WAGlobals").getWaOneQueue().handleOfflineEndStanza()["catch"](function(a){d("WALogger").ERROR(i(),a)});return(h||(h=b("Promise"))).resolve("NO_ACK")}g.handleEdgeRoutingInfo=a;g.handleOfflineStart=c;g.handleOfflineEnd=e}),98);
__d("WAHandleEncryptNotification",["Promise","WALogger","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handlePrekeyContactIDChangedNotification is not implemented"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handlePrekeyContactIDChangedNotification failed with ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleEncryptNotification failed with ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleEncryptNotification type=",""]);l=function(){return a};return a}var m=c("requireDeferred")("WAGenerateAndUploadPreKeys").__setRef("WAHandleEncryptNotification"),n=c("requireDeferred")("WARequestPreKeyDigest").__setRef("WAHandleEncryptNotification");function a(a){a=a.notification.encryptType;d("WALogger").LOG(l(),a);switch(a){case"count":m.load().then(function(a){a=a.generateAndUploadPreKeys;return a(null,{reason:"handle encrypt notification"})})["catch"](function(a){d("WALogger").ERROR(k(),a)});break;case"digest":n.load().then(function(a){a=a.requestPreKeyDigest;return a()})["catch"](function(a){d("WALogger").ERROR(j(),a)});break;case"identity":d("WALogger").ERROR(i());break}return(h||(h=b("Promise"))).resolve()}g.handleEncryptNotification=a}),98);
__d("WAHandlePrekeyContactIDChangedNotification",["WAHandleEncryptNotification"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var b=a.encryptType,c=a.id,e=a.makeAck;a=a.offline;return d("WAHandleEncryptNotification").handleEncryptNotification({ack:e,notification:{encryptType:b},offline:a,stanzaId:c,type:"encrypt"}).then(function(){return e()})};g.handlePrekeyContactIDChangedNotification=a}),98);
__d("WAHandlePrekeyDigestNotification",["WAHandleEncryptNotification"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var b=a.encryptType,c=a.id,e=a.makeAck;a=a.offline;return d("WAHandleEncryptNotification").handleEncryptNotification({ack:e,notification:{encryptType:b},offline:a,stanzaId:c,type:"encrypt"}).then(function(){return e()})};g.handlePrekeyDigestNotification=a}),98);
__d("WAHandlePrekeyLowCountNotification",["WAHandleEncryptNotification"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var b=a.encryptType,c=a.id,e=a.makeAck;a=a.offline;return d("WAHandleEncryptNotification").handleEncryptNotification({ack:e,notification:{encryptType:b},offline:a,stanzaId:c,type:"encrypt"}).then(function(){return e()})};g.handlePrekeyLowCountNotification=a}),98);
__d("WAHandleReceipt",["Promise","WAGlobals","WAProtocolQueue","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleIndividualReceipts error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["start handling..."]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["backend","handleIndividualReceipt"]);a=function(a){k.DEV(j());return(h||(h=b("Promise"))).resolve().then(function(){switch(a.aggregatedType){case"none":if(d("WAGlobals").getConfig().ignoreReadReceipts()&&a.receiptType==="read")return;var b={chat:a.chat,externalIds:[a.stanzaId],from:{author:a.receiptSender,chat:a.chat,deviceJid:a.receiptSender,type:"device"},messageAuthor:a.author,offline:a.offline,receiptType:"user",stanzaId:a.stanzaId,ts:a.serverTs,type:a.receiptType};void d("WAProtocolQueue").protocolQueue().addPending({jid:a.chat,receipt:b,stanzaId:a.stanzaId,type:"receipt",priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow});break;default:a.aggregatedType;b=a.stanzaIds[0];var c={chat:a.chat,externalIds:a.stanzaIds,from:{author:a.receiptSender,chat:a.chat,deviceJid:a.receiptSender,type:"device"},messageAuthor:a.author,offline:a.offline,receiptType:"user",stanzaId:b,ts:a.serverTs,type:a.receiptType};void d("WAProtocolQueue").protocolQueue().addPending({jid:a.chat,receipt:c,stanzaId:b,type:"receipt",priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow})}})["catch"](function(a){k.ERROR(i(),a)}).then(function(){return a.makeAck()})};g.handleIndividualReceipt=a}),98);
__d("WAHandleServerPing",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;a=function(a){a=a.makeResponse;return(g||(g=b("Promise"))).resolve(a())};f.handleServerPing=a}),66);
__d("WAHandleStreamError",["Promise","WABridge","WAHandleFailureUtils","WALogger","WAOdsEnums"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stream error of type "," is causing a closed socket"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Code "," stream:error is received"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Conflict stream:error is received"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["bad-mac stream:error is received"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["xml-not-well-formed stream:error is received"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unacked ping id: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Client didn't send 'ack' back (type: ",", class: ","), closing socket. Unacked id: ",""]);o=function(){return a};return a}a=function(a){var b=a.ackClass,c=a.ackId;a=a.ackType;var e="ack";d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.STREAM_ERROR,key:e+"."+a+"."+b});d("WALogger").WARN(o(),a,b,c);return r(e)};c=function(a){a=a.pingId;var b="ping";d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.STREAM_ERROR,key:""+b});d("WALogger").WARN(n(),a);return r(b)};e=function(){var a="xml-not-well-formed";d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.STREAM_ERROR,key:""+a});d("WALogger").WARN(m());return r(a)};f=function(){var a="bad-mac";d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.STREAM_ERROR,key:""+a});d("WALogger").WARN(l());return r(a)};var p=function(a){var b,c=a.code;a=a.conflictReason;var e="conflict";d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.STREAM_ERROR,key:e+"."+((b=c)!=null?b:"undefined")+"."+((b=a)!=null?b:"undefined")});if(c===d("WAHandleFailureUtils").FAILURE_CODES.NOT_AUTHORIZED)return s();d("WALogger").WARN(k());return r(e)},q=function(a){a=a.code;var b="other";d("WALogger").WARN(j(),a);d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.STREAM_ERROR,key:b+"."+a});return a===d("WAHandleFailureUtils").FAILURE_CODES.NOT_AUTHORIZED?s():r(b)};function r(a){d("WALogger").WARN(i(),a);return(h||(h=b("Promise"))).resolve("CLOSE_SOCKET")}function s(){return(h||(h=b("Promise"))).resolve("NO_ACK")}g.handleAckKick=a;g.handlePingKick=c;g.handleXmlNotWellFormed=e;g.handleBadMac=f;g.handleConflict=p;g.handleStreamErrorCode=q}),98);
__d("WASmaxOutReceiptAppDataPeerCategoryMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("receipt",{category:"peer_appdata"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeAppDataPeerCategoryMixin=a}),98);
__d("WASmaxOutReceiptPublishAppDataPeerDeliveryRequest",["WASmaxJsx","WASmaxOutReceiptAppDataPeerCategoryMixin","WASmaxOutReceiptIndividualDeviceMixin","WASmaxOutReceiptSingleMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutReceiptAppDataPeerCategoryMixin").mergeAppDataPeerCategoryMixin(d("WASmaxOutReceiptSingleMixin").mergeSingleMixin(d("WASmaxOutReceiptIndividualDeviceMixin").mergeIndividualDeviceMixin(d("WASmaxJsx").smax("receipt",null),a),a));return a}g.makePublishAppDataPeerDeliveryRequest=a}),98);
__d("WASmaxReceiptPublishAppDataPeerDeliveryRPC",["WAComms","WASmaxOutReceiptPublishAppDataPeerDeliveryRequest","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=d("WASmaxOutReceiptPublishAppDataPeerDeliveryRequest").makePublishAppDataPeerDeliveryRequest(a);e.next=3;return b("regeneratorRuntime").awrap(d("WAComms").castSmaxStanza(c));case 3:case"end":return e.stop()}},null,this)}g.sendPublishAppDataPeerDeliveryRPC=a}),98);
__d("WASendAppdataDeliveryReceiptProtocol",["WASmaxReceiptPublishAppDataPeerDeliveryRPC"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var b=a.stanzaId;a=a.from;return d("WASmaxReceiptPublishAppDataPeerDeliveryRPC").sendPublishAppDataPeerDeliveryRPC({receiptTo:a,receiptId:b})};g.sendAppdataDeliveryReceiptProtocol=a}),98);
__d("WASendAppdataRetryReceipt",["WAReceiptUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b){var c=a.stanzaId,e=a.from,f=a.serverTs;a=a.retryCount;return d("WAReceiptUtils").sendRetryReceipt({category:"peer_appdata",deviceIdentity:null,externalId:c,from:{deviceJid:e,type:"device"},participant:null,recipient:null,retryCount:a,ts:f},b)};g.sendAppdataRetryReceiptProtocol=a}),98);
__d("WASmaxInAppdataDeliverDeviceIdentityMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"device-identity");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytes(a.value);return!a.success?a:d("WAResultOrError").makeResult({deviceIdentityElementValue:a.value})}g.parseDeviceIdentityMixin=a}),98);
__d("WASmaxInAppdataDeliverEncRetryMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"count",1,4);return!b.success?b:d("WAResultOrError").makeResult({count:b.value})}g.parseEncRetryMixin=a}),98);
__d("WASmaxInAppdataDeliverEncHideDecryptionPlaceholderMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"decrypt-fail","hide");return!b.success?b:d("WAResultOrError").makeResult({decryptFail:b.value})}g.parseEncHideDecryptionPlaceholderMixin=a}),98);
__d("WASmaxInAppdataDeliverEncPayloadMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,1,1048576);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseEncPayloadMixin=a}),98);
__d("WASmaxInAppdataDeliverEnums",["WAJids"],(function(a,b,c,d,e,f,g){a={high:"high",low:"low"};b={msg:"msg",pkmsg:"pkmsg"};c={validators:[d("WAJids").validateDeviceJid,d("WAJids").validateGroupJid],typeName:"DeviceJid|GroupJid"};g.ENUM_HIGH_LOW=a;g.ENUM_MSG_PKMSG=b;g.DEVICEJID_GROUPJID=c}),98);
__d("WASmaxInAppdataDeliverEncTypeIndividualMixin",["WAResultOrError","WASmaxInAppdataDeliverEncHideDecryptionPlaceholderMixin","WASmaxInAppdataDeliverEncPayloadMixin","WASmaxInAppdataDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"type",d("WASmaxInAppdataDeliverEnums").ENUM_MSG_PKMSG);if(!b.success)return b;var c=d("WASmaxInAppdataDeliverEncHideDecryptionPlaceholderMixin").parseEncHideDecryptionPlaceholderMixin(a);a=d("WASmaxInAppdataDeliverEncPayloadMixin").parseEncPayloadMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({type:b.value,encHideDecryptionPlaceholderMixin:c.success?c.value:null},a.value))}g.parseEncTypeIndividualMixin=a}),98);
__d("WASmaxInAppdataDeliverEncVersionFutureproofMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"v",3,void 0);return!b.success?b:d("WAResultOrError").makeResult({v:b.value})}g.parseEncVersionFutureproofMixin=a}),98);
__d("WASmaxInAppdataDeliverOfflineMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrIntRange(a,"offline",0,12);return!a.success?a:d("WAResultOrError").makeResult({offline:a.value})}g.parseOfflineMixin=a}),98);
__d("WASmaxInAppdataDeliverRegistrationIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"registration");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytesRange(a.value,4,4);return!a.success?a:d("WAResultOrError").makeResult({registrationElementValue:a.value})}g.parseRegistrationIDMixin=a}),98);
__d("WASmaxInAppdataDeliverPeerRequest",["WAResultOrError","WASmaxInAppdataDeliverDeviceIdentityMixin","WASmaxInAppdataDeliverEncRetryMixin","WASmaxInAppdataDeliverEncTypeIndividualMixin","WASmaxInAppdataDeliverEncVersionFutureproofMixin","WASmaxInAppdataDeliverEnums","WASmaxInAppdataDeliverOfflineMixin","WASmaxInAppdataDeliverRegistrationIDMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"appdata");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"enc");if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"category","peer");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"push_priority",d("WASmaxInAppdataDeliverEnums").ENUM_HIGH_LOW);if(!f.success)return f;var g=d("WASmaxParseJid").attrDeviceJid(a,"from");if(!g.success)return g;var h=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!h.success)return h;var i=d("WASmaxInAppdataDeliverEncVersionFutureproofMixin").parseEncVersionFutureproofMixin(b.value);if(!i.success)return i;var j=d("WASmaxInAppdataDeliverEncRetryMixin").parseEncRetryMixin(b.value);b=d("WASmaxInAppdataDeliverEncTypeIndividualMixin").parseEncTypeIndividualMixin(b.value);if(!b.success)return b;var k=d("WASmaxInAppdataDeliverDeviceIdentityMixin").parseDeviceIdentityMixin(a),l=d("WASmaxInAppdataDeliverRegistrationIDMixin").parseRegistrationIDMixin(a);a=d("WASmaxInAppdataDeliverOfflineMixin").parseOfflineMixin(a);return d("WAResultOrError").makeResult({id:c.value,category:e.value,pushPriority:f.value,from:g.value,t:h.value,encEncVersionFutureproofMixin:i.value,encEncRetryMixin:j.success?j.value:null,encEncTypeIndividualMixin:b.value,deviceIdentityMixin:k.success?k.value:null,registrationIDMixin:l.success?l.value:null,offlineMixin:a.success?a.value:null})}g.parsePeerRequest=a}),98);
__d("WASmaxAppdataDeliverPeerRPC",["WASmaxInAppdataDeliverPeerRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInAppdataDeliverPeerRequest").parsePeerRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Peer",{Request:a}));return{parsedRequest:a.value}}g.receivePeerRPC=a}),98);
__d("WACreateHandleAppdata",["Promise","WAJids","WAResultOrError","WASendAppdataDeliveryReceiptProtocol","WASendAppdataRetryReceipt","WASmaxAppdataDeliverPeerRPC","WATagsLogger","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to send retry receipt due to ","}"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to send delivery receipt due to ","}"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["start handling..."]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["received appdata, but no handler is provied. Fallback to default ack."]);l=function(){return a};return a}var m=d("WATagsLogger").TAGS(["decision tree","handleAppdata"]);function a(a){return function(c,e,f){e=(e=a.appdataMessage)==null?void 0:e.handleAppdataMessage;if(e==null){m.ERROR(l());return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult("NO_ACK"))}m.DEV(k());c=d("WASmaxAppdataDeliverPeerRPC").receivePeerRPC(c);c=c.parsedRequest;var g=c.id,n=c.from,o=c.t,p=c.offlineMixin,q=c.encEncRetryMixin,r=c.encEncTypeIndividualMixin;c=c.encEncVersionFutureproofMixin;var s=d("WATimeUtils").castToUnixTime(o),t={from:n,author:d("WAJids").extractUserJid(n),retryCount:(o=q==null?void 0:q.count)!=null?o:0,ciphertext:r.elementValue,encVersion:String(c.v),encType:r.type,hideDecryptionFailure:((q=r.encHideDecryptionPlaceholderMixin)==null?void 0:q.decryptFail)==="hide",stanzaId:g};o=function(){return d("WASendAppdataDeliveryReceiptProtocol").sendAppdataDeliveryReceiptProtocol({from:n,stanzaId:g})["catch"](function(a){m.ERROR(j(),a);throw a})};c=function(){return d("WASendAppdataRetryReceipt").sendAppdataRetryReceiptProtocol({from:n,stanzaId:g,retryCount:t.retryCount,serverTs:s},{cryptoManager:f})["catch"](function(a){m.ERROR(i(),a);throw a})};return e({parsedAppdata:t,offline:p==null?void 0:p.offline,serverTs:s,sendDeliveryReceipt:o,sendRetryReceipt:c},{cryptoManager:f}).then(d("WAResultOrError").makeResult)}}g.createHandleAppdata=a}),98);
__d("WAHandleChatStateProtocol",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;a.name==="Paused"?b="idle":(a.name,b=a.value.composingMedia==="audio"?"recording_audio":"typing");return b}f.parseChatStatus=a}),66);
__d("WASmaxInChatstateComposingMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"chatstate");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"composing");if(!b.success)return b;a=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,b.value,"media","audio");return!a.success?a:d("WAResultOrError").makeResult({composingMedia:a.value})}g.parseComposingMixin=a}),98);
__d("WASmaxInChatstatePausedMixin",["WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"chatstate");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"paused");return!b.success?b:d("WASmaxParseUtils").voidSuccess}g.parsePausedMixin=a}),98);
__d("WASmaxInChatstateComposingOrPausedMixinGroup",["WAResultOrError","WASmaxInChatstateComposingMixin","WASmaxInChatstatePausedMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInChatstateComposingMixin").parseComposingMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"Composing",value:b.value});var c=d("WASmaxInChatstatePausedMixin").parsePausedMixin(a);return c.success?d("WAResultOrError").makeResult({name:"Paused",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Composing","Paused"],[b,c])}g.parseComposingOrPausedMixinGroup=a}),98);
__d("WASmaxInChatstateFromGroupMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"chatstate");if(!b.success)return b;b=d("WASmaxParseJid").attrGroupJid(a,"from");if(!b.success)return b;var c=d("WASmaxParseJid").attrUserJid(a,"participant");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"participant_pn");return!a.success?a:d("WAResultOrError").makeResult({from:b.value,participant:c.value,participantPn:a.value})}g.parseFromGroupMixin=a}),98);
__d("WASmaxInChatstateFromUserMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"chatstate");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"from");return!b.success?b:d("WAResultOrError").makeResult({from:b.value})}g.parseFromUserMixin=a}),98);
__d("WASmaxInChatstateFromUserOrGroupMixinGroup",["WAResultOrError","WASmaxInChatstateFromGroupMixin","WASmaxInChatstateFromUserMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInChatstateFromUserMixin").parseFromUserMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"FromUser",value:b.value});var c=d("WASmaxInChatstateFromGroupMixin").parseFromGroupMixin(a);return c.success?d("WAResultOrError").makeResult({name:"FromGroup",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["FromUser","FromGroup"],[b,c])}g.parseFromUserOrGroupMixinGroup=a}),98);
__d("WASmaxInChatstateInternalTestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"test");if(!a.success)return a;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a.value,"config");return!a.success?a:d("WAResultOrError").makeResult({testConfig:a.value})}g.parseInternalTestMixin=a}),98);
__d("WASmaxInChatstateServerNotificationRequest",["WAResultOrError","WASmaxInChatstateComposingOrPausedMixinGroup","WASmaxInChatstateFromUserOrGroupMixinGroup","WASmaxInChatstateInternalTestMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"chatstate");if(!b.success)return b;b=d("WASmaxInChatstateInternalTestMixin").parseInternalTestMixin(a);var c=d("WASmaxInChatstateFromUserOrGroupMixinGroup").parseFromUserOrGroupMixinGroup(a);if(!c.success)return c;a=d("WASmaxInChatstateComposingOrPausedMixinGroup").parseComposingOrPausedMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({internalTestMixin:b.success?b.value:null,fromUserOrGroupMixinGroup:c.value,composingOrPausedMixinGroup:a.value})}g.parseServerNotificationRequest=a}),98);
__d("WASmaxChatstateServerNotificationRPC",["WASmaxInChatstateServerNotificationRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInChatstateServerNotificationRequest").parseServerNotificationRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("ServerNotification",{Request:a}));return{parsedRequest:a.value}}g.receiveServerNotificationRPC=a}),98);
__d("WACreateHandleChatState",["Promise","WAHandleChatStateProtocol","WAResultOrError","WASmaxChatstateServerNotificationRPC"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||b("Promise")).resolve(d("WAResultOrError").makeResult("NO_ACK"));function a(a){var b,c=(b=a.individualMessage)==null?void 0:b.handleIndividualChatState,e=(b=a.groupMessage)==null?void 0:b.handleGroupChatState;return function(a){if(c==null&&e==null)return i;a=d("WASmaxChatstateServerNotificationRPC").receiveServerNotificationRPC(a);a=a.parsedRequest;var b=a.composingOrPausedMixinGroup;a=a.fromUserOrGroupMixinGroup;b=d("WAHandleChatStateProtocol").parseChatStatus(b);if(a.name==="FromUser"){var f;return(f=c==null?void 0:c({status:b,jid:a.value.from}).then(d("WAResultOrError").makeResult))!=null?f:i}else{a.name;return(f=e==null?void 0:e({status:b,jid:a.value.from,participant:a.value.participant,participantPn:a.value.participantPn}).then(d("WAResultOrError").makeResult))!=null?f:i}}}g.createHandleChatState=a}),98);
__d("WAHandleErrorStanzaProtocol",[],(function(a,b,c,d,e,f){"use strict";a=479;f.SMAX_INVALID_CODE=a}),66);
__d("WASmaxInSmaxInvalidErrorRequest",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"code","479");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","smax-invalid");return!a.success?a:d("WAResultOrError").makeResult({code:b.value,text:a.value})}g.parseErrorRequest=a}),98);
__d("WASmaxSmaxInvalidErrorRPC",["WASmaxInSmaxInvalidErrorRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInSmaxInvalidErrorRequest").parseErrorRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Error",{Request:a}));return{parsedRequest:a.value}}g.receiveErrorRPC=a}),98);
__d("WAUnknownStanzaError",["WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";a=d("WAResultOrError").makeError({type:"unknown-stanza"});g.unknownStanzaError=a}),98);
__d("WACreateHandleErrorStanza",["Promise","WAHandleErrorStanzaProtocol","WALogger","WAResultOrError","WASmaxParseUtils","WASmaxSmaxInvalidErrorRPC","WAUnknownStanzaError"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Receiced error from server: ",""]);i=function(){return a};return a}function a(a){var c=a.error;return function(a){var e=d("WASmaxParseUtils").attrInt(a,"code");if(!e.success)return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError);e=e.value;if((c==null?void 0:c.handleSmaxErrorStanza)!=null&&e===d("WAHandleErrorStanzaProtocol").SMAX_INVALID_CODE){var f=d("WASmaxSmaxInvalidErrorRPC").receiveErrorRPC(a);f=f.parsedRequest;return c.handleSmaxErrorStanza({code:d("WAHandleErrorStanzaProtocol").SMAX_INVALID_CODE,text:f.text}).then(d("WAResultOrError").makeResult)}if((c==null?void 0:c.handleErrorStanza)!=null)return c.handleErrorStanza({code:e}).then(d("WAResultOrError").makeResult);d("WALogger").ERROR(i(),a.toString());return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult("NO_ACK"))}}g.createHandleErrorStanza=a}),98);
__d("WASmaxInLoginEnums",[],(function(a,b,c,d,e,f){a={400:"400",401:"401",402:"402",403:"403",405:"405",406:"406",409:"409",412:"412",413:"413",414:"414",415:"415",416:"416",500:"500",501:"501",503:"503"};b={"false":"false","true":"true"};f.ENUM_400_401_402_403_405_406_409_412_413_414_415_416_500_501_503=a;f.ENUM_FALSE_TRUE=b}),66);
__d("WASmaxInLoginFailureRequest",["WAResultOrError","WASmaxInLoginEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"failure");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"reason",d("WASmaxInLoginEnums").ENUM_400_401_402_403_405_406_409_412_413_414_415_416_500_501_503);if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"location");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"code");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"expire",0,void 0);if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"retry",0,void 0);if(!g.success)return g;var h=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"t",0,void 0);if(!h.success)return h;var i=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"message");if(!i.success)return i;var j=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"vt",1,1e5);if(!j.success)return j;var k=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"has_offline",d("WASmaxInLoginEnums").ENUM_FALSE_TRUE);if(!k.success)return k;var l=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"url");if(!l.success)return l;var m=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"logout_message_header");if(!m.success)return m;var n=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"logout_message_subtext");if(!n.success)return n;var o=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"logout_message_locale");if(!o.success)return o;var p=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"logout_main_button_text");if(!p.success)return p;var q=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"logout_main_button_url");if(!q.success)return q;var r=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"logout_secondary_button_text");if(!r.success)return r;var s=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"logout_secondary_button_url");if(!s.success)return s;var t=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"logout_secondary_button_ch_entrypoint_id");if(!t.success)return t;var u=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"appeal_token");if(!u.success)return u;var v=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"violation_reason");if(!v.success)return v;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"source_acct",-1,2);return!a.success?a:d("WAResultOrError").makeResult({reason:b.value,location:c.value,code:e.value,expire:f.value,retry:g.value,t:h.value,message:i.value,vt:j.value,hasOffline:k.value,url:l.value,logoutMessageHeader:m.value,logoutMessageSubtext:n.value,logoutMessageLocale:o.value,logoutMainButtonText:p.value,logoutMainButtonUrl:q.value,logoutSecondaryButtonText:r.value,logoutSecondaryButtonUrl:s.value,logoutSecondaryButtonChEntrypointId:t.value,appealToken:u.value,violationReason:v.value,sourceAcct:a.value})}g.parseFailureRequest=a}),98);
__d("WASmaxLoginFailureRPC",["WASmaxInLoginFailureRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInLoginFailureRequest").parseFailureRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Failure",{Request:a}));return{parsedRequest:a.value}}g.receiveFailureRPC=a}),98);
__d("WACreateHandleFailure",["Promise","WAResultOrError","WASmaxLoginFailureRPC"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c=(a=a.login)==null?void 0:a.handleLoginFailure;return function(a){if(c!=null){a=d("WASmaxLoginFailureRPC").receiveFailureRPC(a);a=a.parsedRequest;return c({reason:a.reason,location:a.location,expire:a.expire}).then(d("WAResultOrError").makeResult)}return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult("NO_ACK"))}}g.createHandleFailure=a}),98);
__d("WASmaxInDirtyBitsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInDirtyBitsIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","feature-not-implemented");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",501);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFeatureNotImplementedMixin=a}),98);
__d("WASmaxInDirtyBitsIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInDirtyBitsIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInDirtyBitsIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup",["WAResultOrError","WASmaxInDirtyBitsIQErrorBadRequestMixin","WASmaxInDirtyBitsIQErrorFeatureNotImplementedMixin","WASmaxInDirtyBitsIQErrorInternalServerErrorMixin","WASmaxInDirtyBitsIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInDirtyBitsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInDirtyBitsIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:c.value});var e=d("WASmaxInDirtyBitsIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:e.value});var f=d("WASmaxInDirtyBitsIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);return f.success?d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorFeatureNotImplemented","IQErrorServiceUnavailable","IQErrorInternalServerError"],[b,c,e,f])}g.parseIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup=a}),98);
__d("WASmaxInDirtyBitsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInDirtyBitsCleanResponseError",["WAResultOrError","WASmaxInDirtyBitsIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup","WASmaxInDirtyBitsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInDirtyBitsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInDirtyBitsIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup").parseIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup:b.value}))}g.parseCleanResponseError=a}),98);
__d("WASmaxInDirtyBitsIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInDirtyBitsCleanResponseSuccess",["WASmaxInDirtyBitsIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInDirtyBitsIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!c.success?c:c}g.parseCleanResponseSuccess=a}),98);
__d("WASmaxOutDirtyBitsBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQSetRequestMixin=a}),98);
__d("WASmaxOutDirtyBitsCleanTypeMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.cleanType;a=a.cleanTimestamp;b=d("WASmaxJsx").smax("clean",{type:d("WAWap").CUSTOM_STRING(b),timestamp:d("WASmaxAttrs").OPTIONAL(d("WAWap").INT,a)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeCleanTypeMixin=a}),98);
__d("WASmaxOutDirtyBitsCleanTypeWithTimestampMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.cleanTimestamp;a=d("WASmaxJsx").smax("clean",{type:"syncd_app_state",timestamp:d("WAWap").INT(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeCleanTypeWithTimestampMixin=a}),98);
__d("WASmaxOutDirtyBitsTypeCleanOrCleanWithTimestampMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutDirtyBitsCleanTypeMixin","WASmaxOutDirtyBitsCleanTypeWithTimestampMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.cleanType)return d("WASmaxOutDirtyBitsCleanTypeMixin").mergeCleanTypeMixin(a,b.cleanType);if(b.cleanTypeWithTimestamp)return d("WASmaxOutDirtyBitsCleanTypeWithTimestampMixin").mergeCleanTypeWithTimestampMixin(a,b.cleanTypeWithTimestamp);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeTypeCleanOrCleanWithTimestampMixinGroup=a}),98);
__d("WASmaxOutDirtyBitsCleanRequest",["WASmaxJsx","WASmaxOutDirtyBitsBaseIQSetRequestMixin","WASmaxOutDirtyBitsTypeCleanOrCleanWithTimestampMixinGroup","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=a.typeCleanOrCleanWithTimestampMixinGroupArgs;a=d("WASmaxOutDirtyBitsBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"urn:xmpp:whatsapp:dirty"},d("WASmaxOutDirtyBitsTypeCleanOrCleanWithTimestampMixinGroup").mergeTypeCleanOrCleanWithTimestampMixinGroup(d("WASmaxJsx").smax("clean",null),a)));return a}g.makeCleanRequest=a}),98);
__d("WASmaxDirtyBitsCleanRPC",["WAComms","WASmaxInDirtyBitsCleanResponseError","WASmaxInDirtyBitsCleanResponseSuccess","WASmaxOutDirtyBitsCleanRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=d("WASmaxOutDirtyBitsCleanRequest").makeCleanRequest(a);i.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=i.sent;g=d("WASmaxInDirtyBitsCleanResponseSuccess").parseCleanResponseSuccess(f,e);if(!g.success){i.next=7;break}return i.abrupt("return",{name:"CleanResponseSuccess",value:g.value});case 7:h=d("WASmaxInDirtyBitsCleanResponseError").parseCleanResponseError(f,e);if(!h.success){i.next=10;break}return i.abrupt("return",{name:"CleanResponseError",value:h.value});case 10:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Clean",{Success:g,Error:h}));case 11:case"end":return i.stop()}},null,this)}g.sendCleanRPC=a}),98);
__d("WACleanDirtyBitsProtocol",["WALogger","WASmaxDirtyBitsCleanRPC","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to clean dirty bits for type: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendCleanRPC error: ",""]);i=function(){return a};return a}function a(a){var c,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:a.type==="syncd_app_state"?c={cleanTypeWithTimestamp:{cleanTimestamp:a.timestamp}}:c={cleanType:{cleanTimestamp:a.timestamp,cleanType:a.type}};f.next=3;return b("regeneratorRuntime").awrap(d("WASmaxDirtyBitsCleanRPC").sendCleanRPC({typeCleanOrCleanWithTimestampMixinGroupArgs:c}));case 3:e=f.sent,e.name!=="CleanResponseSuccess"&&(d("WALogger").WARN(i(),e),d("WALogger").ERROR(h(),a.type));case 5:case"end":return f.stop()}},null,this)}g.cleanDirtyBitsProtocol=a}),98);
__d("WASmaxInDirtyBitsEnums",[],(function(a,b,c,d,e,f){a={account_sync:"account_sync",groups:"groups",newsletter_metadata:"newsletter_metadata",syncd_app_state:"syncd_app_state"};f.ENUM_ACCOUNTSYNC_GROUPS_NEWSLETTERMETADATA_SYNCDAPPSTATE=a}),66);
__d("WASmaxInDirtyBitsNotifyRequest",["WAResultOrError","WASmaxInDirtyBitsEnums","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ib");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"dirty");if(!b.success)return b;a=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!a.success)return a;var c=d("WASmaxParseUtils").attrIntRange(b.value,"timestamp",0,void 0);if(!c.success)return c;b=d("WASmaxParseUtils").attrStringEnum(b.value,"type",d("WASmaxInDirtyBitsEnums").ENUM_ACCOUNTSYNC_GROUPS_NEWSLETTERMETADATA_SYNCDAPPSTATE);return!b.success?b:d("WAResultOrError").makeResult({from:a.value,dirtyTimestamp:c.value,dirtyType:b.value})}g.parseNotifyRequest=a}),98);
__d("WASmaxDirtyBitsNotifyRPC",["WASmaxInDirtyBitsNotifyRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInDirtyBitsNotifyRequest").parseNotifyRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Notify",{Request:a}));return{parsedRequest:a.value}}g.receiveNotifyRPC=a}),98);
__d("WAHandleDirtyBitsProtocol",["WASmaxDirtyBitsNotifyRPC"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("WASmaxDirtyBitsNotifyRPC").receiveNotifyRPC(a);a=a.parsedRequest;var b=a.dirtyType;a=a.dirtyTimestamp;return{dirtyBitType:b,dirtyBitTimestamp:a}}g.parseDirtyBit=a}),98);
__d("WAHandleThreadMetadata",["WAGlobals","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.map(function(a){return a.from});yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return a.storage.warmCache(b)},{operationType:"thread_metadata",flush:!1})});return h.apply(this,arguments)}g.handleThreadMetadata=a}),98);
__d("WASmaxDecisionTreeUtils",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("WASmaxParseUtils").maybeChildren(a);if(!b.success)return b;b=b.value;return b==null||b.length===0?d("WASmaxParseUtils").errorMessage(a,"to have at least 1 child, but found 0"):d("WAResultOrError").makeResult(b[0])}g.firstChild=a}),98);
__d("WASmaxInEdgeEdgeRoutingRequest",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ib");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"edge_routing");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"routing_info");if(!b.success)return b;a=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!a.success)return a;b=d("WASmaxParseUtils").contentBytesRange(b.value,1,1024);return!b.success?b:d("WAResultOrError").makeResult({from:a.value,edgeRoutingRoutingInfoElementValue:b.value})}g.parseEdgeRoutingRequest=a}),98);
__d("WASmaxEdgeEdgeRoutingRPC",["WASmaxInEdgeEdgeRoutingRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInEdgeEdgeRoutingRequest").parseEdgeRoutingRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("EdgeRouting",{Request:a}));return{parsedRequest:a.value}}g.receiveEdgeRoutingRPC=a}),98);
__d("WASmaxInMessageRequestEnums",[],(function(a,b,c,d,e,f){a={complete:"complete","continue":"continue"};f.ENUM_COMPLETE_CONTINUE=a}),66);
__d("WASmaxInMessageRequestSpamMarkerRequest",["WAResultOrError","WASmaxInMessageRequestEnums","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ib");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"spam");if(!b.success)return b;a=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!a.success)return a;b=d("WASmaxParseUtils").attrStringEnum(b.value,"state",d("WASmaxInMessageRequestEnums").ENUM_COMPLETE_CONTINUE);return!b.success?b:d("WAResultOrError").makeResult({from:a.value,spamState:b.value})}g.parseSpamMarkerRequest=a}),98);
__d("WASmaxMessageRequestSpamMarkerRPC",["WASmaxInMessageRequestSpamMarkerRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInMessageRequestSpamMarkerRequest").parseSpamMarkerRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("SpamMarker",{Request:a}));return{parsedRequest:a.value}}g.receiveSpamMarkerRPC=a}),98);
__d("WASmaxInOfflineCompletionRequest",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ib");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"offline");if(!b.success)return b;a=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!a.success)return a;b=d("WASmaxParseUtils").attrIntRange(b.value,"count",0,void 0);return!b.success?b:d("WAResultOrError").makeResult({from:a.value,offlineCount:b.value})}g.parseCompletionRequest=a}),98);
__d("WASmaxOfflineCompletionRPC",["WASmaxInOfflineCompletionRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInOfflineCompletionRequest").parseCompletionRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Completion",{Request:a}));return{parsedRequest:a.value}}g.receiveCompletionRPC=a}),98);
__d("WASmaxInOfflinePreviewRequest",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ib");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"offline_preview");if(!b.success)return b;a=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!a.success)return a;var c=d("WASmaxParseUtils").attrIntRange(b.value,"count",0,void 0);if(!c.success)return c;var e=d("WASmaxParseUtils").attrIntRange(b.value,"message",0,void 0);if(!e.success)return e;var f=d("WASmaxParseUtils").attrIntRange(b.value,"receipt",0,void 0);if(!f.success)return f;var g=d("WASmaxParseUtils").attrIntRange(b.value,"notification",0,void 0);if(!g.success)return g;var h=d("WASmaxParseUtils").attrIntRange(b.value,"appdata",0,void 0);if(!h.success)return h;b=d("WASmaxParseUtils").attrIntRange(b.value,"call",0,void 0);return!b.success?b:d("WAResultOrError").makeResult({from:a.value,offlinePreviewCount:c.value,offlinePreviewMessage:e.value,offlinePreviewReceipt:f.value,offlinePreviewNotification:g.value,offlinePreviewAppdata:h.value,offlinePreviewCall:b.value})}g.parsePreviewRequest=a}),98);
__d("WASmaxOfflinePreviewRPC",["WASmaxInOfflinePreviewRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInOfflinePreviewRequest").parsePreviewRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Preview",{Request:a}));return{parsedRequest:a.value}}g.receivePreviewRPC=a}),98);
__d("WASmaxInOfflineEnums",["WAJids"],(function(a,b,c,d,e,f,g){b={validators:[(a=d("WAJids")).validateGroupJid,a.validateUserJid,a.validateUserJid,a.validateUserJid],typeName:"GroupJid|UserJid|UserJid|UserJid"};g.GROUPJID_USERJID_USERJID_USERJID=b}),98);
__d("WASmaxInOfflineThreadMetadataDelayedMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"item");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"from");return!b.success?b:d("WAResultOrError").makeResult({from:b.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"status_msgs");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"count",0,void 0);if(!b.success)return b;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"item",1,Infinity,h);return!a.success?a:d("WAResultOrError").makeResult({count:b.value,item:a.value})}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"notifications");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"count",0,void 0);return!b.success?b:d("WAResultOrError").makeResult({count:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"thread_metadata");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"status_msgs",i);if(!b.success)return b;a=d("WASmaxParseUtils").optionalChildWithTag(a,"notifications",j);return!a.success?a:d("WAResultOrError").makeResult({statusMsgs:b.value,notifications:a.value})}g.parseThreadMetadataDelayedStatusMsgsItem=h;g.parseThreadMetadataDelayedStatusMsgs=i;g.parseThreadMetadataDelayedNotifications=j;g.parseThreadMetadataDelayedMixin=a}),98);
__d("WASmaxInOfflineThreadMetadataRequest",["WAResultOrError","WASmaxInOfflineEnums","WASmaxInOfflineThreadMetadataDelayedMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"item");if(!b.success)return b;b=d("WASmaxParseJid").attrJidEnum(a,"from",d("WASmaxInOfflineEnums").GROUPJID_USERJID_USERJID_USERJID);if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({from:b.value,t:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ib");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"thread_metadata");if(!b.success)return b;a=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!a.success)return a;var c=d("WASmaxInOfflineThreadMetadataDelayedMixin").parseThreadMetadataDelayedMixin(b.value);b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"item",0,50,h);return!b.success?b:d("WAResultOrError").makeResult({from:a.value,threadMetadataThreadMetadataDelayedMixin:c.success?c.value:null,threadMetadataItem:b.value})}g.parseThreadMetadataRequestThreadMetadataItem=h;g.parseThreadMetadataRequest=a}),98);
__d("WASmaxOfflineThreadMetadataRPC",["WASmaxInOfflineThreadMetadataRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInOfflineThreadMetadataRequest").parseThreadMetadataRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("ThreadMetadata",{Request:a}));return{parsedRequest:a.value}}g.receiveThreadMetadataRPC=a}),98);
__d("WACreateHandleInfoBulletin",["Promise","WACleanDirtyBitsProtocol","WAHandleDirtyBitsProtocol","WAHandleThreadMetadata","WALogger","WAResultOrError","WASmaxDecisionTreeUtils","WASmaxEdgeEdgeRoutingRPC","WASmaxMessageRequestSpamMarkerRPC","WASmaxOfflineCompletionRPC","WASmaxOfflinePreviewRPC","WASmaxOfflineThreadMetadataRPC","WATimeUtils","WAUnknownStanzaError"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleInfoBulletin: unknown incoming <ib>: ",""]);i=function(){return a};return a}var j=(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult("NO_ACK"));function a(a){return function(c){var e=d("WASmaxDecisionTreeUtils").firstChild(c);if(e.success===!1)return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError);e=e.value.tag;switch(e){case"edge_routing":var f;e=d("WASmaxEdgeEdgeRoutingRPC").receiveEdgeRoutingRPC(c).parsedRequest;e=e.edgeRoutingRoutingInfoElementValue;return(f=(f=a.comms)==null?void 0:f.handleEdgeRoutingInfo({edgeInfo:e}).then(d("WAResultOrError").makeResult))!=null?f:j;case"offline_preview":e=d("WASmaxOfflinePreviewRPC").receivePreviewRPC(c).parsedRequest;f={count:e.offlinePreviewCount,message:e.offlinePreviewMessage,receipt:e.offlinePreviewReceipt,notification:e.offlinePreviewNotification,appdata:e.offlinePreviewAppdata};return(e=(e=a.offline)==null?void 0:e.handleOfflineStart(f).then(d("WAResultOrError").makeResult))!=null?e:j;case"offline":f=d("WASmaxOfflineCompletionRPC").receiveCompletionRPC(c).parsedRequest.offlineCount;return(e=(e=a.offline)==null?void 0:e.handleOfflineEnd({offlineCount:f}).then(d("WAResultOrError").makeResult))!=null?e:j;case"thread_metadata":var g=d("WASmaxOfflineThreadMetadataRPC").receiveThreadMetadataRPC(c).parsedRequest.threadMetadataItem.map(function(a){var b=a.from;a=a.t;return{from:b,t:d("WATimeUtils").castToUnixTime(a)}});return d("WAHandleThreadMetadata").handleThreadMetadata(g).then(function(){var b;b=(b=a.offline)==null?void 0:b.handleThreadMetadata;if(b==null)return j;else return b(g).then(d("WAResultOrError").makeResult)});case"spam":f=d("WASmaxMessageRequestSpamMarkerRPC").receiveSpamMarkerRPC(c).parsedRequest.spamState;e=(e=a.spam)==null?void 0:e.handleSpam;if(e==null)return j;else return e({spamState:f}).then(d("WAResultOrError").makeResult);case"dirty":e=d("WAHandleDirtyBitsProtocol").parseDirtyBit(c);var k=e.dirtyBitTimestamp,l=e.dirtyBitType;f=function(){return d("WACleanDirtyBitsProtocol").cleanDirtyBitsProtocol({timestamp:k,type:l})};switch(l){case"groups":return(e=(e=a.groupMessage)==null?void 0:e.handleGroupDirtyBit==null?void 0:e.handleGroupDirtyBit({dirtyBitTimestamp:k,cleanDirtyBits:f}).then(d("WAResultOrError").makeResult))!=null?e:j;case"account_sync":return(e=(e=a.accountSync)==null?void 0:e.handleAccountSyncDirtyBit({dirtyBitTimestamp:k,cleanDirtyBits:f}).then(d("WAResultOrError").makeResult))!=null?e:j;case"newsletter_metadata":return(e=(e=a.newsletter)==null?void 0:e.handleNewsletterDirtyBit({dirtyBitTimestamp:k,cleanDirtyBits:f}).then(d("WAResultOrError").makeResult))!=null?e:j;default:l;return(e=(e=a.syncd)==null?void 0:e.handleSyncdDirtyBit({dirtyBitTimestamp:k,cleanDirtyBits:f}).then(d("WAResultOrError").makeResult))!=null?e:j}default:d("WALogger").WARN(i(),c.toString());return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError)}}}g.createHandleInfoBulletin=a}),98);
__d("WAAdv.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({E2EE:0,HOSTED:1});c={};e={};f={};b={};var h={};c.internalDefaults={accountType:a.E2EE};c.internalSpec={rawId:[1,(d=d("WAProtoConst")).TYPES.UINT32],timestamp:[2,d.TYPES.UINT64],currentIndex:[3,d.TYPES.UINT32],validIndexes:[4,d.FLAGS.REPEATED|d.FLAGS.PACKED|d.TYPES.UINT32],accountType:[5,d.TYPES.ENUM,a]};e.internalSpec={details:[1,d.TYPES.BYTES],accountSignature:[2,d.TYPES.BYTES],accountSignatureKey:[3,d.TYPES.BYTES]};f.internalDefaults={accountType:a.E2EE,deviceType:a.E2EE};f.internalSpec={rawId:[1,d.TYPES.UINT32],timestamp:[2,d.TYPES.UINT64],keyIndex:[3,d.TYPES.UINT32],accountType:[4,d.TYPES.ENUM,a],deviceType:[5,d.TYPES.ENUM,a]};b.internalSpec={details:[1,d.TYPES.BYTES],accountSignatureKey:[2,d.TYPES.BYTES],accountSignature:[3,d.TYPES.BYTES],deviceSignature:[4,d.TYPES.BYTES]};h.internalDefaults={accountType:a.E2EE};h.internalSpec={details:[1,d.TYPES.BYTES],hmac:[2,d.TYPES.BYTES],accountType:[3,d.TYPES.ENUM,a]};g.ADVEncryptionType=a;g.ADVKeyIndexListSpec=c;g.ADVSignedKeyIndexListSpec=e;g.ADVDeviceIdentitySpec=f;g.ADVSignedDeviceIdentitySpec=b;g.ADVSignedDeviceIdentityHMACSpec=h}),98);
__d("WAAdv",["WAAdv.pb","WABinary","WAByteArray","WACryptoDependencies","WACryptoHmac","WACryptoUtils","WAResultOrError","WASignalKeys","WASignalOther","WASignalSignatures","decodeProtobuf","encodeProtobuf","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=new Uint8Array([6,0]),i=new Uint8Array([6,1]);function a(a){return a}function c(a){return a}function e(a){return a}function f(){var a=new Uint8Array(32);d("WACryptoDependencies").getCrypto().getRandomValues(a);return a}function j(a){var c,e,f,g,i,j,k,l,m,n,o,p,q;return b("regeneratorRuntime").async(function(r){while(1)switch(r.prev=r.next){case 0:c=a.advSignedDeviceIdentityHmacProtobuf,e=a.advSecretKey,f=a.identityPubKey;g=d("decodeProtobuf").decodeProtobuf(d("WAAdv.pb").ADVSignedDeviceIdentityHMACSpec,c);i=g.details;j=g.hmac;if(!(i==null)){r.next=6;break}return r.abrupt("return",d("WAResultOrError").makeError("missing-identity-hmac-details"));case 6:if(!(j==null)){r.next=8;break}return r.abrupt("return",d("WAResultOrError").makeError("missing-identity-hmac"));case 8:r.next=10;return b("regeneratorRuntime").awrap(d("WACryptoHmac").hmacSha256(e,i));case 10:k=r.sent;if(d("WACryptoUtils").arrayBuffersEqual(k,j)){r.next=13;break}return r.abrupt("return",d("WAResultOrError").makeError("hmac-mismatch"));case 13:l=d("decodeProtobuf").decodeProtobuf(d("WAAdv.pb").ADVSignedDeviceIdentitySpec,i);m=l.details;if(!(m==null)){r.next=17;break}return r.abrupt("return",d("WAResultOrError").makeError("missing-account-signature-details"));case 17:n=l.accountSignatureKey;if(!(n==null)){r.next=20;break}return r.abrupt("return",d("WAResultOrError").makeError("missing-account-signature-key"));case 20:o=l.accountSignature;if(!(o==null)){r.next=23;break}return r.abrupt("return",d("WAResultOrError").makeError("missing-account-signature"));case 23:p=d("WABinary").Binary.build(h,m,f).readByteArray();q=d("WASignalSignatures").verifyMsgSignalVariant(d("WASignalKeys").serializeIdentity(new Uint8Array(n)),p,d("WASignalOther").toBytes(o,64));if(q){r.next=27;break}return r.abrupt("return",d("WAResultOrError").makeError("signature-mismatch"));case 27:return r.abrupt("return",d("WAResultOrError").makeResult({advSignedDeviceIdentity:l}));case 28:case"end":return r.stop()}},null,this)}function k(a){var c,e,f,g,h,j,k,l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:c=a.advSignedDeviceIdentity,e=a.identityKeyPair;f=c.details;g=d("decodeProtobuf").decodeProtobuf(d("WAAdv.pb").ADVDeviceIdentitySpec,f);h=g.keyIndex;if(!(h==null)){n.next=6;break}return n.abrupt("return",d("WAResultOrError").makeError("missing-key-index"));case 6:j=d("WABinary").Binary.build(i,f,e.publicKey,c.accountSignatureKey).readByteArray();n.next=9;return b("regeneratorRuntime").awrap(d("WASignalSignatures").signMsg(e,j));case 9:k=n.sent;l=babelHelpers["extends"]({},c);l.deviceSignature=d("WAByteArray").uint8ArrayToBuffer(k);l.accountSignatureKey=void 0;m=d("encodeProtobuf").encodeProtobuf(d("WAAdv.pb").ADVSignedDeviceIdentitySpec,l).readByteArray();return n.abrupt("return",d("WAResultOrError").makeResult({signedDeviceIdentityProtobuf:m,keyIndex:h}));case 15:case"end":return n.stop()}},null,this)}g.castToAdvSignedDeviceIdentityHmacProtobuf=a;g.castToAdvSecretKey=c;g.castToAdvSignedDeviceIdentityProtobuf=e;g.generateAdvSecretKey=f;g.verifyAdvSignedDeviceIdentity=j;g.addDeviceSignatureToProtobuf=k}),98);
__d("WASmaxInMdBaseIQSetRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"iq");if(!b.success)return b;b=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","set");return!a.success?a:d("WAResultOrError").makeResult({id:b.value,type:a.value})}g.parseBaseIQSetRequestMixin=a}),98);
__d("WASmaxInMdSetToCompanionRequest",["WAResultOrError","WASmaxInMdBaseIQSetRequestMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"ref");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytes(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"iq");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"pair-device");if(!b.success)return b;var c=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"xmlns","md");if(!e.success)return e;a=d("WASmaxInMdBaseIQSetRequestMixin").parseBaseIQSetRequestMixin(a);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"ref",6,6,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:c.value,xmlns:e.value},a.value,{pairDeviceRef:b.value}))}g.parseSetToCompanionRequestPairDeviceRef=h;g.parseSetToCompanionRequest=a}),98);
__d("WASmaxOutMdSetToCompanionResponseClientResponse",["WASmaxJsx","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrDomainJid,a,["from"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("iq",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").DOMAIN_JID(a.value),type:"result"});return b}g.makeSetToCompanionResponseClientResponse=a}),98);
__d("WASmaxMdSetToCompanionRPC",["WASmaxInMdSetToCompanionRequest","WASmaxOutMdSetToCompanionResponseClientResponse","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMdSetToCompanionRequest").parseSetToCompanionRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("SetToCompanion",{Request:b}));return{parsedRequest:b.value,makeSetToCompanionResponseClientResponse:function(){return d("WASmaxOutMdSetToCompanionResponseClientResponse").makeSetToCompanionResponseClientResponse(a)}}}g.receiveSetToCompanionRPC=a}),98);
__d("WAHandlePairDeviceProtocol",["WABase64","WABinary","WAResultOrError","WASmaxMdSetToCompanionRPC"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("WASmaxMdSetToCompanionRPC").receiveSetToCompanionRPC(a);var b=a.makeSetToCompanionResponseClientResponse;a=a.parsedRequest;a=a.pairDeviceRef.map(function(a){a=a.elementValue;a=new(d("WABinary").Binary)(a);return a.readString(a.size())});return d("WAResultOrError").makeResult({refs:a,makeAck:b})}b=function(a){var b=a.ref,c=a.publicAuthKey,e=a.publicIdentityKey;a=a.advSecretKey;return b+","+d("WABase64").encodeB64(c)+","+d("WABase64").encodeB64(e)+","+d("WABase64").encodeB64(a)};g.parsePairDevice=a;g.generateRegistrationQrCodeString=b}),98);
__d("WASmaxInMdEnums",[],(function(a,b,c,d,e,f){a={"false":"false","true":"true"};f.ENUM_FALSE_TRUE=a}),66);
__d("WASmaxInMdSetRegRequest",["WAResultOrError","WASmaxInMdBaseIQSetRequestMixin","WASmaxInMdEnums","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"biz");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"name");return!b.success?b:d("WAResultOrError").makeResult({name:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"iq");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"pair-success");if(!b.success)return b;var c=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"device-identity");if(!c.success)return c;var e=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"device");if(!e.success)return e;var f=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"platform");if(!f.success)return f;b=d("WASmaxParseUtils").optionalChildWithTag(b.value,"biz",h);if(!b.success)return b;var g=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!g.success)return g;var i=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"xmlns","md");if(!i.success)return i;c=d("WASmaxParseUtils").contentBytesRange(c.value,1,500);if(!c.success)return c;var j=d("WASmaxParseJid").attrDeviceJid(e.value,"jid");if(!j.success)return j;var k=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrDeviceJid,e.value,"lid");if(!k.success)return k;e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,e.value,"beta",d("WASmaxInMdEnums").ENUM_FALSE_TRUE);if(!e.success)return e;f=d("WASmaxParseUtils").attrString(f.value,"name");if(!f.success)return f;a=d("WASmaxInMdBaseIQSetRequestMixin").parseBaseIQSetRequestMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:g.value,xmlns:i.value,pairSuccessDeviceIdentityElementValue:c.value,pairSuccessDeviceJid:j.value,pairSuccessDeviceLid:k.value,pairSuccessDeviceBeta:e.value,pairSuccessPlatformName:f.value},a.value,{pairSuccessBiz:b.value}))}g.parseSetRegRequestPairSuccessBiz=h;g.parseSetRegRequest=a}),98);
__d("WASmaxOutMdRegularCompanionSetRegResponseBundleMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.keyAttestationKeyId;a=a.keyAttestationElementValue;b=d("WASmaxJsx").smax("key_attestation",{key_id:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,b)},a);return b}function i(a){a=a.gpiaElementValue;a=d("WASmaxJsx").smax("gpia",null,a);return a}function j(a){var b=a.keyAttestationArgs,c=a.gpiaArgs,e=a.deviceIdentityKeyIndex;a=a.deviceIdentityElementValue;e=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("pair-device-sign",null,d("WASmaxJsx").smax("device-identity",{"key-index":d("WAWap").INT(e)},a),d("WASmaxChildren").OPTIONAL_CHILD(h,b),d("WASmaxChildren").OPTIONAL_CHILD(i,c)));return e}function a(a,b){b=j(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeRegularCompanionSetRegResponseBundlePairDeviceSignKeyAttestation=h;g.makeRegularCompanionSetRegResponseBundlePairDeviceSignGpia=i;g.mergeRegularCompanionSetRegResponseBundleMixin=a}),98);
__d("WASmaxOutMdSetRegResponseClientResponse",["WASmaxJsx","WASmaxOutMdRegularCompanionSetRegResponseBundleMixin","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a,b){b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,b,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);b=d("WASmaxOutMdRegularCompanionSetRegResponseBundleMixin").mergeRegularCompanionSetRegResponseBundleMixin(d("WASmaxJsx").smax("iq",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").S_WHATSAPP_NET,type:"result"}),a);return b}g.makeSetRegResponseClientResponse=a}),98);
__d("WASmaxOutMdIQErrorNotAuthorizedMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("error",{text:"not-authorized",code:d("WAWap").INT(401)});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIQErrorNotAuthorizedMixin=a}),98);
__d("WASmaxOutMdSetRegResponseError",["WASmaxJsx","WASmaxOutMdIQErrorNotAuthorizedMixin","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);a=d("WASmaxJsx").smax("iq",{id:d("WAWap").STANZA_ID(a.value),to:d("WAWap").S_WHATSAPP_NET,type:"error"},d("WASmaxOutMdIQErrorNotAuthorizedMixin").mergeIQErrorNotAuthorizedMixin(d("WASmaxJsx").smax("error",null)));return a}g.makeSetRegResponseError=a}),98);
__d("WASmaxOutMdHostedCompanionSetRegResponseBundleMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.deviceIdentityElementValue;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("hosted-pair-set",null,d("WASmaxJsx").smax("device-identity",null,a)));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeHostedCompanionSetRegResponseBundleMixin=a}),98);
__d("WASmaxOutMdSetRegResponseHostedClientResponse",["WASmaxJsx","WASmaxOutMdHostedCompanionSetRegResponseBundleMixin","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a,b){b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,b,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);b=d("WASmaxOutMdHostedCompanionSetRegResponseBundleMixin").mergeHostedCompanionSetRegResponseBundleMixin(d("WASmaxJsx").smax("iq",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").S_WHATSAPP_NET,type:"result"}),a);return b}g.makeSetRegResponseHostedClientResponse=a}),98);
__d("WASmaxMdSetRegRPC",["WASmaxInMdSetRegRequest","WASmaxOutMdSetRegResponseClientResponse","WASmaxOutMdSetRegResponseError","WASmaxOutMdSetRegResponseHostedClientResponse","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMdSetRegRequest").parseSetRegRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("SetReg",{Request:b}));return{parsedRequest:b.value,makeSetRegResponseClientResponse:function(b){return d("WASmaxOutMdSetRegResponseClientResponse").makeSetRegResponseClientResponse(b,a)},makeSetRegResponseHostedClientResponse:function(b){return d("WASmaxOutMdSetRegResponseHostedClientResponse").makeSetRegResponseHostedClientResponse(b,a)},makeSetRegResponseError:function(){return d("WASmaxOutMdSetRegResponseError").makeSetRegResponseError(a)}}}g.receiveSetRegRPC=a}),98);
__d("WAHandlePairSuccessProtocol",["WAAdv","WAResultOrError","WASmaxMdSetRegRPC"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("WASmaxMdSetRegRPC").receiveSetRegRPC(a);var b=a.makeSetRegResponseHostedClientResponse,c=a.makeSetRegResponseClientResponse,e=a.makeSetRegResponseError;a=a.parsedRequest;var f=a.pairSuccessDeviceIdentityElementValue,g=a.pairSuccessDeviceJid,h=a.pairSuccessPlatformName;a=a.pairSuccessBiz;return d("WAResultOrError").makeResult({bizName:a==null?void 0:a.name,platformName:h,deviceJid:g,advSignedDeviceIdentityHmacProtobuf:d("WAAdv").castToAdvSignedDeviceIdentityHmacProtobuf(f),makeSetRegResponseHostedClientResponse:b,makeSetRegResponseClientResponse:c,makeSetRegResponseError:e})}g.parsePairSuccess=a}),98);
__d("WASmaxInPingsServerPingRequest",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"iq");if(!b.success)return b;b=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!b.success)return b;var c=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","get");if(!e.success)return e;var f=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"xmlns","urn:xmpp:ping");if(!f.success)return f;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStanzaId,a,"id");return!a.success?a:d("WAResultOrError").makeResult({from:b.value,t:c.value,type:e.value,xmlns:f.value,id:a.value})}g.parseServerPingRequest=a}),98);
__d("WASmaxOutPingsServerPingResponseClientResponse",["WASmaxAttrs","WASmaxJsx","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.hasIqXmlnsUrnx3Axmppx3Aping;a=a.iqTo;b=d("WASmaxJsx").smax("iq",{xmlns:d("WASmaxAttrs").OPTIONAL_LITERAL("urn:xmpp:ping",b),to:d("WAWap").JID(a),type:"result",id:d("WAWap").generateId()});return b}g.makeServerPingResponseClientResponse=a}),98);
__d("WASmaxOutPingsServerPingResponseClientResponseError",["WASmaxAttrs","WASmaxJsx","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b,c=a.iqTo,e=a.errorCode;a=a.errorText;c=d("WASmaxJsx").smax("iq",{to:(b=d("WAWap")).JID(c),type:"error",id:b.generateId()},d("WASmaxJsx").smax("error",{code:b.CUSTOM_STRING(e),text:d("WASmaxAttrs").OPTIONAL(b.CUSTOM_STRING,a)}));return c}g.makeServerPingResponseClientResponseError=a}),98);
__d("WASmaxPingsServerPingRPC",["WASmaxInPingsServerPingRequest","WASmaxOutPingsServerPingResponseClientResponse","WASmaxOutPingsServerPingResponseClientResponseError","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInPingsServerPingRequest").parseServerPingRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("ServerPing",{Request:a}));return{parsedRequest:a.value,makeServerPingResponseClientResponse:d("WASmaxOutPingsServerPingResponseClientResponse").makeServerPingResponseClientResponse,makeServerPingResponseClientResponseError:d("WASmaxOutPingsServerPingResponseClientResponseError").makeServerPingResponseClientResponseError}}g.receiveServerPingRPC=a}),98);
__d("WACreateHandleIq",["Promise","WAAdv","WAHandlePairDeviceProtocol","WAHandlePairSuccessProtocol","WAResultOrError","WASmaxParseUtils","WASmaxPingsServerPingRPC","WAUnknownStanzaError"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c=a.md,e=a.comms;return function(a){var f=a.attrs;switch(f.xmlns){case"urn:xmpp:ping":f=e==null?void 0:e.handleServerPing;if(f!=null){var g=d("WASmaxPingsServerPingRPC").receiveServerPingRPC(a),i=g.parsedRequest.from,j=g.makeServerPingResponseClientResponse;return f({makeResponse:function(){return j({hasIqXmlnsUrnx3Axmppx3Aping:!1,iqTo:i})}}).then(d("WAResultOrError").makeResult)}break;case"md":g=d("WASmaxParseUtils").maybeChildren(a);if(g.success&&g.value!=null){f=g.value[0].tag;switch(f){case"pair-device":g=c==null?void 0:c.handlePairDevice;if(g!=null){f=d("WAHandlePairDeviceProtocol").parsePairDevice(a);f=f.value;var k=f.makeAck;f=f.refs;return g({generateRegistrationQrCodeString:d("WAHandlePairDeviceProtocol").generateRegistrationQrCodeString,makeAck:k,refs:f}).then(d("WAResultOrError").makeResult)}break;case"pair-success":g=c==null?void 0:c.handlePairSuccess;if(g!=null){k=d("WAHandlePairSuccessProtocol").parsePairSuccess(a);if(k.success)return g(babelHelpers["extends"]({},k.value,{addDeviceSignatureToProtobuf:d("WAAdv").addDeviceSignatureToProtobuf,verifyAdvSignedDeviceIdentity:d("WAAdv").verifyAdvSignedDeviceIdentity})).then(d("WAResultOrError").makeResult)}break}}}return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError)}}g.createHandleIq=a}),98);
__d("WACommonMessageBase",["WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.id,c=a.t,e=a.folderMixin,f=a.offlineMixin,g=a.metaHideDecryptionPlaceholderMixin,h=a.frankingMixin;return{stanzaId:b,serverTs:d("WATimeUtils").castToUnixTime(c),offline:f==null?void 0:f.offline,fbFolderId:e==null?void 0:e.folderId,hideDecryptionFailure:(g==null?void 0:g.metaDecryptFail)==="hide",frankingTag:h==null?void 0:(b=h.clientFrankingTagMixin)==null?void 0:b.frankingFrankingTagElementValue,reportingTag:h==null?void 0:h.frankingReportingTagElementValue,internalTestConfig:(c=a.internalTestMixin)==null?void 0:c.testConfig}}g.transformMessageParsedRequest=a}),98);
__d("WAMmsRetry.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({GENERAL_ERROR:0,SUCCESS:1,NOT_FOUND:2,DECRYPTION_ERROR:3});c={};e={};c.internalSpec={stanzaId:[1,(f=d("WAProtoConst")).TYPES.STRING],directPath:[2,f.TYPES.STRING],result:[3,f.TYPES.ENUM,a]};e.internalSpec={stanzaId:[1,f.TYPES.STRING]};g.MediaRetryNotification$ResultType=a;g.MediaRetryNotificationSpec=c;g.ServerErrorReceiptSpec=e}),98);
__d("WAProtocol.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={remoteJid:[1,(b=d("WAProtoConst")).TYPES.STRING],fromMe:[2,b.TYPES.BOOL],id:[3,b.TYPES.STRING],participant:[4,b.TYPES.STRING]};g.MessageKeySpec=a}),98);
__d("WAE2E.pb",["$InternalEnum","WAAdv.pb","WAMmsRetry.pb","WAProtoConst","WAProtocol.pb"],(function(a,b,c,d,e,f,g){var h,i;c=(a=b("$InternalEnum"))({MASK_LINKED_DEVICES:0});e=a({UNKNOWN:0,AUDIO:1,VIDEO:2});f=a({CONNECTED:0,MISSED:1,FAILED:2,REJECTED:3,ACCEPTED_ELSEWHERE:4,ONGOING:5,SILENCED_BY_DND:6,SILENCED_UNKNOWN_CALLER:7});b=a({REGULAR:0,SCHEDULED_CALL:1,VOICE_CHAT:2});var aa=a({UNKNOWN:0,CANCEL:1}),ba=a({UNKNOWN:0,VOICE:1,VIDEO:2}),ca=a({UNKNOWN:0,GOING:1,NOT_GOING:2}),da=a({UNKNOWN_TYPE:0,PIN_FOR_ALL:1,UNPIN_FOR_ALL:2}),ea=a({UNKNOWN:0,DISPLAY_TEXT:1}),fa=a({UNKNOWN:0,RESPONSE:1,NATIVE_FLOW:2}),ga=a({UNKNOWN:0,EMPTY:1,TEXT:2,DOCUMENT:3,IMAGE:4,VIDEO:5,LOCATION:6}),ha=a({UNKNOWN:0,EVENT_EDIT:1}),ia=a({DEFAULT:0,PARENT:1}),j=a({DEFAULT:0,EXTENSIONS_1:1}),ja=a({UNKNOWN_SURFACE:0,FB:1,IG:2,WA:3}),ka=a({UNKNOWN:0,SINGLE_SELECT:1}),la=a({UNKNOWN:0,SINGLE_SELECT:1,PRODUCT_LIST:2}),ma=a({CATALOG:1}),na=a({INQUIRY:1,ACCEPTED:2,DECLINED:3}),oa=a({UNKNOWN:0,FBPAY:1,NOVI:2,UPI:3}),pa=a({GREGORIAN:1,SOLAR_HIJRI:2}),qa=a({MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6,SUNDAY:7}),k=a({UPLOAD_STICKER:0,SEND_RECENT_STICKER_BOOTSTRAP:1,GENERATE_LINK_PREVIEW:2,HISTORY_SYNC_ON_DEMAND:3,PLACEHOLDER_MESSAGE_RESEND:4}),ra=a({INITIAL_BOOTSTRAP:0,INITIAL_STATUS_V3:1,FULL:2,RECENT:3,PUSH_NAME:4,NON_BLOCKING_DATA:5,ON_DEMAND:6}),sa=a({EMPTY:0,NON_EMPTY:1}),ta=a({REVOKE:0,EPHEMERAL_SETTING:3,EPHEMERAL_SYNC_RESPONSE:4,HISTORY_SYNC_NOTIFICATION:5,APP_STATE_SYNC_KEY_SHARE:6,APP_STATE_SYNC_KEY_REQUEST:7,MSG_FANOUT_BACKFILL_REQUEST:8,INITIAL_SECURITY_NOTIFICATION_SETTING_SYNC:9,APP_STATE_FATAL_EXCEPTION_NOTIFICATION:10,SHARE_PHONE_NUMBER:11,MESSAGE_EDIT:14,PEER_DATA_OPERATION_REQUEST_MESSAGE:16,PEER_DATA_OPERATION_REQUEST_RESPONSE_MESSAGE:17,REQUEST_WELCOME_MESSAGE:18,BOT_FEEDBACK_MESSAGE:19,MEDIA_NOTIFY_MESSAGE:20}),ua=a({BOT_FEEDBACK_MULTIPLE_POSITIVE_GENERIC:1}),va=a({BOT_FEEDBACK_MULTIPLE_NEGATIVE_GENERIC:1,BOT_FEEDBACK_MULTIPLE_NEGATIVE_HELPFUL:2,BOT_FEEDBACK_MULTIPLE_NEGATIVE_INTERESTING:4,BOT_FEEDBACK_MULTIPLE_NEGATIVE_ACCURATE:8,BOT_FEEDBACK_MULTIPLE_NEGATIVE_SAFE:16,BOT_FEEDBACK_MULTIPLE_NEGATIVE_OTHER:32,BOT_FEEDBACK_MULTIPLE_NEGATIVE_REFUSED:64,BOT_FEEDBACK_MULTIPLE_NEGATIVE_NOT_VISUALLY_APPEALING:128,BOT_FEEDBACK_MULTIPLE_NEGATIVE_NOT_RELEVANT_TO_TEXT:256}),wa=a({BOT_FEEDBACK_POSITIVE:0,BOT_FEEDBACK_NEGATIVE_GENERIC:1,BOT_FEEDBACK_NEGATIVE_HELPFUL:2,BOT_FEEDBACK_NEGATIVE_INTERESTING:3,BOT_FEEDBACK_NEGATIVE_ACCURATE:4,BOT_FEEDBACK_NEGATIVE_SAFE:5,BOT_FEEDBACK_NEGATIVE_OTHER:6,BOT_FEEDBACK_NEGATIVE_REFUSED:7,BOT_FEEDBACK_NEGATIVE_NOT_VISUALLY_APPEALING:8,BOT_FEEDBACK_NEGATIVE_NOT_RELEVANT_TO_TEXT:9}),xa=a({NONE:0,GIPHY:1,TENOR:2}),l=a({DEFAULT:0,PARENT:1,SUB:2,DEFAULT_SUB:3}),ya=a({NONE:0,VIDEO:1,PLACEHOLDER:4,IMAGE:5}),za=a({SYSTEM:0,SYSTEM_TEXT:1,FB_SCRIPT:2,SYSTEM_BOLD:6,MORNINGBREEZE_REGULAR:7,CALISTOGA_REGULAR:8,EXO2_EXTRABOLD:9,COURIERPRIME_BOLD:10}),Aa=a({IMAGE:0,PDF:1}),Ba=a({USER_IMAGE:0,AI_GENERATED:1,AI_MODIFIED:2}),Ca=a({UPDATE:1,UPDATE_CARD:2,LINK_CARD:3}),Da=a({NONE:0,IMAGE:1,VIDEO:2}),Ea=a({NONE:0,IMAGE:1,VIDEO:2}),Fa=a({REELS:1,SEARCH:2}),Ga=a({BING:1,GOOGLE:2}),Ha=a({FULL:1,TALL:2,COMPACT:3}),Ia=a({UNKNOWN:0,DEFAULT:1}),Ja=a({UNKNOWN:0,CHAT_SETTING:1,ACCOUNT_SETTING:2,BULK_CHANGE:3,BIZ_SUPPORTS_FB_HOSTING:4}),Ka=a({CHANGED_IN_CHAT:0,INITIATED_BY_ME:1,INITIATED_BY_OTHER:2,BIZ_UPGRADE_FB_HOSTING:3});a=a({UNKNOWN:0,KEEP_FOR_ALL:1,UNDO_KEEP_FOR_ALL:2});var m={},n={},o={},p={},q={},r={},s={},t={},La={},u={},v={},w={},x={},y={},Ma={},Na={},Oa={},Pa={},Qa={},Ra={},z={},Sa={},Ta={},Ua={},Va={},Wa={},Xa={},Ya={},Za={},$a={},A={},ab={},bb={},cb={},db={},eb={},B={},C={},D={},E={},F={},fb={},G={},H={},gb={},hb={},ib={},jb={},kb={},lb={},mb={},nb={},ob={},pb={},qb={},rb={},I={},J={},sb={},tb={},ub={},K={},L={},vb={},M={},wb={},xb={},yb={},zb={},Ab={},Bb={},N={},Cb={},Db={},Eb={},Fb={},Gb={},Hb={},Ib={},Jb={},Kb={},Lb={},Mb={},Nb={},Ob={},Pb={},Qb={},Rb={},Sb={},Tb={},Ub={},Vb={},Wb={},Xb={},O={},Yb={},Zb={},$b={},ac={},bc={},cc={},dc={},P={},ec={},Q={},fc={},R={},S={},gc={},T={},U={},V={},hc={},W={},ic={},jc={},kc={},lc={},mc={},nc={},oc={},pc={},qc={},rc={},X={},Y={},sc={},tc={},uc={},vc={},wc={},xc={},yc={},zc={},Ac={},Bc={},Cc={},Z={},Dc={},$={},Ec={},Fc={},Gc={},Hc={};m.internalSpec={conversation:[1,(h=d("WAProtoConst")).TYPES.STRING],senderKeyDistributionMessage:[2,h.TYPES.MESSAGE,U],imageMessage:[3,h.TYPES.MESSAGE,T],contactMessage:[4,h.TYPES.MESSAGE,S],locationMessage:[5,h.TYPES.MESSAGE,R],extendedTextMessage:[6,h.TYPES.MESSAGE,fc],documentMessage:[7,h.TYPES.MESSAGE,Q],audioMessage:[8,h.TYPES.MESSAGE,ec],videoMessage:[9,h.TYPES.MESSAGE,P],call:[10,h.TYPES.MESSAGE,dc],chat:[11,h.TYPES.MESSAGE,cc],protocolMessage:[12,h.TYPES.MESSAGE,ac],contactsArrayMessage:[13,h.TYPES.MESSAGE,Hb],highlyStructuredMessage:[14,h.TYPES.MESSAGE,N],fastRatchetKeySenderKeyDistributionMessage:[15,h.TYPES.MESSAGE,U],sendPaymentMessage:[16,h.TYPES.MESSAGE,Bb],liveLocationMessage:[18,h.TYPES.MESSAGE,wb],requestPaymentMessage:[22,h.TYPES.MESSAGE,Ab],declinePaymentRequestMessage:[23,h.TYPES.MESSAGE,zb],cancelPaymentRequestMessage:[24,h.TYPES.MESSAGE,yb],templateMessage:[25,h.TYPES.MESSAGE,K],stickerMessage:[26,h.TYPES.MESSAGE,M],groupInviteMessage:[28,h.TYPES.MESSAGE,db],templateButtonReplyMessage:[29,h.TYPES.MESSAGE,ub],productMessage:[30,h.TYPES.MESSAGE,J],deviceSentMessage:[31,h.TYPES.MESSAGE,ab],messageContextInfo:[35,h.TYPES.MESSAGE,rc],listMessage:[36,h.TYPES.MESSAGE,lb],viewOnceMessage:[37,h.TYPES.MESSAGE,A],orderMessage:[38,h.TYPES.MESSAGE,I],listResponseMessage:[39,h.TYPES.MESSAGE,jb],ephemeralMessage:[40,h.TYPES.MESSAGE,A],invoiceMessage:[41,h.TYPES.MESSAGE,gc],buttonsMessage:[42,h.TYPES.MESSAGE,Wa],buttonsResponseMessage:[43,h.TYPES.MESSAGE,Va],paymentInviteMessage:[44,h.TYPES.MESSAGE,xb],interactiveMessage:[45,h.TYPES.MESSAGE,D],reactionMessage:[46,h.TYPES.MESSAGE,Ua],stickerSyncRmrMessage:[47,h.TYPES.MESSAGE,Ta],interactiveResponseMessage:[48,h.TYPES.MESSAGE,eb],pollCreationMessage:[49,h.TYPES.MESSAGE,z],pollUpdateMessage:[50,h.TYPES.MESSAGE,Ra],keepInChatMessage:[51,h.TYPES.MESSAGE,Na],documentWithCaptionMessage:[53,h.TYPES.MESSAGE,A],requestPhoneNumberMessage:[54,h.TYPES.MESSAGE,bb],viewOnceMessageV2:[55,h.TYPES.MESSAGE,A],encReactionMessage:[56,h.TYPES.MESSAGE,y],editedMessage:[58,h.TYPES.MESSAGE,A],viewOnceMessageV2Extension:[59,h.TYPES.MESSAGE,A],pollCreationMessageV2:[60,h.TYPES.MESSAGE,z],scheduledCallCreationMessage:[61,h.TYPES.MESSAGE,t],groupMentionedMessage:[62,h.TYPES.MESSAGE,A],pinInChatMessage:[63,h.TYPES.MESSAGE,Ma],pollCreationMessageV3:[64,h.TYPES.MESSAGE,z],scheduledCallEditMessage:[65,h.TYPES.MESSAGE,s],ptvMessage:[66,h.TYPES.MESSAGE,P],botInvokeMessage:[67,h.TYPES.MESSAGE,A],callLogMesssage:[69,h.TYPES.MESSAGE,q],messageHistoryBundle:[70,h.TYPES.MESSAGE,p],encCommentMessage:[71,h.TYPES.MESSAGE,x],bcallMessage:[72,h.TYPES.MESSAGE,o],lottieStickerMessage:[74,h.TYPES.MESSAGE,A],eventMessage:[75,h.TYPES.MESSAGE,v],encEventResponseMessage:[76,h.TYPES.MESSAGE,u],commentMessage:[77,h.TYPES.MESSAGE,w],newsletterAdminInviteMessage:[78,h.TYPES.MESSAGE,cb],placeholderMessage:[80,h.TYPES.MESSAGE,n],secretEncryptedMessage:[82,h.TYPES.MESSAGE,$a]};n.internalSpec={type:[1,h.TYPES.ENUM,c]};o.internalSpec={sessionId:[1,h.TYPES.STRING],mediaType:[2,h.TYPES.ENUM,e],masterKey:[3,h.TYPES.BYTES],caption:[4,h.TYPES.STRING]};p.internalSpec={mimetype:[2,h.TYPES.STRING],fileSha256:[3,h.TYPES.BYTES],mediaKey:[5,h.TYPES.BYTES],fileEncSha256:[6,h.TYPES.BYTES],directPath:[7,h.TYPES.STRING],mediaKeyTimestamp:[8,h.TYPES.INT64],contextInfo:[9,h.TYPES.MESSAGE,V],participants:[10,h.FLAGS.REPEATED|h.TYPES.STRING]};q.internalSpec={isVideo:[1,h.TYPES.BOOL],callOutcome:[2,h.TYPES.ENUM,f],durationSecs:[3,h.TYPES.INT64],callType:[4,h.TYPES.ENUM,b],participants:[5,h.FLAGS.REPEATED|h.TYPES.MESSAGE,r]};r.internalSpec={jid:[1,h.TYPES.STRING],callOutcome:[2,h.TYPES.ENUM,f]};s.internalSpec={key:[1,h.TYPES.MESSAGE,(i=d("WAProtocol.pb")).MessageKeySpec],editType:[2,h.TYPES.ENUM,aa]};t.internalSpec={scheduledTimestampMs:[1,h.TYPES.INT64],callType:[2,h.TYPES.ENUM,ba],title:[3,h.TYPES.STRING]};La.internalSpec={response:[1,h.TYPES.ENUM,ca],timestampMs:[2,h.TYPES.INT64]};u.internalSpec={eventCreationMessageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],encPayload:[2,h.TYPES.BYTES],encIv:[3,h.TYPES.BYTES]};v.internalSpec={contextInfo:[1,h.TYPES.MESSAGE,V],isCanceled:[2,h.TYPES.BOOL],name:[3,h.TYPES.STRING],description:[4,h.TYPES.STRING],location:[5,h.TYPES.MESSAGE,R],joinLink:[6,h.TYPES.STRING],startTime:[7,h.TYPES.INT64]};w.internalSpec={message:[1,h.TYPES.MESSAGE,m],targetMessageKey:[2,h.TYPES.MESSAGE,i.MessageKeySpec]};x.internalSpec={targetMessageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],encPayload:[2,h.TYPES.BYTES],encIv:[3,h.TYPES.BYTES]};y.internalSpec={targetMessageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],encPayload:[2,h.TYPES.BYTES],encIv:[3,h.TYPES.BYTES]};Ma.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],type:[2,h.TYPES.ENUM,da],senderTimestampMs:[3,h.TYPES.INT64]};Na.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],keepType:[2,h.TYPES.ENUM,a],timestampMs:[3,h.TYPES.INT64]};Oa.internalSpec={selectedOptions:[1,h.FLAGS.REPEATED|h.TYPES.BYTES]};Pa.internalSpec={encPayload:[1,h.TYPES.BYTES],encIv:[2,h.TYPES.BYTES]};Qa.internalSpec={};Ra.internalSpec={pollCreationMessageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],vote:[2,h.TYPES.MESSAGE,Pa],metadata:[3,h.TYPES.MESSAGE,Qa],senderTimestampMs:[4,h.TYPES.INT64]};z.internalSpec={encKey:[1,h.TYPES.BYTES],name:[2,h.TYPES.STRING],options:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Sa],selectableOptionsCount:[4,h.TYPES.UINT32],contextInfo:[5,h.TYPES.MESSAGE,V]};Sa.internalSpec={optionName:[1,h.TYPES.STRING]};Ta.internalSpec={filehash:[1,h.FLAGS.REPEATED|h.TYPES.STRING],rmrSource:[2,h.TYPES.STRING],requestTimestamp:[3,h.TYPES.INT64]};Ua.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],text:[2,h.TYPES.STRING],groupingKey:[3,h.TYPES.STRING],senderTimestampMs:[4,h.TYPES.INT64]};Va.internalSpec={selectedButtonId:[1,h.TYPES.STRING],selectedDisplayText:[2,h.TYPES.STRING],contextInfo:[3,h.TYPES.MESSAGE,V],type:[4,h.TYPES.ENUM,ea],__oneofs__:{response:["selectedDisplayText"]}};Wa.internalSpec={text:[1,h.TYPES.STRING],documentMessage:[2,h.TYPES.MESSAGE,Q],imageMessage:[3,h.TYPES.MESSAGE,T],videoMessage:[4,h.TYPES.MESSAGE,P],locationMessage:[5,h.TYPES.MESSAGE,R],contentText:[6,h.TYPES.STRING],footerText:[7,h.TYPES.STRING],contextInfo:[8,h.TYPES.MESSAGE,V],buttons:[9,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Xa],headerType:[10,h.TYPES.ENUM,ga],__oneofs__:{header:["text","documentMessage","imageMessage","videoMessage","locationMessage"]}};Xa.internalSpec={buttonId:[1,h.TYPES.STRING],buttonText:[2,h.TYPES.MESSAGE,Za],type:[3,h.TYPES.ENUM,fa],nativeFlowInfo:[4,h.TYPES.MESSAGE,Ya]};Ya.internalSpec={name:[1,h.TYPES.STRING],paramsJson:[2,h.TYPES.STRING]};Za.internalSpec={displayText:[1,h.TYPES.STRING]};$a.internalSpec={targetMessageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],encPayload:[2,h.TYPES.BYTES],encIv:[3,h.TYPES.BYTES],secretEncType:[4,h.TYPES.ENUM,ha]};A.internalSpec={message:[1,h.TYPES.MESSAGE,m]};ab.internalSpec={destinationJid:[1,h.TYPES.STRING],message:[2,h.TYPES.MESSAGE,m],phash:[3,h.TYPES.STRING]};bb.internalSpec={contextInfo:[1,h.TYPES.MESSAGE,V]};cb.internalSpec={newsletterJid:[1,h.TYPES.STRING],newsletterName:[2,h.TYPES.STRING],jpegThumbnail:[3,h.TYPES.BYTES],caption:[4,h.TYPES.STRING],inviteExpiration:[5,h.TYPES.INT64],contextInfo:[6,h.TYPES.MESSAGE,V]};db.internalSpec={groupJid:[1,h.TYPES.STRING],inviteCode:[2,h.TYPES.STRING],inviteExpiration:[3,h.TYPES.INT64],groupName:[4,h.TYPES.STRING],jpegThumbnail:[5,h.TYPES.BYTES],caption:[6,h.TYPES.STRING],contextInfo:[7,h.TYPES.MESSAGE,V],groupType:[8,h.TYPES.ENUM,ia]};eb.internalSpec={body:[1,h.TYPES.MESSAGE,C],nativeFlowResponseMessage:[2,h.TYPES.MESSAGE,B],contextInfo:[15,h.TYPES.MESSAGE,V],__oneofs__:{interactiveResponseMessage:["nativeFlowResponseMessage"]}};B.internalDefaults={version:1};B.internalSpec={name:[1,h.TYPES.STRING],paramsJson:[2,h.TYPES.STRING],version:[3,h.TYPES.INT32]};C.internalDefaults={format:j.DEFAULT};C.internalSpec={text:[1,h.TYPES.STRING],format:[2,h.TYPES.ENUM,j]};D.internalSpec={header:[1,h.TYPES.MESSAGE,ib],body:[2,h.TYPES.MESSAGE,hb],footer:[3,h.TYPES.MESSAGE,gb],shopStorefrontMessage:[4,h.TYPES.MESSAGE,H],collectionMessage:[5,h.TYPES.MESSAGE,G],nativeFlowMessage:[6,h.TYPES.MESSAGE,F],carouselMessage:[7,h.TYPES.MESSAGE,E],contextInfo:[15,h.TYPES.MESSAGE,V],__oneofs__:{interactiveMessage:["shopStorefrontMessage","collectionMessage","nativeFlowMessage","carouselMessage"]}};E.internalDefaults={messageVersion:1};E.internalSpec={cards:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,D],messageVersion:[2,h.TYPES.INT32]};F.internalDefaults={messageVersion:1};F.internalSpec={buttons:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,fb],messageParamsJson:[2,h.TYPES.STRING],messageVersion:[3,h.TYPES.INT32]};fb.internalSpec={name:[1,h.TYPES.STRING],buttonParamsJson:[2,h.TYPES.STRING]};G.internalDefaults={messageVersion:1};G.internalSpec={bizJid:[1,h.TYPES.STRING],id:[2,h.TYPES.STRING],messageVersion:[3,h.TYPES.INT32]};H.internalDefaults={messageVersion:1};H.internalSpec={id:[1,h.TYPES.STRING],surface:[2,h.TYPES.ENUM,ja],messageVersion:[3,h.TYPES.INT32]};gb.internalSpec={text:[1,h.TYPES.STRING]};hb.internalSpec={text:[1,h.TYPES.STRING]};ib.internalSpec={title:[1,h.TYPES.STRING],subtitle:[2,h.TYPES.STRING],documentMessage:[3,h.TYPES.MESSAGE,Q],imageMessage:[4,h.TYPES.MESSAGE,T],jpegThumbnail:[6,h.TYPES.BYTES],videoMessage:[7,h.TYPES.MESSAGE,P],locationMessage:[8,h.TYPES.MESSAGE,R],productMessage:[9,h.TYPES.MESSAGE,J],hasMediaAttachment:[5,h.TYPES.BOOL],__oneofs__:{media:["documentMessage","imageMessage","jpegThumbnail","videoMessage","locationMessage","productMessage"]}};jb.internalSpec={title:[1,h.TYPES.STRING],listType:[2,h.TYPES.ENUM,ka],singleSelectReply:[3,h.TYPES.MESSAGE,kb],contextInfo:[4,h.TYPES.MESSAGE,V],description:[5,h.TYPES.STRING]};kb.internalSpec={selectedRowId:[1,h.TYPES.STRING]};lb.internalSpec={title:[1,h.TYPES.STRING],description:[2,h.TYPES.STRING],buttonText:[3,h.TYPES.STRING],listType:[4,h.TYPES.ENUM,la],sections:[5,h.FLAGS.REPEATED|h.TYPES.MESSAGE,qb],productListInfo:[6,h.TYPES.MESSAGE,mb],footerText:[7,h.TYPES.STRING],contextInfo:[8,h.TYPES.MESSAGE,V]};mb.internalSpec={productSections:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,ob],headerImage:[2,h.TYPES.MESSAGE,nb],businessOwnerJid:[3,h.TYPES.STRING]};nb.internalSpec={productId:[1,h.TYPES.STRING],jpegThumbnail:[2,h.TYPES.BYTES]};ob.internalSpec={title:[1,h.TYPES.STRING],products:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,pb]};pb.internalSpec={productId:[1,h.TYPES.STRING]};qb.internalSpec={title:[1,h.TYPES.STRING],rows:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,rb]};rb.internalSpec={title:[1,h.TYPES.STRING],description:[2,h.TYPES.STRING],rowId:[3,h.TYPES.STRING]};I.internalDefaults={messageVersion:1};I.internalSpec={orderId:[1,h.TYPES.STRING],thumbnail:[2,h.TYPES.BYTES],itemCount:[3,h.TYPES.INT32],status:[4,h.TYPES.ENUM,na],surface:[5,h.TYPES.ENUM,ma],message:[6,h.TYPES.STRING],orderTitle:[7,h.TYPES.STRING],sellerJid:[8,h.TYPES.STRING],token:[9,h.TYPES.STRING],totalAmount1000:[10,h.TYPES.INT64],totalCurrencyCode:[11,h.TYPES.STRING],contextInfo:[17,h.TYPES.MESSAGE,V],messageVersion:[12,h.TYPES.INT32],orderRequestMessageId:[13,h.TYPES.MESSAGE,i.MessageKeySpec]};J.internalSpec={product:[1,h.TYPES.MESSAGE,sb],businessOwnerJid:[2,h.TYPES.STRING],catalog:[4,h.TYPES.MESSAGE,tb],body:[5,h.TYPES.STRING],footer:[6,h.TYPES.STRING],contextInfo:[17,h.TYPES.MESSAGE,V]};sb.internalSpec={productImage:[1,h.TYPES.MESSAGE,T],productId:[2,h.TYPES.STRING],title:[3,h.TYPES.STRING],description:[4,h.TYPES.STRING],currencyCode:[5,h.TYPES.STRING],priceAmount1000:[6,h.TYPES.INT64],retailerId:[7,h.TYPES.STRING],url:[8,h.TYPES.STRING],productImageCount:[9,h.TYPES.UINT32],firstImageId:[11,h.TYPES.STRING],salePriceAmount1000:[12,h.TYPES.INT64]};tb.internalSpec={catalogImage:[1,h.TYPES.MESSAGE,T],title:[2,h.TYPES.STRING],description:[3,h.TYPES.STRING]};ub.internalSpec={selectedId:[1,h.TYPES.STRING],selectedDisplayText:[2,h.TYPES.STRING],contextInfo:[3,h.TYPES.MESSAGE,V],selectedIndex:[4,h.TYPES.UINT32],selectedCarouselCardIndex:[5,h.TYPES.UINT32]};K.internalSpec={fourRowTemplate:[1,h.TYPES.MESSAGE,vb],hydratedFourRowTemplate:[2,h.TYPES.MESSAGE,L],interactiveMessageTemplate:[5,h.TYPES.MESSAGE,D],contextInfo:[3,h.TYPES.MESSAGE,V],hydratedTemplate:[4,h.TYPES.MESSAGE,L],templateId:[9,h.TYPES.STRING],__oneofs__:{format:["fourRowTemplate","hydratedFourRowTemplate","interactiveMessageTemplate"]}};L.internalSpec={documentMessage:[1,h.TYPES.MESSAGE,Q],hydratedTitleText:[2,h.TYPES.STRING],imageMessage:[3,h.TYPES.MESSAGE,T],videoMessage:[4,h.TYPES.MESSAGE,P],locationMessage:[5,h.TYPES.MESSAGE,R],hydratedContentText:[6,h.TYPES.STRING],hydratedFooterText:[7,h.TYPES.STRING],hydratedButtons:[8,h.FLAGS.REPEATED|h.TYPES.MESSAGE,yc],templateId:[9,h.TYPES.STRING],maskLinkedDevices:[10,h.TYPES.BOOL],__oneofs__:{title:["documentMessage","hydratedTitleText","imageMessage","videoMessage","locationMessage"]}};vb.internalSpec={documentMessage:[1,h.TYPES.MESSAGE,Q],highlyStructuredMessage:[2,h.TYPES.MESSAGE,N],imageMessage:[3,h.TYPES.MESSAGE,T],videoMessage:[4,h.TYPES.MESSAGE,P],locationMessage:[5,h.TYPES.MESSAGE,R],content:[6,h.TYPES.MESSAGE,N],footer:[7,h.TYPES.MESSAGE,N],buttons:[8,h.FLAGS.REPEATED|h.TYPES.MESSAGE,uc],__oneofs__:{title:["documentMessage","highlyStructuredMessage","imageMessage","videoMessage","locationMessage"]}};M.internalSpec={url:[1,h.TYPES.STRING],fileSha256:[2,h.TYPES.BYTES],fileEncSha256:[3,h.TYPES.BYTES],mediaKey:[4,h.TYPES.BYTES],mimetype:[5,h.TYPES.STRING],height:[6,h.TYPES.UINT32],width:[7,h.TYPES.UINT32],directPath:[8,h.TYPES.STRING],fileLength:[9,h.TYPES.UINT64],mediaKeyTimestamp:[10,h.TYPES.INT64],firstFrameLength:[11,h.TYPES.UINT32],firstFrameSidecar:[12,h.TYPES.BYTES],isAnimated:[13,h.TYPES.BOOL],pngThumbnail:[16,h.TYPES.BYTES],contextInfo:[17,h.TYPES.MESSAGE,V],stickerSentTs:[18,h.TYPES.INT64],isAvatar:[19,h.TYPES.BOOL],isAiSticker:[20,h.TYPES.BOOL],isLottie:[21,h.TYPES.BOOL]};wb.internalSpec={degreesLatitude:[1,h.TYPES.DOUBLE],degreesLongitude:[2,h.TYPES.DOUBLE],accuracyInMeters:[3,h.TYPES.UINT32],speedInMps:[4,h.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[5,h.TYPES.UINT32],caption:[6,h.TYPES.STRING],sequenceNumber:[7,h.TYPES.INT64],timeOffset:[8,h.TYPES.UINT32],jpegThumbnail:[16,h.TYPES.BYTES],contextInfo:[17,h.TYPES.MESSAGE,V]};xb.internalSpec={serviceType:[1,h.TYPES.ENUM,oa],expiryTimestamp:[2,h.TYPES.INT64]};yb.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec]};zb.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec]};Ab.internalSpec={noteMessage:[4,h.TYPES.MESSAGE,m],currencyCodeIso4217:[1,h.TYPES.STRING],amount1000:[2,h.TYPES.UINT64],requestFrom:[3,h.TYPES.STRING],expiryTimestamp:[5,h.TYPES.INT64],amount:[6,h.TYPES.MESSAGE,Cc],background:[7,h.TYPES.MESSAGE,Z]};Bb.internalSpec={noteMessage:[2,h.TYPES.MESSAGE,m],requestMessageKey:[3,h.TYPES.MESSAGE,i.MessageKeySpec],background:[4,h.TYPES.MESSAGE,Z]};N.internalSpec={namespace:[1,h.TYPES.STRING],elementName:[2,h.TYPES.STRING],params:[3,h.FLAGS.REPEATED|h.TYPES.STRING],fallbackLg:[4,h.TYPES.STRING],fallbackLc:[5,h.TYPES.STRING],localizableParams:[6,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Cb],deterministicLg:[7,h.TYPES.STRING],deterministicLc:[8,h.TYPES.STRING],hydratedHsm:[9,h.TYPES.MESSAGE,K]};Cb.internalSpec={"default":[1,h.TYPES.STRING],currency:[2,h.TYPES.MESSAGE,Gb],dateTime:[3,h.TYPES.MESSAGE,Db],__oneofs__:{paramOneof:["currency","dateTime"]}};Db.internalSpec={component:[1,h.TYPES.MESSAGE,Fb],unixEpoch:[2,h.TYPES.MESSAGE,Eb],__oneofs__:{datetimeOneof:["component","unixEpoch"]}};Eb.internalSpec={timestamp:[1,h.TYPES.INT64]};Fb.internalSpec={dayOfWeek:[1,h.TYPES.ENUM,qa],year:[2,h.TYPES.UINT32],month:[3,h.TYPES.UINT32],dayOfMonth:[4,h.TYPES.UINT32],hour:[5,h.TYPES.UINT32],minute:[6,h.TYPES.UINT32],calendar:[7,h.TYPES.ENUM,pa]};Gb.internalSpec={currencyCode:[1,h.TYPES.STRING],amount1000:[2,h.TYPES.INT64]};Hb.internalSpec={displayName:[1,h.TYPES.STRING],contacts:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,S],contextInfo:[17,h.TYPES.MESSAGE,V]};Ib.internalSpec={securityNotificationEnabled:[1,h.TYPES.BOOL]};Jb.internalSpec={peerDataOperationRequestType:[1,h.TYPES.ENUM,k],stanzaId:[2,h.TYPES.STRING],peerDataOperationResult:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Kb]};Kb.internalSpec={mediaUploadResult:[1,h.TYPES.ENUM,d("WAMmsRetry.pb").MediaRetryNotification$ResultType],stickerMessage:[2,h.TYPES.MESSAGE,M],linkPreviewResponse:[3,h.TYPES.MESSAGE,Mb],placeholderMessageResendResponse:[4,h.TYPES.MESSAGE,Lb]};Lb.internalSpec={webMessageInfoBytes:[1,h.TYPES.BYTES]};Mb.internalSpec={url:[1,h.TYPES.STRING],title:[2,h.TYPES.STRING],description:[3,h.TYPES.STRING],thumbData:[4,h.TYPES.BYTES],canonicalUrl:[5,h.TYPES.STRING],matchText:[6,h.TYPES.STRING],previewType:[7,h.TYPES.STRING],hqThumbnail:[8,h.TYPES.MESSAGE,Nb]};Nb.internalSpec={directPath:[1,h.TYPES.STRING],thumbHash:[2,h.TYPES.STRING],encThumbHash:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestampMs:[5,h.TYPES.INT64],thumbWidth:[6,h.TYPES.INT32],thumbHeight:[7,h.TYPES.INT32]};Ob.internalSpec={peerDataOperationRequestType:[1,h.TYPES.ENUM,k],requestStickerReupload:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Sb],requestUrlPreview:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Rb],historySyncOnDemandRequest:[4,h.TYPES.MESSAGE,Qb],placeholderMessageResendRequest:[5,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Pb]};Pb.internalSpec={messageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec]};Qb.internalSpec={chatJid:[1,h.TYPES.STRING],oldestMsgId:[2,h.TYPES.STRING],oldestMsgFromMe:[3,h.TYPES.BOOL],onDemandMsgCount:[4,h.TYPES.INT32],oldestMsgTimestampMs:[5,h.TYPES.INT64]};Rb.internalSpec={url:[1,h.TYPES.STRING],includeHqThumbnail:[2,h.TYPES.BOOL]};Sb.internalSpec={fileSha256:[1,h.TYPES.STRING]};Tb.internalSpec={collectionNames:[1,h.FLAGS.REPEATED|h.TYPES.STRING],timestamp:[2,h.TYPES.INT64]};Ub.internalSpec={keyIds:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,O]};Vb.internalSpec={keys:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Yb]};Wb.internalSpec={keyData:[1,h.TYPES.BYTES],fingerprint:[2,h.TYPES.MESSAGE,Xb],timestamp:[3,h.TYPES.INT64]};Xb.internalSpec={rawId:[1,h.TYPES.UINT32],currentIndex:[2,h.TYPES.UINT32],deviceIndexes:[3,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.UINT32]};O.internalSpec={keyId:[1,h.TYPES.BYTES]};Yb.internalSpec={keyId:[1,h.TYPES.MESSAGE,O],keyData:[2,h.TYPES.MESSAGE,Wb]};Zb.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileLength:[2,h.TYPES.UINT64],mediaKey:[3,h.TYPES.BYTES],fileEncSha256:[4,h.TYPES.BYTES],directPath:[5,h.TYPES.STRING],syncType:[6,h.TYPES.ENUM,ra],chunkOrder:[7,h.TYPES.UINT32],originalMessageId:[8,h.TYPES.STRING],progress:[9,h.TYPES.UINT32],oldestMsgInChunkTimestampSec:[10,h.TYPES.INT64],initialHistBootstrapInlinePayload:[11,h.TYPES.BYTES],peerDataRequestSessionId:[12,h.TYPES.STRING]};$b.internalSpec={localChatState:[1,h.TYPES.ENUM,sa]};ac.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],type:[2,h.TYPES.ENUM,ta],ephemeralExpiration:[4,h.TYPES.UINT32],ephemeralSettingTimestamp:[5,h.TYPES.INT64],historySyncNotification:[6,h.TYPES.MESSAGE,Zb],appStateSyncKeyShare:[7,h.TYPES.MESSAGE,Vb],appStateSyncKeyRequest:[8,h.TYPES.MESSAGE,Ub],initialSecurityNotificationSettingSync:[9,h.TYPES.MESSAGE,Ib],appStateFatalExceptionNotification:[10,h.TYPES.MESSAGE,Tb],disappearingMode:[11,h.TYPES.MESSAGE,$],editedMessage:[14,h.TYPES.MESSAGE,m],timestampMs:[15,h.TYPES.INT64],peerDataOperationRequestMessage:[16,h.TYPES.MESSAGE,Ob],peerDataOperationRequestResponseMessage:[17,h.TYPES.MESSAGE,Jb],botFeedbackMessage:[18,h.TYPES.MESSAGE,bc],invokerJid:[19,h.TYPES.STRING],requestWelcomeMessageMetadata:[20,h.TYPES.MESSAGE,$b],mediaNotifyMessage:[21,h.TYPES.MESSAGE,Hc]};bc.internalSpec={messageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],kind:[2,h.TYPES.ENUM,wa],text:[3,h.TYPES.STRING],kindNegative:[4,h.TYPES.UINT64],kindPositive:[5,h.TYPES.UINT64]};cc.internalSpec={displayName:[1,h.TYPES.STRING],id:[2,h.TYPES.STRING]};dc.internalSpec={callKey:[1,h.TYPES.BYTES],conversionSource:[2,h.TYPES.STRING],conversionData:[3,h.TYPES.BYTES],conversionDelaySeconds:[4,h.TYPES.UINT32]};P.internalSpec={url:[1,h.TYPES.STRING],mimetype:[2,h.TYPES.STRING],fileSha256:[3,h.TYPES.BYTES],fileLength:[4,h.TYPES.UINT64],seconds:[5,h.TYPES.UINT32],mediaKey:[6,h.TYPES.BYTES],caption:[7,h.TYPES.STRING],gifPlayback:[8,h.TYPES.BOOL],height:[9,h.TYPES.UINT32],width:[10,h.TYPES.UINT32],fileEncSha256:[11,h.TYPES.BYTES],interactiveAnnotations:[12,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Y],directPath:[13,h.TYPES.STRING],mediaKeyTimestamp:[14,h.TYPES.INT64],jpegThumbnail:[16,h.TYPES.BYTES],contextInfo:[17,h.TYPES.MESSAGE,V],streamingSidecar:[18,h.TYPES.BYTES],gifAttribution:[19,h.TYPES.ENUM,xa],viewOnce:[20,h.TYPES.BOOL],thumbnailDirectPath:[21,h.TYPES.STRING],thumbnailSha256:[22,h.TYPES.BYTES],thumbnailEncSha256:[23,h.TYPES.BYTES],staticUrl:[24,h.TYPES.STRING],annotations:[25,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Y]};ec.internalSpec={url:[1,h.TYPES.STRING],mimetype:[2,h.TYPES.STRING],fileSha256:[3,h.TYPES.BYTES],fileLength:[4,h.TYPES.UINT64],seconds:[5,h.TYPES.UINT32],ptt:[6,h.TYPES.BOOL],mediaKey:[7,h.TYPES.BYTES],fileEncSha256:[8,h.TYPES.BYTES],directPath:[9,h.TYPES.STRING],mediaKeyTimestamp:[10,h.TYPES.INT64],contextInfo:[17,h.TYPES.MESSAGE,V],streamingSidecar:[18,h.TYPES.BYTES],waveform:[19,h.TYPES.BYTES],backgroundArgb:[20,h.TYPES.FIXED32],viewOnce:[21,h.TYPES.BOOL]};Q.internalSpec={url:[1,h.TYPES.STRING],mimetype:[2,h.TYPES.STRING],title:[3,h.TYPES.STRING],fileSha256:[4,h.TYPES.BYTES],fileLength:[5,h.TYPES.UINT64],pageCount:[6,h.TYPES.UINT32],mediaKey:[7,h.TYPES.BYTES],fileName:[8,h.TYPES.STRING],fileEncSha256:[9,h.TYPES.BYTES],directPath:[10,h.TYPES.STRING],mediaKeyTimestamp:[11,h.TYPES.INT64],contactVcard:[12,h.TYPES.BOOL],thumbnailDirectPath:[13,h.TYPES.STRING],thumbnailSha256:[14,h.TYPES.BYTES],thumbnailEncSha256:[15,h.TYPES.BYTES],jpegThumbnail:[16,h.TYPES.BYTES],contextInfo:[17,h.TYPES.MESSAGE,V],thumbnailHeight:[18,h.TYPES.UINT32],thumbnailWidth:[19,h.TYPES.UINT32],caption:[20,h.TYPES.STRING]};fc.internalSpec={text:[1,h.TYPES.STRING],matchedText:[2,h.TYPES.STRING],canonicalUrl:[4,h.TYPES.STRING],description:[5,h.TYPES.STRING],title:[6,h.TYPES.STRING],textArgb:[7,h.TYPES.FIXED32],backgroundArgb:[8,h.TYPES.FIXED32],font:[9,h.TYPES.ENUM,za],previewType:[10,h.TYPES.ENUM,ya],jpegThumbnail:[16,h.TYPES.BYTES],contextInfo:[17,h.TYPES.MESSAGE,V],doNotPlayInline:[18,h.TYPES.BOOL],thumbnailDirectPath:[19,h.TYPES.STRING],thumbnailSha256:[20,h.TYPES.BYTES],thumbnailEncSha256:[21,h.TYPES.BYTES],mediaKey:[22,h.TYPES.BYTES],mediaKeyTimestamp:[23,h.TYPES.INT64],thumbnailHeight:[24,h.TYPES.UINT32],thumbnailWidth:[25,h.TYPES.UINT32],inviteLinkGroupType:[26,h.TYPES.ENUM,l],inviteLinkParentGroupSubjectV2:[27,h.TYPES.STRING],inviteLinkParentGroupThumbnailV2:[28,h.TYPES.BYTES],inviteLinkGroupTypeV2:[29,h.TYPES.ENUM,l],viewOnce:[30,h.TYPES.BOOL]};R.internalSpec={degreesLatitude:[1,h.TYPES.DOUBLE],degreesLongitude:[2,h.TYPES.DOUBLE],name:[3,h.TYPES.STRING],address:[4,h.TYPES.STRING],url:[5,h.TYPES.STRING],isLive:[6,h.TYPES.BOOL],accuracyInMeters:[7,h.TYPES.UINT32],speedInMps:[8,h.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[9,h.TYPES.UINT32],comment:[11,h.TYPES.STRING],jpegThumbnail:[16,h.TYPES.BYTES],contextInfo:[17,h.TYPES.MESSAGE,V]};S.internalSpec={displayName:[1,h.TYPES.STRING],vcard:[16,h.TYPES.STRING],contextInfo:[17,h.TYPES.MESSAGE,V]};gc.internalSpec={note:[1,h.TYPES.STRING],token:[2,h.TYPES.STRING],attachmentType:[3,h.TYPES.ENUM,Aa],attachmentMimetype:[4,h.TYPES.STRING],attachmentMediaKey:[5,h.TYPES.BYTES],attachmentMediaKeyTimestamp:[6,h.TYPES.INT64],attachmentFileSha256:[7,h.TYPES.BYTES],attachmentFileEncSha256:[8,h.TYPES.BYTES],attachmentDirectPath:[9,h.TYPES.STRING],attachmentJpegThumbnail:[10,h.TYPES.BYTES]};T.internalSpec={url:[1,h.TYPES.STRING],mimetype:[2,h.TYPES.STRING],caption:[3,h.TYPES.STRING],fileSha256:[4,h.TYPES.BYTES],fileLength:[5,h.TYPES.UINT64],height:[6,h.TYPES.UINT32],width:[7,h.TYPES.UINT32],mediaKey:[8,h.TYPES.BYTES],fileEncSha256:[9,h.TYPES.BYTES],interactiveAnnotations:[10,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Y],directPath:[11,h.TYPES.STRING],mediaKeyTimestamp:[12,h.TYPES.INT64],jpegThumbnail:[16,h.TYPES.BYTES],contextInfo:[17,h.TYPES.MESSAGE,V],firstScanSidecar:[18,h.TYPES.BYTES],firstScanLength:[19,h.TYPES.UINT32],experimentGroupId:[20,h.TYPES.UINT32],scansSidecar:[21,h.TYPES.BYTES],scanLengths:[22,h.FLAGS.REPEATED|h.TYPES.UINT32],midQualityFileSha256:[23,h.TYPES.BYTES],midQualityFileEncSha256:[24,h.TYPES.BYTES],viewOnce:[25,h.TYPES.BOOL],thumbnailDirectPath:[26,h.TYPES.STRING],thumbnailSha256:[27,h.TYPES.BYTES],thumbnailEncSha256:[28,h.TYPES.BYTES],staticUrl:[29,h.TYPES.STRING],annotations:[30,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Y],imageSourceType:[31,h.TYPES.ENUM,Ba]};U.internalSpec={groupId:[1,h.TYPES.STRING],axolotlSenderKeyDistributionMessage:[2,h.TYPES.BYTES]};V.internalSpec={stanzaId:[1,h.TYPES.STRING],participant:[2,h.TYPES.STRING],quotedMessage:[3,h.TYPES.MESSAGE,m],remoteJid:[4,h.TYPES.STRING],mentionedJid:[15,h.FLAGS.REPEATED|h.TYPES.STRING],conversionSource:[18,h.TYPES.STRING],conversionData:[19,h.TYPES.BYTES],conversionDelaySeconds:[20,h.TYPES.UINT32],forwardingScore:[21,h.TYPES.UINT32],isForwarded:[22,h.TYPES.BOOL],quotedAd:[23,h.TYPES.MESSAGE,kc],placeholderKey:[24,h.TYPES.MESSAGE,i.MessageKeySpec],expiration:[25,h.TYPES.UINT32],ephemeralSettingTimestamp:[26,h.TYPES.INT64],ephemeralSharedSecret:[27,h.TYPES.BYTES],externalAdReply:[28,h.TYPES.MESSAGE,jc],entryPointConversionSource:[29,h.TYPES.STRING],entryPointConversionApp:[30,h.TYPES.STRING],entryPointConversionDelaySeconds:[31,h.TYPES.UINT32],disappearingMode:[32,h.TYPES.MESSAGE,$],actionLink:[33,h.TYPES.MESSAGE,Ec],groupSubject:[34,h.TYPES.STRING],parentGroupJid:[35,h.TYPES.STRING],trustBannerType:[37,h.TYPES.STRING],trustBannerAction:[38,h.TYPES.UINT32],isSampled:[39,h.TYPES.BOOL],groupMentions:[40,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Fc],utm:[41,h.TYPES.MESSAGE,ic],forwardedNewsletterMessageInfo:[43,h.TYPES.MESSAGE,W],businessMessageForwardInfo:[44,h.TYPES.MESSAGE,lc],smbClientCampaignId:[45,h.TYPES.STRING],smbServerCampaignId:[46,h.TYPES.STRING],dataSharingContext:[47,h.TYPES.MESSAGE,hc],alwaysShowAdAttribution:[48,h.TYPES.BOOL]};hc.internalSpec={showMmDisclosure:[1,h.TYPES.BOOL]};W.internalSpec={newsletterJid:[1,h.TYPES.STRING],serverMessageId:[2,h.TYPES.INT32],newsletterName:[3,h.TYPES.STRING],contentType:[4,h.TYPES.ENUM,Ca],accessibilityText:[5,h.TYPES.STRING]};ic.internalSpec={utmSource:[1,h.TYPES.STRING],utmCampaign:[2,h.TYPES.STRING]};jc.internalSpec={title:[1,h.TYPES.STRING],body:[2,h.TYPES.STRING],mediaType:[3,h.TYPES.ENUM,Da],thumbnailUrl:[4,h.TYPES.STRING],mediaUrl:[5,h.TYPES.STRING],thumbnail:[6,h.TYPES.BYTES],sourceType:[7,h.TYPES.STRING],sourceId:[8,h.TYPES.STRING],sourceUrl:[9,h.TYPES.STRING],containsAutoReply:[10,h.TYPES.BOOL],renderLargerThumbnail:[11,h.TYPES.BOOL],showAdAttribution:[12,h.TYPES.BOOL],ctwaClid:[13,h.TYPES.STRING],ref:[14,h.TYPES.STRING]};kc.internalSpec={advertiserName:[1,h.TYPES.STRING],mediaType:[2,h.TYPES.ENUM,Ea],jpegThumbnail:[16,h.TYPES.BYTES],caption:[17,h.TYPES.STRING]};lc.internalSpec={businessOwnerJid:[1,h.TYPES.STRING]};mc.internalSpec={sentiment:[1,h.TYPES.UINT32],behaviorGraph:[2,h.TYPES.STRING],action:[3,h.TYPES.UINT32],intensity:[4,h.TYPES.UINT32],wordCount:[5,h.TYPES.UINT32]};nc.internalSpec={provider:[1,h.TYPES.ENUM,Ga],pluginType:[2,h.TYPES.ENUM,Fa],thumbnailCdnUrl:[3,h.TYPES.STRING],profilePhotoCdnUrl:[4,h.TYPES.STRING],searchProviderUrl:[5,h.TYPES.STRING],referenceIndex:[6,h.TYPES.UINT32],expectedLinksCount:[7,h.TYPES.UINT32],searchQuery:[9,h.TYPES.STRING],parentPluginMessageKey:[10,h.TYPES.MESSAGE,i.MessageKeySpec]};oc.internalSpec={suggestedPrompts:[1,h.FLAGS.REPEATED|h.TYPES.STRING],selectedPromptIndex:[2,h.TYPES.UINT32]};pc.internalSpec={sessionId:[1,h.TYPES.STRING]};qc.internalSpec={avatarMetadata:[1,h.TYPES.MESSAGE,mc],personaId:[2,h.TYPES.STRING],pluginMetadata:[3,h.TYPES.MESSAGE,nc],suggestedPromptMetadata:[4,h.TYPES.MESSAGE,oc],invokerJid:[5,h.TYPES.STRING],searchMetadata:[6,h.TYPES.MESSAGE,pc]};rc.internalSpec={deviceListMetadata:[1,h.TYPES.MESSAGE,X],deviceListMetadataVersion:[2,h.TYPES.INT32],messageSecret:[3,h.TYPES.BYTES],paddingBytes:[4,h.TYPES.BYTES],messageAddOnDurationInSecs:[5,h.TYPES.UINT32],botMessageSecret:[6,h.TYPES.BYTES],botMetadata:[7,h.TYPES.MESSAGE,qc],reportingTokenVersion:[8,h.TYPES.INT32]};X.internalDefaults={senderAccountType:(i=d("WAAdv.pb")).ADVEncryptionType.E2EE,receiverAccountType:i.ADVEncryptionType.E2EE};X.internalSpec={senderKeyHash:[1,h.TYPES.BYTES],senderTimestamp:[2,h.TYPES.UINT64],senderKeyIndexes:[3,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.UINT32],senderAccountType:[4,h.TYPES.ENUM,i.ADVEncryptionType],receiverAccountType:[5,h.TYPES.ENUM,i.ADVEncryptionType],recipientKeyHash:[8,h.TYPES.BYTES],recipientTimestamp:[9,h.TYPES.UINT64],recipientKeyIndexes:[10,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.UINT32]};Y.internalSpec={polygonVertices:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,sc],location:[2,h.TYPES.MESSAGE,tc],newsletter:[3,h.TYPES.MESSAGE,W],shouldSkipConfirmation:[4,h.TYPES.BOOL],__oneofs__:{action:["location","newsletter"]}};sc.internalSpec={xDeprecated:[1,h.TYPES.INT32],yDeprecated:[2,h.TYPES.INT32],x:[3,h.TYPES.DOUBLE],y:[4,h.TYPES.DOUBLE]};tc.internalSpec={degreesLatitude:[1,h.TYPES.DOUBLE],degreesLongitude:[2,h.TYPES.DOUBLE],name:[3,h.TYPES.STRING]};uc.internalSpec={quickReplyButton:[1,h.TYPES.MESSAGE,xc],urlButton:[2,h.TYPES.MESSAGE,wc],callButton:[3,h.TYPES.MESSAGE,vc],index:[4,h.TYPES.UINT32],__oneofs__:{button:["quickReplyButton","urlButton","callButton"]}};vc.internalSpec={displayText:[1,h.TYPES.MESSAGE,N],phoneNumber:[2,h.TYPES.MESSAGE,N]};wc.internalSpec={displayText:[1,h.TYPES.MESSAGE,N],url:[2,h.TYPES.MESSAGE,N]};xc.internalSpec={displayText:[1,h.TYPES.MESSAGE,N],id:[2,h.TYPES.STRING]};yc.internalSpec={quickReplyButton:[1,h.TYPES.MESSAGE,Bc],urlButton:[2,h.TYPES.MESSAGE,Ac],callButton:[3,h.TYPES.MESSAGE,zc],index:[4,h.TYPES.UINT32],__oneofs__:{hydratedButton:["quickReplyButton","urlButton","callButton"]}};zc.internalSpec={displayText:[1,h.TYPES.STRING],phoneNumber:[2,h.TYPES.STRING]};Ac.internalSpec={displayText:[1,h.TYPES.STRING],url:[2,h.TYPES.STRING],consentedUsersUrl:[3,h.TYPES.STRING],webviewPresentation:[4,h.TYPES.ENUM,Ha]};Bc.internalSpec={displayText:[1,h.TYPES.STRING],id:[2,h.TYPES.STRING]};Cc.internalSpec={value:[1,h.TYPES.INT64],offset:[2,h.TYPES.UINT32],currencyCode:[3,h.TYPES.STRING]};Z.internalSpec={id:[1,h.TYPES.STRING],fileLength:[2,h.TYPES.UINT64],width:[3,h.TYPES.UINT32],height:[4,h.TYPES.UINT32],mimetype:[5,h.TYPES.STRING],placeholderArgb:[6,h.TYPES.FIXED32],textArgb:[7,h.TYPES.FIXED32],subtextArgb:[8,h.TYPES.FIXED32],mediaData:[9,h.TYPES.MESSAGE,Dc],type:[10,h.TYPES.ENUM,Ia]};Dc.internalSpec={mediaKey:[1,h.TYPES.BYTES],mediaKeyTimestamp:[2,h.TYPES.INT64],fileSha256:[3,h.TYPES.BYTES],fileEncSha256:[4,h.TYPES.BYTES],directPath:[5,h.TYPES.STRING]};$.internalSpec={initiator:[1,h.TYPES.ENUM,Ka],trigger:[2,h.TYPES.ENUM,Ja],initiatorDeviceJid:[3,h.TYPES.STRING],initiatedByMe:[4,h.TYPES.BOOL]};Ec.internalSpec={url:[1,h.TYPES.STRING],buttonTitle:[2,h.TYPES.STRING]};Fc.internalSpec={groupJid:[1,h.TYPES.STRING],groupSubject:[2,h.TYPES.STRING]};Gc.internalSpec={version:[1,h.TYPES.SFIXED32],encIv:[2,h.TYPES.BYTES],encPayload:[3,h.TYPES.BYTES]};Hc.internalSpec={expressPathUrl:[1,h.TYPES.STRING],fileEncSha256:[2,h.TYPES.BYTES],fileLength:[3,h.TYPES.UINT64]};g.Message$PlaceholderMessage$PlaceholderType=c;g.Message$BCallMessage$MediaType=e;g.Message$CallLogMessage$CallOutcome=f;g.Message$CallLogMessage$CallType=b;g.Message$ScheduledCallEditMessage$EditType=aa;g.Message$ScheduledCallCreationMessage$CallType=ba;g.Message$EventResponseMessage$EventResponseType=ca;g.Message$PinInChatMessage$Type=da;g.Message$ButtonsResponseMessage$Type=ea;g.Message$ButtonsMessage$Button$Type=fa;g.Message$ButtonsMessage$HeaderType=ga;g.Message$SecretEncryptedMessage$SecretEncType=ha;g.Message$GroupInviteMessage$GroupType=ia;g.Message$InteractiveResponseMessage$Body$Format=j;g.Message$InteractiveMessage$ShopMessage$Surface=ja;g.Message$ListResponseMessage$ListType=ka;g.Message$ListMessage$ListType=la;g.Message$OrderMessage$OrderSurface=ma;g.Message$OrderMessage$OrderStatus=na;g.Message$PaymentInviteMessage$ServiceType=oa;g.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeComponent$CalendarType=pa;g.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeComponent$DayOfWeekType=qa;g.Message$PeerDataOperationRequestType=k;g.Message$HistorySyncNotification$HistorySyncType=ra;g.Message$RequestWelcomeMessageMetadata$LocalChatState=sa;g.Message$ProtocolMessage$Type=ta;g.Message$BotFeedbackMessage$BotFeedbackKindMultiplePositive=ua;g.Message$BotFeedbackMessage$BotFeedbackKindMultipleNegative=va;g.Message$BotFeedbackMessage$BotFeedbackKind=wa;g.Message$VideoMessage$Attribution=xa;g.Message$ExtendedTextMessage$InviteLinkGroupType=l;g.Message$ExtendedTextMessage$PreviewType=ya;g.Message$ExtendedTextMessage$FontType=za;g.Message$InvoiceMessage$AttachmentType=Aa;g.Message$ImageMessage$ImageSourceType=Ba;g.ContextInfo$ForwardedNewsletterMessageInfo$ContentType=Ca;g.ContextInfo$ExternalAdReplyInfo$MediaType=Da;g.ContextInfo$AdReplyInfo$MediaType=Ea;g.BotPluginMetadata$PluginType=Fa;g.BotPluginMetadata$SearchProvider=Ga;g.HydratedTemplateButton$HydratedURLButton$WebviewPresentationType=Ha;g.PaymentBackground$Type=Ia;g.DisappearingMode$Trigger=Ja;g.DisappearingMode$Initiator=Ka;g.KeepType=a;g.MessageSpec=m;g.Message$PlaceholderMessageSpec=n;g.Message$BCallMessageSpec=o;g.Message$MessageHistoryBundleSpec=p;g.Message$CallLogMessageSpec=q;g.Message$CallLogMessage$CallParticipantSpec=r;g.Message$ScheduledCallEditMessageSpec=s;g.Message$ScheduledCallCreationMessageSpec=t;g.Message$EventResponseMessageSpec=La;g.Message$EncEventResponseMessageSpec=u;g.Message$EventMessageSpec=v;g.Message$CommentMessageSpec=w;g.Message$EncCommentMessageSpec=x;g.Message$EncReactionMessageSpec=y;g.Message$PinInChatMessageSpec=Ma;g.Message$KeepInChatMessageSpec=Na;g.Message$PollVoteMessageSpec=Oa;g.Message$PollEncValueSpec=Pa;g.Message$PollUpdateMessageMetadataSpec=Qa;g.Message$PollUpdateMessageSpec=Ra;g.Message$PollCreationMessageSpec=z;g.Message$PollCreationMessage$OptionSpec=Sa;g.Message$StickerSyncRMRMessageSpec=Ta;g.Message$ReactionMessageSpec=Ua;g.Message$ButtonsResponseMessageSpec=Va;g.Message$ButtonsMessageSpec=Wa;g.Message$ButtonsMessage$ButtonSpec=Xa;g.Message$ButtonsMessage$Button$NativeFlowInfoSpec=Ya;g.Message$ButtonsMessage$Button$ButtonTextSpec=Za;g.Message$SecretEncryptedMessageSpec=$a;g.Message$FutureProofMessageSpec=A;g.Message$DeviceSentMessageSpec=ab;g.Message$RequestPhoneNumberMessageSpec=bb;g.Message$NewsletterAdminInviteMessageSpec=cb;g.Message$GroupInviteMessageSpec=db;g.Message$InteractiveResponseMessageSpec=eb;g.Message$InteractiveResponseMessage$NativeFlowResponseMessageSpec=B;g.Message$InteractiveResponseMessage$BodySpec=C;g.Message$InteractiveMessageSpec=D;g.Message$InteractiveMessage$CarouselMessageSpec=E;g.Message$InteractiveMessage$NativeFlowMessageSpec=F;g.Message$InteractiveMessage$NativeFlowMessage$NativeFlowButtonSpec=fb;g.Message$InteractiveMessage$CollectionMessageSpec=G;g.Message$InteractiveMessage$ShopMessageSpec=H;g.Message$InteractiveMessage$FooterSpec=gb;g.Message$InteractiveMessage$BodySpec=hb;g.Message$InteractiveMessage$HeaderSpec=ib;g.Message$ListResponseMessageSpec=jb;g.Message$ListResponseMessage$SingleSelectReplySpec=kb;g.Message$ListMessageSpec=lb;g.Message$ListMessage$ProductListInfoSpec=mb;g.Message$ListMessage$ProductListHeaderImageSpec=nb;g.Message$ListMessage$ProductSectionSpec=ob;g.Message$ListMessage$ProductSpec=pb;g.Message$ListMessage$SectionSpec=qb;g.Message$ListMessage$RowSpec=rb;g.Message$OrderMessageSpec=I;g.Message$ProductMessageSpec=J;g.Message$ProductMessage$ProductSnapshotSpec=sb;g.Message$ProductMessage$CatalogSnapshotSpec=tb;g.Message$TemplateButtonReplyMessageSpec=ub;g.Message$TemplateMessageSpec=K;g.Message$TemplateMessage$HydratedFourRowTemplateSpec=L;g.Message$TemplateMessage$FourRowTemplateSpec=vb;g.Message$StickerMessageSpec=M;g.Message$LiveLocationMessageSpec=wb;g.Message$PaymentInviteMessageSpec=xb;g.Message$CancelPaymentRequestMessageSpec=yb;g.Message$DeclinePaymentRequestMessageSpec=zb;g.Message$RequestPaymentMessageSpec=Ab;g.Message$SendPaymentMessageSpec=Bb;g.Message$HighlyStructuredMessageSpec=N;g.Message$HighlyStructuredMessage$HSMLocalizableParameterSpec=Cb;g.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTimeSpec=Db;g.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeUnixEpochSpec=Eb;g.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeComponentSpec=Fb;g.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMCurrencySpec=Gb;g.Message$ContactsArrayMessageSpec=Hb;g.Message$InitialSecurityNotificationSettingSyncSpec=Ib;g.Message$PeerDataOperationRequestResponseMessageSpec=Jb;g.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResultSpec=Kb;g.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResult$PlaceholderMessageResendResponseSpec=Lb;g.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResult$LinkPreviewResponseSpec=Mb;g.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResult$LinkPreviewResponse$LinkPreviewHighQualityThumbnailSpec=Nb;g.Message$PeerDataOperationRequestMessageSpec=Ob;g.Message$PeerDataOperationRequestMessage$PlaceholderMessageResendRequestSpec=Pb;g.Message$PeerDataOperationRequestMessage$HistorySyncOnDemandRequestSpec=Qb;g.Message$PeerDataOperationRequestMessage$RequestUrlPreviewSpec=Rb;g.Message$PeerDataOperationRequestMessage$RequestStickerReuploadSpec=Sb;g.Message$AppStateFatalExceptionNotificationSpec=Tb;g.Message$AppStateSyncKeyRequestSpec=Ub;g.Message$AppStateSyncKeyShareSpec=Vb;g.Message$AppStateSyncKeyDataSpec=Wb;g.Message$AppStateSyncKeyFingerprintSpec=Xb;g.Message$AppStateSyncKeyIdSpec=O;g.Message$AppStateSyncKeySpec=Yb;g.Message$HistorySyncNotificationSpec=Zb;g.Message$RequestWelcomeMessageMetadataSpec=$b;g.Message$ProtocolMessageSpec=ac;g.Message$BotFeedbackMessageSpec=bc;g.Message$ChatSpec=cc;g.Message$CallSpec=dc;g.Message$VideoMessageSpec=P;g.Message$AudioMessageSpec=ec;g.Message$DocumentMessageSpec=Q;g.Message$ExtendedTextMessageSpec=fc;g.Message$LocationMessageSpec=R;g.Message$ContactMessageSpec=S;g.Message$InvoiceMessageSpec=gc;g.Message$ImageMessageSpec=T;g.Message$SenderKeyDistributionMessageSpec=U;g.ContextInfoSpec=V;g.ContextInfo$DataSharingContextSpec=hc;g.ContextInfo$ForwardedNewsletterMessageInfoSpec=W;g.ContextInfo$UTMInfoSpec=ic;g.ContextInfo$ExternalAdReplyInfoSpec=jc;g.ContextInfo$AdReplyInfoSpec=kc;g.ContextInfo$BusinessMessageForwardInfoSpec=lc;g.BotAvatarMetadataSpec=mc;g.BotPluginMetadataSpec=nc;g.BotSuggestedPromptMetadataSpec=oc;g.BotSearchMetadataSpec=pc;g.BotMetadataSpec=qc;g.MessageContextInfoSpec=rc;g.DeviceListMetadataSpec=X;g.InteractiveAnnotationSpec=Y;g.PointSpec=sc;g.LocationSpec=tc;g.TemplateButtonSpec=uc;g.TemplateButton$CallButtonSpec=vc;g.TemplateButton$URLButtonSpec=wc;g.TemplateButton$QuickReplyButtonSpec=xc;g.HydratedTemplateButtonSpec=yc;g.HydratedTemplateButton$HydratedCallButtonSpec=zc;g.HydratedTemplateButton$HydratedURLButtonSpec=Ac;g.HydratedTemplateButton$HydratedQuickReplyButtonSpec=Bc;g.MoneySpec=Cc;g.PaymentBackgroundSpec=Z;g.PaymentBackground$MediaDataSpec=Dc;g.DisappearingModeSpec=$;g.ActionLinkSpec=Ec;g.GroupMentionSpec=Fc;g.MessageSecretMessageSpec=Gc;g.MediaNotifyMessageSpec=Hc}),98);
__d("WAForceSecondRetryErrorTypes",[],(function(a,b,c,d,e,f){"use strict";a=new Set(["errSignalTooManyMessagesInFuture","errSignalGrpTooManyMessagesInFuture"]);f.FORCE_SECOND_RETRY_ON=a}),66);
__d("WAHandleGroupMessageProtocol",["Promise","WACryptoManagerUtils","WACryptoPkcs7","WAE2E.pb","WAForceSecondRetryErrorTypes","WAGlobals","WAJids","WALogger","WAReceiptUtils","WAResultOrError","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptGroupMessage error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Fail to save senderKeySession ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["missing sender key in dual enc message"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["enc version "," is not supported."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unknown message content type: ",""]);m=function(){return a};return a}function n(a){return a.name==="GroupDualEncMedia"?"ContentTypeMedia":a.value.contentDualMixins.name}function o(a){switch(a){case"ContentTypeText":return"text";case"ContentTypeLiveLocationSingle":return"live_location";case"ContentTypeMedia":return"media";case"ContentTypeMediaSingle":return"media";case"ContentTypePayGroup":return"pay";case"ContentTypeReaction":return"reaction";case"ContentTypeProductList":return"product_list";case"ContentTypePollCreation":return"poll_creation";case"ContentTypePollVote":return"poll_vote";case"ContentTypeScheduledCall":return"scheduled_call";default:a;d("WALogger").ERROR(m(),a);return"text"}}function a(a){var b=a.from,c=a.participant;a=a.groupDualOrSingleEncMixinGroup;var e=d("WAJids").extractUserJid(c);b={chat:b,author:e===d("WAGlobals").getMyUserJid()?"@me":e,from:c};switch(a.name){case"GroupSingleEnc":e=a.value;c=e.groupRetryOrBotResponseMessageOrGroupRegularMixinGroup;e=e.contentSingleMixins;return babelHelpers["extends"]({},b,{enc:p(c),contentType:o(e.name),type:"SingleEnc"});default:a.name;c=a.value.groupDualEncGroupDualEncMediaOrGroupDualEncNonMediaMediaMixinGroup;e=n(c);return babelHelpers["extends"]({},b,q(c),{type:"DualEnc",contentType:o(e)})}}function p(a){switch(a.name){case"GroupRetry":return{encVersion:a.value.encEncVersion2Or3OrFutureproofMixinGroup.value.v,ciphertext:a.value.encEncTypeIndividualMixin.elementValue,encType:a.value.encEncTypeIndividualMixin.type,retryCount:a.value.encEncRetryMixin.count};case"GroupRegular":a.name;return r(a.value.encEncVersion2Or3OrFutureproofMixinGroup.value,a.value.encEncTypeIndividualOrSenderKeyMixinGroup.value);default:a.name;return{ciphertext:a.value.encEncTypeMessageSecretMessageMixin.elementValue,encVersion:a.value.encEncVersion2OrFutureproofMixinGroup.value.v,encType:a.value.encEncTypeMessageSecretMessageMixin.type}}}function q(a){switch(a.name){case"GroupDualEncNonMedia":var b=a.value.enc,c=b[0];b=b[1];return{senderKeyDistributionEnc:r(c.encVersion2Or3OrFutureproofMixinGroup.value,c.encTypeSenderKeyOrIndividualMixinGroup.value),senderKeyMessageEnc:r(b.encVersion2Or3OrFutureproofMixinGroup.value,b.encTypeSenderKeyOrIndividualMixinGroup.value)};default:a.name;c=a.value.enc;b=c[0];a=c[1];return{senderKeyDistributionEnc:r(b.encVersion2Or3OrFutureproofMixinGroup.value,b.encTypeSenderKeyAndGroupMediaOrIndividualMixinGroup.value),senderKeyMessageEnc:r(a.encVersion2Or3OrFutureproofMixinGroup.value,a.encTypeSenderKeyAndGroupMediaOrIndividualMixinGroup.value)}}}function r(a,b){return{encVersion:a.v,ciphertext:b.elementValue,encType:b.type}}function c(a,b){return s(a,b)}function s(a,b){switch(a.type){case"DualEnc":var c=a.senderKeyDistributionEnc,e=a.senderKeyMessageEnc,f=a.from,g=a.chat,h=a.author;return t(c,f,g,b).then(function(a){if(!a.success)return a;if(c.encVersion!=="2"){d("WALogger").WARN(l(),c.encVersion);return d("WAResultOrError").makeError("unknown-sender-key-distribution-plaintext")}a=a.value.plaintext;a=d("WACryptoPkcs7").unpadPkcs7(a);a=d("decodeProtobuf").decodeProtobuf(d("WAE2E.pb").MessageSpec,a);a=(a=a.senderKeyDistributionMessage)==null?void 0:a.axolotlSenderKeyDistributionMessage;if(a==null){d("WALogger").ERROR(k());return d("WAResultOrError").makeError("group-decrypt-error")}return d("WACryptoManagerUtils").saveSenderKeySession(g,f,new Uint8Array(a),b).then(function(a){if(!a.success){d("WALogger").ERROR(j(),a.error);return d("WAResultOrError").makeError("group-decrypt-error")}return t(e,f,g,b)})}).then(function(a){return!a.success?{from:f,chat:g,author:h,retryCount:0,error:a.error,encVersion:e.encVersion,type:"Undecrypted"}:{from:f,chat:g,author:h,encVersion:e.encVersion,plaintext:a.value.plaintext,type:"Decrypted"}});default:a.type;var i=a.enc,m=a.from,n=a.chat,o=a.author;return t(i,m,n,b).then(function(a){if(!a.success){var b;return{from:m,chat:n,author:o,retryCount:(b=i.retryCount)!=null?b:0,error:a.error,encVersion:i.encVersion,type:"Undecrypted"}}return{from:m,chat:n,author:o,encVersion:i.encVersion,plaintext:a.value.plaintext,type:"Decrypted"}})}}function t(a,c,e,f){var g;a.encType==="msg"||a.encType==="pkmsg"?g=d("WACryptoManagerUtils").decryptMsg(a.encType,c,a.ciphertext,f):a.encType==="skmsg"?(a.encType,g=d("WACryptoManagerUtils").decryptGroupMsg(e,c,a.ciphertext,f)):(a.encType,g=(h||(h=b("Promise"))).resolve({}));return g.then(function(a){if(!a.success){d("WALogger").ERROR(i(),a.error);return d("WAResultOrError").makeError("group-decrypt-error")}return a.value==null?d("WAResultOrError").makeError("missing-content"):d("WAResultOrError").makeResult({plaintext:a.value.plaintext,remoteIdentity:a.value.remoteIdentity})})}e=function(a,b){var c=a.stanzaId,e=a.serverTs,f=a.retryCount,g=a.from,h=a.author,i=a.chat,j=a.deviceIdentity;a=a.error;h=h==="@me";var k=f;d("WAForceSecondRetryErrorTypes").FORCE_SECOND_RETRY_ON.has(a)&&(k=Math.max(2,f));return d("WAReceiptUtils").makeRetryReceipt({category:null,externalId:c,from:{groupJid:i,type:"group"},participant:g,recipient:h?d("WAJids").extractUserJid(g):null,retryCount:k,ts:e,deviceIdentity:j},b)};g.parseGroupMessage=a;g.decryptGroupMessage=c;g.makeGrouplMessageRetryReceipt=e}),98);
__d("WASendDeliveryReceiptProtocol",["Promise","WAComms","WAGlobals","WAJids","WASmaxOutReceiptPublishDeliveryRequest","WASmaxOutReceiptPublishSenderRequest"],(function(a,b,c,d,e,f,g){"use strict";var h;c=function(a){var c=a.stanzaId,e=a.author;a=a.from;if(!d("WAJids").isAuthorMe(e))return(h||(h=b("Promise"))).resolve(d("WAComms").castSmaxStanza(l({recipient:e,from:a,stanzaId:c})));else return(h||(h=b("Promise"))).resolve(d("WAComms").castSmaxStanza(m({recipient:d("WAGlobals").getMyUserJid(),stanzaId:c,recipientDevice:a})))};function i(a){var b=a.stanzaId,c=a.from;a=a.chat;var e=d("WAJids").extractUserJid(c);return d("WAJids").switchOnMsgrChatJidType(a,{group:function(a){return e===d("WAGlobals").getMyUserJid()?j({chat:a,from:c,stanzaId:b}):k({chat:a,from:c,stanzaId:b})},user:function(a){return e===d("WAGlobals").getMyUserJid()?m({recipient:e,recipientDevice:c,stanzaId:b}):l({recipient:e,from:c,stanzaId:b})}})}function a(a){d("WAComms").castSmaxStanza(i(a))}function j(a){var b=a.stanzaId,c=a.chat;a=a.from;c={publishSenderGroupDeviceSenderType:{receiptTo:c,receiptParticipant:a}};a={single:{receiptId:b}};b={publishSenderGroupOrPublishSenderIndividualOrPublishSenderStatusOrPublishSenderBroadcastDeviceSenderTypeMixinGroupArgs:c,senderAggregatedPublishOrSingleMixinGroupArgs:a};return d("WASmaxOutReceiptPublishSenderRequest").makePublishSenderRequest(b)}function k(a){var b=a.stanzaId,c=a.chat;a=a.from;c={device:{deviceMixinsArgs:{groupDevice:{receiptTo:c,receiptParticipant:a}}}};a={single:{receiptId:b}};b={senderAggregatedPublishOrSingleMixinGroupArgs:a,userOrDeviceOrInteropUserOrInteropDeviceMixinGroupArgs:c};return d("WASmaxOutReceiptPublishDeliveryRequest").makePublishDeliveryRequest(b)}function l(a){var b=a.stanzaId;a=a.from;a={device:{deviceMixinsArgs:{individualDevice:{receiptTo:a}}}};b={single:{receiptId:b}};b={senderAggregatedPublishOrSingleMixinGroupArgs:b,userOrDeviceOrInteropUserOrInteropDeviceMixinGroupArgs:a};return d("WASmaxOutReceiptPublishDeliveryRequest").makePublishDeliveryRequest(b)}function m(a){var b=a.recipientDevice,c=a.recipient;a=a.stanzaId;c={publishSenderIndividualDeviceSenderType:{receiptRecipient:c,receiptTo:b}};b={single:{receiptId:a}};a={publishSenderGroupOrPublishSenderIndividualOrPublishSenderStatusOrPublishSenderBroadcastDeviceSenderTypeMixinGroupArgs:c,senderAggregatedPublishOrSingleMixinGroupArgs:b};return d("WASmaxOutReceiptPublishSenderRequest").makePublishSenderRequest(a)}g.sendIndividualMessageDeliveryReceipt=c;g.makeDeliveryReceipt=i;g.sendDeliveryReceipt=a}),98);
__d("WACreateHandleGroupMessageBranch",["WAHandleGroupMessageProtocol","WAResultOrError","WASendDeliveryReceiptProtocol"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b){var c=b.groupMixin,e=b.commonMessageBase,f=b.makeAck;b=b.ctx;c=d("WAHandleGroupMessageProtocol").parseGroupMessage(c);return a(babelHelpers["extends"]({},e,{parsedMessage:c,makeAck:f,makeDeliveryReceipt:d("WASendDeliveryReceiptProtocol").makeDeliveryReceipt,makeRetryReceipt:d("WAHandleGroupMessageProtocol").makeGrouplMessageRetryReceipt}),b).then(d("WAResultOrError").makeResult)}}g.createHandleGroupMessageBranch=a}),98);
__d("WAHandleIndividualMessage",["WAReceiptUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b){var c=a.stanzaId,e=a.serverTs,f=a.retryCount,g=a.from,h=a.author,i=a.chat;a=a.deviceIdentity;h=h==="@me";return d("WAReceiptUtils").sendRetryReceipt({category:null,externalId:c,from:{deviceJid:g,type:"device"},participant:null,recipient:h?i:null,retryCount:f,ts:e,deviceIdentity:a},b)};g.sendIndividualMessageRetryReceipt=a}),98);
__d("WAParseProtocol",["WAAckLevel","WAAssertUnreachable","WAE2E.pb","WAErr","WAGlobals","WAHashUtils","WAHex","WAJids","WALogger","WALongInt","WAMedia","WAMediaUtils","WAMsgMap","WAMsgType","WASortedLists","WAStanzaUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["cannot compose mediaEntry with the media message"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["protobuf msg with too large size ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["protobuf msg with bad size ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["protobuf msg with no plaintext hash"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["received protocol message with unknown type ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["received unsupported protocol message with type ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["received invalid revoke key"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["received a non supported revoke"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received extendedTextMsg with no text content"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["There are no admin made reactions"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["We dont support this message type yet"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["interpretProto msg came with tags "," and ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received a quote of a type that is not yet supported: ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received quote invalid author ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received quote with missing data in the protobuf"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received quote from a type that us not supported ",""]);w=function(){return a};return a}var x={};function y(){return{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null}}function z(a){var b=a.unstoredMsg,c=a.unstoredMedia;c=c===void 0?null:c;a=a.unstoredQuotedMedia;a=a===void 0?null:a;if(b==null&&c==null)return y();else return{unstoredMsg:b,unstoredMedia:c,unstoredQuotedMedia:a}}function a(a){var b=F(a.proto);if(!b)return y();var e=C(a,b),f=A(a,b),g=f.quote;f=f.quotedMedia;switch(b.type){case"conversation":var h;h=babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.TEXT,msgContent:{content:b.value},quote:(h=g)!=null?h:void 0},e);return z({unstoredMsg:h,unstoredQuotedMedia:f});case"imageMessage":h=b.value;f=G(h,e.ts);h=babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.IMAGE,mediaId:f==null?void 0:f.plaintextHash,quote:(h=g)!=null?h:void 0},e);return z({unstoredMsg:h,unstoredMedia:f});case"videoMessage":h=b.value;f=H(h,e.ts);h=babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.VIDEO,mediaId:f==null?void 0:f.plaintextHash,quote:(h=g)!=null?h:void 0},e);return z({unstoredMsg:h,unstoredMedia:f});case"audioMessage":h=b.value;f=I(h,e.ts);h=babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.PTT,mediaId:f==null?void 0:f.plaintextHash},e);return z({unstoredMsg:h,unstoredMedia:f});case"documentMessage":h=b.value;f=N(h,e.ts);h=babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.DOCUMENT_FILE,mediaId:f==null?void 0:f.plaintextHash,quote:(h=g)!=null?h:void 0},e);return z({unstoredMsg:h,unstoredMedia:f});case"futureproof":h={type:d("WAMsgType").MSG_TYPE.FUTUREPROOF,msgContent:{protobuf:d("WAHex").bytesToBuffer(a.bytes),subtype:x[b.type]||null},id:e.id,ts:e.ts,sentTs:e.sentTs,serverTs:e.serverTs,ack:e.ack,reportingMeta:e.reportingMeta};return z({unstoredMsg:h});case"reactionMessage":f=b.value;a=J(f,e);return z({unstoredMsg:a});case"protocolMessage":h=M(b.value,e);return z({unstoredMsg:h});case"extendedTextMessage":return K(b.value,e,g);default:return c("WAAssertUnreachable")(b.type)}}function A(a,b){b=D(b);var c=b==null?void 0:b.quotedMessage;if(b==null||c==null)return{quote:null,quotedMedia:null};var e=F(c);if(e==null){d("WALogger").ERROR(w(),c);return{quote:null,quotedMedia:null}}c=b.stanzaId;b=b.participant;if(c==null||b==null){d("WALogger").ERROR(v());return{quote:null,quotedMedia:null}}b=b?d("WAJids").validateUserJid(b):d("WAJids").interpretAsUserJid(a.jid);if(b==null){d("WALogger").ERROR(u(),b);return{quote:null,quotedMedia:null}}c={externalId:d("WAStanzaUtils").toStanzaId(c),ts:null,author:b,serverTs:a.ts};switch(e.type){case"conversation":b=babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.TEXT,msgContent:{content:e.value}},c);return{quote:{content:b,remoteJid:null},quotedMedia:null};case"imageMessage":b=e.value;b=G(b,a.ts);a=babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.IMAGE,mediaId:b==null?void 0:b.plaintextHash},c);return{quote:{content:a,remoteJid:null},quotedMedia:b};default:d("WALogger").ERROR(t(),e.type);return{quote:null,quotedMedia:null}}}var B=["conversation","imageMessage","videoMessage","audioMessage","reactionMessage","protocolMessage","extendedTextMessage","documentMessage"];function C(a,b){var c=D(b);return{id:{externalId:a.externalId,author:a.author,chat:a.jid},ts:a.ts,ack:d("WAAckLevel").ACK.RECEIVED,serverTs:a.ts,forwardingScore:E(b,c)}}function D(a){switch(a.type){case"imageMessage":case"videoMessage":case"extendedTextMessage":case"audioMessage":case"documentMessage":return a.value.contextInfo;default:a.type;return null}}function E(a,b){if(a.type==="futureproof")return 0;return(b==null?void 0:b.forwardingScore)!=null?b==null?void 0:b.forwardingScore:(b==null?void 0:b.isForwarded)===!0?1:0}function F(a){var b=null;for(var e=0;e<B.length;e++)if(a[B[e]]!=null){if(b){d("WALogger").ERROR(s(),b,B[e]);return null}b=B[e]}if(b==null){d("WALogger").ERROR(r()).devConsole(a);return{type:"futureproof"}}switch(b){case"audioMessage":return a.audioMessage!=null?{type:"audioMessage",value:a.audioMessage}:null;case"videoMessage":return a.videoMessage!=null?{type:"videoMessage",value:a.videoMessage}:null;case"imageMessage":return a.imageMessage!=null?{type:"imageMessage",value:a.imageMessage}:null;case"documentMessage":return a.documentMessage!=null?{type:"documentMessage",value:a.documentMessage}:null;case"conversation":return a.conversation!=null?{type:"conversation",value:a.conversation}:null;case"protocolMessage":return a.protocolMessage!=null?{type:"protocolMessage",value:a.protocolMessage}:null;case"extendedTextMessage":return a.extendedTextMessage!=null?{type:"extendedTextMessage",value:a.extendedTextMessage}:null;case"reactionMessage":return a.reactionMessage!=null?{type:"reactionMessage",value:a.reactionMessage}:null;default:c("WAAssertUnreachable")(b)}}function G(a,b){var c=P(a,"image");if(!c)return null;c=O(c,b);return babelHelpers["extends"]({},c,{mediaType:d("WAMedia").IMAGE,validatedVideoInfo:null,validatedImageInfo:{width:a.width,height:a.height,jpegThumbnail:a.jpegThumbnail},validatedAudioInfo:null,validatedDocumentFileInfo:null})}function H(a,b){var c=P(a,"video");if(!c)return null;c=O(c,b);return babelHelpers["extends"]({},c,{mediaType:d("WAMedia").VIDEO,validatedVideoInfo:{duration:a.seconds!=null&&a.seconds>1?a.seconds:1,width:a.width,height:a.height,mimetype:a.mimetype,jpegThumbnail:a.jpegThumbnail},validatedImageInfo:null,validatedAudioInfo:null,validatedDocumentFileInfo:null})}function I(a,b){var c=P(a,"ptt");if(!c)return null;c=O(c,b);return babelHelpers["extends"]({},c,{mediaType:d("WAMedia").PTT,validatedVideoInfo:null,validatedImageInfo:null,validatedAudioInfo:{duration:a.seconds!=null&&a.seconds>1?a.seconds:1,mimetype:a.mimetype,played:!1},validatedDocumentFileInfo:null})}function J(a,b){var c;c=(c=a.key)==null?void 0:c.id;var e=b.id.author;if(d("WAJids").isAuthorSystem(e)){d("WALogger").ERROR(q());return null}return c==null?null:{type:d("WAMsgType").MSG_TYPE.REACTION,reactToAuthor:e,reaction:a.text,reactToExternalId:d("WAStanzaUtils").toStanzaId(c),groupingKey:a.groupingKey,id:b.id,ts:b.ts,ack:d("WAAckLevel").ACK.RECEIVED,serverTs:b.ts,senderTimestampMs:a.senderTimestampMs}}function K(a,b,c){var e=a.text;if(e==null){d("WALogger").ERROR(p());return y()}a=L((a=a.contextInfo)==null?void 0:a.mentionedJid,e);e=babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.TEXT,msgContent:{content:e,mentionedJids:(e=a)!=null?e:void 0},quote:(a=c)!=null?a:void 0},b);return z({unstoredMsg:e})}function L(a,b){b=b;if(a==null||b==null)return null;var c=[];for(var e=0;e<a.length;e++){var f=d("WAJids").interpretAndValidateJid(a[e]);f.jidType==="phoneUser"&&b.includes("@"+d("WAJids").phoneNumberFromJid(f.userJid))&&c.push(f.userJid)}return c.length?d("WASortedLists").sortAndDedupe(c):void 0}function M(a,b){var e=b.id.author,f=a.type;if(d("WAJids").isAuthorSystem(e))throw c("WAErr")("There are no admin made reactions");else if(f==null)throw c("WAErr")("Received invalid protocol message with no type");switch(f){case d("WAE2E.pb").Message$ProtocolMessage$Type.REVOKE:a=a.key;var g=b.id.chat;if(a&&(a.remoteJid===d("WAGlobals").getMyUserJid()?e===g:a.remoteJid===g)&&a.id!=null){e=a.fromMe;g=a.id;e=(e=e)!=null?e:!1;if(e)return{id:b.id,ts:b.ts,sentTs:b.sentTs,serverTs:b.serverTs,ack:b.ack,reportingMeta:b.reportingMeta,type:d("WAMsgType").MSG_TYPE.REVOKED,revokedExternalId:d("WAStanzaUtils").toStanzaId(g),unsendMsgContentDeleteTs:null,msgContent:null,ebTimestampMs:null};else{d("WALogger").ERROR(o());return null}}else{d("WALogger").ERROR(n()).devConsole(a,b);return null}case d("WAE2E.pb").Message$ProtocolMessage$Type.EPHEMERAL_SETTING:case d("WAE2E.pb").Message$ProtocolMessage$Type.EPHEMERAL_SYNC_RESPONSE:case d("WAE2E.pb").Message$ProtocolMessage$Type.APP_STATE_SYNC_KEY_REQUEST:d("WALogger").ERROR(m(),f);return null;default:d("WALogger").ERROR(l(),f);return null}}function N(a,b){var c=P(a,"document");if(!c)return null;c=O(c,b);return babelHelpers["extends"]({},c,{mediaType:d("WAMedia").DOCUMENT_FILE,validatedVideoInfo:null,validatedImageInfo:null,validatedAudioInfo:null,validatedDocumentFileInfo:{filename:a.fileName,mimetype:a.mimetype}})}function O(a,b){return{mediaEntry:a.mediaEntry,plaintextHash:a.plaintextHash,size:a.size,msgIds:[],mediaEntries:new(d("WAMsgMap").MsgMap)(),ts:b}}function P(a,b){var c=a.fileSha256;if(!c){d("WALogger").ERROR(k());return null}var e=a.fileLength;if(e==null||e===0){d("WALogger").ERROR(j(),e);return null}try{e=d("WALongInt").numberOrThrowIfTooLarge(e)}catch(a){d("WALogger").ERROR(i(),e);return null}if(a.fileSha256==null||a.fileEncSha256==null||a.mediaKey==null||a.directPath==null||a.mediaKeyTimestamp==null){d("WALogger").ERROR(h());return null}a=d("WAMediaUtils").rawDataToMediaEntry({fileSha256:a.fileSha256,fileEncSha256:a.fileEncSha256,mediaKey:a.mediaKey,directPath:a.directPath,mediaKeyTimestamp:d("WATimeUtils").castLongIntToUnixTime(a.mediaKeyTimestamp),size:e,serverMediaType:b});return{size:e,plaintextHash:d("WAHashUtils").toPlaintextHash(new Uint8Array(c)),mediaEntry:a}}g.FUTUREPROOF_TYPES=x;g.parseProtocol=a;g.interpretMsg=F}),98);
__d("WATransformRetryOrIndividualRegularMixinGroup",[],(function(a,b,c,d,e,f){"use strict";function a(a){return{retryCount:a.name==="Retry"?a.value.encEncRetryMixin.count:0,ciphertext:a.value.encEncTypeIndividualMixin.elementValue,encVersion:String(a.value.encEncVersion2Or3OrFutureproofMixinGroup.value.v),encType:a.value.encEncTypeIndividualMixin.type}}f.transformRetryOrIndividualRegularMixinGroup=a}),66);
__d("WAHandleIndividualMessageProtocol",["WACryptoPkcs7","WADecodeIncomingMsg","WAE2E.pb","WAErr","WAJids","WALogger","WAParseProtocol","WAParseV3Protocol","WAResultOrError","WATransformRetryOrIndividualRegularMixinGroup","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["enc version "," is not supported."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unknown message content type: ",""]);i=function(){return a};return a}var j=d("WAParseV3Protocol").createV3ProtocolParser();function k(a){switch(a){case"ContentTypeText":return"text";case"ContentTypeLiveLocationSingle":return"live_location";case"ContentTypeMedia":return"media";case"ContentTypeMedianotify":case"ContentTypeMediaSingle":return"media";case"ContentTypePayIndividual":return"pay";case"ContentTypeReaction":return"reaction";case"ContentTypeList":return"product_list";case"ContentTypePollCreation":return"poll_creation";case"ContentTypePollVote":return"poll_vote";default:a;d("WALogger").ERROR(i(),a);return"text"}}function a(a){var b=a.from,e=a.recipientMixin;a=a.availableOrUnavailableMixinGroup;var f=d("WAJids").extractUserJid(b),g=e==null?f:e.recipient;f=e==null?f:"@me";if(a.name==="Unavailable")return{type:"Unavailable",author:f,chat:g,from:b,recipient:e==null?void 0:e.recipient,contentType:k(a.value.contentUnavailableMixins.name)};var h=a.value.retryOrIndividualRegularOrBotResponseMessageMixinGroup;if(h.name==="BotResponseMessage")throw c("WAErr")("BotResponseMessage is unsupported");return babelHelpers["extends"]({type:"Available",author:f,chat:g,from:b,recipient:e==null?void 0:e.recipient},d("WATransformRetryOrIndividualRegularMixinGroup").transformRetryOrIndividualRegularMixinGroup(h),{contentType:k(a.value.contentAvailableMixins.name)})}b=function(a){a=a.decryptedMessage;var b=a.plaintext,c=a.encVersion,e=a.author,f=a.chat,g=a.stanzaId;a=a.serverTs;if(c!=="2"&&c!=="3"){d("WALogger").WARN(h(),c);return d("WAResultOrError").makeError("unknown-plaintext")}var i=null;if(c==="2"){var k,l=d("WACryptoPkcs7").unpadPkcs7(b);l=d("decodeProtobuf").decodeProtobuf(d("WAE2E.pb").MessageSpec,l);if(l.deviceSentMessage!=null&&l.deviceSentMessage.destinationJid!==f)return d("WAResultOrError").makeError("invalid-device-sent-message");k=(k=l.deviceSentMessage)==null?void 0:k.message;k!=null&&(l=k);k={author:e,bytes:b,externalId:g,jid:f,proto:l,ts:a};i=d("WAParseProtocol").parseProtocol(k)}else{c;l=e==="@me"?f:null;k=d("WADecodeIncomingMsg").decodeIncomingMsg(b,"v3",l);if(k.version!=="v3"||k.type!=="subprotocol")return d("WAResultOrError").makeError("unknown-plaintext");i=j(k,f,g,e,a)}return d("WAResultOrError").makeResult(i)};g.parseIndividualMessage=a;g.decodeIndividualMessage=b}),98);
__d("WACreateHandleIndividualMessageBranch",["WAForceSecondRetryErrorTypes","WAHandleIndividualMessage","WAHandleIndividualMessageProtocol","WAReceiptUtils","WAResultOrError","WASendDeliveryReceiptProtocol","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["starting..."]);h=function(){return a};return a}var i=d("WATagsLogger").TAGS(["handleIndividualMessageBranch"]);function a(a){return function(b){var c=b.individualMixin,e=b.commonMessageBase,f=b.makeAck;b=b.ctx;i.DEV(h());c=d("WAHandleIndividualMessageProtocol").parseIndividualMessage(c);return a(babelHelpers["extends"]({},e,{parsedMessage:c,makeAck:f,sendRetryReceipt:d("WAHandleIndividualMessage").sendIndividualMessageRetryReceipt,sendDeliveryReceipt:d("WASendDeliveryReceiptProtocol").sendIndividualMessageDeliveryReceipt,makeDeliveryReceipt:d("WASendDeliveryReceiptProtocol").makeDeliveryReceipt,makeRetryReceipt:j,decodeMessage:d("WAHandleIndividualMessageProtocol").decodeIndividualMessage}),b).then(d("WAResultOrError").makeResult)}}var j=function(a,b){var c=a.stanzaId,e=a.serverTs,f=a.retryCount,g=a.from,h=a.author,i=a.chat,j=a.deviceIdentity;a=a.error;h=h==="@me";var k=f;d("WAForceSecondRetryErrorTypes").FORCE_SECOND_RETRY_ON.has(a)&&(k=Math.max(2,f));return d("WAReceiptUtils").makeRetryReceipt({category:null,externalId:c,from:{deviceJid:g,type:"device"},participant:null,recipient:h?i:null,retryCount:k,ts:e,deviceIdentity:j},b)};g.createHandleIndividualMessageBranch=a;g.makeIndividualMessageRetryReceipt=j}),98);
__d("WASmaxInReceiptEnums",["WAJids"],(function(a,b,c,d,e,f,g){a={0:"0",1:"1",7:"7"};b={1002:"1002",1007:"1007",1008:"1008"};c={all:"all",none:"none"};e={"body-link":"body-link","cta-call":"cta-call","cta-url":"cta-url","media-doc":"media-doc","media-image":"media-image","media-video":"media-video","quick-reply":"quick-reply"};f={"cancellation-failed":"cancellation-failed","invalid-transition":"invalid-transition"};var h={CBP:"CBP",NBP:"NBP"},i={content:"content",title:"title"},j={delivery:"delivery",no_optimization:"no_optimization"},k={deliver:"deliver",delivery:"delivery"},l={"false":"false","true":"true"},m={"hsm-envelope-mismatch":"hsm-envelope-mismatch","structure-unavailable":"structure-unavailable"},n={validators:[(d=d("WAJids")).validateBroadcastJid,d.validateGroupJid],typeName:"BroadcastJid|GroupJid"},o={validators:[d.validateBroadcastJid,d.validateGroupJid,d.validateNewsletterJid,d.validateStatusJid],typeName:"BroadcastJid|GroupJid|NewsletterJid|StatusJid"},p={validators:[d.validateDeviceJid,d.validateBroadcastJid,d.validateDeviceJid,d.validateGroupJid],typeName:"DeviceJid|BroadcastJid|DeviceJid|GroupJid"},q={validators:[d.validateDeviceJid,d.validateBroadcastJid,d.validateDeviceJid,d.validateGroupJid,d.validateNewsletterJid,d.validateStatusJid],typeName:"DeviceJid|BroadcastJid|DeviceJid|GroupJid|NewsletterJid|StatusJid"},r={validators:[d.validateDeviceJid,d.validateDeviceJid],typeName:"DeviceJid|DeviceJid"};d={validators:[d.validateDeviceJid,d.validateUserJid,d.validateDeviceJid],typeName:"DeviceJid|UserJid|DeviceJid"};g.ENUM_0_1_7=a;g.ENUM_1002_1007_1008=b;g.ENUM_ALL_NONE=c;g.ENUM_BODYLINK_CTACALL_CTAURL_MEDIADOC_MEDIAIMAGE_MEDIAVIDEO_QUICKREPLY=e;g.ENUM_CANCELLATIONFAILED_INVALIDTRANSITION=f;g.ENUM_CBP_NBP=h;g.ENUM_CONTENT_TITLE=i;g.ENUM_DELIVERY_NOOPTIMIZATION=j;g.ENUM_DELIVER_DELIVERY=k;g.ENUM_FALSE_TRUE=l;g.ENUM_HSMENVELOPEMISMATCH_STRUCTUREUNAVAILABLE=m;g.BROADCASTJID_GROUPJID=n;g.BROADCASTJID_GROUPJID_NEWSLETTERJID_STATUSJID=o;g.DEVICEJID_BROADCASTJID_DEVICEJID_GROUPJID=p;g.DEVICEJID_BROADCASTJID_DEVICEJID_GROUPJID_NEWSLETTERJID_STATUSJID=q;g.DEVICEJID_DEVICEJID=r;g.DEVICEJID_USERJID_DEVICEJID=d}),98);
__d("WASmaxInReceiptDeprecatedEditMixin",["WAResultOrError","WASmaxInReceiptEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrStringEnum(a,"edit",d("WASmaxInReceiptEnums").ENUM_0_1_7);return!a.success?a:d("WAResultOrError").makeResult({edit:a.value})}g.parseDeprecatedEditMixin=a}),98);
__d("WASmaxInReceiptPublishSuccessMixin",["WAResultOrError","WASmaxInReceiptDeprecatedEditMixin","WASmaxInReceiptEnums","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"ack");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"class","receipt");if(!c.success)return c;var e=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",e.value);if(!e.success)return e;e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"t",0,void 0);if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"readreceipts",d("WASmaxInReceiptEnums").ENUM_ALL_NONE);if(!f.success)return f;b=d("WASmaxParseReference").attrStringFromReference(b,["type"]);if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type",b.value);if(!b.success)return b;b=d("WASmaxInReceiptDeprecatedEditMixin").parseDeprecatedEditMixin(a);return d("WAResultOrError").makeResult({"class":c.value,t:e.value,readreceipts:f.value,deprecatedEditMixin:b.success?b.value:null})}g.parsePublishSuccessMixin=a}),98);
__d("WASmaxInReceiptPublishPeerDeliveryResponseSuccess",["WASmaxInReceiptPublishSuccessMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"ack");if(!c.success)return c;c=d("WASmaxInReceiptPublishSuccessMixin").parsePublishSuccessMixin(a,b);return!c.success?c:c}g.parsePublishPeerDeliveryResponseSuccess=a}),98);
__d("WASmaxOutReceiptPeerMessageTypeMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("receipt",{type:"peer_msg"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePeerMessageTypeMixin=a}),98);
__d("WASmaxOutReceiptPublishPeerDeliveryRequest",["WASmaxJsx","WASmaxOutReceiptIndividualDeviceMixin","WASmaxOutReceiptPeerMessageTypeMixin","WASmaxOutReceiptSingleMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutReceiptPeerMessageTypeMixin").mergePeerMessageTypeMixin(d("WASmaxOutReceiptSingleMixin").mergeSingleMixin(d("WASmaxOutReceiptIndividualDeviceMixin").mergeIndividualDeviceMixin(d("WASmaxJsx").smax("receipt",null),a),a));return a}g.makePublishPeerDeliveryRequest=a}),98);
__d("WASmaxReceiptPublishPeerDeliveryRPC",["WAComms","WASmaxInReceiptPublishPeerDeliveryResponseSuccess","WASmaxOutReceiptPublishPeerDeliveryRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:e=d("WASmaxOutReceiptPublishPeerDeliveryRequest").makePublishPeerDeliveryRequest(a);h.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=h.sent;g=d("WASmaxInReceiptPublishPeerDeliveryResponseSuccess").parsePublishPeerDeliveryResponseSuccess(f,e);if(!g.success){h.next=7;break}return h.abrupt("return",{name:"PublishPeerDeliveryResponseSuccess",value:g.value});case 7:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("PublishPeerDelivery",{Success:g}));case 8:case"end":return h.stop()}},null,this)}g.sendPublishPeerDeliveryRPC=a}),98);
__d("WASmaxInReceiptPublishPeerReadResponseSuccess",["WASmaxInReceiptPublishSuccessMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"ack");if(!c.success)return c;c=d("WASmaxInReceiptPublishSuccessMixin").parsePublishSuccessMixin(a,b);return!c.success?c:c}g.parsePublishPeerReadResponseSuccess=a}),98);
__d("WASmaxOutReceiptHistorySyncTypeMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("receipt",{type:"hist_sync"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeHistorySyncTypeMixin=a}),98);
__d("WASmaxOutReceiptPublishPeerReadRequest",["WASmaxJsx","WASmaxOutReceiptHistorySyncTypeMixin","WASmaxOutReceiptIndividualDeviceMixin","WASmaxOutReceiptSingleMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutReceiptHistorySyncTypeMixin").mergeHistorySyncTypeMixin(d("WASmaxOutReceiptSingleMixin").mergeSingleMixin(d("WASmaxOutReceiptIndividualDeviceMixin").mergeIndividualDeviceMixin(d("WASmaxJsx").smax("receipt",null),a),a));return a}g.makePublishPeerReadRequest=a}),98);
__d("WASmaxReceiptPublishPeerReadRPC",["WAComms","WASmaxInReceiptPublishPeerReadResponseSuccess","WASmaxOutReceiptPublishPeerReadRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:e=d("WASmaxOutReceiptPublishPeerReadRequest").makePublishPeerReadRequest(a);h.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=h.sent;g=d("WASmaxInReceiptPublishPeerReadResponseSuccess").parsePublishPeerReadResponseSuccess(f,e);if(!g.success){h.next=7;break}return h.abrupt("return",{name:"PublishPeerReadResponseSuccess",value:g.value});case 7:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("PublishPeerRead",{Success:g}));case 8:case"end":return h.stop()}},null,this)}g.sendPublishPeerReadRPC=a}),98);
__d("WAHandlePeerMessageProtocol",["WACryptoManagerUtils","WACryptoPkcs7","WAE2E.pb","WALogger","WAReceiptUtils","WAResultOrError","WASmaxReceiptPublishPeerDeliveryRPC","WASmaxReceiptPublishPeerReadRPC","WATransformRetryOrIndividualRegularMixinGroup","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["decodePeerMessage: no protocolMessage."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["decodePeerMessage: enc version "," is not supported."]);i=function(){return a};return a}function a(a){var b=a.from;a=a.retryOrIndividualRegularMixinGroup;return babelHelpers["extends"]({from:b},d("WATransformRetryOrIndividualRegularMixinGroup").transformRetryOrIndividualRegularMixinGroup(a))}function b(a,b){var c=a.from,e=a.ciphertext,f=a.encType,g=a.encVersion;return d("WACryptoManagerUtils").decryptMsg(f,c,e,b).then(function(a){if(!a.success)return a;return a.value==null?d("WAResultOrError").makeError("missing-content"):d("WAResultOrError").makeResult({encVersion:g,plaintext:a.value.plaintext,remoteIdentity:a.value.remoteIdentity})})}function c(a){a=a.decryptedMessage;var b=a.plaintext;a=a.encVersion;if(a!=="2"){d("WALogger").WARN(i(),a);return d("WAResultOrError").makeError("unknown-plaintext")}a=d("WACryptoPkcs7").unpadPkcs7(b);b=d("decodeProtobuf").decodeProtobuf(d("WAE2E.pb").MessageSpec,a);if(b.protocolMessage==null){d("WALogger").WARN(h());return d("WAResultOrError").makeError("missing-protocol-message")}return d("WAResultOrError").makeResult(b.protocolMessage)}function e(a){var b=a.stanzaId;a=a.to;return d("WASmaxReceiptPublishPeerDeliveryRPC").sendPublishPeerDeliveryRPC({receiptId:b,receiptTo:a}).then(function(){})}function f(a){var b=a.stanzaId;a=a.to;return d("WASmaxReceiptPublishPeerReadRPC").sendPublishPeerReadRPC({receiptId:b,receiptTo:a}).then(function(){})}function j(a,b){var c=a.stanzaId,e=a.serverTs,f=a.retryCount,g=a.from;a=a.deviceIdentity;return d("WAReceiptUtils").sendRetryReceipt({category:"peer",externalId:c,from:{deviceJid:g,type:"device"},participant:null,recipient:null,retryCount:f,ts:e,deviceIdentity:a},b)}g.parsePeerMessage=a;g.decryptPeerMessage=b;g.decodePeerMessage=c;g.sendPeerMessageReceipt=e;g.sendHistorySyncReceipt=f;g.sendPeerMessageRetryReceipt=j}),98);
__d("WASmaxInMessageDeliverAppdataMetaAttributeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,b.value,"appdata","default");return!a.success?a:d("WAResultOrError").makeResult({metaAppdata:a.value})}g.parseAppdataMetaAttributeMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypeTextMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","text");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseContentTypeTextMixin=a}),98);
__d("WASmaxInMessageDeliverDeviceIdentityMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"device-identity");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytes(a.value);return!a.success?a:d("WAResultOrError").makeResult({deviceIdentityElementValue:a.value})}g.parseDeviceIdentityMixin=a}),98);
__d("WASmaxInMessageDeliverEnums",["WAJids"],(function(a,b,c,d,e,f,g){a={0:"0",1:"1"};b={1:"1",2:"2"};c={1:"1",3:"3"};e={ACCEPT:"ACCEPT",REJECT:"REJECT",UNKNOWN:"UNKNOWN"};f={address_message:"address_message",call_permission_request:"call_permission_request",form_message:"form_message",galaxy_message:"galaxy_message",menu_options:"menu_options"};var h={address_message:"address_message",galaxy_message:"galaxy_message"},i={allowlist:"allowlist",contacts:"contacts",denylist:"denylist"},j={allow:"allow",bypass:"bypass",deny:"deny",error:"error"},k={ASPRESENTED:"ASPRESENTED",BIMONTHLY:"BIMONTHLY",DAILY:"DAILY",FORTNIGHTLY:"FORTNIGHTLY",HALFYEARLY:"HALFYEARLY",MONTHLY:"MONTHLY",ONETIME:"ONETIME",QUARTERLY:"QUARTERLY",UNKNOWN:"UNKNOWN",WEEKLY:"WEEKLY",YEARLY:"YEARLY"},l={audio:"audio",avatar_sticker:"avatar_sticker",buttons_response:"buttons_response",cataloglink:"cataloglink",contact:"contact",contact_array:"contact_array",document:"document",genai_sticker:"genai_sticker",gif:"gif",history:"history",image:"image",list_response:"list_response",location:"location",native_flow_response:"native_flow_response",order:"order",product:"product",productlink:"productlink",ptt:"ptt",ptv:"ptv",sticker:"sticker",url:"url",vcard:"vcard",video:"video",xma:"xma"},m={audio:"audio",avatar_sticker:"avatar_sticker",buttons_response:"buttons_response",cataloglink:"cataloglink",contact:"contact",contact_array:"contact_array",document:"document",gif:"gif",history:"history",image:"image",list_response:"list_response",location:"location",native_flow_response:"native_flow_response",order:"order",product:"product",productlink:"productlink",ptt:"ptt",ptv:"ptv",sticker:"sticker",url:"url",vcard:"vcard",video:"video",xma:"xma"},n={audio:"audio",avatar_sticker:"avatar_sticker",cataloglink:"cataloglink",document:"document",genai_sticker:"genai_sticker",gif:"gif",image:"image",productlink:"productlink",ptt:"ptt",sticker:"sticker",url:"url",vcard:"vcard",video:"video"},o={buyer:"buyer",seller:"seller"},p={call_permission_request:"call_permission_request",catalog_message:"catalog_message",laneline_call:"laneline_call",menu_options:"menu_options",novi_complete_transaction:"novi_complete_transaction",novi_hub:"novi_hub",novi_login:"novi_login",novi_report_transaction:"novi_report_transaction",novi_view_bank_detail:"novi_view_bank_detail",novi_view_card_detail:"novi_view_card_detail",novi_view_code:"novi_view_code",novi_view_transaction:"novi_view_transaction",order_details:"order_details",order_status:"order_status",otp:"otp",payment_info:"payment_info",payment_method:"payment_method",payment_status:"payment_status",voice_call:"voice_call"},q={card:"card","net-banking":"net-banking",upi:"upi",wallet:"wallet"},r={creation:"creation",edit:"edit"},s={creation:"creation",edit:"edit",response:"response"},t={ctwa:"ctwa",username:"username"},u={EXACT:"EXACT",MAX:"MAX"},v={FAILURE:"FAILURE",INIT:"INIT",SUCCESS:"SUCCESS"},w={"false":"false","true":"true"},x={FBPAY:"FBPAY",NOVI:"NOVI",P2M_LITE:"P2M_LITE",UPI:"UPI"},y={first:"first",full:"full",inner:"inner",last:"last"},z={FULL:"FULL",MISSING_FIELD_NOT_PARTIAL:"MISSING_FIELD_NOT_PARTIAL",PARTIAL:"PARTIAL"},A={high:"high",high_force:"high_force",low:"low"},B={high:"high",low:"low",unknown:"unknown"},C={HPP_PAYMENT_LINK:"HPP_PAYMENT_LINK",UPI:"UPI"},D={incentive:"incentive",p2m:"p2m",p2p:"p2p",payout:"payout"},E={lid:"lid",pn:"pn"},F={matched:"matched",unmatched:"unmatched"},G={msg:"msg",pkmsg:"pkmsg"},H={request:"request",send:"send"},I={smb_mm:"smb_mm",smb_promo:"smb_promo"},J={validators:[(d=d("WAJids")).validateDeviceJid,d.validateBroadcastJid,d.validateDeviceJid,d.validateGroupJid,d.validateStatusJid],typeName:"DeviceJid|BroadcastJid|DeviceJid|GroupJid|StatusJid"},K={validators:[d.validateDeviceJid,d.validateDeviceJid],typeName:"DeviceJid|DeviceJid"},L={validators:[d.validateDeviceJid,d.validateDeviceJid,d.validateDeviceJid],typeName:"DeviceJid|DeviceJid|DeviceJid"};d={validators:[d.validateGroupJid,d.validateUserJid],typeName:"GroupJid|UserJid"};g.ENUM_0_1=a;g.ENUM_1_2=b;g.ENUM_1_3=c;g.ENUM_ACCEPT_REJECT_UNKNOWN=e;g.ENUM_ADDRESSMESSAGE_CALLPERMISSIONREQUEST_FORMMESSAGE_GALAXYMESSAGE_MENUOPTIONS=f;g.ENUM_ADDRESSMESSAGE_GALAXYMESSAGE=h;g.ENUM_ALLOWLIST_CONTACTS_DENYLIST=i;g.ENUM_ALLOW_BYPASS_DENY_ERROR=j;g.ENUM_ASPRESENTED_BIMONTHLY_DAILY_FORTNIGHTLY_HALFYEARLY_MONTHLY_ONETIME_QUARTERLY_UNKNOWN_WEEKLY_YEARLY=k;g.ENUM_AUDIO_AVATARSTICKER_BUTTONSRESPONSE_CATALOGLINK_CONTACT_CONTACTARRAY_DOCUMENT_GENAISTICKER_GIF_HISTORY_IMAGE_LISTRESPONSE_LOCATION_NATIVEFLOWRESPONSE_ORDER_PRODUCT_PRODUCTLINK_PTT_PTV_STICKER_URL_VCARD_VIDEO_XMA=l;g.ENUM_AUDIO_AVATARSTICKER_BUTTONSRESPONSE_CATALOGLINK_CONTACT_CONTACTARRAY_DOCUMENT_GIF_HISTORY_IMAGE_LISTRESPONSE_LOCATION_NATIVEFLOWRESPONSE_ORDER_PRODUCT_PRODUCTLINK_PTT_PTV_STICKER_URL_VCARD_VIDEO_XMA=m;g.ENUM_AUDIO_AVATARSTICKER_CATALOGLINK_DOCUMENT_GENAISTICKER_GIF_IMAGE_PRODUCTLINK_PTT_STICKER_URL_VCARD_VIDEO=n;g.ENUM_BUYER_SELLER=o;g.ENUM_CALLPERMISSIONREQUEST_CATALOGMESSAGE_LANELINECALL_MENUOPTIONS_NOVICOMPLETETRANSACTION_NOVIHUB_NOVILOGIN_NOVIREPORTTRANSACTION_NOVIVIEWBANKDETAIL_NOVIVIEWCARDDETAIL_NOVIVIEWCODE_NOVIVIEWTRANSACTION_ORDERDETAILS_ORDERSTATUS_OTP_PAYMENTINFO_PAYMENTMETHOD_PAYMENTSTATUS_VOICECALL=p;g.ENUM_CARD_NETBANKING_UPI_WALLET=q;g.ENUM_CREATION_EDIT=r;g.ENUM_CREATION_EDIT_RESPONSE=s;g.ENUM_CTWA_USERNAME=t;g.ENUM_EXACT_MAX=u;g.ENUM_FAILURE_INIT_SUCCESS=v;g.ENUM_FALSE_TRUE=w;g.ENUM_FBPAY_NOVI_P2MLITE_UPI=x;g.ENUM_FIRST_FULL_INNER_LAST=y;g.ENUM_FULL_MISSINGFIELDNOTPARTIAL_PARTIAL=z;g.ENUM_HIGH_HIGHFORCE_LOW=A;g.ENUM_HIGH_LOW_UNKNOWN=B;g.ENUM_HPPPAYMENTLINK_UPI=C;g.ENUM_INCENTIVE_P2M_P2P_PAYOUT=D;g.ENUM_LID_PN=E;g.ENUM_MATCHED_UNMATCHED=F;g.ENUM_MSG_PKMSG=G;g.ENUM_REQUEST_SEND=H;g.ENUM_SMBMM_SMBPROMO=I;g.DEVICEJID_BROADCASTJID_DEVICEJID_GROUPJID_STATUSJID=J;g.DEVICEJID_DEVICEJID=K;g.DEVICEJID_DEVICEJID_DEVICEJID=L;g.GROUPJID_USERJID=d}),98);
__d("WASmaxInMessageDeliverRegistrationIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"registration");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytesRange(a.value,4,4);return!a.success?a:d("WAResultOrError").makeResult({registrationElementValue:a.value})}g.parseRegistrationIDMixin=a}),98);
__d("WASmaxInMessageDeliverEncHideDecryptionPlaceholderMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"decrypt-fail","hide");return!b.success?b:d("WAResultOrError").makeResult({decryptFail:b.value})}g.parseEncHideDecryptionPlaceholderMixin=a}),98);
__d("WASmaxInMessageDeliverEncPayloadMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,1,2097152);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseEncPayloadMixin=a}),98);
__d("WASmaxInMessageDeliverEncTypeIndividualMixin",["WAResultOrError","WASmaxInMessageDeliverEncHideDecryptionPlaceholderMixin","WASmaxInMessageDeliverEncPayloadMixin","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"type",d("WASmaxInMessageDeliverEnums").ENUM_MSG_PKMSG);if(!b.success)return b;var c=d("WASmaxInMessageDeliverEncHideDecryptionPlaceholderMixin").parseEncHideDecryptionPlaceholderMixin(a);a=d("WASmaxInMessageDeliverEncPayloadMixin").parseEncPayloadMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({type:b.value,encHideDecryptionPlaceholderMixin:c.success?c.value:null},a.value))}g.parseEncTypeIndividualMixin=a}),98);
__d("WASmaxInMessageDeliverEncVersion2Mixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"v","2");return!b.success?b:d("WAResultOrError").makeResult({v:b.value})}g.parseEncVersion2Mixin=a}),98);
__d("WASmaxInMessageDeliverEncVersion3Mixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"v","3");return!b.success?b:d("WAResultOrError").makeResult({v:b.value})}g.parseEncVersion3Mixin=a}),98);
__d("WASmaxInMessageDeliverEncVersionFutureproofMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"v",3,void 0);return!b.success?b:d("WAResultOrError").makeResult({v:b.value})}g.parseEncVersionFutureproofMixin=a}),98);
__d("WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup",["WAResultOrError","WASmaxInMessageDeliverEncVersion2Mixin","WASmaxInMessageDeliverEncVersion3Mixin","WASmaxInMessageDeliverEncVersionFutureproofMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverEncVersion2Mixin").parseEncVersion2Mixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"EncVersion2",value:b.value});var c=d("WASmaxInMessageDeliverEncVersion3Mixin").parseEncVersion3Mixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"EncVersion3",value:c.value});var e=d("WASmaxInMessageDeliverEncVersionFutureproofMixin").parseEncVersionFutureproofMixin(a);return e.success?d("WAResultOrError").makeResult({name:"EncVersionFutureproof",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["EncVersion2","EncVersion3","EncVersionFutureproof"],[b,c,e])}g.parseEncVersion2Or3OrFutureproofMixinGroup=a}),98);
__d("WASmaxInMessageDeliverIndividualRegularMixin",["WAResultOrError","WASmaxInMessageDeliverEncTypeIndividualMixin","WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"enc");if(!b.success)return b;a=d("WASmaxInMessageDeliverEncTypeIndividualMixin").parseEncTypeIndividualMixin(b.value);if(!a.success)return a;b=d("WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup").parseEncVersion2Or3OrFutureproofMixinGroup(b.value);return!b.success?b:d("WAResultOrError").makeResult({encEncTypeIndividualMixin:a.value,encEncVersion2Or3OrFutureproofMixinGroup:b.value})}g.parseIndividualRegularMixin=a}),98);
__d("WASmaxInMessageDeliverEncRetryMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"count",1,4);return!b.success?b:d("WAResultOrError").makeResult({count:b.value})}g.parseEncRetryMixin=a}),98);
__d("WASmaxInMessageDeliverRetryMixin",["WAResultOrError","WASmaxInMessageDeliverEncRetryMixin","WASmaxInMessageDeliverEncTypeIndividualMixin","WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"enc");if(!b.success)return b;a=d("WASmaxInMessageDeliverEncRetryMixin").parseEncRetryMixin(b.value);if(!a.success)return a;var c=d("WASmaxInMessageDeliverEncTypeIndividualMixin").parseEncTypeIndividualMixin(b.value);if(!c.success)return c;b=d("WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup").parseEncVersion2Or3OrFutureproofMixinGroup(b.value);return!b.success?b:d("WAResultOrError").makeResult({encEncRetryMixin:a.value,encEncTypeIndividualMixin:c.value,encEncVersion2Or3OrFutureproofMixinGroup:b.value})}g.parseRetryMixin=a}),98);
__d("WASmaxInMessageDeliverRetryOrIndividualRegularMixinGroup",["WAResultOrError","WASmaxInMessageDeliverIndividualRegularMixin","WASmaxInMessageDeliverRetryMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverRetryMixin").parseRetryMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"Retry",value:b.value});var c=d("WASmaxInMessageDeliverIndividualRegularMixin").parseIndividualRegularMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IndividualRegular",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Retry","IndividualRegular"],[b,c])}g.parseRetryOrIndividualRegularMixinGroup=a}),98);
__d("WASmaxInMessageDeliverPeerRequest",["WAResultOrError","WASmaxInMessageDeliverAppdataMetaAttributeMixin","WASmaxInMessageDeliverContentTypeTextMixin","WASmaxInMessageDeliverDeviceIdentityMixin","WASmaxInMessageDeliverEnums","WASmaxInMessageDeliverRegistrationIDMixin","WASmaxInMessageDeliverRetryOrIndividualRegularMixinGroup","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"category","peer");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"push_priority",d("WASmaxInMessageDeliverEnums").ENUM_HIGH_HIGHFORCE_LOW);if(!e.success)return e;var f=d("WASmaxParseJid").attrDeviceJid(a,"from");if(!f.success)return f;var g=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!g.success)return g;var h=d("WASmaxInMessageDeliverContentTypeTextMixin").parseContentTypeTextMixin(a);if(!h.success)return h;var i=d("WASmaxInMessageDeliverRegistrationIDMixin").parseRegistrationIDMixin(a),j=d("WASmaxInMessageDeliverDeviceIdentityMixin").parseDeviceIdentityMixin(a),k=d("WASmaxInMessageDeliverAppdataMetaAttributeMixin").parseAppdataMetaAttributeMixin(a);a=d("WASmaxInMessageDeliverRetryOrIndividualRegularMixinGroup").parseRetryOrIndividualRegularMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({id:b.value,category:c.value,pushPriority:e.value,from:f.value,t:g.value},h.value,{registrationIDMixin:i.success?i.value:null,deviceIdentityMixin:j.success?j.value:null,appdataMetaAttributeMixin:k.success?k.value:null,retryOrIndividualRegularMixinGroup:a.value}))}g.parsePeerRequest=a}),98);
__d("WASmaxOutMessageDeliverPeerResponseSuccess",["WASmaxJsx","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrDeviceJid,a,["from"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{to:d("WAWap").DEVICE_JID(b.value),"class":"message",id:d("WAWap").STANZA_ID(c.value),type:d("WAWap").CUSTOM_STRING(a.value)});return b}g.makePeerResponseSuccess=a}),98);
__d("WASmaxMessageDeliverPeerRPC",["WASmaxInMessageDeliverPeerRequest","WASmaxOutMessageDeliverPeerResponseSuccess","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverPeerRequest").parsePeerRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Peer",{Request:b}));return{parsedRequest:b.value,makePeerResponseSuccess:function(){return d("WASmaxOutMessageDeliverPeerResponseSuccess").makePeerResponseSuccess(a)}}}g.receivePeerRPC=a}),98);
__d("WACreateHandlePeerMessageBranch",["Promise","WAHandlePeerMessageProtocol","WAResultOrError","WASmaxMessageDeliverPeerRPC","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c=a.peerMessage;return function(a,e){a=d("WASmaxMessageDeliverPeerRPC").receivePeerRPC(a);var f=a.makePeerResponseSuccess;a=a.parsedRequest;var g=a.id,i=a.from,j=a.retryOrIndividualRegularMixinGroup;a=a.t;if(c!=null){var k;return c.handlePeerMessage({from:i,parsedMessage:(k=d("WAHandlePeerMessageProtocol")).parsePeerMessage({from:i,retryOrIndividualRegularMixinGroup:j}),stanzaId:g,sendPeerMessageReceipt:k.sendPeerMessageReceipt,sendHistorySyncReceipt:k.sendHistorySyncReceipt,sendRetryReceipt:k.sendPeerMessageRetryReceipt,makeAck:f,decryptMessage:k.decryptPeerMessage,decodeMessage:k.decodePeerMessage,serverTs:d("WATimeUtils").castToUnixTime(a)},e).then(d("WAResultOrError").makeResult)}return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult(f()))}}g.createHandlePeerMessageBranch=a}),98);
__d("WASmaxInMessageDeliverAdminEditMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","3");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAdminEditMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypeMediaMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","media");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseContentTypeMediaMixin=a}),98);
__d("WASmaxInMessageDeliverPayloadMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"plaintext");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,1,1048576);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parsePayloadMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterMediaMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeMediaMixin","WASmaxInMessageDeliverEnums","WASmaxInMessageDeliverPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"plaintext");if(!b.success)return b;var c=d("WASmaxParseUtils").attrStringEnum(b.value,"mediatype",d("WASmaxInMessageDeliverEnums").ENUM_AUDIO_AVATARSTICKER_CATALOGLINK_DOCUMENT_GENAISTICKER_GIF_IMAGE_PRODUCTLINK_PTT_STICKER_URL_VCARD_VIDEO);if(!c.success)return c;b=d("WASmaxInMessageDeliverPayloadMixin").parsePayloadMixin(b.value);if(!b.success)return b;a=d("WASmaxInMessageDeliverContentTypeMediaMixin").parseContentTypeMediaMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({plaintextMediatype:c.value,plaintextPayloadMixin:b.value},a.value))}g.parseNewsletterMediaMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterTextMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeTextMixin","WASmaxInMessageDeliverPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"plaintext");if(!b.success)return b;b=d("WASmaxInMessageDeliverPayloadMixin").parsePayloadMixin(b.value);if(!b.success)return b;a=d("WASmaxInMessageDeliverContentTypeTextMixin").parseContentTypeTextMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({plaintextPayloadMixin:b.value},a.value))}g.parseNewsletterTextMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterTextOrMediaMixinGroup",["WAResultOrError","WASmaxInMessageDeliverNewsletterMediaMixin","WASmaxInMessageDeliverNewsletterTextMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverNewsletterTextMixin").parseNewsletterTextMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NewsletterText",value:b.value});var c=d("WASmaxInMessageDeliverNewsletterMediaMixin").parseNewsletterMediaMixin(a);return c.success?d("WAResultOrError").makeResult({name:"NewsletterMedia",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["NewsletterText","NewsletterMedia"],[b,c])}g.parseNewsletterTextOrMediaMixinGroup=a}),98);
__d("WASmaxInMessageDeliverNewsletterEditMixin",["WAResultOrError","WASmaxInMessageDeliverAdminEditMixin","WASmaxInMessageDeliverNewsletterTextOrMediaMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverAdminEditMixin").parseAdminEditMixin(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverNewsletterTextOrMediaMixinGroup").parseNewsletterTextOrMediaMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{newsletterTextOrMediaMixinGroup:a.value}))}g.parseNewsletterEditMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypePollCreationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","poll");if(!a.success)return a;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,b.value,"polltype","creation");return!b.success?b:d("WAResultOrError").makeResult({type:a.value,metaPolltype:b.value})}g.parseContentTypePollCreationMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterPollCreationMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypePollCreationMixin","WASmaxInMessageDeliverPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"plaintext");if(!b.success)return b;b=d("WASmaxInMessageDeliverPayloadMixin").parsePayloadMixin(b.value);if(!b.success)return b;a=d("WASmaxInMessageDeliverContentTypePollCreationMixin").parseContentTypePollCreationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({plaintextPayloadMixin:b.value},a.value))}g.parseNewsletterPollCreationMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypePollVoteMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","poll");if(!a.success)return a;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,b.value,"polltype","vote");return!b.success?b:d("WAResultOrError").makeResult({type:a.value,metaPolltype:b.value})}g.parseContentTypePollVoteMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterPollVoteMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypePollVoteMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"vote");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,32,32);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"votes");if(!b.success)return b;a=d("WASmaxInMessageDeliverContentTypePollVoteMixin").parseContentTypePollVoteMixin(a);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"vote",0,1e3,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{votesVote:b.value}))}g.parseNewsletterPollVoteVotesVote=h;g.parseNewsletterPollVoteMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypeReactionMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","reaction");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseContentTypeReactionMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterReactionMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeReactionMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"reaction");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(b.value,"code");if(!b.success)return b;a=d("WASmaxInMessageDeliverContentTypeReactionMixin").parseContentTypeReactionMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({reactionCode:b.value},a.value))}g.parseNewsletterReactionMixin=a}),98);
__d("WASmaxInMessageDeliverRevokeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","7");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseRevokeMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterReactionRevokeMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeReactionMixin","WASmaxInMessageDeliverRevokeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"reaction");if(!b.success)return b;b=d("WASmaxInMessageDeliverRevokeMixin").parseRevokeMixin(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverContentTypeReactionMixin").parseContentTypeReactionMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseNewsletterReactionRevokeMixin=a}),98);
__d("WASmaxInMessageDeliverAdminRevokeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","8");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAdminRevokeMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterRevokeMixin",["WAResultOrError","WASmaxInMessageDeliverAdminRevokeMixin","WASmaxInMessageDeliverContentTypeTextMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"plaintext");if(!b.success)return b;b=d("WASmaxInMessageDeliverAdminRevokeMixin").parseAdminRevokeMixin(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverContentTypeTextMixin").parseContentTypeTextMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseNewsletterRevokeMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterMessageFanoutContent",["WAResultOrError","WASmaxInMessageDeliverNewsletterEditMixin","WASmaxInMessageDeliverNewsletterMediaMixin","WASmaxInMessageDeliverNewsletterPollCreationMixin","WASmaxInMessageDeliverNewsletterPollVoteMixin","WASmaxInMessageDeliverNewsletterReactionMixin","WASmaxInMessageDeliverNewsletterReactionRevokeMixin","WASmaxInMessageDeliverNewsletterRevokeMixin","WASmaxInMessageDeliverNewsletterTextMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverNewsletterEditMixin").parseNewsletterEditMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NewsletterEdit",value:b.value});var c=d("WASmaxInMessageDeliverNewsletterRevokeMixin").parseNewsletterRevokeMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"NewsletterRevoke",value:c.value});var e=d("WASmaxInMessageDeliverNewsletterTextMixin").parseNewsletterTextMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"NewsletterText",value:e.value});var f=d("WASmaxInMessageDeliverNewsletterMediaMixin").parseNewsletterMediaMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"NewsletterMedia",value:f.value});var g=d("WASmaxInMessageDeliverNewsletterReactionMixin").parseNewsletterReactionMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"NewsletterReaction",value:g.value});var h=d("WASmaxInMessageDeliverNewsletterReactionRevokeMixin").parseNewsletterReactionRevokeMixin(a);if(h.success)return d("WAResultOrError").makeResult({name:"NewsletterReactionRevoke",value:h.value});var i=d("WASmaxInMessageDeliverNewsletterPollCreationMixin").parseNewsletterPollCreationMixin(a);if(i.success)return d("WAResultOrError").makeResult({name:"NewsletterPollCreation",value:i.value});var j=d("WASmaxInMessageDeliverNewsletterPollVoteMixin").parseNewsletterPollVoteMixin(a);return j.success?d("WAResultOrError").makeResult({name:"NewsletterPollVote",value:j.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["NewsletterEdit","NewsletterRevoke","NewsletterText","NewsletterMedia","NewsletterReaction","NewsletterReactionRevoke","NewsletterPollCreation","NewsletterPollVote"],[b,c,e,f,g,h,i,j])}g.parseNewsletterMessageFanoutContent=a}),98);
__d("WASmaxInMessageDeliverNewsletterMessageLastEditTimestampMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,b.value,"msg_edit_t",15778656e5,41024736e5);return!a.success?a:d("WAResultOrError").makeResult({metaMsgEditT:a.value})}g.parseNewsletterMessageLastEditTimestampMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterMessageOriginalTimestampMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,b.value,"original_msg_t",1577865600,4102473600);return!a.success?a:d("WAResultOrError").makeResult({metaOriginalMsgT:a.value})}g.parseNewsletterMessageOriginalTimestampMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterMessageFanoutMixin",["WAResultOrError","WASmaxInMessageDeliverNewsletterMessageFanoutContent","WASmaxInMessageDeliverNewsletterMessageLastEditTimestampMixin","WASmaxInMessageDeliverNewsletterMessageOriginalTimestampMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!b.success)return b;var c=d("WASmaxParseUtils").attrIntRange(a,"server_id",99,2147476647);if(!c.success)return c;var e=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!e.success)return e;var f=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"is_sender","true");if(!f.success)return f;var g=d("WASmaxInMessageDeliverNewsletterMessageOriginalTimestampMixin").parseNewsletterMessageOriginalTimestampMixin(a),h=d("WASmaxInMessageDeliverNewsletterMessageLastEditTimestampMixin").parseNewsletterMessageLastEditTimestampMixin(a);a=d("WASmaxInMessageDeliverNewsletterMessageFanoutContent").parseNewsletterMessageFanoutContent(a);return!a.success?a:d("WAResultOrError").makeResult({id:b.value,serverId:c.value,t:e.value,isSender:f.value,newsletterMessageOriginalTimestampMixin:g.success?g.value:null,newsletterMessageLastEditTimestampMixin:h.success?h.value:null,newsletterMessageFanoutContent:a.value})}g.parseNewsletterMessageFanoutMixin=a}),98);
__d("WASmaxInMessageDeliverOfflineMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrIntRange(a,"offline",0,12);return!a.success?a:d("WAResultOrError").makeResult({offline:a.value})}g.parseOfflineMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterMessageWithJIDMixin",["WAResultOrError","WASmaxInMessageDeliverNewsletterMessageFanoutMixin","WASmaxInMessageDeliverOfflineMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseJid").attrNewsletterJid(a,"from");if(!b.success)return b;var c=d("WASmaxInMessageDeliverNewsletterMessageFanoutMixin").parseNewsletterMessageFanoutMixin(a);if(!c.success)return c;a=d("WASmaxInMessageDeliverOfflineMixin").parseOfflineMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({from:b.value},c.value,{offlineMixin:a.success?a.value:null}))}g.parseNewsletterMessageWithJIDMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterRequest",["WASmaxInMessageDeliverNewsletterMessageWithJIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverNewsletterMessageWithJIDMixin").parseNewsletterMessageWithJIDMixin(a);return!b.success?b:b}g.parseNewsletterRequest=a}),98);
__d("WASmaxOutMessageDeliverCommonAckMixin",["WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrNewsletterJid,a,["from"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{to:d("WAWap").JID(b.value),"class":"message",id:d("WAWap").STANZA_ID(c.value),type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeCommonAckMixin=a}),98);
__d("WASmaxOutMessageDeliverNewsletterResponseError",["WASmaxJsx","WASmaxOutMessageDeliverCommonAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutMessageDeliverCommonAckMixin").mergeCommonAckMixin(d("WASmaxJsx").smax("ack",{error:"406"}),a);return a}g.makeNewsletterResponseError=a}),98);
__d("WASmaxOutMessageDeliverNewsletterResponseSuccess",["WASmaxJsx","WASmaxOutMessageDeliverCommonAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutMessageDeliverCommonAckMixin").mergeCommonAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeNewsletterResponseSuccess=a}),98);
__d("WASmaxMessageDeliverNewsletterRPC",["WASmaxInMessageDeliverNewsletterRequest","WASmaxOutMessageDeliverNewsletterResponseError","WASmaxOutMessageDeliverNewsletterResponseSuccess","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverNewsletterRequest").parseNewsletterRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Newsletter",{Request:b}));return{parsedRequest:b.value,makeNewsletterResponseError:function(){return d("WASmaxOutMessageDeliverNewsletterResponseError").makeNewsletterResponseError(a)},makeNewsletterResponseSuccess:function(){return d("WASmaxOutMessageDeliverNewsletterResponseSuccess").makeNewsletterResponseSuccess(a)}}}g.receiveNewsletterRPC=a}),98);
__d("WASmaxInMessageDeliverAutomatedMixin",["WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"automated");return!b.success?b:d("WASmaxParseUtils").voidSuccess}g.parseAutomatedMixin=a}),98);
__d("WASmaxInMessageDeliverBizAcceptTsMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(b.value,"accept_ts",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({bizAcceptTs:a.value})}g.parseBizAcceptTsMixin=a}),98);
__d("WASmaxInMessageDeliverBizROIMetricsGatingFlagsMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"roi_enabled",d("WASmaxInMessageDeliverEnums").ENUM_0_1);return!a.success?a:d("WAResultOrError").makeResult({bizRoiEnabled:a.value})}g.parseBizROIMetricsGatingFlagsMixin=a}),98);
__d("WASmaxInMessageDeliverBizRolesMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(b.value,"host_storage",1,100);if(!a.success)return a;var c=d("WASmaxParseUtils").attrIntRange(b.value,"actual_actors",1,100);if(!c.success)return c;b=d("WASmaxParseUtils").attrIntRange(b.value,"privacy_mode_ts",1577865600,4102473600);return!b.success?b:d("WAResultOrError").makeResult({bizHostStorage:a.value,bizActualActors:c.value,bizPrivacyModeTs:b.value})}g.parseBizRolesMixin=a}),98);
__d("WASmaxInMessageDeliverBusinessBotGatingMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"gating");if(!a.success)return a;b=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"bot");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"state",d("WASmaxInMessageDeliverEnums").ENUM_ALLOW_BYPASS_DENY_ERROR);if(!a.success)return a;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,b.value,"v",1,void 0);return!b.success?b:d("WAResultOrError").makeResult({bizGatingBotState:a.value,bizGatingBotV:b.value})}g.parseBusinessBotGatingMixin=a}),98);
__d("WASmaxInMessageDeliverConversionRecipientStatusMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"conversion");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"recipient_status",d("WASmaxInMessageDeliverEnums").ENUM_MATCHED_UNMATCHED);return!a.success?a:d("WAResultOrError").makeResult({conversionRecipientStatus:a.value})}g.parseConversionRecipientStatusMixin=a}),98);
__d("WASmaxInMessageDeliverClickToWhatsAppTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"source_url");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ctwa");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"source_url",h);if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"conversion_source");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"conversion_data");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"source_type");if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"entry_point_conversion_source");if(!g.success)return g;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"entry_point_conversion_app");return!a.success?a:d("WAResultOrError").makeResult({conversionSource:c.value,conversionData:e.value,sourceType:f.value,entryPointConversionSource:g.value,entryPointConversionApp:a.value,sourceUrl:b.value})}g.parseClickToWhatsAppTypeSourceUrl=h;g.parseClickToWhatsAppTypeMixin=a}),98);
__d("WASmaxInMessageDeliverCtwaConversionMixin",["WAResultOrError","WASmaxInMessageDeliverClickToWhatsAppTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"ctwa");if(!b.success)return b;b=d("WASmaxInMessageDeliverClickToWhatsAppTypeMixin").parseClickToWhatsAppTypeMixin(a);return!b.success?b:b}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"ctwa",h);return!b.success?b:d("WAResultOrError").makeResult({ctwa:b.value})}g.parseCtwaConversionCtwa=h;g.parseCtwaConversionMixin=a}),98);
__d("WASmaxInMessageDeliverButtonsMixin",["WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"buttons");return!a.success?a:d("WASmaxParseUtils").voidSuccess}g.parseButtonsMixin=a}),98);
__d("WASmaxInMessageDeliverHSMReviewMetadataMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"category");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"tag");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"id");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"sub_tag");if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"library_template_id");if(!g.success)return g;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"is_template_from_library_edited",d("WASmaxInMessageDeliverEnums").ENUM_FALSE_TRUE);return!a.success?a:d("WAResultOrError").makeResult({category:b.value,tag:c.value,id:e.value,subTag:f.value,libraryTemplateId:g.value,isTemplateFromLibraryEdited:a.value})}g.parseHSMReviewMetadataMixin=a}),98);
__d("WASmaxInMessageDeliverHsmMixin",["WASmaxInMessageDeliverHSMReviewMetadataMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"hsm");if(!b.success)return b;a=d("WASmaxInMessageDeliverHSMReviewMetadataMixin").parseHSMReviewMetadataMixin(b.value);return!a.success?a:a}g.parseHsmMixin=a}),98);
__d("WASmaxInMessageDeliverExtensionsMetadataMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"capability");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"name");return!b.success?b:d("WAResultOrError").makeResult({name:b.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"capabilities");if(!b.success)return b;b=d("WASmaxParseUtils").mapChildrenWithTag(a,"capability",1,50,h);return!b.success?b:d("WAResultOrError").makeResult({capability:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"native_flow");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"extensions_metadata");if(!b.success)return b;a=d("WASmaxParseUtils").optionalChildWithTag(b.value,"capabilities",i);if(!a.success)return a;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,b.value,"well_version",1,void 0);if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,b.value,"data_api_version",1,void 0);if(!e.success)return e;b=d("WASmaxParseUtils").attrIntRange(b.value,"flow_message_version",1,void 0);return!b.success?b:d("WAResultOrError").makeResult({extensionsMetadataWellVersion:c.value,extensionsMetadataDataApiVersion:e.value,extensionsMetadataFlowMessageVersion:b.value,extensionsMetadataCapabilities:a.value})}g.parseExtensionsMetadataExtensionsMetadataCapabilitiesCapability=h;g.parseExtensionsMetadataExtensionsMetadataCapabilities=i;g.parseExtensionsMetadataMixin=a}),98);
__d("WASmaxInMessageDeliverNativeFlowMessageTypeMixin",["WAResultOrError","WASmaxInMessageDeliverExtensionsMetadataMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"interactive");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"native_flow");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","native_flow");if(!a.success)return a;var c=d("WASmaxParseUtils").attrString(b.value,"name");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,b.value,"v",1,void 0);if(!e.success)return e;b=d("WASmaxInMessageDeliverExtensionsMetadataMixin").parseExtensionsMetadataMixin(b.value);return d("WAResultOrError").makeResult({type:a.value,nativeFlowName:c.value,nativeFlowV:e.value,nativeFlowExtensionsMetadataMixin:b.success?b.value:null})}g.parseNativeFlowMessageTypeMixin=a}),98);
__d("WASmaxInMessageDeliverInteractiveMixin",["WAResultOrError","WASmaxInMessageDeliverNativeFlowMessageTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"interactive");if(!a.success)return a;b=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a.value,"v","1");if(!b.success)return b;a=d("WASmaxInMessageDeliverNativeFlowMessageTypeMixin").parseNativeFlowMessageTypeMixin(a.value);return!a.success?a:d("WAResultOrError").makeResult({bizInteractiveV:b.value,bizInteractiveNativeFlowMessageTypeMixin:a.value})}g.parseInteractiveMixin=a}),98);
__d("WASmaxInMessageDeliverNativeFlowMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"native_flow_name",d("WASmaxInMessageDeliverEnums").ENUM_CALLPERMISSIONREQUEST_CATALOGMESSAGE_LANELINECALL_MENUOPTIONS_NOVICOMPLETETRANSACTION_NOVIHUB_NOVILOGIN_NOVIREPORTTRANSACTION_NOVIVIEWBANKDETAIL_NOVIVIEWCARDDETAIL_NOVIVIEWCODE_NOVIVIEWTRANSACTION_ORDERDETAILS_ORDERSTATUS_OTP_PAYMENTINFO_PAYMENTMETHOD_PAYMENTSTATUS_VOICECALL);if(!a.success)return a;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,b.value,"native_flow_version",1,void 0);return!b.success?b:d("WAResultOrError").makeResult({bizNativeFlowName:a.value,bizNativeFlowVersion:b.value})}g.parseNativeFlowMixin=a}),98);
__d("WASmaxInMessageDeliverProductListMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"list");if(!a.success)return a;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a.value,"type","product_list");return!b.success?b:d("WAResultOrError").makeResult({bizListType:b.value})}g.parseProductListMixin=a}),98);
__d("WASmaxInMessageDeliverHsmOrButtonsOrNativeFlowOrInteractiveOrProductListMixinGroup",["WAResultOrError","WASmaxInMessageDeliverButtonsMixin","WASmaxInMessageDeliverHsmMixin","WASmaxInMessageDeliverInteractiveMixin","WASmaxInMessageDeliverNativeFlowMixin","WASmaxInMessageDeliverProductListMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverHsmMixin").parseHsmMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"Hsm",value:b.value});var c=d("WASmaxInMessageDeliverButtonsMixin").parseButtonsMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"Buttons",value:c.value});var e=d("WASmaxInMessageDeliverNativeFlowMixin").parseNativeFlowMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"NativeFlow",value:e.value});var f=d("WASmaxInMessageDeliverInteractiveMixin").parseInteractiveMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"Interactive",value:f.value});var g=d("WASmaxInMessageDeliverProductListMixin").parseProductListMixin(a);return g.success?d("WAResultOrError").makeResult({name:"ProductList",value:g.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Hsm","Buttons","NativeFlow","Interactive","ProductList"],[b,c,e,f,g])}g.parseHsmOrButtonsOrNativeFlowOrInteractiveOrProductListMixinGroup=a}),98);
__d("WASmaxInMessageDeliverBizOriginalEnvelopeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"biz");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"original_envelope");if(!b.success)return b;a=d("WASmaxParseUtils").contentBytesRange(b.value,1,102400);return!a.success?a:d("WAResultOrError").makeResult({originalEnvelopeElementValue:a.value})}g.parseBizOriginalEnvelopeMixin=a}),98);
__d("WASmaxInMessageDeliverOriginalEnvelopeMixin",["WASmaxInMessageDeliverBizOriginalEnvelopeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxInMessageDeliverBizOriginalEnvelopeMixin").parseBizOriginalEnvelopeMixin(b.value);return!a.success?a:a}g.parseOriginalEnvelopeMixin=a}),98);
__d("WASmaxInMessageDeliverBizMixin",["WAResultOrError","WASmaxInMessageDeliverBizAcceptTsMixin","WASmaxInMessageDeliverBizROIMetricsGatingFlagsMixin","WASmaxInMessageDeliverBizRolesMixin","WASmaxInMessageDeliverBusinessBotGatingMixin","WASmaxInMessageDeliverConversionRecipientStatusMixin","WASmaxInMessageDeliverCtwaConversionMixin","WASmaxInMessageDeliverHsmOrButtonsOrNativeFlowOrInteractiveOrProductListMixinGroup","WASmaxInMessageDeliverOriginalEnvelopeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverBizRolesMixin").parseBizRolesMixin(a);var c=d("WASmaxInMessageDeliverBizAcceptTsMixin").parseBizAcceptTsMixin(a),e=d("WASmaxInMessageDeliverBizROIMetricsGatingFlagsMixin").parseBizROIMetricsGatingFlagsMixin(a),f=d("WASmaxInMessageDeliverOriginalEnvelopeMixin").parseOriginalEnvelopeMixin(a),g=d("WASmaxInMessageDeliverConversionRecipientStatusMixin").parseConversionRecipientStatusMixin(a),h=d("WASmaxInMessageDeliverCtwaConversionMixin").parseCtwaConversionMixin(a),i=d("WASmaxInMessageDeliverBusinessBotGatingMixin").parseBusinessBotGatingMixin(a);a=d("WASmaxInMessageDeliverHsmOrButtonsOrNativeFlowOrInteractiveOrProductListMixinGroup").parseHsmOrButtonsOrNativeFlowOrInteractiveOrProductListMixinGroup(a);return d("WAResultOrError").makeResult({bizRolesMixin:b.success?b.value:null,bizAcceptTsMixin:c.success?c.value:null,bizROIMetricsGatingFlagsMixin:e.success?e.value:null,originalEnvelopeMixin:f.success?f.value:null,conversionRecipientStatusMixin:g.success?g.value:null,ctwaConversionMixin:h.success?h.value:null,businessBotGatingMixin:i.success?i.value:null,hsmOrButtonsOrNativeFlowOrInteractiveOrProductListMixinGroup:a.success?a.value:null})}g.parseBizMixin=a}),98);
__d("WASmaxInMessageDeliverDHashMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"dhash");return!b.success?b:d("WAResultOrError").makeResult({dhash:b.value})}g.parseDHashMixin=a}),98);
__d("WASmaxInMessageDeliverFolderIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrInt(a,"folder_id");return!a.success?a:d("WAResultOrError").makeResult({folderId:a.value})}g.parseFolderIDMixin=a}),98);
__d("WASmaxInMessageDeliverFolderMixin",["WASmaxInMessageDeliverFolderIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxInMessageDeliverFolderIDMixin").parseFolderIDMixin(b.value);return!a.success?a:a}g.parseFolderMixin=a}),98);
__d("WASmaxInMessageDeliverClientFrankingTagMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"franking");if(!a.success)return a;a=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"franking_tag");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytesRange(a.value,32,128);return!a.success?a:d("WAResultOrError").makeResult({frankingFrankingTagElementValue:a.value})}g.parseClientFrankingTagMixin=a}),98);
__d("WASmaxInMessageDeliverServerFrankingTagMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"franking");if(!a.success)return a;a=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"reporting_tag");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytesRange(a.value,16,128);return!a.success?a:d("WAResultOrError").makeResult({frankingReportingTagElementValue:a.value})}g.parseServerFrankingTagMixin=a}),98);
__d("WASmaxInMessageDeliverFrankingMixin",["WAResultOrError","WASmaxInMessageDeliverClientFrankingTagMixin","WASmaxInMessageDeliverServerFrankingTagMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverClientFrankingTagMixin").parseClientFrankingTagMixin(a);a=d("WASmaxInMessageDeliverServerFrankingTagMixin").parseServerFrankingTagMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({clientFrankingTagMixin:b.success?b.value:null},a.value))}g.parseFrankingMixin=a}),98);
__d("WASmaxInMessageDeliverInternalTestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"test");if(!a.success)return a;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a.value,"config");return!a.success?a:d("WAResultOrError").makeResult({testConfig:a.value})}g.parseInternalTestMixin=a}),98);
__d("WASmaxInMessageDeliverLIDSessionDeprecationMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"deprecated_lid_session",d("WASmaxInMessageDeliverEnums").ENUM_FALSE_TRUE);return!a.success?a:d("WAResultOrError").makeResult({metaDeprecatedLidSession:a.value})}g.parseLIDSessionDeprecationMixin=a}),98);
__d("WASmaxInMessageDeliverMetaHideDecryptionPlaceholderMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!a.success)return a;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a.value,"decrypt-fail","hide");return!a.success?a:d("WAResultOrError").makeResult({metaDecryptFail:a.value})}g.parseMetaHideDecryptionPlaceholderMixin=a}),98);
__d("WASmaxInMessageDeliverMulticastMixin",["WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"multicast");return!b.success?b:d("WASmaxParseUtils").voidSuccess}g.parseMulticastMixin=a}),98);
__d("WASmaxInMessageDeliverPaddingMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"padding");if(!b.success)return b;a=d("WASmaxParseUtils").contentBytesRange(b.value,0,2048);return!a.success?a:d("WAResultOrError").makeResult({paddingElementValue:a.value})}g.parsePaddingMixin=a}),98);
__d("WASmaxInMessageDeliverPreFilledNumberMixin",["WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"url_number");return!b.success?b:d("WASmaxParseUtils").voidSuccess}g.parsePreFilledNumberMixin=a}),98);
__d("WASmaxInMessageDeliverPreFilledTextMixin",["WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"url_text");return!b.success?b:d("WASmaxParseUtils").voidSuccess}g.parsePreFilledTextMixin=a}),98);
__d("WASmaxInMessageDeliverPushNameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"notify");return!b.success?b:d("WAResultOrError").makeResult({notify:b.value})}g.parsePushNameMixin=a}),98);
__d("WASmaxInMessageDeliverRequestIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"trace");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"request_id");if(!b.success)return b;a=d("WASmaxParseUtils").contentBytesRange(b.value,1,16);return!a.success?a:d("WAResultOrError").makeResult({requestIdElementValue:a.value})}g.parseRequestIDMixin=a}),98);
__d("WASmaxInMessageDeliverTraceIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"edge_id");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,1,8);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"trace");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"trace_id");if(!b.success)return b;a=d("WASmaxParseUtils").optionalChildWithTag(a,"edge_id",h);if(!a.success)return a;b=d("WASmaxParseUtils").contentBytesRange(b.value,1,8);return!b.success?b:d("WAResultOrError").makeResult({traceIdElementValue:b.value,edgeId:a.value})}g.parseTraceIDEdgeId=h;g.parseTraceIDMixin=a}),98);
__d("WASmaxInMessageDeliverRequestOrTraceIDMixinGroup",["WAResultOrError","WASmaxInMessageDeliverRequestIDMixin","WASmaxInMessageDeliverTraceIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverRequestIDMixin").parseRequestIDMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"RequestID",value:b.value});var c=d("WASmaxInMessageDeliverTraceIDMixin").parseTraceIDMixin(a);return c.success?d("WAResultOrError").makeResult({name:"TraceID",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["RequestID","TraceID"],[b,c])}g.parseRequestOrTraceIDMixinGroup=a}),98);
__d("WASmaxInMessageDeliverTraceContextMixin",["WAResultOrError","WASmaxInMessageDeliverRequestOrTraceIDMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"trace");if(!a.success)return a;a=d("WASmaxInMessageDeliverRequestOrTraceIDMixinGroup").parseRequestOrTraceIDMixinGroup(a.value);return!a.success?a:d("WAResultOrError").makeResult({traceRequestOrTraceIDMixinGroup:a.value})}g.parseTraceContextMixin=a}),98);
__d("WASmaxInMessageDeliverTriggerBlockMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"tb_cooldown",0,void 0);if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"tb_expiration_ts",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({tbCooldown:b.value,tbExpirationTs:a.value})}g.parseTriggerBlockMixin=a}),98);
__d("WASmaxInMessageDeliverTriggerMessageCSATAttributesMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").attrIntRange(a,"tm_csat_cooldown",0,void 0);if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"tm_csat_exp_ts",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({tmCsatCooldown:b.value,tmCsatExpTs:a.value})}g.parseTriggerMessageCSATAttributesMixin=a}),98);
__d("WASmaxInMessageDeliverTriggerMessageCSATMixin",["WASmaxInMessageDeliverTriggerMessageCSATAttributesMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxInMessageDeliverTriggerMessageCSATAttributesMixin").parseTriggerMessageCSATAttributesMixin(b.value);return!a.success?a:a}g.parseTriggerMessageCSATMixin=a}),98);
__d("WASmaxInMessageDeliverVerifiedNameCertificateMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"verified_name");if(!b.success)return b;a=d("WASmaxParseUtils").attrInt(b.value,"v");if(!a.success)return a;var c=d("WASmaxParseUtils").attrStringEnum(b.value,"verified_level",d("WASmaxInMessageDeliverEnums").ENUM_HIGH_LOW_UNKNOWN);if(!c.success)return c;b=d("WASmaxParseUtils").contentBytesRange(b.value,1,1024);return!b.success?b:d("WAResultOrError").makeResult({verifiedNameV:a.value,verifiedNameVerifiedLevel:c.value,verifiedNameElementValue:b.value})}g.parseVerifiedNameCertificateMixin=a}),98);
__d("WASmaxInMessageDeliverVerifiedNameLevelMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"verified_level",d("WASmaxInMessageDeliverEnums").ENUM_HIGH_LOW_UNKNOWN);return!b.success?b:d("WAResultOrError").makeResult({verifiedLevel:b.value})}g.parseVerifiedNameLevelMixin=a}),98);
__d("WASmaxInMessageDeliverVerifiedNameNameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"verified_name");return!b.success?b:d("WAResultOrError").makeResult({verifiedName:b.value})}g.parseVerifiedNameNameMixin=a}),98);
__d("WASmaxInMessageDeliverVerifiedNameMixin",["WAResultOrError","WASmaxInMessageDeliverVerifiedNameCertificateMixin","WASmaxInMessageDeliverVerifiedNameLevelMixin","WASmaxInMessageDeliverVerifiedNameNameMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverVerifiedNameNameMixin").parseVerifiedNameNameMixin(a);if(!b.success)return b;var c=d("WASmaxInMessageDeliverVerifiedNameLevelMixin").parseVerifiedNameLevelMixin(a);if(!c.success)return c;a=d("WASmaxInMessageDeliverVerifiedNameCertificateMixin").parseVerifiedNameCertificateMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,c.value,{verifiedNameCertificateMixin:a.success?a.value:null}))}g.parseVerifiedNameMixin=a}),98);
__d("WASmaxInMessageDeliverClientReportingTokenMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"reporting");if(!a.success)return a;a=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"reporting_token");if(!a.success)return a;var b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrInt,a.value,"v");if(!b.success)return b;a=d("WASmaxParseUtils").contentBytesRange(a.value,32,128);return!a.success?a:d("WAResultOrError").makeResult({reportingReportingTokenV:b.value,reportingReportingTokenElementValue:a.value})}g.parseClientReportingTokenMixin=a}),98);
__d("WASmaxInMessageDeliverServerReportingTokenMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"reporting");if(!a.success)return a;a=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"reporting_tag");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytesRange(a.value,16,128);return!a.success?a:d("WAResultOrError").makeResult({reportingReportingTagElementValue:a.value})}g.parseServerReportingTokenMixin=a}),98);
__d("WASmaxInMessageDeliverWaReportingMixin",["WAResultOrError","WASmaxInMessageDeliverClientReportingTokenMixin","WASmaxInMessageDeliverServerReportingTokenMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverClientReportingTokenMixin").parseClientReportingTokenMixin(a);a=d("WASmaxInMessageDeliverServerReportingTokenMixin").parseServerReportingTokenMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({clientReportingTokenMixin:b.success?b.value:null},a.value))}g.parseWaReportingMixin=a}),98);
__d("WASmaxInMessageDeliverBaseMixin",["WAResultOrError","WASmaxInMessageDeliverAutomatedMixin","WASmaxInMessageDeliverBizMixin","WASmaxInMessageDeliverDHashMixin","WASmaxInMessageDeliverDeviceIdentityMixin","WASmaxInMessageDeliverFolderMixin","WASmaxInMessageDeliverFrankingMixin","WASmaxInMessageDeliverInternalTestMixin","WASmaxInMessageDeliverLIDSessionDeprecationMixin","WASmaxInMessageDeliverMetaHideDecryptionPlaceholderMixin","WASmaxInMessageDeliverMulticastMixin","WASmaxInMessageDeliverOfflineMixin","WASmaxInMessageDeliverPaddingMixin","WASmaxInMessageDeliverPreFilledNumberMixin","WASmaxInMessageDeliverPreFilledTextMixin","WASmaxInMessageDeliverPushNameMixin","WASmaxInMessageDeliverRegistrationIDMixin","WASmaxInMessageDeliverTraceContextMixin","WASmaxInMessageDeliverTriggerBlockMixin","WASmaxInMessageDeliverTriggerMessageCSATMixin","WASmaxInMessageDeliverVerifiedNameMixin","WASmaxInMessageDeliverWaReportingMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverTriggerBlockMixin").parseTriggerBlockMixin(a);var c=d("WASmaxInMessageDeliverTriggerMessageCSATMixin").parseTriggerMessageCSATMixin(a),e=d("WASmaxInMessageDeliverOfflineMixin").parseOfflineMixin(a),f=d("WASmaxInMessageDeliverPushNameMixin").parsePushNameMixin(a),g=d("WASmaxInMessageDeliverDeviceIdentityMixin").parseDeviceIdentityMixin(a),h=d("WASmaxInMessageDeliverVerifiedNameMixin").parseVerifiedNameMixin(a),i=d("WASmaxInMessageDeliverBizMixin").parseBizMixin(a),j=d("WASmaxInMessageDeliverMulticastMixin").parseMulticastMixin(a),k=d("WASmaxInMessageDeliverPreFilledTextMixin").parsePreFilledTextMixin(a),l=d("WASmaxInMessageDeliverPreFilledNumberMixin").parsePreFilledNumberMixin(a),m=d("WASmaxInMessageDeliverAutomatedMixin").parseAutomatedMixin(a),n=d("WASmaxInMessageDeliverDHashMixin").parseDHashMixin(a),o=d("WASmaxInMessageDeliverRegistrationIDMixin").parseRegistrationIDMixin(a),p=d("WASmaxInMessageDeliverFolderMixin").parseFolderMixin(a),q=d("WASmaxInMessageDeliverFrankingMixin").parseFrankingMixin(a),r=d("WASmaxInMessageDeliverWaReportingMixin").parseWaReportingMixin(a),s=d("WASmaxInMessageDeliverInternalTestMixin").parseInternalTestMixin(a),t=d("WASmaxInMessageDeliverMetaHideDecryptionPlaceholderMixin").parseMetaHideDecryptionPlaceholderMixin(a),u=d("WASmaxInMessageDeliverTraceContextMixin").parseTraceContextMixin(a),v=d("WASmaxInMessageDeliverPaddingMixin").parsePaddingMixin(a);a=d("WASmaxInMessageDeliverLIDSessionDeprecationMixin").parseLIDSessionDeprecationMixin(a);return d("WAResultOrError").makeResult({triggerBlockMixin:b.success?b.value:null,triggerMessageCSATMixin:c.success?c.value:null,offlineMixin:e.success?e.value:null,pushNameMixin:f.success?f.value:null,deviceIdentityMixin:g.success?g.value:null,verifiedNameMixin:h.success?h.value:null,bizMixin:i.success?i.value:null,hasMulticastMixin:j.success,hasPreFilledTextMixin:k.success,hasPreFilledNumberMixin:l.success,hasAutomatedMixin:m.success,dHashMixin:n.success?n.value:null,registrationIDMixin:o.success?o.value:null,folderMixin:p.success?p.value:null,frankingMixin:q.success?q.value:null,waReportingMixin:r.success?r.value:null,internalTestMixin:s.success?s.value:null,metaHideDecryptionPlaceholderMixin:t.success?t.value:null,traceContextMixin:u.success?u.value:null,paddingMixin:v.success?v.value:null,lIDSessionDeprecationMixin:a.success?a.value:null})}g.parseBaseMixin=a}),98);
__d("WASmaxInMessageDeliverEncMediaTypeFutureproofMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"mediatype");return!b.success?b:d("WAResultOrError").makeResult({mediatype:b.value})}g.parseEncMediaTypeFutureproofMixin=a}),98);
__d("WASmaxInMessageDeliverAvatarStickerTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"sticker_type","avatar");return!b.success?b:d("WAResultOrError").makeResult({stickerType:b.value})}g.parseAvatarStickerTypeMixin=a}),98);
__d("WASmaxInMessageDeliverMediaTypeMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"mediatype",d("WASmaxInMessageDeliverEnums").ENUM_AUDIO_AVATARSTICKER_BUTTONSRESPONSE_CATALOGLINK_CONTACT_CONTACTARRAY_DOCUMENT_GENAISTICKER_GIF_HISTORY_IMAGE_LISTRESPONSE_LOCATION_NATIVEFLOWRESPONSE_ORDER_PRODUCT_PRODUCTLINK_PTT_PTV_STICKER_URL_VCARD_VIDEO_XMA);return!b.success?b:d("WAResultOrError").makeResult({mediatype:b.value})}g.parseMediaTypeMixin=a}),98);
__d("WASmaxInMessageDeliverEncMediaTypeMixin",["WAResultOrError","WASmaxInMessageDeliverAvatarStickerTypeMixin","WASmaxInMessageDeliverEnums","WASmaxInMessageDeliverMediaTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"native_flow_name",d("WASmaxInMessageDeliverEnums").ENUM_ADDRESSMESSAGE_CALLPERMISSIONREQUEST_FORMMESSAGE_GALAXYMESSAGE_MENUOPTIONS);if(!b.success)return b;var c=d("WASmaxInMessageDeliverMediaTypeMixin").parseMediaTypeMixin(a);if(!c.success)return c;a=d("WASmaxInMessageDeliverAvatarStickerTypeMixin").parseAvatarStickerTypeMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({nativeFlowName:b.value},c.value,{avatarStickerTypeMixin:a.success?a.value:null}))}g.parseEncMediaTypeMixin=a}),98);
__d("WASmaxInMessageDeliverEncMediaTypeEncMediaTypeOrEncMediaTypeFutureproofMixinGroup",["WAResultOrError","WASmaxInMessageDeliverEncMediaTypeFutureproofMixin","WASmaxInMessageDeliverEncMediaTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverEncMediaTypeMixin").parseEncMediaTypeMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"EncMediaType",value:b.value});var c=d("WASmaxInMessageDeliverEncMediaTypeFutureproofMixin").parseEncMediaTypeFutureproofMixin(a);return c.success?d("WAResultOrError").makeResult({name:"EncMediaTypeFutureproof",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["EncMediaType","EncMediaTypeFutureproof"],[b,c])}g.parseEncMediaTypeEncMediaTypeOrEncMediaTypeFutureproofMixinGroup=a}),98);
__d("WASmaxInMessageDeliverEncTypeSenderKeyMixin",["WAResultOrError","WASmaxInMessageDeliverEncHideDecryptionPlaceholderMixin","WASmaxInMessageDeliverEncPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","skmsg");if(!b.success)return b;var c=d("WASmaxInMessageDeliverEncHideDecryptionPlaceholderMixin").parseEncHideDecryptionPlaceholderMixin(a);a=d("WASmaxInMessageDeliverEncPayloadMixin").parseEncPayloadMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({type:b.value,encHideDecryptionPlaceholderMixin:c.success?c.value:null},a.value))}g.parseEncTypeSenderKeyMixin=a}),98);
__d("WASmaxInMessageDeliverEncTypeSenderKeyAndBroadcastMediaMixin",["WAResultOrError","WASmaxInMessageDeliverEncMediaTypeEncMediaTypeOrEncMediaTypeFutureproofMixinGroup","WASmaxInMessageDeliverEncTypeSenderKeyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxInMessageDeliverEncTypeSenderKeyMixin").parseEncTypeSenderKeyMixin(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverEncMediaTypeEncMediaTypeOrEncMediaTypeFutureproofMixinGroup").parseEncMediaTypeEncMediaTypeOrEncMediaTypeFutureproofMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{encMediaTypeEncMediaTypeOrEncMediaTypeFutureproofMixinGroup:a.value}))}g.parseEncTypeSenderKeyAndBroadcastMediaMixin=a}),98);
__d("WASmaxInMessageDeliverEncTypeSenderKeyAndBroadcastMediaOrIndividualMixinGroup",["WAResultOrError","WASmaxInMessageDeliverEncTypeIndividualMixin","WASmaxInMessageDeliverEncTypeSenderKeyAndBroadcastMediaMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverEncTypeSenderKeyAndBroadcastMediaMixin").parseEncTypeSenderKeyAndBroadcastMediaMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"EncTypeSenderKeyAndBroadcastMedia",value:b.value});var c=d("WASmaxInMessageDeliverEncTypeIndividualMixin").parseEncTypeIndividualMixin(a);return c.success?d("WAResultOrError").makeResult({name:"EncTypeIndividual",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["EncTypeSenderKeyAndBroadcastMedia","EncTypeIndividual"],[b,c])}g.parseEncTypeSenderKeyAndBroadcastMediaOrIndividualMixinGroup=a}),98);
__d("WASmaxInMessageDeliverBroadcastDualEncMediaMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeMediaMixin","WASmaxInMessageDeliverEncTypeSenderKeyAndBroadcastMediaOrIndividualMixinGroup","WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup").parseEncVersion2Or3OrFutureproofMixinGroup(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverEncTypeSenderKeyAndBroadcastMediaOrIndividualMixinGroup").parseEncTypeSenderKeyAndBroadcastMediaOrIndividualMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({encVersion2Or3OrFutureproofMixinGroup:b.value,encTypeSenderKeyAndBroadcastMediaOrIndividualMixinGroup:a.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"rcat");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytes(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"rcat",i);if(!b.success)return b;var c=d("WASmaxInMessageDeliverContentTypeMediaMixin").parseContentTypeMediaMixin(a);if(!c.success)return c;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"enc",2,2,h);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},c.value,{rcat:b.value,enc:a.value}))}g.parseBroadcastDualEncMediaEnc=h;g.parseBroadcastDualEncMediaRcat=i;g.parseBroadcastDualEncMediaMixin=a}),98);
__d("WASmaxInMessageDeliverEncTypeSenderKeyOrIndividualMixinGroup",["WAResultOrError","WASmaxInMessageDeliverEncTypeIndividualMixin","WASmaxInMessageDeliverEncTypeSenderKeyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverEncTypeSenderKeyMixin").parseEncTypeSenderKeyMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"EncTypeSenderKey",value:b.value});var c=d("WASmaxInMessageDeliverEncTypeIndividualMixin").parseEncTypeIndividualMixin(a);return c.success?d("WAResultOrError").makeResult({name:"EncTypeIndividual",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["EncTypeSenderKey","EncTypeIndividual"],[b,c])}g.parseEncTypeSenderKeyOrIndividualMixinGroup=a}),98);
__d("WASmaxInMessageDeliverBroadcastDualEncNonMediaMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeTextMixin","WASmaxInMessageDeliverEncTypeSenderKeyOrIndividualMixinGroup","WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup").parseEncVersion2Or3OrFutureproofMixinGroup(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverEncTypeSenderKeyOrIndividualMixinGroup").parseEncTypeSenderKeyOrIndividualMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({encVersion2Or3OrFutureproofMixinGroup:b.value,encTypeSenderKeyOrIndividualMixinGroup:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverContentTypeTextMixin").parseContentTypeTextMixin(a);if(!b.success)return b;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"enc",2,2,h);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{enc:a.value}))}g.parseBroadcastDualEncNonMediaEnc=h;g.parseBroadcastDualEncNonMediaMixin=a}),98);
__d("WASmaxInMessageDeliverBroadcastDualEncBroadcastDualEncMediaOrBroadcastDualEncNonMediaMediaMixinGroup",["WAResultOrError","WASmaxInMessageDeliverBroadcastDualEncMediaMixin","WASmaxInMessageDeliverBroadcastDualEncNonMediaMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverBroadcastDualEncMediaMixin").parseBroadcastDualEncMediaMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"BroadcastDualEncMedia",value:b.value});var c=d("WASmaxInMessageDeliverBroadcastDualEncNonMediaMixin").parseBroadcastDualEncNonMediaMixin(a);return c.success?d("WAResultOrError").makeResult({name:"BroadcastDualEncNonMedia",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["BroadcastDualEncMedia","BroadcastDualEncNonMedia"],[b,c])}g.parseBroadcastDualEncBroadcastDualEncMediaOrBroadcastDualEncNonMediaMediaMixinGroup=a}),98);
__d("WASmaxInMessageDeliverBroadcastEphemeralMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"eph_setting");return!a.success?a:d("WAResultOrError").makeResult({ephSetting:a.value})}g.parseBroadcastEphemeralMixin=a}),98);
__d("WASmaxInMessageDeliverToUserMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"to");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");return!b.success?b:d("WAResultOrError").makeResult({jid:b.value})}g.parseToUserMixin=a}),98);
__d("WASmaxInMessageDeliverBroadcastParticipantsMixin",["WAResultOrError","WASmaxInMessageDeliverBroadcastEphemeralMixin","WASmaxInMessageDeliverToUserMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"to");if(!b.success)return b;b=d("WASmaxInMessageDeliverToUserMixin").parseToUserMixin(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverBroadcastEphemeralMixin").parseBroadcastEphemeralMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{broadcastEphemeralMixin:a.success?a.value:null}))}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"participants");if(!b.success)return b;a=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"to",0,256,h);return!a.success?a:d("WAResultOrError").makeResult({participantsTo:a.value})}g.parseBroadcastParticipantsParticipantsTo=h;g.parseBroadcastParticipantsMixin=a}),98);
__d("WASmaxInMessageDeliverBroadcastDualEncMixin",["WAResultOrError","WASmaxInMessageDeliverBroadcastDualEncBroadcastDualEncMediaOrBroadcastDualEncNonMediaMediaMixinGroup","WASmaxInMessageDeliverBroadcastParticipantsMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverBroadcastParticipantsMixin").parseBroadcastParticipantsMixin(a);a=d("WASmaxInMessageDeliverBroadcastDualEncBroadcastDualEncMediaOrBroadcastDualEncNonMediaMediaMixinGroup").parseBroadcastDualEncBroadcastDualEncMediaOrBroadcastDualEncNonMediaMediaMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({broadcastParticipantsMixin:b.success?b.value:null,broadcastDualEncBroadcastDualEncMediaOrBroadcastDualEncNonMediaMediaMixinGroup:a.value})}g.parseBroadcastDualEncMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypeMedianotifyMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","medianotify");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseContentTypeMedianotifyMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypeMediaOrMedianotifyMixinGroup",["WAResultOrError","WASmaxInMessageDeliverContentTypeMediaMixin","WASmaxInMessageDeliverContentTypeMedianotifyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverContentTypeMediaMixin").parseContentTypeMediaMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ContentTypeMedia",value:b.value});var c=d("WASmaxInMessageDeliverContentTypeMedianotifyMixin").parseContentTypeMedianotifyMixin(a);return c.success?d("WAResultOrError").makeResult({name:"ContentTypeMedianotify",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ContentTypeMedia","ContentTypeMedianotify"],[b,c])}g.parseContentTypeMediaOrMedianotifyMixinGroup=a}),98);
__d("WASmaxInMessageDeliverContentTypeMediaSingleMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeMediaOrMedianotifyMixinGroup","WASmaxInMessageDeliverEncMediaTypeEncMediaTypeOrEncMediaTypeFutureproofMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"rcat");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytes(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"enc");if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(a,"rcat",h);if(!c.success)return c;b=d("WASmaxInMessageDeliverEncMediaTypeEncMediaTypeOrEncMediaTypeFutureproofMixinGroup").parseEncMediaTypeEncMediaTypeOrEncMediaTypeFutureproofMixinGroup(b.value);if(!b.success)return b;a=d("WASmaxInMessageDeliverContentTypeMediaOrMedianotifyMixinGroup").parseContentTypeMediaOrMedianotifyMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({encEncMediaTypeEncMediaTypeOrEncMediaTypeFutureproofMixinGroup:b.value,contentTypeMediaOrMedianotifyMixinGroup:a.value,rcat:c.value})}g.parseContentTypeMediaSingleRcat=h;g.parseContentTypeMediaSingleMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypeTextOrMediaSingleMixinGroup",["WAResultOrError","WASmaxInMessageDeliverContentTypeMediaSingleMixin","WASmaxInMessageDeliverContentTypeTextMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverContentTypeTextMixin").parseContentTypeTextMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ContentTypeText",value:b.value});var c=d("WASmaxInMessageDeliverContentTypeMediaSingleMixin").parseContentTypeMediaSingleMixin(a);return c.success?d("WAResultOrError").makeResult({name:"ContentTypeMediaSingle",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ContentTypeText","ContentTypeMediaSingle"],[b,c])}g.parseContentTypeTextOrMediaSingleMixinGroup=a}),98);
__d("WASmaxInMessageDeliverEncTypeIndividualOrSenderKeyMixinGroup",["WAResultOrError","WASmaxInMessageDeliverEncTypeIndividualMixin","WASmaxInMessageDeliverEncTypeSenderKeyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverEncTypeIndividualMixin").parseEncTypeIndividualMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"EncTypeIndividual",value:b.value});var c=d("WASmaxInMessageDeliverEncTypeSenderKeyMixin").parseEncTypeSenderKeyMixin(a);return c.success?d("WAResultOrError").makeResult({name:"EncTypeSenderKey",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["EncTypeIndividual","EncTypeSenderKey"],[b,c])}g.parseEncTypeIndividualOrSenderKeyMixinGroup=a}),98);
__d("WASmaxInMessageDeliverBroadcastRegularMixin",["WAResultOrError","WASmaxInMessageDeliverBroadcastParticipantsMixin","WASmaxInMessageDeliverEncTypeIndividualOrSenderKeyMixinGroup","WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"enc");if(!b.success)return b;a=d("WASmaxInMessageDeliverBroadcastParticipantsMixin").parseBroadcastParticipantsMixin(a);var c=d("WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup").parseEncVersion2Or3OrFutureproofMixinGroup(b.value);if(!c.success)return c;b=d("WASmaxInMessageDeliverEncTypeIndividualOrSenderKeyMixinGroup").parseEncTypeIndividualOrSenderKeyMixinGroup(b.value);return!b.success?b:d("WAResultOrError").makeResult({broadcastParticipantsMixin:a.success?a.value:null,encEncVersion2Or3OrFutureproofMixinGroup:c.value,encEncTypeIndividualOrSenderKeyMixinGroup:b.value})}g.parseBroadcastRegularMixin=a}),98);
__d("WASmaxInMessageDeliverRetryOrBroadcastRegularMixinGroup",["WAResultOrError","WASmaxInMessageDeliverBroadcastRegularMixin","WASmaxInMessageDeliverRetryMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverRetryMixin").parseRetryMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"Retry",value:b.value});var c=d("WASmaxInMessageDeliverBroadcastRegularMixin").parseBroadcastRegularMixin(a);return c.success?d("WAResultOrError").makeResult({name:"BroadcastRegular",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Retry","BroadcastRegular"],[b,c])}g.parseRetryOrBroadcastRegularMixinGroup=a}),98);
__d("WASmaxInMessageDeliverBroadcastSingleEncMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeTextOrMediaSingleMixinGroup","WASmaxInMessageDeliverRetryOrBroadcastRegularMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverContentTypeTextOrMediaSingleMixinGroup").parseContentTypeTextOrMediaSingleMixinGroup(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverRetryOrBroadcastRegularMixinGroup").parseRetryOrBroadcastRegularMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({contentTypeTextOrMediaSingleMixinGroup:b.value,retryOrBroadcastRegularMixinGroup:a.value})}g.parseBroadcastSingleEncMixin=a}),98);
__d("WASmaxInMessageDeliverBroadcastDualOrSingleEncMixinGroup",["WAResultOrError","WASmaxInMessageDeliverBroadcastDualEncMixin","WASmaxInMessageDeliverBroadcastSingleEncMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverBroadcastDualEncMixin").parseBroadcastDualEncMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"BroadcastDualEnc",value:b.value});var c=d("WASmaxInMessageDeliverBroadcastSingleEncMixin").parseBroadcastSingleEncMixin(a);return c.success?d("WAResultOrError").makeResult({name:"BroadcastSingleEnc",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["BroadcastDualEnc","BroadcastSingleEnc"],[b,c])}g.parseBroadcastDualOrSingleEncMixinGroup=a}),98);
__d("WASmaxInMessageDeliverFanoutCountMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrInt(a,"count");return!a.success?a:d("WAResultOrError").makeResult({count:a.value})}g.parseFanoutCountMixin=a}),98);
__d("WASmaxInMessageDeliverMessageEditMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","1");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseMessageEditMixin=a}),98);
__d("WASmaxInMessageDeliverMessageEditOrRevokeOrBroadcastEphemeralMixinGroup",["WAResultOrError","WASmaxInMessageDeliverBroadcastEphemeralMixin","WASmaxInMessageDeliverMessageEditMixin","WASmaxInMessageDeliverRevokeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverMessageEditMixin").parseMessageEditMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"MessageEdit",value:b.value});var c=d("WASmaxInMessageDeliverRevokeMixin").parseRevokeMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"Revoke",value:c.value});var e=d("WASmaxInMessageDeliverBroadcastEphemeralMixin").parseBroadcastEphemeralMixin(a);return e.success?d("WAResultOrError").makeResult({name:"BroadcastEphemeral",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["MessageEdit","Revoke","BroadcastEphemeral"],[b,c,e])}g.parseMessageEditOrRevokeOrBroadcastEphemeralMixinGroup=a}),98);
__d("WASmaxInMessageDeliverSMBBroadcastSourceMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"biz_source",d("WASmaxInMessageDeliverEnums").ENUM_SMBMM_SMBPROMO);return!a.success?a:d("WAResultOrError").makeResult({metaBizSource:a.value})}g.parseSMBBroadcastSourceMixin=a}),98);
__d("WASmaxInMessageDeliverSMBBroadcastSourceWithCampaignMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!a.success)return a;b=d("WASmaxParseUtils").attrStringEnum(b.value,"biz_source",d("WASmaxInMessageDeliverEnums").ENUM_SMBMM_SMBPROMO);if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a.value,"campaign_id");return!a.success?a:d("WAResultOrError").makeResult({metaBizSource:b.value,bizCampaignId:a.value})}g.parseSMBBroadcastSourceWithCampaignMixin=a}),98);
__d("WASmaxInMessageDeliverBroadcastMixin",["WAResultOrError","WASmaxInMessageDeliverAppdataMetaAttributeMixin","WASmaxInMessageDeliverBroadcastDualOrSingleEncMixinGroup","WASmaxInMessageDeliverEnums","WASmaxInMessageDeliverFanoutCountMixin","WASmaxInMessageDeliverMessageEditOrRevokeOrBroadcastEphemeralMixinGroup","WASmaxInMessageDeliverSMBBroadcastSourceMixin","WASmaxInMessageDeliverSMBBroadcastSourceWithCampaignMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseJid").attrBroadcastJid(a,"from");if(!b.success)return b;var c=d("WASmaxParseJid").attrJidEnum(a,"participant",d("WASmaxInMessageDeliverEnums").DEVICEJID_DEVICEJID);if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"participant_pn");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"participant_lid");if(!f.success)return f;var g=d("WASmaxInMessageDeliverFanoutCountMixin").parseFanoutCountMixin(a),h=d("WASmaxInMessageDeliverSMBBroadcastSourceMixin").parseSMBBroadcastSourceMixin(a),i=d("WASmaxInMessageDeliverSMBBroadcastSourceWithCampaignMixin").parseSMBBroadcastSourceWithCampaignMixin(a),j=d("WASmaxInMessageDeliverAppdataMetaAttributeMixin").parseAppdataMetaAttributeMixin(a),k=d("WASmaxInMessageDeliverBroadcastDualOrSingleEncMixinGroup").parseBroadcastDualOrSingleEncMixinGroup(a);if(!k.success)return k;a=d("WASmaxInMessageDeliverMessageEditOrRevokeOrBroadcastEphemeralMixinGroup").parseMessageEditOrRevokeOrBroadcastEphemeralMixinGroup(a);return d("WAResultOrError").makeResult({from:b.value,participant:c.value,participantPn:e.value,participantLid:f.value,fanoutCountMixin:g.success?g.value:null,sMBBroadcastSourceMixin:h.success?h.value:null,sMBBroadcastSourceWithCampaignMixin:i.success?i.value:null,appdataMetaAttributeMixin:j.success?j.value:null,broadcastDualOrSingleEncMixinGroup:k.value,messageEditOrRevokeOrBroadcastEphemeralMixinGroup:a.success?a.value:null})}g.parseBroadcastMixin=a}),98);
__d("WASmaxInMessageDeliverBotThreadIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"thread_id");return!b.success?b:d("WAResultOrError").makeResult({threadId:b.value})}g.parseBotThreadIDMixin=a}),98);
__d("WASmaxInMessageDeliverDisplayNameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"display_name");return!a.success?a:d("WAResultOrError").makeResult({displayName:a.value})}g.parseDisplayNameMixin=a}),98);
__d("WASmaxInMessageDeliverGroupAddressingModeMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrStringEnum(a,"addressing_mode",d("WASmaxInMessageDeliverEnums").ENUM_LID_PN);return!a.success?a:d("WAResultOrError").makeResult({addressingMode:a.value})}g.parseGroupAddressingModeMixin=a}),98);
__d("WASmaxInMessageDeliverEncListMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"mediatype","list");return!b.success?b:d("WAResultOrError").makeResult({mediatype:b.value})}g.parseEncListMixin=a}),98);
__d("WASmaxInMessageDeliverEncLiveLocationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"mediatype","livelocation");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"duration",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({mediatype:b.value,duration:a.value})}g.parseEncLiveLocationMixin=a}),98);
__d("WASmaxInMessageDeliverEncLiveLocationOrListOrMediaTypeOrMediaTypeFutureproofMixinGroup",["WAResultOrError","WASmaxInMessageDeliverEncListMixin","WASmaxInMessageDeliverEncLiveLocationMixin","WASmaxInMessageDeliverEncMediaTypeFutureproofMixin","WASmaxInMessageDeliverEncMediaTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverEncLiveLocationMixin").parseEncLiveLocationMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"EncLiveLocation",value:b.value});var c=d("WASmaxInMessageDeliverEncListMixin").parseEncListMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"EncList",value:c.value});var e=d("WASmaxInMessageDeliverEncMediaTypeMixin").parseEncMediaTypeMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"EncMediaType",value:e.value});var f=d("WASmaxInMessageDeliverEncMediaTypeFutureproofMixin").parseEncMediaTypeFutureproofMixin(a);return f.success?d("WAResultOrError").makeResult({name:"EncMediaTypeFutureproof",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["EncLiveLocation","EncList","EncMediaType","EncMediaTypeFutureproof"],[b,c,e,f])}g.parseEncLiveLocationOrListOrMediaTypeOrMediaTypeFutureproofMixinGroup=a}),98);
__d("WASmaxInMessageDeliverEncTypeSenderKeyAndGroupMediaMixin",["WAResultOrError","WASmaxInMessageDeliverEncLiveLocationOrListOrMediaTypeOrMediaTypeFutureproofMixinGroup","WASmaxInMessageDeliverEncTypeSenderKeyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxInMessageDeliverEncTypeSenderKeyMixin").parseEncTypeSenderKeyMixin(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverEncLiveLocationOrListOrMediaTypeOrMediaTypeFutureproofMixinGroup").parseEncLiveLocationOrListOrMediaTypeOrMediaTypeFutureproofMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{encLiveLocationOrListOrMediaTypeOrMediaTypeFutureproofMixinGroup:a.value}))}g.parseEncTypeSenderKeyAndGroupMediaMixin=a}),98);
__d("WASmaxInMessageDeliverEncTypeSenderKeyAndGroupMediaOrIndividualMixinGroup",["WAResultOrError","WASmaxInMessageDeliverEncTypeIndividualMixin","WASmaxInMessageDeliverEncTypeSenderKeyAndGroupMediaMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverEncTypeSenderKeyAndGroupMediaMixin").parseEncTypeSenderKeyAndGroupMediaMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"EncTypeSenderKeyAndGroupMedia",value:b.value});var c=d("WASmaxInMessageDeliverEncTypeIndividualMixin").parseEncTypeIndividualMixin(a);return c.success?d("WAResultOrError").makeResult({name:"EncTypeIndividual",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["EncTypeSenderKeyAndGroupMedia","EncTypeIndividual"],[b,c])}g.parseEncTypeSenderKeyAndGroupMediaOrIndividualMixinGroup=a}),98);
__d("WASmaxInMessageDeliverGroupDualEncMediaMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeMediaMixin","WASmaxInMessageDeliverEncTypeSenderKeyAndGroupMediaOrIndividualMixinGroup","WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup").parseEncVersion2Or3OrFutureproofMixinGroup(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverEncTypeSenderKeyAndGroupMediaOrIndividualMixinGroup").parseEncTypeSenderKeyAndGroupMediaOrIndividualMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({encVersion2Or3OrFutureproofMixinGroup:b.value,encTypeSenderKeyAndGroupMediaOrIndividualMixinGroup:a.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"rcat");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytes(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"rcat",i);if(!b.success)return b;var c=d("WASmaxInMessageDeliverContentTypeMediaMixin").parseContentTypeMediaMixin(a);if(!c.success)return c;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"enc",2,2,h);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},c.value,{rcat:b.value,enc:a.value}))}g.parseGroupDualEncMediaEnc=h;g.parseGroupDualEncMediaRcat=i;g.parseGroupDualEncMediaMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypeEventMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","event");if(!a.success)return a;b=d("WASmaxParseUtils").attrStringEnum(b.value,"event_type",d("WASmaxInMessageDeliverEnums").ENUM_CREATION_EDIT_RESPONSE);return!b.success?b:d("WAResultOrError").makeResult({type:a.value,metaEventType:b.value})}g.parseContentTypeEventMixin=a}),98);
__d("WASmaxInMessageDeliverDeprecatedPayTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"mediatype","pay");return!b.success?b:d("WAResultOrError").makeResult({mediatype:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").mapHomogeneousChildrenWithTag(a,"enc",h);return!b.success?b:d("WAResultOrError").makeResult({enc:b.value})}g.parseDeprecatedPayTypeEnc=h;g.parseDeprecatedPayTypeMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypePayMixin",["WAResultOrError","WASmaxInMessageDeliverDeprecatedPayTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","pay");if(!b.success)return b;a=d("WASmaxInMessageDeliverDeprecatedPayTypeMixin").parseDeprecatedPayTypeMixin(a);return d("WAResultOrError").makeResult({type:b.value,deprecatedPayTypeMixin:a.success?a.value:null})}g.parseContentTypePayMixin=a}),98);
__d("WASmaxInMessageDeliverLegacyAmountMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"pay");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"currency");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"amount");return!a.success?a:d("WAResultOrError").makeResult({currency:b.value,amount:a.value})}g.parseLegacyAmountMixin=a}),98);
__d("WASmaxInMessageDeliverMoneyMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"money");if(!a.success)return a;var b=d("WASmaxParseUtils").attrString(a.value,"value");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a.value,"offset");if(!c.success)return c;a=d("WASmaxParseUtils").attrString(a.value,"currency");return!a.success?a:d("WAResultOrError").makeResult({moneyValue:b.value,moneyOffset:c.value,moneyCurrency:a.value})}g.parseMoneyMixin=a}),98);
__d("WASmaxInMessageDeliverPayNodeTypeMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"pay");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"type",d("WASmaxInMessageDeliverEnums").ENUM_REQUEST_SEND);return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parsePayNodeTypeMixin=a}),98);
__d("WASmaxInMessageDeliverTransactionSyncStatusMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrStringEnum(a,"sync-status",d("WASmaxInMessageDeliverEnums").ENUM_FULL_MISSINGFIELDNOTPARTIAL_PARTIAL);return!a.success?a:d("WAResultOrError").makeResult({syncStatus:a.value})}g.parseTransactionSyncStatusMixin=a}),98);
__d("WASmaxInMessageDeliverGroupDeliverSendPayNodeMixin",["WAResultOrError","WASmaxInMessageDeliverLegacyAmountMixin","WASmaxInMessageDeliverMoneyMixin","WASmaxInMessageDeliverPayNodeTypeMixin","WASmaxInMessageDeliverTransactionSyncStatusMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"amount");if(!b.success)return b;b=d("WASmaxInMessageDeliverMoneyMixin").parseMoneyMixin(a);return!b.success?b:b}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"pay");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"amount",h);if(!b.success)return b;var c=d("WASmaxParseJid").attrUserJid(a,"receiver");if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(a,"transaction-id");if(!e.success)return e;var f=d("WASmaxParseUtils").attrString(a,"id");if(!f.success)return f;var g=d("WASmaxParseJid").attrGroupJid(a,"group");if(!g.success)return g;var i=d("WASmaxInMessageDeliverPayNodeTypeMixin").parsePayNodeTypeMixin(a);if(!i.success)return i;var j=d("WASmaxInMessageDeliverTransactionSyncStatusMixin").parseTransactionSyncStatusMixin(a);if(!j.success)return j;a=d("WASmaxInMessageDeliverLegacyAmountMixin").parseLegacyAmountMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({receiver:c.value,transactionId:e.value,id:f.value,group:g.value},i.value,j.value,a.value,{amount:b.value}))}g.parseGroupDeliverSendPayNodeAmount=h;g.parseGroupDeliverSendPayNodeMixin=a}),98);
__d("WASmaxInMessageDeliverBasePayNodeMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxInMessageDeliverPayNodeTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"pay");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"country");if(!b.success)return b;var c=d("WASmaxParseUtils").attrIntRange(a,"version",0,void 0);if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"is_first_send",d("WASmaxInMessageDeliverEnums").ENUM_0_1);if(!e.success)return e;a=d("WASmaxInMessageDeliverPayNodeTypeMixin").parsePayNodeTypeMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({country:b.value,version:c.value,isFirstSend:e.value},a.value))}g.parseBasePayNodeMixin=a}),98);
__d("WASmaxInMessageDeliverIndividualRequestPayNodeMixin",["WAResultOrError","WASmaxInMessageDeliverBasePayNodeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"pay");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"expiry-ts");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"request-id");if(!c.success)return c;a=d("WASmaxInMessageDeliverBasePayNodeMixin").parseBasePayNodeMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({expiryTs:b.value,requestId:c.value},a.value))}g.parseIndividualRequestPayNodeMixin=a}),98);
__d("WASmaxInMessageDeliverGroupRequestPayNodeMixin",["WAResultOrError","WASmaxInMessageDeliverIndividualRequestPayNodeMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"pay");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"sender");if(!b.success)return b;a=d("WASmaxInMessageDeliverIndividualRequestPayNodeMixin").parseIndividualRequestPayNodeMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({sender:b.value},a.value))}g.parseGroupRequestPayNodeMixin=a}),98);
__d("WASmaxInMessageDeliverGroupRequestOrDeliverSendPayNodeMixinGroup",["WAResultOrError","WASmaxInMessageDeliverGroupDeliverSendPayNodeMixin","WASmaxInMessageDeliverGroupRequestPayNodeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverGroupRequestPayNodeMixin").parseGroupRequestPayNodeMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"GroupRequestPayNode",value:b.value});var c=d("WASmaxInMessageDeliverGroupDeliverSendPayNodeMixin").parseGroupDeliverSendPayNodeMixin(a);return c.success?d("WAResultOrError").makeResult({name:"GroupDeliverSendPayNode",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["GroupRequestPayNode","GroupDeliverSendPayNode"],[b,c])}g.parseGroupRequestOrDeliverSendPayNodeMixinGroup=a}),98);
__d("WASmaxInMessageDeliverGroupDeliverPayNodeMixin",["WAResultOrError","WASmaxInMessageDeliverGroupRequestOrDeliverSendPayNodeMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"pay");if(!b.success)return b;b=d("WASmaxInMessageDeliverGroupRequestOrDeliverSendPayNodeMixinGroup").parseGroupRequestOrDeliverSendPayNodeMixinGroup(a);return!b.success?b:d("WAResultOrError").makeResult({groupRequestOrDeliverSendPayNodeMixinGroup:b.value})}g.parseGroupDeliverPayNodeMixin=a}),98);
__d("WASmaxInMessageDeliverGroupDeliverPayNodeMessageMixin",["WASmaxInMessageDeliverGroupDeliverPayNodeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"pay");if(!b.success)return b;a=d("WASmaxInMessageDeliverGroupDeliverPayNodeMixin").parseGroupDeliverPayNodeMixin(b.value);return!a.success?a:a}g.parseGroupDeliverPayNodeMessageMixin=a}),98);
__d("WASmaxInMessageDeliverBRP2MHPPTransactionMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"is_hpp",d("WASmaxInMessageDeliverEnums").ENUM_0_1);if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"gateway_name");return!a.success?a:d("WAResultOrError").makeResult({isHpp:b.value,gatewayName:a.value})}g.parseBRP2MHPPTransactionMixin=a}),98);
__d("WASmaxInMessageDeliverIncentiveOfferClaimMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"offer_claim");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"offer_id",1,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"id",1,void 0);if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"incentive_payment_id");if(!e.success)return e;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"parent_transaction_id");return!a.success?a:d("WAResultOrError").makeResult({offerId:b.value,id:c.value,incentivePaymentId:e.value,parentTransactionId:a.value})}g.parseIncentiveOfferClaimMixin=a}),98);
__d("WASmaxInMessageDeliverInstallmentMixin",["WAResultOrError","WASmaxInMessageDeliverMoneyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"due_amount");if(!b.success)return b;b=d("WASmaxInMessageDeliverMoneyMixin").parseMoneyMixin(a);return!b.success?b:b}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"interest");if(!b.success)return b;b=d("WASmaxInMessageDeliverMoneyMixin").parseMoneyMixin(a);return!b.success?b:b}function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"installment");if(!a.success)return a;var b=d("WASmaxParseUtils").optionalChildWithTag(a.value,"due_amount",h);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(a.value,"interest",i);if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a.value,"max_count",1,50);if(!e.success)return e;a=d("WASmaxParseUtils").attrIntRange(a.value,"selected_count",1,50);return!a.success?a:d("WAResultOrError").makeResult({installmentMaxCount:e.value,installmentSelectedCount:a.value,installmentDueAmount:b.value,installmentInterest:c.value})}g.parseInstallmentInstallmentDueAmount=h;g.parseInstallmentInstallmentInterest=i;g.parseInstallmentMixin=a}),98);
__d("WASmaxInMessageDeliverBeneficiaryMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"beneficiary");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"name");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"address_line1");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"address_line2");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"address_line3");if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"city");if(!g.success)return g;var h=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"state");if(!h.success)return h;var i=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"phone_number");if(!i.success)return i;var j=d("WASmaxParseUtils").attrString(a,"country");if(!j.success)return j;a=d("WASmaxParseUtils").attrString(a,"postal_code");return!a.success?a:d("WAResultOrError").makeResult({name:b.value,addressLine1:c.value,addressLine2:e.value,addressLine3:f.value,city:g.value,state:h.value,phoneNumber:i.value,country:j.value,postalCode:a.value})}g.parseBeneficiaryMixin=a}),98);
__d("WASmaxInMessageDeliverBeneficiariesMixin",["WAResultOrError","WASmaxInMessageDeliverBeneficiaryMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"beneficiary");if(!b.success)return b;b=d("WASmaxInMessageDeliverBeneficiaryMixin").parseBeneficiaryMixin(a);return!b.success?b:b}function a(a){a=d("WASmaxParseUtils").mapChildrenWithTag(a,"beneficiary",1,5,h);return!a.success?a:d("WAResultOrError").makeResult({beneficiary:a.value})}g.parseBeneficiariesBeneficiary=h;g.parseBeneficiariesMixin=a}),98);
__d("WASmaxInMessageDeliverOrderInPaymentMixin",["WAResultOrError","WASmaxInMessageDeliverBeneficiariesMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"beneficiaries");if(!b.success)return b;b=d("WASmaxInMessageDeliverBeneficiariesMixin").parseBeneficiariesMixin(a);return!b.success?b:b}function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"order");if(!a.success)return a;var b=d("WASmaxParseUtils").optionalChildWithTag(a.value,"beneficiaries",h);if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a.value,"id");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStanzaId,a.value,"message_id");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a.value,"payment_config_id");if(!f.success)return f;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a.value,"type");return!a.success?a:d("WAResultOrError").makeResult({orderId:c.value,orderMessageId:e.value,orderPaymentConfigId:f.value,orderType:a.value,orderBeneficiaries:b.value})}g.parseOrderInPaymentOrderBeneficiaries=h;g.parseOrderInPaymentMixin=a}),98);
__d("WASmaxInMessageDeliverTransactionErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"error-code",1,1e7);if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"error-text");return!a.success?a:d("WAResultOrError").makeResult({errorCode:b.value,errorText:a.value})}g.parseTransactionErrorMixin=a}),98);
__d("WASmaxInMessageDeliverTransactionTypeMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrStringEnum(a,"transaction-type",d("WASmaxInMessageDeliverEnums").ENUM_INCENTIVE_P2M_P2P_PAYOUT);return!a.success?a:d("WAResultOrError").makeResult({transactionType:a.value})}g.parseTransactionTypeMixin=a}),98);
__d("WASmaxInMessageDeliverFullTransactionBaseMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxInMessageDeliverIncentiveOfferClaimMixin","WASmaxInMessageDeliverInstallmentMixin","WASmaxInMessageDeliverMoneyMixin","WASmaxInMessageDeliverOrderInPaymentMixin","WASmaxInMessageDeliverTransactionErrorMixin","WASmaxInMessageDeliverTransactionSyncStatusMixin","WASmaxInMessageDeliverTransactionTypeMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"offer_claim");if(!b.success)return b;b=d("WASmaxInMessageDeliverIncentiveOfferClaimMixin").parseIncentiveOfferClaimMixin(a);return!b.success?b:b}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"amount");if(!b.success)return b;b=d("WASmaxInMessageDeliverMoneyMixin").parseMoneyMixin(a);return!b.success?b:b}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"offer_claim",h);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(a,"amount",i);if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(a,"id");if(!e.success)return e;var f=d("WASmaxParseJid").attrUserJid(a,"sender");if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"sender-alias");if(!g.success)return g;var j=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"sender-name");if(!j.success)return j;var k=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"receiver-name");if(!k.success)return k;var l=d("WASmaxParseJid").attrUserJid(a,"receiver");if(!l.success)return l;var m=d("WASmaxParseUtils").attrString(a,"currency");if(!m.success)return m;var n=d("WASmaxParseUtils").attrString(a,"amount");if(!n.success)return n;var o=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"credential-id");if(!o.success)return o;var p=d("WASmaxParseUtils").attrIntRange(a,"ts",0,void 0);if(!p.success)return p;var q=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"created-ts",0,void 0);if(!q.success)return q;var r=d("WASmaxParseUtils").attrString(a,"status");if(!r.success)return r;var s=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStanzaId,a,"message-id");if(!s.success)return s;var t=d("WASmaxParseUtils").attrIntRange(a,"counter",0,void 0);if(!t.success)return t;var u=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"expiry-ts",0,void 0);if(!u.success)return u;var v=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrGroupJid,a,"group");if(!v.success)return v;var w=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"service",d("WASmaxInMessageDeliverEnums").ENUM_FBPAY_NOVI_P2MLITE_UPI);if(!w.success)return w;var x=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"merchant-name");if(!x.success)return x;var y=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"note");if(!y.success)return y;var z=d("WASmaxInMessageDeliverTransactionErrorMixin").parseTransactionErrorMixin(a),A=d("WASmaxInMessageDeliverTransactionTypeMixin").parseTransactionTypeMixin(a);if(!A.success)return A;var B=d("WASmaxInMessageDeliverTransactionSyncStatusMixin").parseTransactionSyncStatusMixin(a);if(!B.success)return B;var C=d("WASmaxInMessageDeliverOrderInPaymentMixin").parseOrderInPaymentMixin(a);a=d("WASmaxInMessageDeliverInstallmentMixin").parseInstallmentMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({id:e.value,sender:f.value,senderAlias:g.value,senderName:j.value,receiverName:k.value,receiver:l.value,currency:m.value,amount:n.value,credentialId:o.value,ts:p.value,createdTs:q.value,status:r.value,messageId:s.value,counter:t.value,expiryTs:u.value,group:v.value,service:w.value,merchantName:x.value,note:y.value,transactionErrorMixin:z.success?z.value:null},A.value,B.value,{orderInPaymentMixin:C.success?C.value:null,installmentMixin:a.success?a.value:null,offerClaim:b.value,childAmount:c.value}))}g.parseFullTransactionBaseOfferClaim=h;g.parseFullTransactionBaseAmount=i;g.parseFullTransactionBaseMixin=a}),98);
__d("WASmaxInMessageDeliverP2MTransactionProtocolMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"psp_transaction_id");return!b.success?b:d("WAResultOrError").makeResult({pspTransactionId:b.value})}g.parseP2MTransactionProtocolMixin=a}),98);
__d("WASmaxInMessageDeliverPaymentInitiatorMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrStringEnum(a,"payment_initiator",d("WASmaxInMessageDeliverEnums").ENUM_BUYER_SELLER);return!a.success?a:d("WAResultOrError").makeResult({paymentInitiator:a.value})}g.parsePaymentInitiatorMixin=a}),98);
__d("WASmaxInMessageDeliverTransactionNUXReceiverMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"is-nux-receiver",d("WASmaxInMessageDeliverEnums").ENUM_0_1);return!b.success?b:d("WAResultOrError").makeResult({isNuxReceiver:b.value})}g.parseTransactionNUXReceiverMixin=a}),98);
__d("WASmaxInMessageDeliverBRTransactionMixin",["WAResultOrError","WASmaxInMessageDeliverBRP2MHPPTransactionMixin","WASmaxInMessageDeliverFullTransactionBaseMixin","WASmaxInMessageDeliverP2MTransactionProtocolMixin","WASmaxInMessageDeliverPaymentInitiatorMixin","WASmaxInMessageDeliverTransactionNUXReceiverMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxInMessageDeliverFullTransactionBaseMixin").parseFullTransactionBaseMixin(a);if(!b.success)return b;var c=d("WASmaxInMessageDeliverBRP2MHPPTransactionMixin").parseBRP2MHPPTransactionMixin(a),e=d("WASmaxInMessageDeliverP2MTransactionProtocolMixin").parseP2MTransactionProtocolMixin(a),f=d("WASmaxInMessageDeliverTransactionNUXReceiverMixin").parseTransactionNUXReceiverMixin(a);if(!f.success)return f;a=d("WASmaxInMessageDeliverPaymentInitiatorMixin").parsePaymentInitiatorMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{bRP2MHPPTransactionMixin:c.success?c.value:null,p2MTransactionProtocolMixin:e.success?e.value:null},f.value,{paymentInitiatorMixin:a.success?a.value:null}))}g.parseBRTransactionMixin=a}),98);
__d("WASmaxInMessageDeliverCAPITransactionMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"id");if(!b.success)return b;var c=d("WASmaxParseJid").attrUserJid(a,"sender");if(!c.success)return c;a=d("WASmaxParseJid").attrUserJid(a,"receiver");return!a.success?a:d("WAResultOrError").makeResult({id:b.value,sender:c.value,receiver:a.value})}g.parseCAPITransactionMixin=a}),98);
__d("WASmaxInMessageDeliverIDTransactionGoPayMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"onboarding-provider","GO");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"onboarding-provider-id","GO");if(!c.success)return c;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"onboarding-provider-name","GoPay");return!a.success?a:d("WAResultOrError").makeResult({onboardingProvider:b.value,onboardingProviderId:c.value,onboardingProviderName:a.value})}g.parseIDTransactionGoPayMixin=a}),98);
__d("WASmaxInMessageDeliverIDTransactionOttoCashMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"onboarding-provider","OTTO");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"onboarding-provider-id","OTTO");if(!c.success)return c;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"onboarding-provider-name","OttoCash");return!a.success?a:d("WAResultOrError").makeResult({onboardingProvider:b.value,onboardingProviderId:c.value,onboardingProviderName:a.value})}g.parseIDTransactionOttoCashMixin=a}),98);
__d("WASmaxInMessageDeliverIDTransactionOvoMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"onboarding-provider","OVO");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"onboarding-provider-id","OVO");if(!c.success)return c;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"onboarding-provider-name","OVO");return!a.success?a:d("WAResultOrError").makeResult({onboardingProvider:b.value,onboardingProviderId:c.value,onboardingProviderName:a.value})}g.parseIDTransactionOvoMixin=a}),98);
__d("WASmaxInMessageDeliverIDTransactionGoPayOrOttoCashOrOvoMixinGroup",["WAResultOrError","WASmaxInMessageDeliverIDTransactionGoPayMixin","WASmaxInMessageDeliverIDTransactionOttoCashMixin","WASmaxInMessageDeliverIDTransactionOvoMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverIDTransactionGoPayMixin").parseIDTransactionGoPayMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IDTransactionGoPay",value:b.value});var c=d("WASmaxInMessageDeliverIDTransactionOttoCashMixin").parseIDTransactionOttoCashMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IDTransactionOttoCash",value:c.value});var e=d("WASmaxInMessageDeliverIDTransactionOvoMixin").parseIDTransactionOvoMixin(a);return e.success?d("WAResultOrError").makeResult({name:"IDTransactionOvo",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IDTransactionGoPay","IDTransactionOttoCash","IDTransactionOvo"],[b,c,e])}g.parseIDTransactionGoPayOrOttoCashOrOvoMixinGroup=a}),98);
__d("WASmaxInMessageDeliverIDTransactionProtocolMixin",["WAResultOrError","WASmaxInMessageDeliverIDTransactionGoPayOrOttoCashOrOvoMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxInMessageDeliverIDTransactionGoPayOrOttoCashOrOvoMixinGroup").parseIDTransactionGoPayOrOttoCashOrOvoMixinGroup(a);return!b.success?b:d("WAResultOrError").makeResult({iDTransactionGoPayOrOttoCashOrOvoMixinGroup:b.value})}g.parseIDTransactionProtocolMixin=a}),98);
__d("WASmaxInMessageDeliverIDTransactionMixin",["WAResultOrError","WASmaxInMessageDeliverFullTransactionBaseMixin","WASmaxInMessageDeliverIDTransactionProtocolMixin","WASmaxInMessageDeliverTransactionNUXReceiverMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxInMessageDeliverFullTransactionBaseMixin").parseFullTransactionBaseMixin(a);if(!b.success)return b;var c=d("WASmaxInMessageDeliverIDTransactionProtocolMixin").parseIDTransactionProtocolMixin(a);if(!c.success)return c;a=d("WASmaxInMessageDeliverTransactionNUXReceiverMixin").parseTransactionNUXReceiverMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,c.value,a.value))}g.parseIDTransactionMixin=a}),98);
__d("WASmaxInMessageDeliverMXTransactionProtocolMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"bank-transaction-id");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"spei-transaction-id");if(!c.success)return c;a=d("WASmaxParseUtils").attrIntRange(a,"spei-ref-num",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({bankTransactionId:b.value,speiTransactionId:c.value,speiRefNum:a.value})}g.parseMXTransactionProtocolMixin=a}),98);
__d("WASmaxInMessageDeliverMXTransactionMixin",["WAResultOrError","WASmaxInMessageDeliverFullTransactionBaseMixin","WASmaxInMessageDeliverMXTransactionProtocolMixin","WASmaxInMessageDeliverTransactionNUXReceiverMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxInMessageDeliverFullTransactionBaseMixin").parseFullTransactionBaseMixin(a);if(!b.success)return b;var c=d("WASmaxInMessageDeliverMXTransactionProtocolMixin").parseMXTransactionProtocolMixin(a);if(!c.success)return c;a=d("WASmaxInMessageDeliverTransactionNUXReceiverMixin").parseTransactionNUXReceiverMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,c.value,a.value))}g.parseMXTransactionMixin=a}),98);
__d("WASmaxInMessageDeliverP2MLiteTransactionProtocolMixin",["WAResultOrError","WASmaxInMessageDeliverP2MTransactionProtocolMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"psp_receipt_url");if(!b.success)return b;var c=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"service","P2M_LITE");if(!c.success)return c;a=d("WASmaxInMessageDeliverP2MTransactionProtocolMixin").parseP2MTransactionProtocolMixin(a);return d("WAResultOrError").makeResult({pspReceiptUrl:b.value,service:c.value,p2MTransactionProtocolMixin:a.success?a.value:null})}g.parseP2MLiteTransactionProtocolMixin=a}),98);
__d("WASmaxInMessageDeliverP2MLiteTransactionMixin",["WAResultOrError","WASmaxInMessageDeliverFullTransactionBaseMixin","WASmaxInMessageDeliverP2MLiteTransactionProtocolMixin","WASmaxInMessageDeliverTransactionNUXReceiverMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxInMessageDeliverFullTransactionBaseMixin").parseFullTransactionBaseMixin(a);if(!b.success)return b;var c=d("WASmaxInMessageDeliverP2MLiteTransactionProtocolMixin").parseP2MLiteTransactionProtocolMixin(a);if(!c.success)return c;a=d("WASmaxInMessageDeliverTransactionNUXReceiverMixin").parseTransactionNUXReceiverMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,c.value,a.value))}g.parseP2MLiteTransactionMixin=a}),98);
__d("WASmaxInMessageDeliverUPIComplaintMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"complaint");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"complaint-status");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"created-ts",0,void 0);if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"updated-ts",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({complaintStatus:b.value,createdTs:c.value,updatedTs:a.value})}g.parseUPIComplaintMixin=a}),98);
__d("WASmaxInMessageDeliverUPIInternationalFxDetailMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"fx-detail");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"base-amount");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"currency-fx");if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(a,"currency-markup");if(!e.success)return e;a=d("WASmaxParseUtils").attrString(a,"base-currency");return!a.success?a:d("WAResultOrError").makeResult({baseAmount:b.value,currencyFx:c.value,currencyMarkup:e.value,baseCurrency:a.value})}g.parseUPIInternationalFxDetailMixin=a}),98);
__d("WASmaxInMessageDeliverUPIInternationalTransactionDetailMixin",["WAResultOrError","WASmaxInMessageDeliverUPIInternationalFxDetailMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"international-transaction-detail");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"fx-detail");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"invoice-number");if(!a.success)return a;b=d("WASmaxInMessageDeliverUPIInternationalFxDetailMixin").parseUPIInternationalFxDetailMixin(b.value);return!b.success?b:d("WAResultOrError").makeResult({invoiceNumber:a.value,fxDetailUPIInternationalFxDetailMixin:b.value})}g.parseUPIInternationalTransactionDetailMixin=a}),98);
__d("WASmaxInMessageDeliverP2MHybridExternalPaymentMethodMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").attrStringEnum(a,"type",d("WASmaxInMessageDeliverEnums").ENUM_CARD_NETBANKING_UPI_WALLET);if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"name");return!a.success?a:d("WAResultOrError").makeResult({type:b.value,name:a.value})}g.parseP2MHybridExternalPaymentMethodMixin=a}),98);
__d("WASmaxInMessageDeliverUPITransactionProtocolWithP2MHybridMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxInMessageDeliverMoneyMixin","WASmaxInMessageDeliverP2MHybridExternalPaymentMethodMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"offer");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"id");return!b.success?b:d("WAResultOrError").makeResult({id:b.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"external_payment_method");if(!b.success)return b;b=d("WASmaxInMessageDeliverP2MHybridExternalPaymentMethodMixin").parseP2MHybridExternalPaymentMethodMixin(a);return!b.success?b:b}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"offer_amount");if(!b.success)return b;b=d("WASmaxInMessageDeliverMoneyMixin").parseMoneyMixin(a);return!b.success?b:b}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"external_payment_method",i);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(a,"offer_amount",j);if(!c.success)return c;var e=d("WASmaxParseUtils").attrStringEnum(a,"is_p2m_hybrid",d("WASmaxInMessageDeliverEnums").ENUM_0_1);if(!e.success)return e;var f=d("WASmaxParseUtils").attrStringEnum(a,"payment_instrument_type",d("WASmaxInMessageDeliverEnums").ENUM_HPPPAYMENTLINK_UPI);if(!f.success)return f;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"offer",0,Infinity,h);return!a.success?a:d("WAResultOrError").makeResult({isP2mHybrid:e.value,paymentInstrumentType:f.value,externalPaymentMethod:b.value,offerAmount:c.value,offer:a.value})}g.parseUPITransactionProtocolWithP2MHybridOffer=h;g.parseUPITransactionProtocolWithP2MHybridExternalPaymentMethod=i;g.parseUPITransactionProtocolWithP2MHybridOfferAmount=j;g.parseUPITransactionProtocolWithP2MHybridMixin=a}),98);
__d("WASmaxInMessageDeliverFrequencyRuleMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrStringEnum(a,"frequency-rule",d("WASmaxInMessageDeliverEnums").ENUM_ASPRESENTED_BIMONTHLY_DAILY_FORTNIGHTLY_HALFYEARLY_MONTHLY_ONETIME_QUARTERLY_UNKNOWN_WEEKLY_YEARLY);return!a.success?a:d("WAResultOrError").makeResult({frequencyRule:a.value})}g.parseFrequencyRuleMixin=a}),98);
__d("WASmaxInMessageDeliverUPIMandateBaseMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxInMessageDeliverFrequencyRuleMixin","WASmaxInMessageDeliverMoneyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"mandate");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"original-amount");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"mandate-no");if(!c.success)return c;var e=d("WASmaxParseUtils").attrStringEnum(a,"amount-rule",d("WASmaxInMessageDeliverEnums").ENUM_EXACT_MAX);if(!e.success)return e;var f=d("WASmaxParseUtils").attrIntRange(a,"start-ts",0,void 0);if(!f.success)return f;var g=d("WASmaxParseUtils").attrIntRange(a,"end-ts",0,void 0);if(!g.success)return g;var h=d("WASmaxParseUtils").attrStringEnum(a,"is-revocable",d("WASmaxInMessageDeliverEnums").ENUM_0_1);if(!h.success)return h;var i=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"purpose-code");if(!i.success)return i;var j=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"mandate-name");if(!j.success)return j;var k=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"error-code",1,1e7);if(!k.success)return k;b=d("WASmaxInMessageDeliverMoneyMixin").parseMoneyMixin(b.value);if(!b.success)return b;a=d("WASmaxInMessageDeliverFrequencyRuleMixin").parseFrequencyRuleMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({mandateNo:c.value,amountRule:e.value,startTs:f.value,endTs:g.value,isRevocable:h.value,purposeCode:i.value,mandateName:j.value,errorCode:k.value,originalAmountMoneyMixin:b.value},a.value))}g.parseUPIMandateBaseMixin=a}),98);
__d("WASmaxInMessageDeliverUPIMandateUpdateBaseMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxInMessageDeliverMoneyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"mandate-update");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"amount");if(!b.success)return b;var c=d("WASmaxParseUtils").attrIntRange(a,"end-ts",0,void 0);if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(a,"seq-no");if(!e.success)return e;var f=d("WASmaxParseUtils").attrString(a,"mandate-update-info");if(!f.success)return f;var g=d("WASmaxParseUtils").attrStringEnum(a,"status",d("WASmaxInMessageDeliverEnums").ENUM_FAILURE_INIT_SUCCESS);if(!g.success)return g;var h=d("WASmaxParseUtils").attrStringEnum(a,"action",d("WASmaxInMessageDeliverEnums").ENUM_ACCEPT_REJECT_UNKNOWN);if(!h.success)return h;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"error-code",1,1e7);if(!a.success)return a;b=d("WASmaxInMessageDeliverMoneyMixin").parseMoneyMixin(b.value);return!b.success?b:d("WAResultOrError").makeResult({endTs:c.value,seqNo:e.value,mandateUpdateInfo:f.value,status:g.value,action:h.value,errorCode:a.value,amountMoneyMixin:b.value})}g.parseUPIMandateUpdateBaseMixin=a}),98);
__d("WASmaxInMessageDeliverUPIMandateWithUpdateMixin",["WASmaxInMessageDeliverUPIMandateUpdateBaseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"mandate");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"mandate-update");if(!b.success)return b;a=d("WASmaxInMessageDeliverUPIMandateUpdateBaseMixin").parseUPIMandateUpdateBaseMixin(b.value);return!a.success?a:a}g.parseUPIMandateWithUpdateMixin=a}),98);
__d("WASmaxInMessageDeliverUPITransactionWithMandateMixin",["WAResultOrError","WASmaxInMessageDeliverUPIMandateBaseMixin","WASmaxInMessageDeliverUPIMandateWithUpdateMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"mandate");if(!b.success)return b;a=d("WASmaxInMessageDeliverUPIMandateBaseMixin").parseUPIMandateBaseMixin(b.value);if(!a.success)return a;b=d("WASmaxInMessageDeliverUPIMandateWithUpdateMixin").parseUPIMandateWithUpdateMixin(b.value);return d("WAResultOrError").makeResult({mandateUPIMandateBaseMixin:a.value,mandateUPIMandateWithUpdateMixin:b.success?b.value:null})}g.parseUPITransactionWithMandateMixin=a}),98);
__d("WASmaxInMessageDeliverUPITransactionProtocolMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxInMessageDeliverUPIComplaintMixin","WASmaxInMessageDeliverUPIInternationalTransactionDetailMixin","WASmaxInMessageDeliverUPITransactionProtocolWithP2MHybridMixin","WASmaxInMessageDeliverUPITransactionWithMandateMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"complaint");if(!b.success)return b;b=d("WASmaxInMessageDeliverUPIComplaintMixin").parseUPIComplaintMixin(a);return!b.success?b:b}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"international-transaction-detail");if(!b.success)return b;b=d("WASmaxInMessageDeliverUPIInternationalTransactionDetailMixin").parseUPIInternationalTransactionDetailMixin(a);return!b.success?b:b}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"complaint",h);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(a,"international-transaction-detail",i);if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"sender-alias");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"receiver-alias");if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"receiver-name");if(!g.success)return g;var j=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"bank-transaction-id");if(!j.success)return j;var k=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"seq-no");if(!k.success)return k;var l=d("WASmaxParseUtils").attrStringEnum(a,"is_vpa",d("WASmaxInMessageDeliverEnums").ENUM_0_1);if(!l.success)return l;var m=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"ref-url");if(!m.success)return m;var n=d("WASmaxParseUtils").attrStringEnum(a,"is-mandate",d("WASmaxInMessageDeliverEnums").ENUM_0_1);if(!n.success)return n;var o=d("WASmaxParseUtils").attrStringEnum(a,"is-collect",d("WASmaxInMessageDeliverEnums").ENUM_0_1);if(!o.success)return o;var p=d("WASmaxParseUtils").attrStringEnum(a,"nodal",d("WASmaxInMessageDeliverEnums").ENUM_0_1);if(!p.success)return p;var q=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"is-complaint-eligible",d("WASmaxInMessageDeliverEnums").ENUM_0_1);if(!q.success)return q;var r=d("WASmaxInMessageDeliverUPITransactionWithMandateMixin").parseUPITransactionWithMandateMixin(a);a=d("WASmaxInMessageDeliverUPITransactionProtocolWithP2MHybridMixin").parseUPITransactionProtocolWithP2MHybridMixin(a);return d("WAResultOrError").makeResult({senderAlias:e.value,receiverAlias:f.value,receiverName:g.value,bankTransactionId:j.value,seqNo:k.value,isVpa:l.value,refUrl:m.value,isMandate:n.value,isCollect:o.value,nodal:p.value,isComplaintEligible:q.value,uPITransactionWithMandateMixin:r.success?r.value:null,uPITransactionProtocolWithP2MHybridMixin:a.success?a.value:null,complaint:b.value,internationalTransactionDetail:c.value})}g.parseUPITransactionProtocolComplaint=h;g.parseUPITransactionProtocolInternationalTransactionDetail=i;g.parseUPITransactionProtocolMixin=a}),98);
__d("WASmaxInMessageDeliverUPITransactionMixin",["WAResultOrError","WASmaxInMessageDeliverFullTransactionBaseMixin","WASmaxInMessageDeliverUPITransactionProtocolMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxInMessageDeliverFullTransactionBaseMixin").parseFullTransactionBaseMixin(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverUPITransactionProtocolMixin").parseUPITransactionProtocolMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseUPITransactionMixin=a}),98);
__d("WASmaxInMessageDeliverPayTransactions",["WAResultOrError","WASmaxInMessageDeliverBRTransactionMixin","WASmaxInMessageDeliverCAPITransactionMixin","WASmaxInMessageDeliverIDTransactionMixin","WASmaxInMessageDeliverMXTransactionMixin","WASmaxInMessageDeliverP2MLiteTransactionMixin","WASmaxInMessageDeliverUPITransactionMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverUPITransactionMixin").parseUPITransactionMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"UPITransaction",value:b.value});var c=d("WASmaxInMessageDeliverMXTransactionMixin").parseMXTransactionMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"MXTransaction",value:c.value});var e=d("WASmaxInMessageDeliverIDTransactionMixin").parseIDTransactionMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IDTransaction",value:e.value});var f=d("WASmaxInMessageDeliverP2MLiteTransactionMixin").parseP2MLiteTransactionMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"P2MLiteTransaction",value:f.value});var g=d("WASmaxInMessageDeliverBRTransactionMixin").parseBRTransactionMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"BRTransaction",value:g.value});var h=d("WASmaxInMessageDeliverCAPITransactionMixin").parseCAPITransactionMixin(a);return h.success?d("WAResultOrError").makeResult({name:"CAPITransaction",value:h.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["UPITransaction","MXTransaction","IDTransaction","P2MLiteTransaction","BRTransaction","CAPITransaction"],[b,c,e,f,g,h])}g.parsePayTransactions=a}),98);
__d("WASmaxInMessageDeliverPayTransactionAnyMixin",["WAResultOrError","WASmaxInMessageDeliverPayTransactions","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"transaction");if(!b.success)return b;b=d("WASmaxInMessageDeliverPayTransactions").parsePayTransactions(a);return!b.success?b:d("WAResultOrError").makeResult({payTransactions:b.value})}g.parsePayTransactionAnyMixin=a}),98);
__d("WASmaxInMessageDeliverPayTransactionMessageMixin",["WASmaxInMessageDeliverPayTransactionAnyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"transaction");if(!b.success)return b;a=d("WASmaxInMessageDeliverPayTransactionAnyMixin").parsePayTransactionAnyMixin(b.value);return!a.success?a:a}g.parsePayTransactionMessageMixin=a}),98);
__d("WASmaxInMessageDeliverGroupDeliverPayNodeOrPayTransactionMessageMixinGroup",["WAResultOrError","WASmaxInMessageDeliverGroupDeliverPayNodeMessageMixin","WASmaxInMessageDeliverPayTransactionMessageMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverGroupDeliverPayNodeMessageMixin").parseGroupDeliverPayNodeMessageMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"GroupDeliverPayNodeMessage",value:b.value});var c=d("WASmaxInMessageDeliverPayTransactionMessageMixin").parsePayTransactionMessageMixin(a);return c.success?d("WAResultOrError").makeResult({name:"PayTransactionMessage",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["GroupDeliverPayNodeMessage","PayTransactionMessage"],[b,c])}g.parseGroupDeliverPayNodeOrPayTransactionMessageMixinGroup=a}),98);
__d("WASmaxInMessageDeliverContentTypePayGroupMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypePayMixin","WASmaxInMessageDeliverGroupDeliverPayNodeOrPayTransactionMessageMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverContentTypePayMixin").parseContentTypePayMixin(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverGroupDeliverPayNodeOrPayTransactionMessageMixinGroup").parseGroupDeliverPayNodeOrPayTransactionMessageMixinGroup(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{groupDeliverPayNodeOrPayTransactionMessageMixinGroup:a.success?a.value:null}))}g.parseContentTypePayGroupMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypeScheduledCallMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","scheduled-call");if(!a.success)return a;b=d("WASmaxParseUtils").attrStringEnum(b.value,"scheduled_call_type",d("WASmaxInMessageDeliverEnums").ENUM_CREATION_EDIT);return!b.success?b:d("WAResultOrError").makeResult({type:a.value,metaScheduledCallType:b.value})}g.parseContentTypeScheduledCallMixin=a}),98);
__d("WASmaxInMessageDeliverContentDualMixins",["WAResultOrError","WASmaxInMessageDeliverContentTypeEventMixin","WASmaxInMessageDeliverContentTypePayGroupMixin","WASmaxInMessageDeliverContentTypePollCreationMixin","WASmaxInMessageDeliverContentTypePollVoteMixin","WASmaxInMessageDeliverContentTypeReactionMixin","WASmaxInMessageDeliverContentTypeScheduledCallMixin","WASmaxInMessageDeliverContentTypeTextMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverContentTypeTextMixin").parseContentTypeTextMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ContentTypeText",value:b.value});var c=d("WASmaxInMessageDeliverContentTypePayGroupMixin").parseContentTypePayGroupMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"ContentTypePayGroup",value:c.value});var e=d("WASmaxInMessageDeliverContentTypeReactionMixin").parseContentTypeReactionMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"ContentTypeReaction",value:e.value});var f=d("WASmaxInMessageDeliverContentTypePollCreationMixin").parseContentTypePollCreationMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"ContentTypePollCreation",value:f.value});var g=d("WASmaxInMessageDeliverContentTypePollVoteMixin").parseContentTypePollVoteMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"ContentTypePollVote",value:g.value});var h=d("WASmaxInMessageDeliverContentTypeScheduledCallMixin").parseContentTypeScheduledCallMixin(a);if(h.success)return d("WAResultOrError").makeResult({name:"ContentTypeScheduledCall",value:h.value});var i=d("WASmaxInMessageDeliverContentTypeEventMixin").parseContentTypeEventMixin(a);return i.success?d("WAResultOrError").makeResult({name:"ContentTypeEvent",value:i.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ContentTypeText","ContentTypePayGroup","ContentTypeReaction","ContentTypePollCreation","ContentTypePollVote","ContentTypeScheduledCall","ContentTypeEvent"],[b,c,e,f,g,h,i])}g.parseContentDualMixins=a}),98);
__d("WASmaxInMessageDeliverGroupDualEncNonMediaMixin",["WAResultOrError","WASmaxInMessageDeliverContentDualMixins","WASmaxInMessageDeliverEncTypeSenderKeyOrIndividualMixinGroup","WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup").parseEncVersion2Or3OrFutureproofMixinGroup(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverEncTypeSenderKeyOrIndividualMixinGroup").parseEncTypeSenderKeyOrIndividualMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({encVersion2Or3OrFutureproofMixinGroup:b.value,encTypeSenderKeyOrIndividualMixinGroup:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverContentDualMixins").parseContentDualMixins(a);if(!b.success)return b;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"enc",2,2,h);return!a.success?a:d("WAResultOrError").makeResult({contentDualMixins:b.value,enc:a.value})}g.parseGroupDualEncNonMediaEnc=h;g.parseGroupDualEncNonMediaMixin=a}),98);
__d("WASmaxInMessageDeliverGroupDualEncGroupDualEncMediaOrGroupDualEncNonMediaMediaMixinGroup",["WAResultOrError","WASmaxInMessageDeliverGroupDualEncMediaMixin","WASmaxInMessageDeliverGroupDualEncNonMediaMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverGroupDualEncMediaMixin").parseGroupDualEncMediaMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"GroupDualEncMedia",value:b.value});var c=d("WASmaxInMessageDeliverGroupDualEncNonMediaMixin").parseGroupDualEncNonMediaMixin(a);return c.success?d("WAResultOrError").makeResult({name:"GroupDualEncNonMedia",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["GroupDualEncMedia","GroupDualEncNonMedia"],[b,c])}g.parseGroupDualEncGroupDualEncMediaOrGroupDualEncNonMediaMediaMixinGroup=a}),98);
__d("WASmaxInMessageDeliverGroupDualEncMixin",["WAResultOrError","WASmaxInMessageDeliverGroupDualEncGroupDualEncMediaOrGroupDualEncNonMediaMediaMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverGroupDualEncGroupDualEncMediaOrGroupDualEncNonMediaMediaMixinGroup").parseGroupDualEncGroupDualEncMediaOrGroupDualEncNonMediaMediaMixinGroup(a);return!b.success?b:d("WAResultOrError").makeResult({groupDualEncGroupDualEncMediaOrGroupDualEncNonMediaMediaMixinGroup:b.value})}g.parseGroupDualEncMixin=a}),98);
__d("WASmaxInMessageDeliverEncLiveLocationDeprecatedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"mediatype","livelocation");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"duration",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({mediatype:b.value,duration:a.value})}g.parseEncLiveLocationDeprecatedMixin=a}),98);
__d("WASmaxInMessageDeliverEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup",["WAResultOrError","WASmaxInMessageDeliverEncLiveLocationDeprecatedMixin","WASmaxInMessageDeliverEncLiveLocationMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverEncLiveLocationMixin").parseEncLiveLocationMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"EncLiveLocation",value:b.value});var c=d("WASmaxInMessageDeliverEncLiveLocationDeprecatedMixin").parseEncLiveLocationDeprecatedMixin(a);return c.success?d("WAResultOrError").makeResult({name:"EncLiveLocationDeprecated",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["EncLiveLocation","EncLiveLocationDeprecated"],[b,c])}g.parseEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup=a}),98);
__d("WASmaxInMessageDeliverLiveLocationModeMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"liveloc_mode",d("WASmaxInMessageDeliverEnums").ENUM_LID_PN);return!a.success?a:d("WAResultOrError").makeResult({metaLivelocMode:a.value})}g.parseLiveLocationModeMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypeLiveLocationSingleMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeMediaMixin","WASmaxInMessageDeliverEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup","WASmaxInMessageDeliverLiveLocationModeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"enc");if(!b.success)return b;var c=d("WASmaxInMessageDeliverContentTypeMediaMixin").parseContentTypeMediaMixin(a);if(!c.success)return c;a=d("WASmaxInMessageDeliverLiveLocationModeMixin").parseLiveLocationModeMixin(a);b=d("WASmaxInMessageDeliverEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup").parseEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup(b.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},c.value,{liveLocationModeMixin:a.success?a.value:null,encEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup:b.value}))}g.parseContentTypeLiveLocationSingleMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypeProductListMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeMediaMixin","WASmaxInMessageDeliverEncListMixin","WASmaxInMessageDeliverProductListMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"enc");if(!b.success)return b;b=d("WASmaxInMessageDeliverEncListMixin").parseEncListMixin(b.value);if(!b.success)return b;var c=d("WASmaxInMessageDeliverContentTypeMediaMixin").parseContentTypeMediaMixin(a);if(!c.success)return c;a=d("WASmaxInMessageDeliverProductListMixin").parseProductListMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({encEncListMixin:b.value},c.value,a.value))}g.parseContentTypeProductListMixin=a}),98);
__d("WASmaxInMessageDeliverContentSingleMixins",["WAResultOrError","WASmaxInMessageDeliverContentTypeEventMixin","WASmaxInMessageDeliverContentTypeLiveLocationSingleMixin","WASmaxInMessageDeliverContentTypeMediaSingleMixin","WASmaxInMessageDeliverContentTypePayGroupMixin","WASmaxInMessageDeliverContentTypePollCreationMixin","WASmaxInMessageDeliverContentTypePollVoteMixin","WASmaxInMessageDeliverContentTypeProductListMixin","WASmaxInMessageDeliverContentTypeReactionMixin","WASmaxInMessageDeliverContentTypeScheduledCallMixin","WASmaxInMessageDeliverContentTypeTextMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverContentTypeTextMixin").parseContentTypeTextMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ContentTypeText",value:b.value});var c=d("WASmaxInMessageDeliverContentTypeLiveLocationSingleMixin").parseContentTypeLiveLocationSingleMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"ContentTypeLiveLocationSingle",value:c.value});var e=d("WASmaxInMessageDeliverContentTypeMediaSingleMixin").parseContentTypeMediaSingleMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"ContentTypeMediaSingle",value:e.value});var f=d("WASmaxInMessageDeliverContentTypePayGroupMixin").parseContentTypePayGroupMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"ContentTypePayGroup",value:f.value});var g=d("WASmaxInMessageDeliverContentTypeReactionMixin").parseContentTypeReactionMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"ContentTypeReaction",value:g.value});var h=d("WASmaxInMessageDeliverContentTypeProductListMixin").parseContentTypeProductListMixin(a);if(h.success)return d("WAResultOrError").makeResult({name:"ContentTypeProductList",value:h.value});var i=d("WASmaxInMessageDeliverContentTypePollCreationMixin").parseContentTypePollCreationMixin(a);if(i.success)return d("WAResultOrError").makeResult({name:"ContentTypePollCreation",value:i.value});var j=d("WASmaxInMessageDeliverContentTypePollVoteMixin").parseContentTypePollVoteMixin(a);if(j.success)return d("WAResultOrError").makeResult({name:"ContentTypePollVote",value:j.value});var k=d("WASmaxInMessageDeliverContentTypeScheduledCallMixin").parseContentTypeScheduledCallMixin(a);if(k.success)return d("WAResultOrError").makeResult({name:"ContentTypeScheduledCall",value:k.value});var l=d("WASmaxInMessageDeliverContentTypeEventMixin").parseContentTypeEventMixin(a);return l.success?d("WAResultOrError").makeResult({name:"ContentTypeEvent",value:l.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ContentTypeText","ContentTypeLiveLocationSingle","ContentTypeMediaSingle","ContentTypePayGroup","ContentTypeReaction","ContentTypeProductList","ContentTypePollCreation","ContentTypePollVote","ContentTypeScheduledCall","ContentTypeEvent"],[b,c,e,f,g,h,i,j,k,l])}g.parseContentSingleMixins=a}),98);
__d("WASmaxInMessageDeliverBotResponseMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"bot");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStanzaId,a,"edit_target_id");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"sender_timestamp_ms",0,void 0);if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"edit",d("WASmaxInMessageDeliverEnums").ENUM_FIRST_FULL_INNER_LAST);return!a.success?a:d("WAResultOrError").makeResult({editTargetId:b.value,senderTimestampMs:c.value,edit:a.value})}g.parseBotResponseMixin=a}),98);
__d("WASmaxInMessageDeliverEmptyBizMixin",["WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");return!b.success?b:d("WASmaxParseUtils").voidSuccess}g.parseEmptyBizMixin=a}),98);
__d("WASmaxInMessageDeliverEncTypeMessageSecretMessageMixin",["WAResultOrError","WASmaxInMessageDeliverEncPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","msmsg");if(!b.success)return b;a=d("WASmaxInMessageDeliverEncPayloadMixin").parseEncPayloadMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({type:b.value},a.value))}g.parseEncTypeMessageSecretMessageMixin=a}),98);
__d("WASmaxInMessageDeliverEncVersion2OrFutureproofMixinGroup",["WAResultOrError","WASmaxInMessageDeliverEncVersion2Mixin","WASmaxInMessageDeliverEncVersionFutureproofMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverEncVersion2Mixin").parseEncVersion2Mixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"EncVersion2",value:b.value});var c=d("WASmaxInMessageDeliverEncVersionFutureproofMixin").parseEncVersionFutureproofMixin(a);return c.success?d("WAResultOrError").makeResult({name:"EncVersionFutureproof",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["EncVersion2","EncVersionFutureproof"],[b,c])}g.parseEncVersion2OrFutureproofMixinGroup=a}),98);
__d("WASmaxInMessageDeliverMessageTargetMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"meta");if(!b.success)return b;b=d("WASmaxParseUtils").attrStanzaId(a,"target_id");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"target_sender_jid");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrJidEnum,a,"target_chat_jid",d("WASmaxInMessageDeliverEnums").GROUPJID_USERJID);return!a.success?a:d("WAResultOrError").makeResult({targetId:b.value,targetSenderJid:c.value,targetChatJid:a.value})}g.parseMessageTargetMixin=a}),98);
__d("WASmaxInMessageDeliverBotResponseMessageMixin",["WAResultOrError","WASmaxInMessageDeliverBotResponseMixin","WASmaxInMessageDeliverEmptyBizMixin","WASmaxInMessageDeliverEncTypeMessageSecretMessageMixin","WASmaxInMessageDeliverEncVersion2OrFutureproofMixinGroup","WASmaxInMessageDeliverMessageTargetMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"bot");if(!b.success)return b;var c=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!c.success)return c;var e=d("WASmaxParseUtils").flattenedChildWithTag(a,"enc");if(!e.success)return e;b=d("WASmaxInMessageDeliverBotResponseMixin").parseBotResponseMixin(b.value);if(!b.success)return b;c=d("WASmaxInMessageDeliverMessageTargetMixin").parseMessageTargetMixin(c.value);if(!c.success)return c;var f=d("WASmaxInMessageDeliverEncTypeMessageSecretMessageMixin").parseEncTypeMessageSecretMessageMixin(e.value);if(!f.success)return f;a=d("WASmaxInMessageDeliverEmptyBizMixin").parseEmptyBizMixin(a);e=d("WASmaxInMessageDeliverEncVersion2OrFutureproofMixinGroup").parseEncVersion2OrFutureproofMixinGroup(e.value);return!e.success?e:d("WAResultOrError").makeResult({botBotResponseMixin:b.value,metaMessageTargetMixin:c.value,encEncTypeMessageSecretMessageMixin:f.value,hasEmptyBizMixin:a.success,encEncVersion2OrFutureproofMixinGroup:e.value})}g.parseBotResponseMessageMixin=a}),98);
__d("WASmaxInMessageDeliverEncMediaTypeDeprecatedMixin",["WAResultOrError","WASmaxInMessageDeliverAvatarStickerTypeMixin","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"enc");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"mediatype",d("WASmaxInMessageDeliverEnums").ENUM_AUDIO_AVATARSTICKER_BUTTONSRESPONSE_CATALOGLINK_CONTACT_CONTACTARRAY_DOCUMENT_GIF_HISTORY_IMAGE_LISTRESPONSE_LOCATION_NATIVEFLOWRESPONSE_ORDER_PRODUCT_PRODUCTLINK_PTT_PTV_STICKER_URL_VCARD_VIDEO_XMA);if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"native_flow_name",d("WASmaxInMessageDeliverEnums").ENUM_ADDRESSMESSAGE_GALAXYMESSAGE);if(!c.success)return c;a=d("WASmaxInMessageDeliverAvatarStickerTypeMixin").parseAvatarStickerTypeMixin(a);return d("WAResultOrError").makeResult({mediatype:b.value,nativeFlowName:c.value,avatarStickerTypeMixin:a.success?a.value:null})}g.parseEncMediaTypeDeprecatedMixin=a}),98);
__d("WASmaxInMessageDeliverGroupRegularMixin",["WAResultOrError","WASmaxInMessageDeliverEncMediaTypeDeprecatedMixin","WASmaxInMessageDeliverEncTypeIndividualOrSenderKeyMixinGroup","WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"enc");if(!b.success)return b;a=d("WASmaxInMessageDeliverEncMediaTypeDeprecatedMixin").parseEncMediaTypeDeprecatedMixin(b.value);var c=d("WASmaxInMessageDeliverEncVersion2Or3OrFutureproofMixinGroup").parseEncVersion2Or3OrFutureproofMixinGroup(b.value);if(!c.success)return c;b=d("WASmaxInMessageDeliverEncTypeIndividualOrSenderKeyMixinGroup").parseEncTypeIndividualOrSenderKeyMixinGroup(b.value);return!b.success?b:d("WAResultOrError").makeResult({encEncMediaTypeDeprecatedMixin:a.success?a.value:null,encEncVersion2Or3OrFutureproofMixinGroup:c.value,encEncTypeIndividualOrSenderKeyMixinGroup:b.value})}g.parseGroupRegularMixin=a}),98);
__d("WASmaxInMessageDeliverBypassedMixin",["WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"bypassed");return!b.success?b:d("WASmaxParseUtils").voidSuccess}g.parseBypassedMixin=a}),98);
__d("WASmaxInMessageDeliverGroupRetryMixin",["WAResultOrError","WASmaxInMessageDeliverBypassedMixin","WASmaxInMessageDeliverRetryMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverRetryMixin").parseRetryMixin(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverBypassedMixin").parseBypassedMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{hasBypassedMixin:a.success}))}g.parseGroupRetryMixin=a}),98);
__d("WASmaxInMessageDeliverGroupRetryOrBotResponseMessageOrGroupRegularMixinGroup",["WAResultOrError","WASmaxInMessageDeliverBotResponseMessageMixin","WASmaxInMessageDeliverGroupRegularMixin","WASmaxInMessageDeliverGroupRetryMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverGroupRetryMixin").parseGroupRetryMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"GroupRetry",value:b.value});var c=d("WASmaxInMessageDeliverBotResponseMessageMixin").parseBotResponseMessageMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"BotResponseMessage",value:c.value});var e=d("WASmaxInMessageDeliverGroupRegularMixin").parseGroupRegularMixin(a);return e.success?d("WAResultOrError").makeResult({name:"GroupRegular",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["GroupRetry","BotResponseMessage","GroupRegular"],[b,c,e])}g.parseGroupRetryOrBotResponseMessageOrGroupRegularMixinGroup=a}),98);
__d("WASmaxInMessageDeliverGroupSingleEncMixin",["WAResultOrError","WASmaxInMessageDeliverContentSingleMixins","WASmaxInMessageDeliverGroupRetryOrBotResponseMessageOrGroupRegularMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverContentSingleMixins").parseContentSingleMixins(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverGroupRetryOrBotResponseMessageOrGroupRegularMixinGroup").parseGroupRetryOrBotResponseMessageOrGroupRegularMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({contentSingleMixins:b.value,groupRetryOrBotResponseMessageOrGroupRegularMixinGroup:a.value})}g.parseGroupSingleEncMixin=a}),98);
__d("WASmaxInMessageDeliverGroupDualOrSingleEncMixinGroup",["WAResultOrError","WASmaxInMessageDeliverGroupDualEncMixin","WASmaxInMessageDeliverGroupSingleEncMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverGroupDualEncMixin").parseGroupDualEncMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"GroupDualEnc",value:b.value});var c=d("WASmaxInMessageDeliverGroupSingleEncMixin").parseGroupSingleEncMixin(a);return c.success?d("WAResultOrError").makeResult({name:"GroupSingleEnc",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["GroupDualEnc","GroupSingleEnc"],[b,c])}g.parseGroupDualOrSingleEncMixinGroup=a}),98);
__d("WASmaxInMessageDeliverGroupEphemeralMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"expiration",0,2147483647);return!b.success?b:d("WAResultOrError").makeResult({expiration:b.value})}g.parseGroupEphemeralMixin=a}),98);
__d("WASmaxInMessageDeliverMessagePinMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","2");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseMessagePinMixin=a}),98);
__d("WASmaxInMessageDeliverGroupEditMixins",["WAResultOrError","WASmaxInMessageDeliverAdminRevokeMixin","WASmaxInMessageDeliverGroupEphemeralMixin","WASmaxInMessageDeliverMessageEditMixin","WASmaxInMessageDeliverMessagePinMixin","WASmaxInMessageDeliverRevokeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverMessageEditMixin").parseMessageEditMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"MessageEdit",value:b.value});var c=d("WASmaxInMessageDeliverMessagePinMixin").parseMessagePinMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"MessagePin",value:c.value});var e=d("WASmaxInMessageDeliverRevokeMixin").parseRevokeMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"Revoke",value:e.value});var f=d("WASmaxInMessageDeliverAdminRevokeMixin").parseAdminRevokeMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"AdminRevoke",value:f.value});var g=d("WASmaxInMessageDeliverGroupEphemeralMixin").parseGroupEphemeralMixin(a);return g.success?d("WAResultOrError").makeResult({name:"GroupEphemeral",value:g.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["MessageEdit","MessagePin","Revoke","AdminRevoke","GroupEphemeral"],[b,c,e,f,g])}g.parseGroupEditMixins=a}),98);
__d("WASmaxInMessageDeliverParticipantLIDMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"participant_lid");return!b.success?b:d("WAResultOrError").makeResult({participantLid:b.value})}g.parseParticipantLIDMixin=a}),98);
__d("WASmaxInMessageDeliverParticipantPNMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"participant_pn");return!b.success?b:d("WAResultOrError").makeResult({participantPn:b.value})}g.parseParticipantPNMixin=a}),98);
__d("WASmaxInMessageDeliverParticipantLIDOrPNMixinGroup",["WAResultOrError","WASmaxInMessageDeliverParticipantLIDMixin","WASmaxInMessageDeliverParticipantPNMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverParticipantLIDMixin").parseParticipantLIDMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ParticipantLID",value:b.value});var c=d("WASmaxInMessageDeliverParticipantPNMixin").parseParticipantPNMixin(a);return c.success?d("WAResultOrError").makeResult({name:"ParticipantPN",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ParticipantLID","ParticipantPN"],[b,c])}g.parseParticipantLIDOrPNMixinGroup=a}),98);
__d("WASmaxInMessageDeliverThreadMsgMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").attrStanzaId(b.value,"thread_msg_id");if(!a.success)return a;b=d("WASmaxParseJid").attrUserJid(b.value,"thread_msg_sender_jid");return!b.success?b:d("WAResultOrError").makeResult({metaThreadMsgId:a.value,metaThreadMsgSenderJid:b.value})}g.parseThreadMsgMixin=a}),98);
__d("WASmaxInMessageDeliverToProxyAccountMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"actual_to");return!b.success?b:d("WAResultOrError").makeResult({actualTo:b.value})}g.parseToProxyAccountMixin=a}),98);
__d("WASmaxInMessageDeliverGroupMixin",["WAResultOrError","WASmaxInMessageDeliverAppdataMetaAttributeMixin","WASmaxInMessageDeliverBotThreadIDMixin","WASmaxInMessageDeliverDisplayNameMixin","WASmaxInMessageDeliverEnums","WASmaxInMessageDeliverFanoutCountMixin","WASmaxInMessageDeliverGroupAddressingModeMixin","WASmaxInMessageDeliverGroupDualOrSingleEncMixinGroup","WASmaxInMessageDeliverGroupEditMixins","WASmaxInMessageDeliverParticipantLIDOrPNMixinGroup","WASmaxInMessageDeliverThreadMsgMixin","WASmaxInMessageDeliverToProxyAccountMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseJid").attrGroupJid(a,"from");if(!b.success)return b;var c=d("WASmaxParseJid").attrJidEnum(a,"participant",d("WASmaxInMessageDeliverEnums").DEVICEJID_DEVICEJID);if(!c.success)return c;var e=d("WASmaxInMessageDeliverFanoutCountMixin").parseFanoutCountMixin(a),f=d("WASmaxInMessageDeliverDisplayNameMixin").parseDisplayNameMixin(a),g=d("WASmaxInMessageDeliverGroupAddressingModeMixin").parseGroupAddressingModeMixin(a),h=d("WASmaxInMessageDeliverToProxyAccountMixin").parseToProxyAccountMixin(a),i=d("WASmaxInMessageDeliverBotThreadIDMixin").parseBotThreadIDMixin(a),j=d("WASmaxInMessageDeliverThreadMsgMixin").parseThreadMsgMixin(a),k=d("WASmaxInMessageDeliverAppdataMetaAttributeMixin").parseAppdataMetaAttributeMixin(a),l=d("WASmaxInMessageDeliverGroupDualOrSingleEncMixinGroup").parseGroupDualOrSingleEncMixinGroup(a);if(!l.success)return l;var m=d("WASmaxInMessageDeliverGroupEditMixins").parseGroupEditMixins(a);a=d("WASmaxInMessageDeliverParticipantLIDOrPNMixinGroup").parseParticipantLIDOrPNMixinGroup(a);return d("WAResultOrError").makeResult({from:b.value,participant:c.value,fanoutCountMixin:e.success?e.value:null,displayNameMixin:f.success?f.value:null,groupAddressingModeMixin:g.success?g.value:null,toProxyAccountMixin:h.success?h.value:null,botThreadIDMixin:i.success?i.value:null,threadMsgMixin:j.success?j.value:null,appdataMetaAttributeMixin:k.success?k.value:null,groupDualOrSingleEncMixinGroup:l.value,groupEditMixins:m.success?m.value:null,participantLIDOrPNMixinGroup:a.success?a.value:null})}g.parseGroupMixin=a}),98);
__d("WASmaxInMessageDeliverBusinessBotMessageFeedbackRequestedMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"bot");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"feedback_requested",d("WASmaxInMessageDeliverEnums").ENUM_0_1);return!a.success?a:d("WAResultOrError").makeResult({botFeedbackRequested:a.value})}g.parseBusinessBotMessageFeedbackRequestedMixin=a}),98);
__d("WASmaxInMessageDeliverBusinessBotMessageMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"bot");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"biz_bot",d("WASmaxInMessageDeliverEnums").ENUM_1_3);return!a.success?a:d("WAResultOrError").makeResult({botBizBot:a.value})}g.parseBusinessBotMessageMixin=a}),98);
__d("WASmaxInMessageDeliverSingleSelectListMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"list");if(!a.success)return a;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a.value,"type","single_select");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a.value,"v",d("WASmaxInMessageDeliverEnums").ENUM_1_2);return!a.success?a:d("WAResultOrError").makeResult({bizListType:b.value,bizListV:a.value})}g.parseSingleSelectListMixin=a}),98);
__d("WASmaxInMessageDeliverSingleSelectOrProductListMixinGroup",["WAResultOrError","WASmaxInMessageDeliverProductListMixin","WASmaxInMessageDeliverSingleSelectListMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverSingleSelectListMixin").parseSingleSelectListMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"SingleSelectList",value:b.value});var c=d("WASmaxInMessageDeliverProductListMixin").parseProductListMixin(a);return c.success?d("WAResultOrError").makeResult({name:"ProductList",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["SingleSelectList","ProductList"],[b,c])}g.parseSingleSelectOrProductListMixinGroup=a}),98);
__d("WASmaxInMessageDeliverContentTypeListMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeMediaMixin","WASmaxInMessageDeliverEncListMixin","WASmaxInMessageDeliverSingleSelectOrProductListMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"enc");if(!b.success)return b;b=d("WASmaxInMessageDeliverEncListMixin").parseEncListMixin(b.value);if(!b.success)return b;var c=d("WASmaxInMessageDeliverContentTypeMediaMixin").parseContentTypeMediaMixin(a);if(!c.success)return c;a=d("WASmaxInMessageDeliverSingleSelectOrProductListMixinGroup").parseSingleSelectOrProductListMixinGroup(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({encEncListMixin:b.value},c.value,{singleSelectOrProductListMixinGroup:a.success?a.value:null}))}g.parseContentTypeListMixin=a}),98);
__d("WASmaxInMessageDeliverIndividualDeliverPayNodeMixin",["WASmaxInMessageDeliverIndividualRequestPayNodeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"pay");if(!b.success)return b;b=d("WASmaxInMessageDeliverIndividualRequestPayNodeMixin").parseIndividualRequestPayNodeMixin(a);return!b.success?b:b}g.parseIndividualDeliverPayNodeMixin=a}),98);
__d("WASmaxInMessageDeliverIndividualDeliverPayNodeMessageMixin",["WASmaxInMessageDeliverIndividualDeliverPayNodeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"pay");if(!b.success)return b;a=d("WASmaxInMessageDeliverIndividualDeliverPayNodeMixin").parseIndividualDeliverPayNodeMixin(b.value);return!a.success?a:a}g.parseIndividualDeliverPayNodeMessageMixin=a}),98);
__d("WASmaxInMessageDeliverIndividualDeliverPayNodeOrPayTransactionMessageMixinGroup",["WAResultOrError","WASmaxInMessageDeliverIndividualDeliverPayNodeMessageMixin","WASmaxInMessageDeliverPayTransactionMessageMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverIndividualDeliverPayNodeMessageMixin").parseIndividualDeliverPayNodeMessageMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IndividualDeliverPayNodeMessage",value:b.value});var c=d("WASmaxInMessageDeliverPayTransactionMessageMixin").parsePayTransactionMessageMixin(a);return c.success?d("WAResultOrError").makeResult({name:"PayTransactionMessage",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IndividualDeliverPayNodeMessage","PayTransactionMessage"],[b,c])}g.parseIndividualDeliverPayNodeOrPayTransactionMessageMixinGroup=a}),98);
__d("WASmaxInMessageDeliverContentTypePayIndividualMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypePayMixin","WASmaxInMessageDeliverIndividualDeliverPayNodeOrPayTransactionMessageMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverContentTypePayMixin").parseContentTypePayMixin(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverIndividualDeliverPayNodeOrPayTransactionMessageMixinGroup").parseIndividualDeliverPayNodeOrPayTransactionMessageMixinGroup(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{individualDeliverPayNodeOrPayTransactionMessageMixinGroup:a.success?a.value:null}))}g.parseContentTypePayIndividualMixin=a}),98);
__d("WASmaxInMessageDeliverContentAvailableMixins",["WAResultOrError","WASmaxInMessageDeliverContentTypeListMixin","WASmaxInMessageDeliverContentTypeLiveLocationSingleMixin","WASmaxInMessageDeliverContentTypeMediaSingleMixin","WASmaxInMessageDeliverContentTypeMedianotifyMixin","WASmaxInMessageDeliverContentTypePayIndividualMixin","WASmaxInMessageDeliverContentTypePollCreationMixin","WASmaxInMessageDeliverContentTypePollVoteMixin","WASmaxInMessageDeliverContentTypeReactionMixin","WASmaxInMessageDeliverContentTypeTextMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverContentTypeTextMixin").parseContentTypeTextMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ContentTypeText",value:b.value});var c=d("WASmaxInMessageDeliverContentTypeListMixin").parseContentTypeListMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"ContentTypeList",value:c.value});var e=d("WASmaxInMessageDeliverContentTypeLiveLocationSingleMixin").parseContentTypeLiveLocationSingleMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"ContentTypeLiveLocationSingle",value:e.value});var f=d("WASmaxInMessageDeliverContentTypeMediaSingleMixin").parseContentTypeMediaSingleMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"ContentTypeMediaSingle",value:f.value});var g=d("WASmaxInMessageDeliverContentTypePayIndividualMixin").parseContentTypePayIndividualMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"ContentTypePayIndividual",value:g.value});var h=d("WASmaxInMessageDeliverContentTypeReactionMixin").parseContentTypeReactionMixin(a);if(h.success)return d("WAResultOrError").makeResult({name:"ContentTypeReaction",value:h.value});var i=d("WASmaxInMessageDeliverContentTypePollCreationMixin").parseContentTypePollCreationMixin(a);if(i.success)return d("WAResultOrError").makeResult({name:"ContentTypePollCreation",value:i.value});var j=d("WASmaxInMessageDeliverContentTypePollVoteMixin").parseContentTypePollVoteMixin(a);if(j.success)return d("WAResultOrError").makeResult({name:"ContentTypePollVote",value:j.value});var k=d("WASmaxInMessageDeliverContentTypeMedianotifyMixin").parseContentTypeMedianotifyMixin(a);return k.success?d("WAResultOrError").makeResult({name:"ContentTypeMedianotify",value:k.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ContentTypeText","ContentTypeList","ContentTypeLiveLocationSingle","ContentTypeMediaSingle","ContentTypePayIndividual","ContentTypeReaction","ContentTypePollCreation","ContentTypePollVote","ContentTypeMedianotify"],[b,c,e,f,g,h,i,j,k])}g.parseContentAvailableMixins=a}),98);
__d("WASmaxInMessageDeliverRetryOrIndividualRegularOrBotResponseMessageMixinGroup",["WAResultOrError","WASmaxInMessageDeliverBotResponseMessageMixin","WASmaxInMessageDeliverIndividualRegularMixin","WASmaxInMessageDeliverRetryMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverRetryMixin").parseRetryMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"Retry",value:b.value});var c=d("WASmaxInMessageDeliverIndividualRegularMixin").parseIndividualRegularMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IndividualRegular",value:c.value});var e=d("WASmaxInMessageDeliverBotResponseMessageMixin").parseBotResponseMessageMixin(a);return e.success?d("WAResultOrError").makeResult({name:"BotResponseMessage",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Retry","IndividualRegular","BotResponseMessage"],[b,c,e])}g.parseRetryOrIndividualRegularOrBotResponseMessageMixinGroup=a}),98);
__d("WASmaxInMessageDeliverAvailableMixin",["WAResultOrError","WASmaxInMessageDeliverBusinessBotMessageFeedbackRequestedMixin","WASmaxInMessageDeliverBusinessBotMessageMixin","WASmaxInMessageDeliverContentAvailableMixins","WASmaxInMessageDeliverRetryOrIndividualRegularOrBotResponseMessageMixinGroup","WASmaxInMessageDeliverRevokeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"enc");if(!b.success)return b;b=d("WASmaxInMessageDeliverRevokeMixin").parseRevokeMixin(a);var c=d("WASmaxInMessageDeliverBusinessBotMessageMixin").parseBusinessBotMessageMixin(a),e=d("WASmaxInMessageDeliverBusinessBotMessageFeedbackRequestedMixin").parseBusinessBotMessageFeedbackRequestedMixin(a),f=d("WASmaxInMessageDeliverRetryOrIndividualRegularOrBotResponseMessageMixinGroup").parseRetryOrIndividualRegularOrBotResponseMessageMixinGroup(a);if(!f.success)return f;a=d("WASmaxInMessageDeliverContentAvailableMixins").parseContentAvailableMixins(a);return!a.success?a:d("WAResultOrError").makeResult({revokeMixin:b.success?b.value:null,businessBotMessageMixin:c.success?c.value:null,businessBotMessageFeedbackRequestedMixin:e.success?e.value:null,retryOrIndividualRegularOrBotResponseMessageMixinGroup:f.value,contentAvailableMixins:a.value})}g.parseAvailableMixin=a}),98);
__d("WASmaxInMessageDeliverContentUnavailableMixins",["WAResultOrError","WASmaxInMessageDeliverContentTypeMediaMixin","WASmaxInMessageDeliverContentTypePayIndividualMixin","WASmaxInMessageDeliverContentTypePollCreationMixin","WASmaxInMessageDeliverContentTypePollVoteMixin","WASmaxInMessageDeliverContentTypeReactionMixin","WASmaxInMessageDeliverContentTypeTextMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverContentTypeTextMixin").parseContentTypeTextMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ContentTypeText",value:b.value});var c=d("WASmaxInMessageDeliverContentTypeMediaMixin").parseContentTypeMediaMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"ContentTypeMedia",value:c.value});var e=d("WASmaxInMessageDeliverContentTypePayIndividualMixin").parseContentTypePayIndividualMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"ContentTypePayIndividual",value:e.value});var f=d("WASmaxInMessageDeliverContentTypeReactionMixin").parseContentTypeReactionMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"ContentTypeReaction",value:f.value});var g=d("WASmaxInMessageDeliverContentTypePollCreationMixin").parseContentTypePollCreationMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"ContentTypePollCreation",value:g.value});var h=d("WASmaxInMessageDeliverContentTypePollVoteMixin").parseContentTypePollVoteMixin(a);return h.success?d("WAResultOrError").makeResult({name:"ContentTypePollVote",value:h.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ContentTypeText","ContentTypeMedia","ContentTypePayIndividual","ContentTypeReaction","ContentTypePollCreation","ContentTypePollVote"],[b,c,e,f,g,h])}g.parseContentUnavailableMixins=a}),98);
__d("WASmaxInMessageDeliverUnavailableMixin",["WAResultOrError","WASmaxInMessageDeliverContentUnavailableMixins","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"unavailable");if(!b.success)return b;b=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,b.value,"hosted","true");if(!b.success)return b;var c=d("WASmaxInMessageDeliverContentUnavailableMixins").parseContentUnavailableMixins(a);if(!c.success)return c;a=d("WASmaxParseUtils").countChildrenWithTag(a,"enc",0,Infinity,d("WAResultOrError").makeResult);return!a.success?a:d("WAResultOrError").makeResult({unavailableHosted:b.value,contentUnavailableMixins:c.value,countEnc:a.value})}g.parseUnavailableMixin=a}),98);
__d("WASmaxInMessageDeliverAvailableOrUnavailableMixinGroup",["WAResultOrError","WASmaxInMessageDeliverAvailableMixin","WASmaxInMessageDeliverUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverAvailableMixin").parseAvailableMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"Available",value:b.value});var c=d("WASmaxInMessageDeliverUnavailableMixin").parseUnavailableMixin(a);return c.success?d("WAResultOrError").makeResult({name:"Unavailable",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Available","Unavailable"],[b,c])}g.parseAvailableOrUnavailableMixinGroup=a}),98);
__d("WASmaxInMessageDeliverBotLocaleMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"locale");return!b.success?b:d("WAResultOrError").makeResult({locale:b.value})}g.parseBotLocaleMixin=a}),98);
__d("WASmaxInMessageDeliverGroupInviteTargetMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseJid").attrGroupJid(b.value,"group_invite");return!a.success?a:d("WAResultOrError").makeResult({metaGroupInvite:a.value})}g.parseGroupInviteTargetMixin=a}),98);
__d("WASmaxInMessageDeliverLidChatOriginMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"origin",d("WASmaxInMessageDeliverEnums").ENUM_CTWA_USERNAME);if(!a.success)return a;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,b.value,"share_pn",d("WASmaxInMessageDeliverEnums").ENUM_FALSE_TRUE);return!b.success?b:d("WAResultOrError").makeResult({metaOrigin:a.value,metaSharePn:b.value})}g.parseLidChatOriginMixin=a}),98);
__d("WASmaxInMessageDeliverMessageEditOrMessagePinOrRevokeMixinGroup",["WAResultOrError","WASmaxInMessageDeliverMessageEditMixin","WASmaxInMessageDeliverMessagePinMixin","WASmaxInMessageDeliverRevokeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverMessageEditMixin").parseMessageEditMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"MessageEdit",value:b.value});var c=d("WASmaxInMessageDeliverMessagePinMixin").parseMessagePinMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"MessagePin",value:c.value});var e=d("WASmaxInMessageDeliverRevokeMixin").parseRevokeMixin(a);return e.success?d("WAResultOrError").makeResult({name:"Revoke",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["MessageEdit","MessagePin","Revoke"],[b,c,e])}g.parseMessageEditOrMessagePinOrRevokeMixinGroup=a}),98);
__d("WASmaxInMessageDeliverPeerRecipientPNMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"peer_recipient_pn");return!b.success?b:d("WAResultOrError").makeResult({peerRecipientPn:b.value})}g.parsePeerRecipientPNMixin=a}),98);
__d("WASmaxInMessageDeliverRecipientDisplayNameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"recipient_display_name");return!b.success?b:d("WAResultOrError").makeResult({recipientDisplayName:b.value})}g.parseRecipientDisplayNameMixin=a}),98);
__d("WASmaxInMessageDeliverRecipientLIDMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"recipient_lid");return!b.success?b:d("WAResultOrError").makeResult({recipientLid:b.value})}g.parseRecipientLIDMixin=a}),98);
__d("WASmaxInMessageDeliverRecipientPNMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"recipient_pn");return!b.success?b:d("WAResultOrError").makeResult({recipientPn:b.value})}g.parseRecipientPNMixin=a}),98);
__d("WASmaxInMessageDeliverRecipientUsernameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"recipient_username");return!b.success?b:d("WAResultOrError").makeResult({recipientUsername:b.value})}g.parseRecipientUsernameMixin=a}),98);
__d("WASmaxInMessageDeliverRecipientLIDOrRecipientPNOrPeerRecipientPNOrRecipientDisplayNameOrRecipientUsernameMixinGroup",["WAResultOrError","WASmaxInMessageDeliverPeerRecipientPNMixin","WASmaxInMessageDeliverRecipientDisplayNameMixin","WASmaxInMessageDeliverRecipientLIDMixin","WASmaxInMessageDeliverRecipientPNMixin","WASmaxInMessageDeliverRecipientUsernameMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverRecipientLIDMixin").parseRecipientLIDMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"RecipientLID",value:b.value});var c=d("WASmaxInMessageDeliverRecipientPNMixin").parseRecipientPNMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"RecipientPN",value:c.value});var e=d("WASmaxInMessageDeliverPeerRecipientPNMixin").parsePeerRecipientPNMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"PeerRecipientPN",value:e.value});var f=d("WASmaxInMessageDeliverRecipientDisplayNameMixin").parseRecipientDisplayNameMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"RecipientDisplayName",value:f.value});var g=d("WASmaxInMessageDeliverRecipientUsernameMixin").parseRecipientUsernameMixin(a);return g.success?d("WAResultOrError").makeResult({name:"RecipientUsername",value:g.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["RecipientLID","RecipientPN","PeerRecipientPN","RecipientDisplayName","RecipientUsername"],[b,c,e,f,g])}g.parseRecipientLIDOrRecipientPNOrPeerRecipientPNOrRecipientDisplayNameOrRecipientUsernameMixinGroup=a}),98);
__d("WASmaxInMessageDeliverRecipientMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"recipient");return!b.success?b:d("WAResultOrError").makeResult({recipient:b.value})}g.parseRecipientMixin=a}),98);
__d("WASmaxInMessageDeliverSenderLIDMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"sender_lid");return!b.success?b:d("WAResultOrError").makeResult({senderLid:b.value})}g.parseSenderLIDMixin=a}),98);
__d("WASmaxInMessageDeliverSenderPNMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"sender_pn");return!b.success?b:d("WAResultOrError").makeResult({senderPn:b.value})}g.parseSenderPNMixin=a}),98);
__d("WASmaxInMessageDeliverSenderUsernameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"username");return!b.success?b:d("WAResultOrError").makeResult({username:b.value})}g.parseSenderUsernameMixin=a}),98);
__d("WASmaxInMessageDeliverSenderPNOrLIDOrUsernameMixinGroup",["WAResultOrError","WASmaxInMessageDeliverSenderLIDMixin","WASmaxInMessageDeliverSenderPNMixin","WASmaxInMessageDeliverSenderUsernameMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverSenderPNMixin").parseSenderPNMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"SenderPN",value:b.value});var c=d("WASmaxInMessageDeliverSenderLIDMixin").parseSenderLIDMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"SenderLID",value:c.value});var e=d("WASmaxInMessageDeliverSenderUsernameMixin").parseSenderUsernameMixin(a);return e.success?d("WAResultOrError").makeResult({name:"SenderUsername",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["SenderPN","SenderLID","SenderUsername"],[b,c,e])}g.parseSenderPNOrLIDOrUsernameMixinGroup=a}),98);
__d("WASmaxInMessageDeliverThreadTypeTagEnumMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"meta");if(!b.success)return b;b=d("WASmaxParseUtils").attrInt(a,"thread_type");return!b.success?b:d("WAResultOrError").makeResult({threadType:b.value})}g.parseThreadTypeTagEnumMixin=a}),98);
__d("WASmaxInMessageDeliverThreadTypeTagLegacyMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"meta");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"thread_type");return!b.success?b:d("WAResultOrError").makeResult({threadType:b.value})}g.parseThreadTypeTagLegacyMixin=a}),98);
__d("WASmaxInMessageDeliverThreadTypeTagEnumOrLegacyMixinGroup",["WAResultOrError","WASmaxInMessageDeliverThreadTypeTagEnumMixin","WASmaxInMessageDeliverThreadTypeTagLegacyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverThreadTypeTagEnumMixin").parseThreadTypeTagEnumMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ThreadTypeTagEnum",value:b.value});var c=d("WASmaxInMessageDeliverThreadTypeTagLegacyMixin").parseThreadTypeTagLegacyMixin(a);return c.success?d("WAResultOrError").makeResult({name:"ThreadTypeTagLegacy",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ThreadTypeTagEnum","ThreadTypeTagLegacy"],[b,c])}g.parseThreadTypeTagEnumOrLegacyMixinGroup=a}),98);
__d("WASmaxInMessageDeliverThreadTypeTagMixin",["WAResultOrError","WASmaxInMessageDeliverThreadTypeTagEnumOrLegacyMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxInMessageDeliverThreadTypeTagEnumOrLegacyMixinGroup").parseThreadTypeTagEnumOrLegacyMixinGroup(b.value);return!a.success?a:d("WAResultOrError").makeResult({metaThreadTypeTagEnumOrLegacyMixinGroup:a.value})}g.parseThreadTypeTagMixin=a}),98);
__d("WASmaxInMessageDeliverIndividualMixin",["WAResultOrError","WASmaxInMessageDeliverAppdataMetaAttributeMixin","WASmaxInMessageDeliverAvailableOrUnavailableMixinGroup","WASmaxInMessageDeliverBotLocaleMixin","WASmaxInMessageDeliverBotThreadIDMixin","WASmaxInMessageDeliverDisplayNameMixin","WASmaxInMessageDeliverEnums","WASmaxInMessageDeliverGroupInviteTargetMixin","WASmaxInMessageDeliverLidChatOriginMixin","WASmaxInMessageDeliverMessageEditOrMessagePinOrRevokeMixinGroup","WASmaxInMessageDeliverRecipientLIDOrRecipientPNOrPeerRecipientPNOrRecipientDisplayNameOrRecipientUsernameMixinGroup","WASmaxInMessageDeliverRecipientMixin","WASmaxInMessageDeliverSenderPNOrLIDOrUsernameMixinGroup","WASmaxInMessageDeliverThreadTypeTagMixin","WASmaxInMessageDeliverToProxyAccountMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseJid").attrJidEnum(a,"from",d("WASmaxInMessageDeliverEnums").DEVICEJID_DEVICEJID);if(!b.success)return b;var c=d("WASmaxInMessageDeliverRecipientMixin").parseRecipientMixin(a),e=d("WASmaxInMessageDeliverDisplayNameMixin").parseDisplayNameMixin(a),f=d("WASmaxInMessageDeliverGroupInviteTargetMixin").parseGroupInviteTargetMixin(a),g=d("WASmaxInMessageDeliverThreadTypeTagMixin").parseThreadTypeTagMixin(a),h=d("WASmaxInMessageDeliverToProxyAccountMixin").parseToProxyAccountMixin(a),i=d("WASmaxInMessageDeliverBotThreadIDMixin").parseBotThreadIDMixin(a),j=d("WASmaxInMessageDeliverLidChatOriginMixin").parseLidChatOriginMixin(a),k=d("WASmaxInMessageDeliverBotLocaleMixin").parseBotLocaleMixin(a),l=d("WASmaxInMessageDeliverAppdataMetaAttributeMixin").parseAppdataMetaAttributeMixin(a),m=d("WASmaxInMessageDeliverMessageEditOrMessagePinOrRevokeMixinGroup").parseMessageEditOrMessagePinOrRevokeMixinGroup(a),n=d("WASmaxInMessageDeliverAvailableOrUnavailableMixinGroup").parseAvailableOrUnavailableMixinGroup(a);if(!n.success)return n;var o=d("WASmaxInMessageDeliverSenderPNOrLIDOrUsernameMixinGroup").parseSenderPNOrLIDOrUsernameMixinGroup(a);a=d("WASmaxInMessageDeliverRecipientLIDOrRecipientPNOrPeerRecipientPNOrRecipientDisplayNameOrRecipientUsernameMixinGroup").parseRecipientLIDOrRecipientPNOrPeerRecipientPNOrRecipientDisplayNameOrRecipientUsernameMixinGroup(a);return d("WAResultOrError").makeResult({from:b.value,recipientMixin:c.success?c.value:null,displayNameMixin:e.success?e.value:null,groupInviteTargetMixin:f.success?f.value:null,threadTypeTagMixin:g.success?g.value:null,toProxyAccountMixin:h.success?h.value:null,botThreadIDMixin:i.success?i.value:null,lidChatOriginMixin:j.success?j.value:null,botLocaleMixin:k.success?k.value:null,appdataMetaAttributeMixin:l.success?l.value:null,messageEditOrMessagePinOrRevokeMixinGroup:m.success?m.value:null,availableOrUnavailableMixinGroup:n.value,senderPNOrLIDOrUsernameMixinGroup:o.success?o.value:null,recipientLIDOrRecipientPNOrPeerRecipientPNOrRecipientDisplayNameOrRecipientUsernameMixinGroup:a.success?a.value:null})}g.parseIndividualMixin=a}),98);
__d("WASmaxInMessageDeliverStatusCapabilityMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,b.value,"push_eligible","true");return!a.success?a:d("WAResultOrError").makeResult({metaPushEligible:a.value})}g.parseStatusCapabilityMixin=a}),98);
__d("WASmaxInMessageDeliverBroadcastDualEncBroadcastDualEncNonMediaOrBroadcastDualEncMediaMediaMixinGroup",["WAResultOrError","WASmaxInMessageDeliverBroadcastDualEncMediaMixin","WASmaxInMessageDeliverBroadcastDualEncNonMediaMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverBroadcastDualEncNonMediaMixin").parseBroadcastDualEncNonMediaMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"BroadcastDualEncNonMedia",value:b.value});var c=d("WASmaxInMessageDeliverBroadcastDualEncMediaMixin").parseBroadcastDualEncMediaMixin(a);return c.success?d("WAResultOrError").makeResult({name:"BroadcastDualEncMedia",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["BroadcastDualEncNonMedia","BroadcastDualEncMedia"],[b,c])}g.parseBroadcastDualEncBroadcastDualEncNonMediaOrBroadcastDualEncMediaMediaMixinGroup=a}),98);
__d("WASmaxInMessageDeliverStatusDualEncMixin",["WAResultOrError","WASmaxInMessageDeliverBroadcastDualEncBroadcastDualEncNonMediaOrBroadcastDualEncMediaMediaMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverBroadcastDualEncBroadcastDualEncNonMediaOrBroadcastDualEncMediaMediaMixinGroup").parseBroadcastDualEncBroadcastDualEncNonMediaOrBroadcastDualEncMediaMediaMixinGroup(a);return!b.success?b:d("WAResultOrError").makeResult({broadcastDualEncBroadcastDualEncNonMediaOrBroadcastDualEncMediaMediaMixinGroup:b.value})}g.parseStatusDualEncMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypeTextOrMediaSingleOrReactionMixinGroup",["WAResultOrError","WASmaxInMessageDeliverContentTypeMediaSingleMixin","WASmaxInMessageDeliverContentTypeReactionMixin","WASmaxInMessageDeliverContentTypeTextMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverContentTypeTextMixin").parseContentTypeTextMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ContentTypeText",value:b.value});var c=d("WASmaxInMessageDeliverContentTypeMediaSingleMixin").parseContentTypeMediaSingleMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"ContentTypeMediaSingle",value:c.value});var e=d("WASmaxInMessageDeliverContentTypeReactionMixin").parseContentTypeReactionMixin(a);return e.success?d("WAResultOrError").makeResult({name:"ContentTypeReaction",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ContentTypeText","ContentTypeMediaSingle","ContentTypeReaction"],[b,c,e])}g.parseContentTypeTextOrMediaSingleOrReactionMixinGroup=a}),98);
__d("WASmaxInMessageDeliverStatusSingleEncMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeTextOrMediaSingleOrReactionMixinGroup","WASmaxInMessageDeliverRetryOrBroadcastRegularMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverContentTypeTextOrMediaSingleOrReactionMixinGroup").parseContentTypeTextOrMediaSingleOrReactionMixinGroup(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverRetryOrBroadcastRegularMixinGroup").parseRetryOrBroadcastRegularMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({contentTypeTextOrMediaSingleOrReactionMixinGroup:b.value,retryOrBroadcastRegularMixinGroup:a.value})}g.parseStatusSingleEncMixin=a}),98);
__d("WASmaxInMessageDeliverStatusDualOrSingleEncMixinGroup",["WAResultOrError","WASmaxInMessageDeliverStatusDualEncMixin","WASmaxInMessageDeliverStatusSingleEncMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverStatusDualEncMixin").parseStatusDualEncMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"StatusDualEnc",value:b.value});var c=d("WASmaxInMessageDeliverStatusSingleEncMixin").parseStatusSingleEncMixin(a);return c.success?d("WAResultOrError").makeResult({name:"StatusSingleEnc",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["StatusDualEnc","StatusSingleEnc"],[b,c])}g.parseStatusDualOrSingleEncMixinGroup=a}),98);
__d("WASmaxInMessageDeliverStatusMentionedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,b.value,"status_mentioned","true");return!a.success?a:d("WAResultOrError").makeResult({metaStatusMentioned:a.value})}g.parseStatusMentionedMixin=a}),98);
__d("WASmaxInMessageDeliverStatusSettingMixin",["WAResultOrError","WASmaxInMessageDeliverEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"status_setting",d("WASmaxInMessageDeliverEnums").ENUM_ALLOWLIST_CONTACTS_DENYLIST);return!a.success?a:d("WAResultOrError").makeResult({metaStatusSetting:a.value})}g.parseStatusSettingMixin=a}),98);
__d("WASmaxInMessageDeliverStatusMixin",["WAResultOrError","WASmaxInMessageDeliverAppdataMetaAttributeMixin","WASmaxInMessageDeliverFanoutCountMixin","WASmaxInMessageDeliverRevokeMixin","WASmaxInMessageDeliverStatusCapabilityMixin","WASmaxInMessageDeliverStatusDualOrSingleEncMixinGroup","WASmaxInMessageDeliverStatusMentionedMixin","WASmaxInMessageDeliverStatusSettingMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrStatusJid,a,"from","status@broadcast");if(!b.success)return b;var c=d("WASmaxParseJid").attrDeviceJid(a,"participant");if(!c.success)return c;var e=d("WASmaxInMessageDeliverRevokeMixin").parseRevokeMixin(a),f=d("WASmaxInMessageDeliverFanoutCountMixin").parseFanoutCountMixin(a),g=d("WASmaxInMessageDeliverStatusSettingMixin").parseStatusSettingMixin(a),h=d("WASmaxInMessageDeliverStatusMentionedMixin").parseStatusMentionedMixin(a),i=d("WASmaxInMessageDeliverStatusCapabilityMixin").parseStatusCapabilityMixin(a),j=d("WASmaxInMessageDeliverAppdataMetaAttributeMixin").parseAppdataMetaAttributeMixin(a);a=d("WASmaxInMessageDeliverStatusDualOrSingleEncMixinGroup").parseStatusDualOrSingleEncMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({from:b.value,participant:c.value,revokeMixin:e.success?e.value:null,fanoutCountMixin:f.success?f.value:null,statusSettingMixin:g.success?g.value:null,statusMentionedMixin:h.success?h.value:null,statusCapabilityMixin:i.success?i.value:null,appdataMetaAttributeMixin:j.success?j.value:null,statusDualOrSingleEncMixinGroup:a.value})}g.parseStatusMixin=a}),98);
__d("WASmaxInMessageDeliverIndividualOrGroupOrStatusOrBroadcastMixinGroup",["WAResultOrError","WASmaxInMessageDeliverBroadcastMixin","WASmaxInMessageDeliverGroupMixin","WASmaxInMessageDeliverIndividualMixin","WASmaxInMessageDeliverStatusMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverIndividualMixin").parseIndividualMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"Individual",value:b.value});var c=d("WASmaxInMessageDeliverGroupMixin").parseGroupMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"Group",value:c.value});var e=d("WASmaxInMessageDeliverStatusMixin").parseStatusMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"Status",value:e.value});var f=d("WASmaxInMessageDeliverBroadcastMixin").parseBroadcastMixin(a);return f.success?d("WAResultOrError").makeResult({name:"Broadcast",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Individual","Group","Status","Broadcast"],[b,c,e,f])}g.parseIndividualOrGroupOrStatusOrBroadcastMixinGroup=a}),98);
__d("WASmaxInMessageDeliverRegularRequest",["WAResultOrError","WASmaxInMessageDeliverBaseMixin","WASmaxInMessageDeliverIndividualOrGroupOrStatusOrBroadcastMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!b.success)return b;var c=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!c.success)return c;var e=d("WASmaxInMessageDeliverBaseMixin").parseBaseMixin(a);if(!e.success)return e;a=d("WASmaxInMessageDeliverIndividualOrGroupOrStatusOrBroadcastMixinGroup").parseIndividualOrGroupOrStatusOrBroadcastMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({id:b.value,t:c.value},e.value,{individualOrGroupOrStatusOrBroadcastMixinGroup:a.value}))}g.parseRegularRequest=a}),98);
__d("WASmaxOutMessageDeliverAckMixin",["WASmaxAttrs","WASmaxInMessageDeliverEnums","WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a,b){a=a.ackRecipient;var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrJidEnum,b,["from"],d("WASmaxInMessageDeliverEnums").DEVICEJID_BROADCASTJID_DEVICEJID_GROUPJID_STATUSJID);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);var e=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,b,["id"]);if(!e.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(e.error);var f=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,b,["type"]);if(!f.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(f.error);var g=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrJidEnum,b,["participant"],d("WASmaxInMessageDeliverEnums").DEVICEJID_DEVICEJID_DEVICEJID);if(!g.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(g.error);b=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrUserJid,b,["actual_to"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);c=d("WASmaxJsx").smax("ack",{to:d("WAWap").JID(c.value),"class":"message",id:d("WAWap").STANZA_ID(e.value),type:d("WAWap").CUSTOM_STRING(f.value),participant:d("WASmaxAttrs").OPTIONAL(d("WAWap").JID,g.value),recipient:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,a),actual_from:d("WASmaxAttrs").OPTIONAL(d("WAWap").JID,b.value)});return c}function a(a,b,c){b=h(b,c);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeAckMixin=a}),98);
__d("WASmaxOutMessageDeliverRegularResponseMissingPlaceholder",["WASmaxJsx","WASmaxOutMessageDeliverAckMixin"],(function(a,b,c,d,e,f,g){function a(a,b){a=d("WASmaxOutMessageDeliverAckMixin").mergeAckMixin(d("WASmaxJsx").smax("ack",{error:"404"}),a,b);return a}g.makeRegularResponseMissingPlaceholder=a}),98);
__d("WASmaxOutMessageDeliverRegularResponseSuccess",["WASmaxJsx","WASmaxOutMessageDeliverAckMixin"],(function(a,b,c,d,e,f,g){function a(a,b){a=d("WASmaxOutMessageDeliverAckMixin").mergeAckMixin(d("WASmaxJsx").smax("ack",null),a,b);return a}g.makeRegularResponseSuccess=a}),98);
__d("WASmaxMessageDeliverRegularRPC",["WASmaxInMessageDeliverRegularRequest","WASmaxOutMessageDeliverRegularResponseMissingPlaceholder","WASmaxOutMessageDeliverRegularResponseSuccess","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverRegularRequest").parseRegularRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Regular",{Request:b}));return{parsedRequest:b.value,makeRegularResponseMissingPlaceholder:function(b){return d("WASmaxOutMessageDeliverRegularResponseMissingPlaceholder").makeRegularResponseMissingPlaceholder(b,a)},makeRegularResponseSuccess:function(b){return d("WASmaxOutMessageDeliverRegularResponseSuccess").makeRegularResponseSuccess(b,a)}}}g.receiveRegularRPC=a}),98);
__d("WASmaxInMessageFallbackDeliverEncMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").countChildrenWithTag(a,"enc",1,Infinity,d("WAResultOrError").makeResult);return!b.success?b:d("WAResultOrError").makeResult({countEnc:b.value})}g.parseDeliverEncMixin=a}),98);
__d("WASmaxInMessageFallbackEnums",["WAJids"],(function(a,b,c,d,e,f,g){b={validators:[(a=d("WAJids")).validateBroadcastJid,a.validateCallJid,a.validateDeviceJid,a.validateDomainJid,a.validateGroupJid,a.validateStatusJid,a.validateUserJid],typeName:"BroadcastJid|CallJid|DeviceJid|DomainJid|GroupJid|StatusJid|UserJid"};g.BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID=b}),98);
__d("WASmaxInMessageFallbackDeliverRequest",["WAResultOrError","WASmaxInMessageFallbackDeliverEncMixin","WASmaxInMessageFallbackEnums","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!b.success)return b;var c=d("WASmaxParseJid").attrJidEnum(a,"from",d("WASmaxInMessageFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"type");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrJidEnum,a,"participant",d("WASmaxInMessageFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!f.success)return f;a=d("WASmaxInMessageFallbackDeliverEncMixin").parseDeliverEncMixin(a);return d("WAResultOrError").makeResult({id:b.value,from:c.value,type:e.value,participant:f.value,deliverEncMixin:a.success?a.value:null})}g.parseDeliverRequest=a}),98);
__d("WASmaxOutMessageFallbackDeliverResponseBadStanza",["WASmaxAttrs","WASmaxInMessageFallbackEnums","WASmaxJsx","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a,b){a=a.ackError;var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,b,["id"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);var e=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrJidEnum,b,["from"],d("WASmaxInMessageFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!e.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(e.error);var f=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrJidEnum,b,["participant"],d("WASmaxInMessageFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!f.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(f.error);b=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseUtils").attrString,b,["type"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);c=d("WASmaxJsx").smax("ack",{"class":"message",id:d("WAWap").STANZA_ID(c.value),to:d("WAWap").JID(e.value),participant:d("WASmaxAttrs").OPTIONAL(d("WAWap").JID,f.value),type:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,b.value),error:d("WAWap").INT(a)});return c}g.makeDeliverResponseBadStanza=a}),98);
__d("WASmaxOutMessageFallbackDeliverResponseDelivery",["WASmaxAttrs","WASmaxInMessageFallbackEnums","WASmaxJsx","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrJidEnum,a,["from"],d("WASmaxInMessageFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrJidEnum,a,["participant"],d("WASmaxInMessageFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("receipt",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").JID(c.value),participant:d("WASmaxAttrs").OPTIONAL(d("WAWap").JID,a.value)});return b}g.makeDeliverResponseDelivery=a}),98);
__d("WASmaxOutMessageFallbackDeliverResponseNoEnc",["WASmaxAttrs","WASmaxInMessageFallbackEnums","WASmaxJsx","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrJidEnum,a,["from"],d("WASmaxInMessageFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);var e=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrJidEnum,a,["participant"],d("WASmaxInMessageFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!e.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(e.error);a=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{"class":"message",id:d("WAWap").STANZA_ID(b.value),from:d("WAWap").JID(c.value),participant:d("WASmaxAttrs").OPTIONAL(d("WAWap").JID,e.value),type:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a.value),error:"406"});return b}g.makeDeliverResponseNoEnc=a}),98);
__d("WASmaxMessageFallbackDeliverRPC",["WASmaxInMessageFallbackDeliverRequest","WASmaxOutMessageFallbackDeliverResponseBadStanza","WASmaxOutMessageFallbackDeliverResponseDelivery","WASmaxOutMessageFallbackDeliverResponseNoEnc","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageFallbackDeliverRequest").parseDeliverRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Deliver",{Request:b}));return{parsedRequest:b.value,makeDeliverResponseNoEnc:function(){return d("WASmaxOutMessageFallbackDeliverResponseNoEnc").makeDeliverResponseNoEnc(a)},makeDeliverResponseDelivery:function(){return d("WASmaxOutMessageFallbackDeliverResponseDelivery").makeDeliverResponseDelivery(a)},makeDeliverResponseBadStanza:function(b){return d("WASmaxOutMessageFallbackDeliverResponseBadStanza").makeDeliverResponseBadStanza(b,a)}}}g.receiveDeliverRPC=a}),98);
__d("WACreateHandleMessage",["Promise","WACommonMessageBase","WACreateHandleGroupMessageBranch","WACreateHandleIndividualMessageBranch","WACreateHandlePeerMessageBranch","WALogger","WAResultOrError","WASmaxMessageDeliverNewsletterRPC","WASmaxMessageDeliverRegularRPC","WASmaxMessageFallbackDeliverRPC","WASmaxParsingFailure"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMessage receives an invalid stanza. Error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMessage receives an invalid stanza: ","."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Ignore incoming <message /> because no handler is provided"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["DT: handleMessage start"]);l=function(){return a};return a}function a(a){var c=a.individualMessage,e=a.groupMessage,f=a.status,g=a.broadcast,m=d("WACreateHandlePeerMessageBranch").createHandlePeerMessageBranch(a),n=c&&d("WACreateHandleIndividualMessageBranch").createHandleIndividualMessageBranch(c.handleIndividualMessage),o=e&&d("WACreateHandleGroupMessageBranch").createHandleGroupMessageBranch(e.handleGroupMessage);return function(a,c,e){d("WALogger").LOG(l());try{if(((c=a.content)==null?void 0:(c=c[0])==null?void 0:c.tag)==="plaintext"){c=d("WASmaxMessageDeliverNewsletterRPC").receiveNewsletterRPC(a);c=c.makeNewsletterResponseSuccess;return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult(c()))}if(a.attrs.category==="peer")return m(a,{cryptoManager:e});c=d("WASmaxMessageDeliverRegularRPC").receiveRegularRPC(a);var p=c.parsedRequest,q=c.makeRegularResponseSuccess;c=p.individualOrGroupOrStatusOrBroadcastMixinGroup;p=d("WACommonMessageBase").transformMessageParsedRequest(p);switch(c.name){case"Individual":if(n!=null)return n({individualMixin:c.value,makeAck:function(){return q({})},commonMessageBase:p,ctx:{cryptoManager:e}});break;case"Group":if(o!=null)return o({groupMixin:c.value,makeAck:function(){return q({})},commonMessageBase:p,ctx:{cryptoManager:e}});break;case"Broadcast":if(g!=null)return g.handleBroadcastMessage({makeAck:function(){return q({})}}).then(d("WAResultOrError").makeResult);break;default:c.name;if(f!=null)return f.handleStatusMessage({makeAck:function(){return q({})}}).then(d("WAResultOrError").makeResult);break}d("WALogger").LOG(k());p=d("WASmaxMessageFallbackDeliverRPC").receiveDeliverRPC(a);e=p.makeDeliverResponseDelivery;return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult(e()))}catch(e){if(e instanceof d("WASmaxParsingFailure").SmaxParsingFailure){d("WALogger").WARN(j(),a.toString());d("WALogger").ERROR(i(),e);c=d("WASmaxMessageFallbackDeliverRPC").receiveDeliverRPC(a);p=c.makeDeliverResponseBadStanza;return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult(p({ackError:487})))}return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeError({type:"runtime-error",error:e}))}}}g.createHandleMessage=a}),98);
__d("WASmaxInAccountSyncEnums",[],(function(a,b,c,d,e,f){a={block:"block",unblock:"unblock"};f.ENUM_BLOCK_UNBLOCK=a}),66);
__d("WASmaxInAccountSyncNotificationBlocklistMixin",["WAResultOrError","WASmaxInAccountSyncEnums","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"blocklist");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"item");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"dhash");if(!c.success)return c;a=d("WASmaxParseUtils").attrString(a,"prev_dhash");if(!a.success)return a;var e=d("WASmaxParseUtils").attrStringEnum(b.value,"action",d("WASmaxInAccountSyncEnums").ENUM_BLOCK_UNBLOCK);if(!e.success)return e;b=d("WASmaxParseJid").attrUserJid(b.value,"jid");return!b.success?b:d("WAResultOrError").makeResult({dhash:c.value,prevDhash:a.value,itemAction:e.value,itemJid:b.value})}g.parseNotificationBlocklistMixin=a}),98);
__d("WASmaxInAccountSyncNotificationBlocklistNoPayloadMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"blocklist");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"action","modify");return!b.success?b:d("WAResultOrError").makeResult({action:b.value})}g.parseNotificationBlocklistNoPayloadMixin=a}),98);
__d("WASmaxInAccountSyncBlocklistNotificationType",["WAResultOrError","WASmaxInAccountSyncNotificationBlocklistMixin","WASmaxInAccountSyncNotificationBlocklistNoPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAccountSyncNotificationBlocklistMixin").parseNotificationBlocklistMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NotificationBlocklist",value:b.value});var c=d("WASmaxInAccountSyncNotificationBlocklistNoPayloadMixin").parseNotificationBlocklistNoPayloadMixin(a);return c.success?d("WAResultOrError").makeResult({name:"NotificationBlocklistNoPayload",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Blocklist","BlocklistNoPayload"],[b,c])}g.parseBlocklistNotificationType=a}),98);
__d("WASmaxInAccountSyncNotificationBlocklistNotificationMixin",["WAResultOrError","WASmaxInAccountSyncBlocklistNotificationType","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"blocklist");if(!b.success)return b;a=d("WASmaxInAccountSyncBlocklistNotificationType").parseBlocklistNotificationType(b.value);return!a.success?a:d("WAResultOrError").makeResult({blocklistBlocklistNotificationType:a.value})}g.parseNotificationBlocklistNotificationMixin=a}),98);
__d("WASmaxInAccountSyncNotificationDevicesMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"device");if(!b.success)return b;b=d("WASmaxParseJid").attrDeviceJid(a,"jid");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"key-index",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,keyIndex:a.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"key-index-list");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"ts",-1,void 0);if(!b.success)return b;a=d("WASmaxParseUtils").contentBytesRange(a,0,100);return!a.success?a:d("WAResultOrError").makeResult({ts:b.value,elementValue:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"devices");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"key-index-list",i);if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"dhash");if(!c.success)return c;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"device",0,1e3,h);return!a.success?a:d("WAResultOrError").makeResult({dhash:c.value,keyIndexList:b.value,device:a.value})}g.parseNotificationDevicesDevice=h;g.parseNotificationDevicesKeyIndexList=i;g.parseNotificationDevicesMixin=a}),98);
__d("WASmaxInAccountSyncNotificationDevicesNoPayloadMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"devices");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"action","modify");return!b.success?b:d("WAResultOrError").makeResult({action:b.value})}g.parseNotificationDevicesNoPayloadMixin=a}),98);
__d("WASmaxInAccountSyncDevicesNotificationType",["WAResultOrError","WASmaxInAccountSyncNotificationDevicesMixin","WASmaxInAccountSyncNotificationDevicesNoPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAccountSyncNotificationDevicesMixin").parseNotificationDevicesMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NotificationDevices",value:b.value});var c=d("WASmaxInAccountSyncNotificationDevicesNoPayloadMixin").parseNotificationDevicesNoPayloadMixin(a);return c.success?d("WAResultOrError").makeResult({name:"NotificationDevicesNoPayload",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Devices","DevicesNoPayload"],[b,c])}g.parseDevicesNotificationType=a}),98);
__d("WASmaxInAccountSyncNotificationDevicesNotificationMixin",["WAResultOrError","WASmaxInAccountSyncDevicesNotificationType","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"devices");if(!b.success)return b;a=d("WASmaxInAccountSyncDevicesNotificationType").parseDevicesNotificationType(b.value);return!a.success?a:d("WAResultOrError").makeResult({devicesDevicesNotificationType:a.value})}g.parseNotificationDevicesNotificationMixin=a}),98);
__d("WASmaxInAccountSyncNotificationDisappearingModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"disappearing_mode");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"duration",0,void 0);if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({duration:b.value,t:a.value})}g.parseNotificationDisappearingModeMixin=a}),98);
__d("WASmaxInAccountSyncNotificationDisappearingModeNoPayloadMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"disappearing_mode");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"action","modify");return!b.success?b:d("WAResultOrError").makeResult({action:b.value})}g.parseNotificationDisappearingModeNoPayloadMixin=a}),98);
__d("WASmaxInAccountSyncDisappearingModeNotificationType",["WAResultOrError","WASmaxInAccountSyncNotificationDisappearingModeMixin","WASmaxInAccountSyncNotificationDisappearingModeNoPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAccountSyncNotificationDisappearingModeMixin").parseNotificationDisappearingModeMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NotificationDisappearingMode",value:b.value});var c=d("WASmaxInAccountSyncNotificationDisappearingModeNoPayloadMixin").parseNotificationDisappearingModeNoPayloadMixin(a);return c.success?d("WAResultOrError").makeResult({name:"NotificationDisappearingModeNoPayload",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["DisappearingMode","DisappearingModeNoPayload"],[b,c])}g.parseDisappearingModeNotificationType=a}),98);
__d("WASmaxInAccountSyncNotificationDisappearingModeNotificationMixin",["WAResultOrError","WASmaxInAccountSyncDisappearingModeNotificationType","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"disappearing_mode");if(!b.success)return b;a=d("WASmaxInAccountSyncDisappearingModeNotificationType").parseDisappearingModeNotificationType(b.value);return!a.success?a:d("WAResultOrError").makeResult({disappearingModeDisappearingModeNotificationType:a.value})}g.parseNotificationDisappearingModeNotificationMixin=a}),98);
__d("WASmaxInAccountSyncNotificationNoticeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notice");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"id",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrIntRange(a,"stage",0,1e3);if(!c.success)return c;var e=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!e.success)return e;var f=d("WASmaxParseUtils").attrIntRange(a,"version",1,void 0);if(!f.success)return f;a=d("WASmaxParseUtils").attrIntRange(a,"type",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({id:b.value,stage:c.value,t:e.value,version:f.value,type:a.value})}g.parseNotificationNoticeMixin=a}),98);
__d("WASmaxInAccountSyncNotificationNoticeNoPayloadMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notice");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"action","modify");return!b.success?b:d("WAResultOrError").makeResult({action:b.value})}g.parseNotificationNoticeNoPayloadMixin=a}),98);
__d("WASmaxInAccountSyncNoticeNotificationType",["WAResultOrError","WASmaxInAccountSyncNotificationNoticeMixin","WASmaxInAccountSyncNotificationNoticeNoPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAccountSyncNotificationNoticeMixin").parseNotificationNoticeMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NotificationNotice",value:b.value});var c=d("WASmaxInAccountSyncNotificationNoticeNoPayloadMixin").parseNotificationNoticeNoPayloadMixin(a);return c.success?d("WAResultOrError").makeResult({name:"NotificationNoticeNoPayload",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Notice","NoticeNoPayload"],[b,c])}g.parseNoticeNotificationType=a}),98);
__d("WASmaxInAccountSyncNotificationNoticeNotificationMixin",["WAResultOrError","WASmaxInAccountSyncNoticeNotificationType","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"notice");if(!b.success)return b;a=d("WASmaxInAccountSyncNoticeNotificationType").parseNoticeNotificationType(b.value);return!a.success?a:d("WAResultOrError").makeResult({noticeNoticeNotificationType:a.value})}g.parseNotificationNoticeNotificationMixin=a}),98);
__d("WASmaxInAccountSyncNotificationPictureMixin",["WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"delete");return!b.success?b:d("WASmaxParseUtils").voidSuccess}g.parseNotificationPictureMixin=a}),98);
__d("WASmaxInAccountSyncNotificationPictureNoPayloadMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"action","modify");return!b.success?b:d("WAResultOrError").makeResult({action:b.value})}g.parseNotificationPictureNoPayloadMixin=a}),98);
__d("WASmaxInAccountSyncPictureNotificationType",["WAResultOrError","WASmaxInAccountSyncNotificationPictureMixin","WASmaxInAccountSyncNotificationPictureNoPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAccountSyncNotificationPictureMixin").parseNotificationPictureMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NotificationPicture",value:b.value});var c=d("WASmaxInAccountSyncNotificationPictureNoPayloadMixin").parseNotificationPictureNoPayloadMixin(a);return c.success?d("WAResultOrError").makeResult({name:"NotificationPictureNoPayload",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Picture","PictureNoPayload"],[b,c])}g.parsePictureNotificationType=a}),98);
__d("WASmaxInAccountSyncNotificationPictureNotificationMixin",["WAResultOrError","WASmaxInAccountSyncPictureNotificationType","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"picture");if(!b.success)return b;a=d("WASmaxInAccountSyncPictureNotificationType").parsePictureNotificationType(b.value);return!a.success?a:d("WAResultOrError").makeResult({picturePictureNotificationType:a.value})}g.parseNotificationPictureNotificationMixin=a}),98);
__d("WASmaxInAccountSyncNotificationContactBlacklistNoAdditionalDataMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"category");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"action","modify");return!b.success?b:d("WAResultOrError").makeResult({action:b.value})}g.parseNotificationContactBlacklistNoAdditionalDataMixin=a}),98);
__d("WASmaxInAccountSyncNotificationContactBlacklistWithAdditionalDataMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"action");if(!b.success)return b;a=d("WASmaxParseJid").attrUserJid(a,"jid");return!a.success?a:d("WAResultOrError").makeResult({action:b.value,jid:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"category");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"dhash");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"prev_dhash");if(!c.success)return c;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"user",0,1e3,h);return!a.success?a:d("WAResultOrError").makeResult({dhash:b.value,prevDhash:c.value,user:a.value})}g.parseNotificationContactBlacklistWithAdditionalDataUser=h;g.parseNotificationContactBlacklistWithAdditionalDataMixin=a}),98);
__d("WASmaxInAccountSyncContactBlacklistData",["WAResultOrError","WASmaxInAccountSyncNotificationContactBlacklistNoAdditionalDataMixin","WASmaxInAccountSyncNotificationContactBlacklistWithAdditionalDataMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAccountSyncNotificationContactBlacklistWithAdditionalDataMixin").parseNotificationContactBlacklistWithAdditionalDataMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NotificationContactBlacklistWithAdditionalData",value:b.value});var c=d("WASmaxInAccountSyncNotificationContactBlacklistNoAdditionalDataMixin").parseNotificationContactBlacklistNoAdditionalDataMixin(a);return c.success?d("WAResultOrError").makeResult({name:"NotificationContactBlacklistNoAdditionalData",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ContactBlacklistWithAdditionalData","ContactBlacklistNoAdditionalData"],[b,c])}g.parseContactBlacklistData=a}),98);
__d("WASmaxInAccountSyncNotificationPrivacyMixin",["WAResultOrError","WASmaxInAccountSyncContactBlacklistData","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"category");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"name");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"value");if(!c.success)return c;a=d("WASmaxInAccountSyncContactBlacklistData").parseContactBlacklistData(a);return d("WAResultOrError").makeResult({name:b.value,value:c.value,contactBlacklistData:a.success?a.value:null})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"privacy");if(!b.success)return b;b=d("WASmaxParseUtils").mapChildrenWithTag(a,"category",0,1e3,h);return!b.success?b:d("WAResultOrError").makeResult({category:b.value})}g.parseNotificationPrivacyCategory=h;g.parseNotificationPrivacyMixin=a}),98);
__d("WASmaxInAccountSyncNotificationPrivacyNoPayloadMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"privacy");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"action","modify");return!b.success?b:d("WAResultOrError").makeResult({action:b.value})}g.parseNotificationPrivacyNoPayloadMixin=a}),98);
__d("WASmaxInAccountSyncPrivacyNotificationType",["WAResultOrError","WASmaxInAccountSyncNotificationPrivacyMixin","WASmaxInAccountSyncNotificationPrivacyNoPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAccountSyncNotificationPrivacyNoPayloadMixin").parseNotificationPrivacyNoPayloadMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NotificationPrivacyNoPayload",value:b.value});var c=d("WASmaxInAccountSyncNotificationPrivacyMixin").parseNotificationPrivacyMixin(a);return c.success?d("WAResultOrError").makeResult({name:"NotificationPrivacy",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["PrivacyNoPayload","Privacy"],[b,c])}g.parsePrivacyNotificationType=a}),98);
__d("WASmaxInAccountSyncNotificationPrivacyNotificationMixin",["WAResultOrError","WASmaxInAccountSyncPrivacyNotificationType","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"privacy");if(!b.success)return b;a=d("WASmaxInAccountSyncPrivacyNotificationType").parsePrivacyNotificationType(b.value);return!a.success?a:d("WAResultOrError").makeResult({privacyPrivacyNotificationType:a.value})}g.parseNotificationPrivacyNotificationMixin=a}),98);
__d("WASmaxInAccountSyncNotificationStatusMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"status");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"dhash");if(!b.success)return b;a=d("WASmaxParseUtils").contentString(a);return!a.success?a:d("WAResultOrError").makeResult({dhash:b.value,elementValue:a.value})}g.parseNotificationStatusMixin=a}),98);
__d("WASmaxInAccountSyncNotificationStatusNoPayloadMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"status");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"action","modify");return!b.success?b:d("WAResultOrError").makeResult({action:b.value})}g.parseNotificationStatusNoPayloadMixin=a}),98);
__d("WASmaxInAccountSyncStatusNotificationType",["WAResultOrError","WASmaxInAccountSyncNotificationStatusMixin","WASmaxInAccountSyncNotificationStatusNoPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAccountSyncNotificationStatusMixin").parseNotificationStatusMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NotificationStatus",value:b.value});var c=d("WASmaxInAccountSyncNotificationStatusNoPayloadMixin").parseNotificationStatusNoPayloadMixin(a);return c.success?d("WAResultOrError").makeResult({name:"NotificationStatusNoPayload",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Status","StatusNoPayload"],[b,c])}g.parseStatusNotificationType=a}),98);
__d("WASmaxInAccountSyncNotificationStatusNotificationMixin",["WAResultOrError","WASmaxInAccountSyncStatusNotificationType","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"status");if(!b.success)return b;a=d("WASmaxInAccountSyncStatusNotificationType").parseStatusNotificationType(b.value);return!a.success?a:d("WAResultOrError").makeResult({statusStatusNotificationType:a.value})}g.parseNotificationStatusNotificationMixin=a}),98);
__d("WASmaxInAccountSyncNotificationTextStatusEmojiMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"emoji");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"content");return!b.success?b:d("WAResultOrError").makeResult({content:b.value})}g.parseNotificationTextStatusEmojiMixin=a}),98);
__d("WASmaxInAccountSyncNotificationTextStatusMixin",["WAResultOrError","WASmaxInAccountSyncNotificationTextStatusEmojiMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"text_status");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"emoji");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"text");if(!c.success)return c;var e=d("WASmaxParseUtils").attrInt(a,"ephemeral_duration_sec");if(!e.success)return e;a=d("WASmaxParseUtils").attrString(a,"last_update_time");if(!a.success)return a;b=d("WASmaxInAccountSyncNotificationTextStatusEmojiMixin").parseNotificationTextStatusEmojiMixin(b.value);return!b.success?b:d("WAResultOrError").makeResult({text:c.value,ephemeralDurationSec:e.value,lastUpdateTime:a.value,emojiNotificationTextStatusEmojiMixin:b.value})}g.parseNotificationTextStatusMixin=a}),98);
__d("WASmaxInAccountSyncNotificationTextStatusNoPayloadMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"text_status");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"action","modify");return!b.success?b:d("WAResultOrError").makeResult({action:b.value})}g.parseNotificationTextStatusNoPayloadMixin=a}),98);
__d("WASmaxInAccountSyncTextStatusNotificationType",["WAResultOrError","WASmaxInAccountSyncNotificationTextStatusMixin","WASmaxInAccountSyncNotificationTextStatusNoPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAccountSyncNotificationTextStatusMixin").parseNotificationTextStatusMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NotificationTextStatus",value:b.value});var c=d("WASmaxInAccountSyncNotificationTextStatusNoPayloadMixin").parseNotificationTextStatusNoPayloadMixin(a);return c.success?d("WAResultOrError").makeResult({name:"NotificationTextStatusNoPayload",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["TextStatus","TextStatusNoPayload"],[b,c])}g.parseTextStatusNotificationType=a}),98);
__d("WASmaxInAccountSyncNotificationTextStatusNotificationMixin",["WAResultOrError","WASmaxInAccountSyncTextStatusNotificationType","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"text_status");if(!b.success)return b;a=d("WASmaxInAccountSyncTextStatusNotificationType").parseTextStatusNotificationType(b.value);return!a.success?a:d("WAResultOrError").makeResult({textStatusTextStatusNotificationType:a.value})}g.parseNotificationTextStatusNotificationMixin=a}),98);
__d("WASmaxInAccountSyncNotificationUsernameChangeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"username");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"username");return!b.success?b:d("WAResultOrError").makeResult({username:b.value})}g.parseNotificationUsernameChangeMixin=a}),98);
__d("WASmaxInAccountSyncNotificationUsernameDeletionMixin",["WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").assertTag(a,"username");return!a.success?a:d("WASmaxParseUtils").voidSuccess}g.parseNotificationUsernameDeletionMixin=a}),98);
__d("WASmaxInAccountSyncNotificationUsernameNoPayloadMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"username");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"action","modify");return!b.success?b:d("WAResultOrError").makeResult({action:b.value})}g.parseNotificationUsernameNoPayloadMixin=a}),98);
__d("WASmaxInAccountSyncUsernameNotificationType",["WAResultOrError","WASmaxInAccountSyncNotificationUsernameChangeMixin","WASmaxInAccountSyncNotificationUsernameDeletionMixin","WASmaxInAccountSyncNotificationUsernameNoPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAccountSyncNotificationUsernameNoPayloadMixin").parseNotificationUsernameNoPayloadMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NotificationUsernameNoPayload",value:b.value});var c=d("WASmaxInAccountSyncNotificationUsernameChangeMixin").parseNotificationUsernameChangeMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"NotificationUsernameChange",value:c.value});var e=d("WASmaxInAccountSyncNotificationUsernameDeletionMixin").parseNotificationUsernameDeletionMixin(a);return e.success?d("WAResultOrError").makeResult({name:"NotificationUsernameDeletion",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["UsernameNoPayload","UsernameChange","UsernameDeletion"],[b,c,e])}g.parseUsernameNotificationType=a}),98);
__d("WASmaxInAccountSyncNotificationUsernameNotificationMixin",["WAResultOrError","WASmaxInAccountSyncUsernameNotificationType","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"username");if(!b.success)return b;a=d("WASmaxInAccountSyncUsernameNotificationType").parseUsernameNotificationType(b.value);return!a.success?a:d("WAResultOrError").makeResult({usernameUsernameNotificationType:a.value})}g.parseNotificationUsernameNotificationMixin=a}),98);
__d("WASmaxInAccountSyncNotificationType",["WAResultOrError","WASmaxInAccountSyncNotificationBlocklistNotificationMixin","WASmaxInAccountSyncNotificationDevicesNotificationMixin","WASmaxInAccountSyncNotificationDisappearingModeNotificationMixin","WASmaxInAccountSyncNotificationNoticeNotificationMixin","WASmaxInAccountSyncNotificationPictureNotificationMixin","WASmaxInAccountSyncNotificationPrivacyNotificationMixin","WASmaxInAccountSyncNotificationStatusNotificationMixin","WASmaxInAccountSyncNotificationTextStatusNotificationMixin","WASmaxInAccountSyncNotificationUsernameNotificationMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAccountSyncNotificationBlocklistNotificationMixin").parseNotificationBlocklistNotificationMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NotificationBlocklistNotification",value:b.value});var c=d("WASmaxInAccountSyncNotificationDevicesNotificationMixin").parseNotificationDevicesNotificationMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"NotificationDevicesNotification",value:c.value});var e=d("WASmaxInAccountSyncNotificationPictureNotificationMixin").parseNotificationPictureNotificationMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"NotificationPictureNotification",value:e.value});var f=d("WASmaxInAccountSyncNotificationPrivacyNotificationMixin").parseNotificationPrivacyNotificationMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"NotificationPrivacyNotification",value:f.value});var g=d("WASmaxInAccountSyncNotificationStatusNotificationMixin").parseNotificationStatusNotificationMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"NotificationStatusNotification",value:g.value});var h=d("WASmaxInAccountSyncNotificationTextStatusNotificationMixin").parseNotificationTextStatusNotificationMixin(a);if(h.success)return d("WAResultOrError").makeResult({name:"NotificationTextStatusNotification",value:h.value});var i=d("WASmaxInAccountSyncNotificationUsernameNotificationMixin").parseNotificationUsernameNotificationMixin(a);if(i.success)return d("WAResultOrError").makeResult({name:"NotificationUsernameNotification",value:i.value});var j=d("WASmaxInAccountSyncNotificationDisappearingModeNotificationMixin").parseNotificationDisappearingModeNotificationMixin(a);if(j.success)return d("WAResultOrError").makeResult({name:"NotificationDisappearingModeNotification",value:j.value});var k=d("WASmaxInAccountSyncNotificationNoticeNotificationMixin").parseNotificationNoticeNotificationMixin(a);return k.success?d("WAResultOrError").makeResult({name:"NotificationNoticeNotification",value:k.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["BlocklistNotification","DevicesNotification","PictureNotification","PrivacyNotification","StatusNotification","TextStatusNotification","UsernameNotification","DisappearingModeNotification","NoticeNotification"],[b,c,e,f,g,h,i,j,k])}g.parseNotificationType=a}),98);
__d("WASmaxInAccountSyncServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInAccountSyncNotificationRequest",["WAResultOrError","WASmaxInAccountSyncNotificationType","WASmaxInAccountSyncServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseJid").attrDeviceJid(a,"from");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","account_sync");if(!c.success)return c;var e=d("WASmaxInAccountSyncServerNotificationMixin").parseServerNotificationMixin(a);if(!e.success)return e;a=d("WASmaxInAccountSyncNotificationType").parseNotificationType(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:b.value,type:c.value},e.value,{notificationType:a.value}))}g.parseNotificationRequest=a}),98);
__d("WASmaxOutAccountSyncNotificationClientAckMixin",["WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrDeviceJid,a,["from"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").DEVICE_JID(c.value),"class":"notification",type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNotificationClientAckMixin=a}),98);
__d("WASmaxOutAccountSyncNotificationResponseAck",["WASmaxJsx","WASmaxOutAccountSyncNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutAccountSyncNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeNotificationResponseAck=a}),98);
__d("WASmaxAccountSyncNotificationRPC",["WASmaxInAccountSyncNotificationRequest","WASmaxOutAccountSyncNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAccountSyncNotificationRequest").parseNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Notification",{Request:b}));return{parsedRequest:b.value,makeNotificationResponseAck:function(){return d("WASmaxOutAccountSyncNotificationResponseAck").makeNotificationResponseAck(a)}}}g.receiveNotificationRPC=a}),98);
__d("WACreateHandleAccountSyncNotificationBranch",["Promise","WAResultOrError","WASmaxAccountSyncNotificationRPC","WAUnknownStanzaError"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c=(a=a.accountSync)!=null?a:{};return function(a){a=d("WASmaxAccountSyncNotificationRPC").receiveNotificationRPC(a);var e=a.parsedRequest.notificationType;a=a.makeNotificationResponseAck;switch(e.name){case"NotificationBlocklistNotification":return i(e.value.blocklistBlocklistNotificationType,c.handleBlocklistNotification,a);case"NotificationDevicesNotification":return j(e.value.devicesDevicesNotificationType,c.handleDevicesNotification,a)}return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError)}}function i(a,c,e){if(c==null)return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError);if(a.name==="NotificationBlocklist"){var f=a.value,g=f.dhash,i=f.prevDhash,j=f.itemAction;f=f.itemJid;return c({dhash:g,displayName:null,action:j,jid:f,prevDhash:i,makeAck:e}).then(d("WAResultOrError").makeResult)}else{a.name;return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError)}}function j(a,c,e){if(c==null)return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError);if(a.name==="NotificationDevices"){var f=a.value,g=f.dhash,i=f.device;f=f.keyIndexList;return c({dhash:g,devices:i,keyIndexList:f,makeAck:e}).then(d("WAResultOrError").makeResult)}else{a.name;return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError)}}g.createHandleAccountSyncNotification=a}),98);
__d("WASmaxInUsyncCloudAPIGroupListMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseJid").attrGroupJid(a,"jid");return!b.success?b:d("WAResultOrError").makeResult({jid:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"groups");if(!b.success)return b;a=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"group",1,1e4,h);return!a.success?a:d("WAResultOrError").makeResult({groupsGroup:a.value})}g.parseCloudAPIGroupListGroupsGroup=h;g.parseCloudAPIGroupListMixin=a}),98);
__d("WASmaxInUsyncNotificationAddDevicesNotificationMixin",["WAResultOrError","WASmaxInUsyncCloudAPIGroupListMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"device");if(!b.success)return b;b=d("WASmaxParseJid").attrDeviceJid(a,"jid");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrDeviceJid,a,"lid");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"key-index",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,lid:c.value,keyIndex:a.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"key-index-list");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"ts",-1,void 0);if(!b.success)return b;a=d("WASmaxParseUtils").contentBytesRange(a,0,500);return!a.success?a:d("WAResultOrError").makeResult({ts:b.value,elementValue:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"add");if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(b.value,"key-index-list",i);if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(b.value,"device_hash");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,b.value,"device_lid_hash");if(!f.success)return f;a=d("WASmaxInUsyncCloudAPIGroupListMixin").parseCloudAPIGroupListMixin(a);b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"device",0,1e3,h);return!b.success?b:d("WAResultOrError").makeResult({addDeviceHash:e.value,addDeviceLidHash:f.value,cloudAPIGroupListMixin:a.success?a.value:null,addKeyIndexList:c.value,addDevice:b.value})}g.parseNotificationAddDevicesNotificationAddDevice=h;g.parseNotificationAddDevicesNotificationAddKeyIndexList=i;g.parseNotificationAddDevicesNotificationMixin=a}),98);
__d("WASmaxInUsyncNotificationRemoveDevicesNotificationMixin",["WAResultOrError","WASmaxInUsyncCloudAPIGroupListMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"device");if(!b.success)return b;b=d("WASmaxParseJid").attrDeviceJid(a,"jid");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrDeviceJid,a,"lid");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"key-index",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,lid:c.value,keyIndex:a.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"key-index-list");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"ts",-1,void 0);if(!b.success)return b;a=d("WASmaxParseUtils").contentBytesRange(a,0,500);return!a.success?a:d("WAResultOrError").makeResult({ts:b.value,elementValue:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"remove");if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(b.value,"key-index-list",i);if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(b.value,"device_hash");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,b.value,"device_lid_hash");if(!f.success)return f;a=d("WASmaxInUsyncCloudAPIGroupListMixin").parseCloudAPIGroupListMixin(a);b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"device",0,1e3,h);return!b.success?b:d("WAResultOrError").makeResult({removeDeviceHash:e.value,removeDeviceLidHash:f.value,cloudAPIGroupListMixin:a.success?a.value:null,removeKeyIndexList:c.value,removeDevice:b.value})}g.parseNotificationRemoveDevicesNotificationRemoveDevice=h;g.parseNotificationRemoveDevicesNotificationRemoveKeyIndexList=i;g.parseNotificationRemoveDevicesNotificationMixin=a}),98);
__d("WASmaxInUsyncNotificationUpdateDevicesNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"update");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"notify");if(!a.success)return a;var c=d("WASmaxParseUtils").attrString(b.value,"hash");if(!c.success)return c;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,b.value,"lid_hash");return!b.success?b:d("WAResultOrError").makeResult({notify:a.value,updateHash:c.value,updateLidHash:b.value})}g.parseNotificationUpdateDevicesNotificationMixin=a}),98);
__d("WASmaxInUsyncDevicesNotification",["WAResultOrError","WASmaxInUsyncNotificationAddDevicesNotificationMixin","WASmaxInUsyncNotificationRemoveDevicesNotificationMixin","WASmaxInUsyncNotificationUpdateDevicesNotificationMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInUsyncNotificationAddDevicesNotificationMixin").parseNotificationAddDevicesNotificationMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NotificationAddDevicesNotification",value:b.value});var c=d("WASmaxInUsyncNotificationRemoveDevicesNotificationMixin").parseNotificationRemoveDevicesNotificationMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"NotificationRemoveDevicesNotification",value:c.value});var e=d("WASmaxInUsyncNotificationUpdateDevicesNotificationMixin").parseNotificationUpdateDevicesNotificationMixin(a);return e.success?d("WAResultOrError").makeResult({name:"NotificationUpdateDevicesNotification",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["AddDevicesNotification","RemoveDevicesNotification","UpdateDevicesNotification"],[b,c,e])}g.parseDevicesNotification=a}),98);
__d("WASmaxInUsyncServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInUsyncNotificationRequest",["WAResultOrError","WASmaxInUsyncDevicesNotification","WASmaxInUsyncServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"from");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"lid");if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","devices");if(!e.success)return e;var f=d("WASmaxInUsyncServerNotificationMixin").parseServerNotificationMixin(a);if(!f.success)return f;a=d("WASmaxInUsyncDevicesNotification").parseDevicesNotification(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:b.value,lid:c.value,type:e.value},f.value,{devicesNotification:a.value}))}g.parseNotificationRequest=a}),98);
__d("WASmaxOutUsyncNotificationClientAckMixin",["WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrUserJid,a,["from"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").USER_JID(c.value),"class":"notification",type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNotificationClientAckMixin=a}),98);
__d("WASmaxOutUsyncNotificationResponseAck",["WASmaxJsx","WASmaxOutUsyncNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutUsyncNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeNotificationResponseAck=a}),98);
__d("WASmaxUsyncNotificationRPC",["WASmaxInUsyncNotificationRequest","WASmaxOutUsyncNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInUsyncNotificationRequest").parseNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Notification",{Request:b}));return{parsedRequest:b.value,makeNotificationResponseAck:function(){return d("WASmaxOutUsyncNotificationResponseAck").makeNotificationResponseAck(a)}}}g.receiveNotificationRPC=a}),98);
__d("WACreateHandleDevicesNotificationBranch",["Promise","WAResultOrError","WASmaxUsyncNotificationRPC","WATimeUtils","WAUnknownStanzaError"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=(a=a.usync)!=null?a:{};var c=a.handleAddDeviceNotification,e=a.handleRemoveDeviceNotification,f=a.handleUpdateDeviceNotification;return function(a){a=d("WASmaxUsyncNotificationRPC").receiveNotificationRPC(a);var g=a.parsedRequest,i=g.from,j=g.lid;g=g.devicesNotification;a=a.makeNotificationResponseAck;switch(g.name){case"NotificationAddDevicesNotification":var k=g.value,l=k.addDeviceHash,m=k.addDeviceLidHash,n=k.addDevice;k=k.addKeyIndexList;return(l=c==null?void 0:c({lid:j,from:i,makeAck:a,hash:l,lidHash:m,deviceList:n,keyIndexList:k==null?null:{ts:d("WATimeUtils").castToUnixTime(k.ts),signedADVListBytes:k.elementValue}}).then(d("WAResultOrError").makeResult))!=null?l:(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError);case"NotificationRemoveDevicesNotification":m=g.value;n=m.removeDevice;k=m.removeDeviceHash;l=m.removeDeviceLidHash;m=m.removeKeyIndexList;return(k=e==null?void 0:e({from:i,lid:j,makeAck:a,hash:k,lidHash:l,deviceList:n,keyIndexList:m==null?null:{ts:d("WATimeUtils").castToUnixTime(m.ts),signedADVListBytes:m.elementValue}}).then(d("WAResultOrError").makeResult))!=null?k:(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError);case"NotificationUpdateDevicesNotification":l=g.value.updateHash;return(n=f==null?void 0:f({from:i,lid:j,hash:l,makeAck:a}).then(d("WAResultOrError").makeResult))!=null?n:(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError)}g.name}}g.createHandleDevicesNotification=a}),98);
__d("WASmaxInPreKeysCloudAPIGroupListMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseJid").attrGroupJid(a,"jid");return!b.success?b:d("WAResultOrError").makeResult({jid:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"groups");if(!b.success)return b;a=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"group",1,1e4,h);return!a.success?a:d("WAResultOrError").makeResult({groupsGroup:a.value})}g.parseCloudAPIGroupListGroupsGroup=h;g.parseCloudAPIGroupListMixin=a}),98);
__d("WASmaxInPreKeysDisplayNameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"display_name");return!a.success?a:d("WAResultOrError").makeResult({displayName:a.value})}g.parseDisplayNameMixin=a}),98);
__d("WASmaxInPreKeysNotificationContactIDChangedLIDAttrMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseJid").attrDeviceJid(a,"lid");return!b.success?b:d("WAResultOrError").makeResult({lid:b.value})}g.parseNotificationContactIDChangedLIDAttrMixin=a}),98);
__d("WASmaxInPreKeysNotificationContactIDChangedLIDAttrOrDisplayNameMixinGroup",["WAResultOrError","WASmaxInPreKeysDisplayNameMixin","WASmaxInPreKeysNotificationContactIDChangedLIDAttrMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPreKeysNotificationContactIDChangedLIDAttrMixin").parseNotificationContactIDChangedLIDAttrMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NotificationContactIDChangedLIDAttr",value:b.value});var c=d("WASmaxInPreKeysDisplayNameMixin").parseDisplayNameMixin(a);return c.success?d("WAResultOrError").makeResult({name:"DisplayName",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["LIDAttr","DisplayName"],[b,c])}g.parseNotificationContactIDChangedLIDAttrOrDisplayNameMixinGroup=a}),98);
__d("WASmaxInPreKeysServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInPreKeysNotificationContactIDChangedRequest",["WAResultOrError","WASmaxInPreKeysCloudAPIGroupListMixin","WASmaxInPreKeysNotificationContactIDChangedLIDAttrOrDisplayNameMixinGroup","WASmaxInPreKeysServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"identity");if(!b.success)return b;b=d("WASmaxParseJid").attrDeviceJid(a,"from");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","encrypt");if(!c.success)return c;var e=d("WASmaxInPreKeysServerNotificationMixin").parseServerNotificationMixin(a);if(!e.success)return e;var f=d("WASmaxInPreKeysCloudAPIGroupListMixin").parseCloudAPIGroupListMixin(a);a=d("WASmaxInPreKeysNotificationContactIDChangedLIDAttrOrDisplayNameMixinGroup").parseNotificationContactIDChangedLIDAttrOrDisplayNameMixinGroup(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({from:b.value,type:c.value},e.value,{cloudAPIGroupListMixin:f.success?f.value:null,notificationContactIDChangedLIDAttrOrDisplayNameMixinGroup:a.success?a.value:null}))}g.parseNotificationContactIDChangedRequest=a}),98);
__d("WASmaxOutPreKeysNotificationClientAckMixin",["WASmaxInPreKeysEnums","WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrJidEnum,a,["from"],d("WASmaxInPreKeysEnums").DEVICEJID_DOMAINJID);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").JID(c.value),"class":"notification",type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNotificationClientAckMixin=a}),98);
__d("WASmaxOutPreKeysNotificationContactIDChangedResponseAck",["WASmaxJsx","WASmaxOutPreKeysNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutPreKeysNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeNotificationContactIDChangedResponseAck=a}),98);
__d("WASmaxPreKeysNotificationContactIDChangedRPC",["WASmaxInPreKeysNotificationContactIDChangedRequest","WASmaxOutPreKeysNotificationContactIDChangedResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPreKeysNotificationContactIDChangedRequest").parseNotificationContactIDChangedRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("NotificationContactIDChanged",{Request:b}));return{parsedRequest:b.value,makeNotificationContactIDChangedResponseAck:function(){return d("WASmaxOutPreKeysNotificationContactIDChangedResponseAck").makeNotificationContactIDChangedResponseAck(a)}}}g.receiveNotificationContactIDChangedRPC=a}),98);
__d("WASmaxInPreKeysNotificationDigestRequest",["WAResultOrError","WASmaxInPreKeysServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"digest");if(!b.success)return b;b=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","encrypt");if(!c.success)return c;a=d("WASmaxInPreKeysServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:b.value,type:c.value},a.value))}g.parseNotificationDigestRequest=a}),98);
__d("WASmaxOutPreKeysNotificationDigestResponseAck",["WASmaxJsx","WASmaxOutPreKeysNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutPreKeysNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeNotificationDigestResponseAck=a}),98);
__d("WASmaxPreKeysNotificationDigestRPC",["WASmaxInPreKeysNotificationDigestRequest","WASmaxOutPreKeysNotificationDigestResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPreKeysNotificationDigestRequest").parseNotificationDigestRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("NotificationDigest",{Request:b}));return{parsedRequest:b.value,makeNotificationDigestResponseAck:function(){return d("WASmaxOutPreKeysNotificationDigestResponseAck").makeNotificationDigestResponseAck(a)}}}g.receiveNotificationDigestRPC=a}),98);
__d("WASmaxInPreKeysNotificationLowCountRequest",["WAResultOrError","WASmaxInPreKeysServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"count");if(!b.success)return b;var c=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","encrypt");if(!e.success)return e;b=d("WASmaxParseUtils").attrIntRange(b.value,"value",0,100);if(!b.success)return b;a=d("WASmaxInPreKeysServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:c.value,type:e.value,countValue:b.value},a.value))}g.parseNotificationLowCountRequest=a}),98);
__d("WASmaxOutPreKeysNotificationLowCountResponseAck",["WASmaxJsx","WASmaxOutPreKeysNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutPreKeysNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeNotificationLowCountResponseAck=a}),98);
__d("WASmaxPreKeysNotificationLowCountRPC",["WASmaxInPreKeysNotificationLowCountRequest","WASmaxOutPreKeysNotificationLowCountResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPreKeysNotificationLowCountRequest").parseNotificationLowCountRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("NotificationLowCount",{Request:b}));return{parsedRequest:b.value,makeNotificationLowCountResponseAck:function(){return d("WASmaxOutPreKeysNotificationLowCountResponseAck").makeNotificationLowCountResponseAck(a)}}}g.receiveNotificationLowCountRPC=a}),98);
__d("WACreateHandleEncryptNotificationBranch",["Promise","WALogger","WAResultOrError","WASmaxDecisionTreeUtils","WASmaxPreKeysNotificationContactIDChangedRPC","WASmaxPreKeysNotificationDigestRPC","WASmaxPreKeysNotificationLowCountRPC","WATimeUtils","WAUnknownStanzaError"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseEncryptNotification notification without children"]);i=function(){return a};return a}function a(a){a=(a=a.prekey)!=null?a:{};var c=a.handlePrekeyLowCountNotification,e=a.handlePrekeyDigestNotification,f=a.handlePrekeyContactIDChangedNotification;return function(a){var g=d("WASmaxDecisionTreeUtils").firstChild(a);if(g.success===!1){d("WALogger").ERROR(i());return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError)}g=g.value.tag;switch(g){case"count":if(c!=null){var j=d("WASmaxPreKeysNotificationLowCountRPC").receiveNotificationLowCountRPC(a),k=j.makeNotificationLowCountResponseAck;j=j.parsedRequest;var l=j.t,m=j.offline;j=j.id;l=d("WATimeUtils").castToUnixTime(l);return c({makeAck:k,id:j,offline:m,serverTs:l,encryptType:g}).then(d("WAResultOrError").makeResult)}break;case"digest":if(e!=null){k=d("WASmaxPreKeysNotificationDigestRPC").receiveNotificationDigestRPC(a);j=k.makeNotificationDigestResponseAck;m=k.parsedRequest;l=m.t;k=m.offline;m=m.id;l=d("WATimeUtils").castToUnixTime(l);return e({makeAck:j,id:m,offline:k,serverTs:l,encryptType:g}).then(d("WAResultOrError").makeResult)}break;case"identity":if(f!=null){j=d("WASmaxPreKeysNotificationContactIDChangedRPC").receiveNotificationContactIDChangedRPC(a);m=j.makeNotificationContactIDChangedResponseAck;k=j.parsedRequest;l=k.t;a=k.offline;j=k.id;k=d("WATimeUtils").castToUnixTime(l);return f({makeAck:m,id:j,offline:a,serverTs:k,encryptType:g}).then(d("WAResultOrError").makeResult)}break}return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError)}}g.createHandleEncryptNotification=a}),98);
__d("WASmaxInDevicesServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInDevicesChangeNotificationRequest",["WAResultOrError","WASmaxInDevicesDeviceListMixin","WASmaxInDevicesICDCFromServerMixin","WASmaxInDevicesServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"devices");if(!b.success)return b;b=d("WASmaxInDevicesDeviceListMixin").parseDeviceListMixin(a);return!b.success?b:b}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"icdc");if(!b.success)return b;b=d("WASmaxInDevicesICDCFromServerMixin").parseICDCFromServerMixin(a);return!b.success?b:b}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"devices",h);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(a,"icdc",i);if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","fbid:devices");if(!e.success)return e;var f=d("WASmaxParseJid").attrUserJid(a,"from");if(!f.success)return f;a=d("WASmaxInDevicesServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({type:e.value,from:f.value},a.value,{devices:b.value,icdc:c.value}))}g.parseChangeNotificationRequestDevices=h;g.parseChangeNotificationRequestIcdc=i;g.parseChangeNotificationRequest=a}),98);
__d("WASmaxOutDevicesNotificationClientAckMixin",["WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrUserJid,a,["from"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").USER_JID(c.value),"class":"notification",type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNotificationClientAckMixin=a}),98);
__d("WASmaxOutDevicesChangeNotificationResponseAck",["WASmaxJsx","WASmaxOutDevicesNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutDevicesNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeChangeNotificationResponseAck=a}),98);
__d("WASmaxDevicesChangeNotificationRPC",["WASmaxInDevicesChangeNotificationRequest","WASmaxOutDevicesChangeNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInDevicesChangeNotificationRequest").parseChangeNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("ChangeNotification",{Request:b}));return{parsedRequest:b.value,makeChangeNotificationResponseAck:function(){return d("WASmaxOutDevicesChangeNotificationResponseAck").makeChangeNotificationResponseAck(a)}}}g.receiveChangeNotificationRPC=a}),98);
__d("WACreateHandleFbDeviceChangeNotificationBranch",["WAHandleFbDeviceChangeNotificationProtocol","WAJids","WAResultOrError","WASignalKeys","WASmaxDevicesChangeNotificationRPC","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b,c){var e;b=d("WASmaxDevicesChangeNotificationRPC").receiveChangeNotificationRPC(b);var f=b.makeChangeNotificationResponseAck;b=b.parsedRequest;var g=b.from,h=b.devices,i=b.t,j=b.id,k=b.icdc;b=b.offline;e=((e=h==null?void 0:h.device)!=null?e:[]).map(function(a){var b;return{device:d("WAJids").toDeviceJid(g,d("WAJids").interpretAsDeviceId(a.id)),identity:d("WASignalKeys").serializeIdentity(a.elementValue),platform:(b=a.deviceModelInfoMixin)==null?void 0:(b=b.platform)==null?void 0:b.elementValue,model:(b=a.deviceModelInfoMixin)==null?void 0:(a=b.model)==null?void 0:a.elementValue}});h=h==null?void 0:h.dhashMixin;k=k==null?null:d("WAHandleFbDeviceChangeNotificationProtocol").parseICDCFromServer(k);return a({devices:e,userJid:g,offline:b,serverTs:d("WATimeUtils").castToUnixTime(i),id:j,dhash:h==null?null:d("WAHandleFbDeviceChangeNotificationProtocol").parseDhash(h),icdcInfo:(k==null?void 0:k.success)?k.value:null,makeAck:f,ctx:{cryptoManager:c}}).then(d("WAResultOrError").makeResult)}}g.createHandleFbDeviceChangeNotification=a}),98);
__d("WACreateHandleFbMultiwayNotificationBranch",["WAResultOrError","WASmaxMultiwaydMultiwayNotificationRPC","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b){b=d("WASmaxMultiwaydMultiwayNotificationRPC").receiveMultiwayNotificationRPC(b);var c=b.makeMultiwayNotificationResponseAck;b=b.parsedRequest;var e=b.from,f=b.multiwayTransactionId,g=b.multiwayBinaryVersion,h=b.multiwayElementValue,i=b.t,j=b.id;b=b.offline;return a({domainJid:e,multiwayTransactionId:f,multiwayBinaryVersion:g,multiwayElementValue:h,offline:b,serverTs:d("WATimeUtils").castToUnixTime(i),id:j,makeAck:c}).then(d("WAResultOrError").makeResult)}}g.createHandleFbMultiwayNotification=a}),98);
__d("WASmaxInMessageRequestConnectedMixin",["WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"thread_actions");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"connected");return!b.success?b:d("WASmaxParseUtils").voidSuccess}g.parseConnectedMixin=a}),98);
__d("WASmaxInMessageRequestFolderIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrInt(a,"folder_id");return!a.success?a:d("WAResultOrError").makeResult({folderId:a.value})}g.parseFolderIDMixin=a}),98);
__d("WASmaxInMessageRequestFolderMixin",["WASmaxInMessageRequestFolderIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"thread_actions");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"folder");if(!b.success)return b;a=d("WASmaxInMessageRequestFolderIDMixin").parseFolderIDMixin(b.value);return!a.success?a:a}g.parseFolderMixin=a}),98);
__d("WASmaxInMessageRequestServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInMessageRequestThreadNotificationRequest",["WAResultOrError","WASmaxInMessageRequestConnectedMixin","WASmaxInMessageRequestFolderMixin","WASmaxInMessageRequestServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"thread_actions");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","fbid:thread");if(!c.success)return c;var e=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!f.success)return f;var g=d("WASmaxParseUtils").attrString(b.value,"thread_id");if(!g.success)return g;var h=d("WASmaxInMessageRequestFolderMixin").parseFolderMixin(b.value);b=d("WASmaxInMessageRequestConnectedMixin").parseConnectedMixin(b.value);a=d("WASmaxInMessageRequestServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({type:c.value,from:e.value,to:f.value,threadActionsThreadId:g.value,threadActionsFolderMixin:h.success?h.value:null,hasThreadActionsConnectedMixin:b.success},a.value))}g.parseThreadNotificationRequest=a}),98);
__d("WASmaxOutMessageRequestNotificationClientAckMixin",["WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrDomainJid,a,["from"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").DOMAIN_JID(c.value),"class":"notification",type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNotificationClientAckMixin=a}),98);
__d("WASmaxOutMessageRequestThreadNotificationResponseAck",["WASmaxJsx","WASmaxOutMessageRequestNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutMessageRequestNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeThreadNotificationResponseAck=a}),98);
__d("WASmaxMessageRequestThreadNotificationRPC",["WASmaxInMessageRequestThreadNotificationRequest","WASmaxOutMessageRequestThreadNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageRequestThreadNotificationRequest").parseThreadNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("ThreadNotification",{Request:b}));return{parsedRequest:b.value,makeThreadNotificationResponseAck:function(){return d("WASmaxOutMessageRequestThreadNotificationResponseAck").makeThreadNotificationResponseAck(a)}}}g.receiveThreadNotificationRPC=a}),98);
__d("WACreateHandleFbThreadNotificationBranch",["WAJids","WAResultOrError","WASmaxMessageRequestThreadNotificationRPC","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b){b=d("WASmaxMessageRequestThreadNotificationRPC").receiveThreadNotificationRPC(b);var c=b.makeThreadNotificationResponseAck;b=b.parsedRequest;var e=b.id,f=b.threadActionsThreadId,g=b.t,h=b.threadActionsFolderMixin,i=b.offline;b=b.hasThreadActionsConnectedMixin;var j;f.endsWith("@g.us")?j=d("WAJids").toGroupJid(f):j=d("WAJids").toMsgrUserJid(f);return a({id:e,serverTs:d("WATimeUtils").castToUnixTime(g),chatJid:j,offline:i,folderId:h==null?void 0:h.folderId,hasConnected:b,makeAck:c}).then(d("WAResultOrError").makeResult)}}g.createHandleFbThreadNotification=a}),98);
__d("WASmaxInGroupsServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInGroupsCommonNotificationMixin",["WAResultOrError","WASmaxInGroupsServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseJid").attrGroupJid(a,"from");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","w:gp2");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"notify");if(!e.success)return e;a=d("WASmaxInGroupsServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:b.value,type:c.value,notify:e.value},a.value))}g.parseCommonNotificationMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");return!b.success?b:d("WAResultOrError").makeResult({jid:b.value})}g.parseParticipantWithJidMixin=a}),98);
__d("WASmaxInGroupsParticipantWithLidMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"lid");return!b.success?b:d("WAResultOrError").makeResult({lid:b.value})}g.parseParticipantWithLidMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidAndLidMixin",["WAResultOrError","WASmaxInGroupsParticipantWithJidMixin","WASmaxInGroupsParticipantWithLidMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantWithJidMixin").parseParticipantWithJidMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsParticipantWithLidMixin").parseParticipantWithLidMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseParticipantWithJidAndLidMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidAndPnMixin",["WAResultOrError","WASmaxInGroupsParticipantWithJidMixin","WASmaxInGroupsPhoneNumberMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantWithJidMixin").parseParticipantWithJidMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsPhoneNumberMixin").parsePhoneNumberMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseParticipantWithJidAndPnMixin=a}),98);
__d("WASmaxInGroupsDisplayNameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"display_name");return!a.success?a:d("WAResultOrError").makeResult({displayName:a.value})}g.parseDisplayNameMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidContainingLidAndDisplayNameMixin",["WAResultOrError","WASmaxInGroupsDisplayNameMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");if(!b.success)return b;a=d("WASmaxInGroupsDisplayNameMixin").parseDisplayNameMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({jid:b.value},a.value))}g.parseParticipantWithJidContainingLidAndDisplayNameMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidLidAndDisplayNameMixin",["WAResultOrError","WASmaxInGroupsDisplayNameMixin","WASmaxInGroupsParticipantWithJidAndLidMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantWithJidAndLidMixin").parseParticipantWithJidAndLidMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsDisplayNameMixin").parseDisplayNameMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseParticipantWithJidLidAndDisplayNameMixin=a}),98);
__d("WASmaxInGroupsParticipantMixins",["WAResultOrError","WASmaxInGroupsParticipantWithJidAndLidMixin","WASmaxInGroupsParticipantWithJidAndPnMixin","WASmaxInGroupsParticipantWithJidContainingLidAndDisplayNameMixin","WASmaxInGroupsParticipantWithJidLidAndDisplayNameMixin","WASmaxInGroupsParticipantWithJidMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsParticipantWithJidLidAndDisplayNameMixin").parseParticipantWithJidLidAndDisplayNameMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidLidAndDisplayName",value:b.value});var c=d("WASmaxInGroupsParticipantWithJidContainingLidAndDisplayNameMixin").parseParticipantWithJidContainingLidAndDisplayNameMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidContainingLidAndDisplayName",value:c.value});var e=d("WASmaxInGroupsParticipantWithJidAndLidMixin").parseParticipantWithJidAndLidMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidAndLid",value:e.value});var f=d("WASmaxInGroupsParticipantWithJidAndPnMixin").parseParticipantWithJidAndPnMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidAndPn",value:f.value});var g=d("WASmaxInGroupsParticipantWithJidMixin").parseParticipantWithJidMixin(a);return g.success?d("WAResultOrError").makeResult({name:"ParticipantWithJid",value:g.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ParticipantWithJidLidAndDisplayName","ParticipantWithJidContainingLidAndDisplayName","ParticipantWithJidAndLid","ParticipantWithJidAndPn","ParticipantWithJid"],[b,c,e,f,g])}g.parseParticipantMixins=a}),98);
__d("WASmaxInGroupsParticipantMixin",["WAResultOrError","WASmaxInGroupsParticipantMixins","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantMixins").parseParticipantMixins(a);return!b.success?b:d("WAResultOrError").makeResult({participantMixins:b.value})}g.parseParticipantMixin=a}),98);
__d("WASmaxInGroupsParticipantPhoneNumberMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"participant");if(!b.success)return b;a=d("WASmaxParseJid").attrUserJid(a,"participant_pn");return!a.success?a:d("WAResultOrError").makeResult({participant:b.value,participantPn:a.value})}g.parseParticipantPhoneNumberMixin=a}),98);
__d("WASmaxInGroupsAddNotificationRequest",["WAResultOrError","WASmaxInGroupsCommonNotificationMixin","WASmaxInGroupsEnums","WASmaxInGroupsGroupAddressingModeMixin","WASmaxInGroupsParticipantMixin","WASmaxInGroupsParticipantNotAddressableMixin","WASmaxInGroupsParticipantPhoneNumberMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantMixin").parseParticipantMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsParticipantNotAddressableMixin").parseParticipantNotAddressableMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{participantNotAddressableMixin:a.success?a.value:null}))}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"add");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"participant");if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(b.value,"v_id");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,b.value,"prev_v_id");if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,b.value,"reason",d("WASmaxInGroupsEnums").ENUM_ACCEPT_DEFAULTSUBGROUPPROMOTE_INVITE_INVITEAUTOADD_LINKEDGROUPJOIN);if(!g.success)return g;var i=d("WASmaxInGroupsCommonNotificationMixin").parseCommonNotificationMixin(a);if(!i.success)return i;var j=d("WASmaxInGroupsGroupAddressingModeMixin").parseGroupAddressingModeMixin(a);a=d("WASmaxInGroupsParticipantPhoneNumberMixin").parseParticipantPhoneNumberMixin(a);b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"participant",1,1024,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({participant:c.value,addVId:e.value,addPrevVId:f.value,addReason:g.value},i.value,{groupAddressingModeMixin:j.success?j.value:null,participantPhoneNumberMixin:a.success?a.value:null,addParticipant:b.value}))}g.parseAddNotificationRequestAddParticipant=h;g.parseAddNotificationRequest=a}),98);
__d("WASmaxOutGroupsNotificationClientAckMixin",["WASmaxInGroupsEnums","WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrJidEnum,a,["from"],d("WASmaxInGroupsEnums").DOMAINJID_GROUPJID);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").JID(c.value),"class":"notification",type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNotificationClientAckMixin=a}),98);
__d("WASmaxOutGroupsAddNotificationResponseAck",["WASmaxAttrs","WASmaxJsx","WASmaxOutGroupsNotificationClientAckMixin","WASmaxParseJid","WASmaxParseReference","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrUserJid,a,["participant"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);b=d("WASmaxOutGroupsNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",{participant:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,b.value)}),a);return b}g.makeAddNotificationResponseAck=a}),98);
__d("WASmaxGroupsAddNotificationRPC",["WASmaxInGroupsAddNotificationRequest","WASmaxOutGroupsAddNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsAddNotificationRequest").parseAddNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("AddNotification",{Request:b}));return{parsedRequest:b.value,makeAddNotificationResponseAck:function(){return d("WASmaxOutGroupsAddNotificationResponseAck").makeAddNotificationResponseAck(a)}}}g.receiveAddNotificationRPC=a}),98);
__d("WASmaxInGroupsDeleteNotificationRequest",["WAResultOrError","WASmaxInGroupsCommonNotificationMixin","WASmaxInGroupsEnums","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"delete");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"participant");if(!c.success)return c;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,b.value,"reason",d("WASmaxInGroupsEnums").ENUM_DEACTIVATEGENERALCHAT_DELETECAPI_DELETEPARENT_INTEGRITYDELETEPARENT);if(!b.success)return b;a=d("WASmaxInGroupsCommonNotificationMixin").parseCommonNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({participant:c.value,deleteReason:b.value},a.value))}g.parseDeleteNotificationRequest=a}),98);
__d("WASmaxOutGroupsDeleteNotificationResponseAck",["WASmaxAttrs","WASmaxJsx","WASmaxOutGroupsNotificationClientAckMixin","WASmaxParseJid","WASmaxParseReference","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrUserJid,a,["participant"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);b=d("WASmaxOutGroupsNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",{participant:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,b.value)}),a);return b}g.makeDeleteNotificationResponseAck=a}),98);
__d("WASmaxGroupsDeleteNotificationRPC",["WASmaxInGroupsDeleteNotificationRequest","WASmaxOutGroupsDeleteNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsDeleteNotificationRequest").parseDeleteNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("DeleteNotification",{Request:b}));return{parsedRequest:b.value,makeDeleteNotificationResponseAck:function(){return d("WASmaxOutGroupsDeleteNotificationResponseAck").makeDeleteNotificationResponseAck(a)}}}g.receiveDeleteNotificationRPC=a}),98);
__d("WASmaxInGroupsDemoteNotificationRequest",["WAResultOrError","WASmaxInGroupsCommonNotificationMixin","WASmaxInGroupsGroupAddressingModeMixin","WASmaxInGroupsParticipantMixins","WASmaxInGroupsParticipantPhoneNumberMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantMixins").parseParticipantMixins(a);return!b.success?b:d("WAResultOrError").makeResult({participantMixins:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"demote");if(!b.success)return b;var c=d("WASmaxParseJid").attrUserJid(a,"participant");if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(b.value,"v_id");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,b.value,"prev_v_id");if(!f.success)return f;var g=d("WASmaxInGroupsCommonNotificationMixin").parseCommonNotificationMixin(a);if(!g.success)return g;var i=d("WASmaxInGroupsGroupAddressingModeMixin").parseGroupAddressingModeMixin(a);a=d("WASmaxInGroupsParticipantPhoneNumberMixin").parseParticipantPhoneNumberMixin(a);b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"participant",1,19999,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({participant:c.value,demoteVId:e.value,demotePrevVId:f.value},g.value,{groupAddressingModeMixin:i.success?i.value:null,participantPhoneNumberMixin:a.success?a.value:null,demoteParticipant:b.value}))}g.parseDemoteNotificationRequestDemoteParticipant=h;g.parseDemoteNotificationRequest=a}),98);
__d("WASmaxOutGroupsDemoteNotificationResponseAck",["WASmaxJsx","WASmaxOutGroupsNotificationClientAckMixin","WASmaxParseJid","WASmaxParseReference","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrUserJid,a,["participant"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);b=d("WASmaxOutGroupsNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",{participant:d("WAWap").USER_JID(b.value)}),a);return b}g.makeDemoteNotificationResponseAck=a}),98);
__d("WASmaxGroupsDemoteNotificationRPC",["WASmaxInGroupsDemoteNotificationRequest","WASmaxOutGroupsDemoteNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsDemoteNotificationRequest").parseDemoteNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("DemoteNotification",{Request:b}));return{parsedRequest:b.value,makeDemoteNotificationResponseAck:function(){return d("WASmaxOutGroupsDemoteNotificationResponseAck").makeDemoteNotificationResponseAck(a)}}}g.receiveDemoteNotificationRPC=a}),98);
__d("WASmaxInGroupsDedupAttrsMixin",["WAResultOrError","WASmaxInGroupsEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").attrString(a,"key");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"create_ctx",d("WASmaxInGroupsEnums").ENUM_E2EEMIGRATION_REGULAR_RTC);return!a.success?a:d("WAResultOrError").makeResult({key:b.value,createCtx:a.value})}g.parseDedupAttrsMixin=a}),98);
__d("WASmaxInGroupsNamedSubjectMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"subject");return!a.success?a:d("WAResultOrError").makeResult({subject:a.value})}g.parseNamedSubjectMixin=a}),98);
__d("WASmaxInGroupsUnnamedSubjectFallbackMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"subject");return!a.success?a:d("WAResultOrError").makeResult({subject:a.value})}g.parseUnnamedSubjectFallbackMixin=a}),98);
__d("WASmaxInGroupsNamedSubjectOrUnnamedSubjectFallbackMixinGroup",["WAResultOrError","WASmaxInGroupsNamedSubjectMixin","WASmaxInGroupsUnnamedSubjectFallbackMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsNamedSubjectMixin").parseNamedSubjectMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NamedSubject",value:b.value});var c=d("WASmaxInGroupsUnnamedSubjectFallbackMixin").parseUnnamedSubjectFallbackMixin(a);return c.success?d("WAResultOrError").makeResult({name:"UnnamedSubjectFallback",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["NamedSubject","UnnamedSubjectFallback"],[b,c])}g.parseNamedSubjectOrUnnamedSubjectFallbackMixinGroup=a}),98);
__d("WASmaxInGroupsGroupInfoAttributesMixin",["WAResultOrError","WASmaxInGroupsGroupAddressingModeMixin","WASmaxInGroupsNamedSubjectOrUnnamedSubjectFallbackMixinGroup","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"id");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"creator");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"creator_pn");if(!e.success)return e;var f=d("WASmaxParseUtils").attrIntRange(a,"creation",0,void 0);if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"p_v_id");if(!g.success)return g;var h=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"a_v_id");if(!h.success)return h;var i=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"s_t",0,void 0);if(!i.success)return i;var j=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"s_o");if(!j.success)return j;var k=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"s_o_pn");if(!k.success)return k;var l=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"open_thread_id");if(!l.success)return l;var m=d("WASmaxInGroupsGroupAddressingModeMixin").parseGroupAddressingModeMixin(a);a=d("WASmaxInGroupsNamedSubjectOrUnnamedSubjectFallbackMixinGroup").parseNamedSubjectOrUnnamedSubjectFallbackMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({id:b.value,creator:c.value,creatorPn:e.value,creation:f.value,pVId:g.value,aVId:h.value,sT:i.value,sO:j.value,sOPn:k.value,openThreadId:l.value,groupAddressingModeMixin:m.success?m.value:null,namedSubjectOrUnnamedSubjectFallbackMixinGroup:a.value})}g.parseGroupInfoAttributesMixin=a}),98);
__d("WASmaxInGroupsGroupInfoDescriptionMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"description");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"body");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"id");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"participant");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"participant_pn");if(!f.success)return f;a=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!a.success)return a;b=d("WASmaxParseUtils").contentString(b.value);return!b.success?b:d("WAResultOrError").makeResult({id:c.value,participant:e.value,participantPn:f.value,t:a.value,bodyElementValue:b.value})}g.parseGroupInfoDescriptionMixin=a}),98);
__d("WASmaxInGroupsGroupInfoParticipantAdminMixins",["WAResultOrError","WASmaxInGroupsParticipantWithJidAndLidMixin","WASmaxInGroupsParticipantWithJidAndPnMixin","WASmaxInGroupsParticipantWithJidLidAndDisplayNameMixin","WASmaxInGroupsParticipantWithJidMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsParticipantWithJidLidAndDisplayNameMixin").parseParticipantWithJidLidAndDisplayNameMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidLidAndDisplayName",value:b.value});var c=d("WASmaxInGroupsParticipantWithJidAndLidMixin").parseParticipantWithJidAndLidMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidAndLid",value:c.value});var e=d("WASmaxInGroupsParticipantWithJidAndPnMixin").parseParticipantWithJidAndPnMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidAndPn",value:e.value});var f=d("WASmaxInGroupsParticipantWithJidMixin").parseParticipantWithJidMixin(a);return f.success?d("WAResultOrError").makeResult({name:"ParticipantWithJid",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ParticipantWithJidLidAndDisplayName","ParticipantWithJidAndLid","ParticipantWithJidAndPn","ParticipantWithJid"],[b,c,e,f])}g.parseGroupInfoParticipantAdminMixins=a}),98);
__d("WASmaxInGroupsGroupInfoParticipantAdminMixin",["WAResultOrError","WASmaxInGroupsEnums","WASmaxInGroupsGroupInfoParticipantAdminMixins","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"type",d("WASmaxInGroupsEnums").ENUM_ADMIN_SUPERADMIN);if(!b.success)return b;a=d("WASmaxInGroupsGroupInfoParticipantAdminMixins").parseGroupInfoParticipantAdminMixins(a);return!a.success?a:d("WAResultOrError").makeResult({type:b.value,groupInfoParticipantAdminMixins:a.value})}g.parseGroupInfoParticipantAdminMixin=a}),98);
__d("WASmaxInGroupsGroupInfoParticipantNonAdminMixin",["WASmaxInGroupsParticipantMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantMixin").parseParticipantMixin(a);return!b.success?b:b}g.parseGroupInfoParticipantNonAdminMixin=a}),98);
__d("WASmaxInGroupsGroupInfoParticipantMixins",["WAResultOrError","WASmaxInGroupsGroupInfoParticipantAdminMixin","WASmaxInGroupsGroupInfoParticipantNonAdminMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsGroupInfoParticipantAdminMixin").parseGroupInfoParticipantAdminMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"GroupInfoParticipantAdmin",value:b.value});var c=d("WASmaxInGroupsGroupInfoParticipantNonAdminMixin").parseGroupInfoParticipantNonAdminMixin(a);return c.success?d("WAResultOrError").makeResult({name:"GroupInfoParticipantNonAdmin",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["GroupInfoParticipantAdmin","GroupInfoParticipantNonAdmin"],[b,c])}g.parseGroupInfoParticipantMixins=a}),98);
__d("WASmaxInGroupsGroupInfoParticipantMixin",["WAResultOrError","WASmaxInGroupsGroupInfoParticipantMixins","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsGroupInfoParticipantMixins").parseGroupInfoParticipantMixins(a);return!b.success?b:d("WAResultOrError").makeResult({groupInfoParticipantMixins:b.value})}g.parseGroupInfoParticipantMixin=a}),98);
__d("WASmaxInGroupsAdminAddModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"member_add_mode");if(!b.success)return b;b=d("WASmaxParseUtils").literalContent(d("WASmaxParseUtils").contentString,a,"admin_add");return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseAdminAddModeMixin=a}),98);
__d("WASmaxInGroupsAllMembersAddModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"member_add_mode");if(!b.success)return b;b=d("WASmaxParseUtils").literalContent(d("WASmaxParseUtils").contentString,a,"all_member_add");return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseAllMembersAddModeMixin=a}),98);
__d("WASmaxInGroupsUnknownAddModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"member_add_mode");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseUnknownAddModeMixin=a}),98);
__d("WASmaxInGroupsAdminOrAllMembersOrUnknownAddModeMixinGroup",["WAResultOrError","WASmaxInGroupsAdminAddModeMixin","WASmaxInGroupsAllMembersAddModeMixin","WASmaxInGroupsUnknownAddModeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsAdminAddModeMixin").parseAdminAddModeMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"AdminAddMode",value:b.value});var c=d("WASmaxInGroupsAllMembersAddModeMixin").parseAllMembersAddModeMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"AllMembersAddMode",value:c.value});var e=d("WASmaxInGroupsUnknownAddModeMixin").parseUnknownAddModeMixin(a);return e.success?d("WAResultOrError").makeResult({name:"UnknownAddMode",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["AdminAddMode","AllMembersAddMode","UnknownAddMode"],[b,c,e])}g.parseAdminOrAllMembersOrUnknownAddModeMixinGroup=a}),98);
__d("WASmaxInGroupsGroupMemberAddModeMixin",["WAResultOrError","WASmaxInGroupsAdminOrAllMembersOrUnknownAddModeMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"member_add_mode");if(!a.success)return a;a=d("WASmaxInGroupsAdminOrAllMembersOrUnknownAddModeMixinGroup").parseAdminOrAllMembersOrUnknownAddModeMixinGroup(a.value);return!a.success?a:d("WAResultOrError").makeResult({memberAddModeAdminOrAllMembersOrUnknownAddModeMixinGroup:a.value})}g.parseGroupMemberAddModeMixin=a}),98);
__d("WASmaxInGroupsGroupJoinMembershipApprovalModeEnabledMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group_join");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"state","on");return!b.success?b:d("WAResultOrError").makeResult({state:b.value})}g.parseGroupJoinMembershipApprovalModeEnabledMixin=a}),98);
__d("WASmaxInGroupsMembershipApprovalGroupJoinModeEnabledMixin",["WASmaxInGroupsGroupJoinMembershipApprovalModeEnabledMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"membership_approval_mode");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"group_join");if(!b.success)return b;a=d("WASmaxInGroupsGroupJoinMembershipApprovalModeEnabledMixin").parseGroupJoinMembershipApprovalModeEnabledMixin(b.value);return!a.success?a:a}g.parseMembershipApprovalGroupJoinModeEnabledMixin=a}),98);
__d("WASmaxInGroupsParentGroupDefaultMembershipApprovalModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"parent");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"default_membership_approval_mode","request_required");return!b.success?b:d("WAResultOrError").makeResult({defaultMembershipApprovalMode:b.value})}g.parseParentGroupDefaultMembershipApprovalModeMixin=a}),98);
__d("WASmaxInGroupsGroupInfoMixin",["WAResultOrError","WASmaxInGroupsGroupInfoAttributesMixin","WASmaxInGroupsGroupInfoDescriptionMixin","WASmaxInGroupsGroupInfoParticipantMixin","WASmaxInGroupsGroupMemberAddModeMixin","WASmaxInGroupsMembershipApprovalGroupJoinModeEnabledMixin","WASmaxInGroupsParentGroupDefaultMembershipApprovalModeMixin","WASmaxInGroupsParticipantNotAddressableMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsGroupInfoParticipantMixin").parseGroupInfoParticipantMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsParticipantNotAddressableMixin").parseParticipantNotAddressableMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{participantNotAddressableMixin:a.success?a.value:null}))}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"description");if(!b.success)return b;b=d("WASmaxInGroupsGroupInfoDescriptionMixin").parseGroupInfoDescriptionMixin(a);return d("WAResultOrError").makeResult({groupInfoDescriptionMixin:b.success?b.value:null})}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"parent");if(!b.success)return b;b=d("WASmaxInGroupsParentGroupDefaultMembershipApprovalModeMixin").parseParentGroupDefaultMembershipApprovalModeMixin(a);return d("WAResultOrError").makeResult({parentGroupDefaultMembershipApprovalModeMixin:b.success?b.value:null})}function k(a){var b=d("WASmaxParseUtils").assertTag(a,"ephemeral");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"expiration",0,2147483647);if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"trigger",0,20);return!a.success?a:d("WAResultOrError").makeResult({expiration:b.value,trigger:a.value})}function l(a){var b=d("WASmaxParseUtils").assertTag(a,"growth_locked");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","invite");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"expiration",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({type:b.value,expiration:a.value})}function m(a){var b=d("WASmaxParseUtils").assertTag(a,"membership_approval_mode");if(!b.success)return b;b=d("WASmaxInGroupsMembershipApprovalGroupJoinModeEnabledMixin").parseMembershipApprovalGroupJoinModeEnabledMixin(a);return d("WAResultOrError").makeResult({membershipApprovalGroupJoinModeEnabledMixin:b.success?b.value:null})}function n(a){var b=d("WASmaxParseUtils").assertTag(a,"linked_parent");if(!b.success)return b;b=d("WASmaxParseJid").attrGroupJid(a,"jid");return!b.success?b:d("WAResultOrError").makeResult({jid:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"description",i);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChild(a,"locked");if(!c.success)return c;var e=d("WASmaxParseUtils").optionalChild(a,"announcement");if(!e.success)return e;var f=d("WASmaxParseUtils").optionalChildWithTag(a,"parent",j);if(!f.success)return f;var g=d("WASmaxParseUtils").optionalChild(a,"no_frequently_forwarded");if(!g.success)return g;var o=d("WASmaxParseUtils").optionalChild(a,"support");if(!o.success)return o;var p=d("WASmaxParseUtils").optionalChildWithTag(a,"ephemeral",k);if(!p.success)return p;var q=d("WASmaxParseUtils").optionalChild(a,"suspended");if(!q.success)return q;var r=d("WASmaxParseUtils").optionalChildWithTag(a,"growth_locked",l);if(!r.success)return r;var s=d("WASmaxParseUtils").optionalChild(a,"default_sub_group");if(!s.success)return s;var t=d("WASmaxParseUtils").optionalChildWithTag(a,"membership_approval_mode",m);if(!t.success)return t;var u=d("WASmaxParseUtils").optionalChild(a,"incognito");if(!u.success)return u;var v=d("WASmaxParseUtils").optionalChild(a,"allow_admin_reports");if(!v.success)return v;var w=d("WASmaxParseUtils").optionalChild(a,"allow_non_admin_sub_group_creation");if(!w.success)return w;var x=d("WASmaxParseUtils").optionalChild(a,"general_chat");if(!x.success)return x;var y=d("WASmaxParseUtils").optionalChild(a,"auto_add_disabled");if(!y.success)return y;var z=d("WASmaxParseUtils").optionalChild(a,"group_history");if(!z.success)return z;var A=d("WASmaxParseUtils").optionalChildWithTag(a,"linked_parent",n);if(!A.success)return A;var B=d("WASmaxParseUtils").optionalChild(a,"hidden_group");if(!B.success)return B;var C=d("WASmaxParseUtils").optionalChild(a,"capi");if(!C.success)return C;var D=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"ack","false");if(!D.success)return D;var E=d("WASmaxInGroupsGroupInfoAttributesMixin").parseGroupInfoAttributesMixin(a);if(!E.success)return E;var F=d("WASmaxInGroupsGroupMemberAddModeMixin").parseGroupMemberAddModeMixin(a);a=d("WASmaxParseUtils").mapChildrenWithTag(a,"participant",0,19999,h);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({ack:D.value},E.value,{groupMemberAddModeMixin:F.success?F.value:null,description:b.value,hasLocked:c.value!=null,hasAnnouncement:e.value!=null,parent:f.value,hasNoFrequentlyForwarded:g.value!=null,hasSupport:o.value!=null,ephemeral:p.value,hasSuspended:q.value!=null,growthLocked:r.value,hasDefaultSubGroup:s.value!=null,membershipApprovalMode:t.value,hasIncognito:u.value!=null,hasAllowAdminReports:v.value!=null,hasAllowNonAdminSubGroupCreation:w.value!=null,hasGeneralChat:x.value!=null,hasAutoAddDisabled:y.value!=null,hasGroupHistory:z.value!=null,linkedParent:A.value,hasHiddenGroup:B.value!=null,hasCapi:C.value!=null,participant:a.value}))}g.parseGroupInfoParticipant=h;g.parseGroupInfoDescription=i;g.parseGroupInfoParent=j;g.parseGroupInfoEphemeral=k;g.parseGroupInfoGrowthLocked=l;g.parseGroupInfoMembershipApprovalMode=m;g.parseGroupInfoLinkedParent=n;g.parseGroupInfoMixin=a}),98);
__d("WASmaxInGroupsOptionalContextGroupMixin",["WAResultOrError","WASmaxParseJid"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseJid").attrGroupJid(a,"context_group_jid");return!a.success?a:d("WAResultOrError").makeResult({contextGroupJid:a.value})}g.parseOptionalContextGroupMixin=a}),98);
__d("WASmaxInGroupsJoinNotificationRequest",["WAResultOrError","WASmaxInGroupsCommonNotificationMixin","WASmaxInGroupsDedupAttrsMixin","WASmaxInGroupsEnums","WASmaxInGroupsGroupAddressingModeMixin","WASmaxInGroupsGroupInfoMixin","WASmaxInGroupsOptionalContextGroupMixin","WASmaxInGroupsParticipantPhoneNumberMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"create");if(!b.success)return b;var c=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"group");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"participant");if(!e.success)return e;var f=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,b.value,"type","new");if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,b.value,"reason",d("WASmaxInGroupsEnums").ENUM_ACCEPT_AUTOADD_DEFAULTSUBGROUPADMINADD_GENERALCHATAUTOADD_INVITE_INVITEAUTOADD_LINKEDGROUPJOIN_SUBGROUPSUGGESTIONAPPROVED);if(!g.success)return g;var h=d("WASmaxParseUtils").attrIntRange(c.value,"size",1,19999);if(!h.success)return h;c=d("WASmaxInGroupsGroupInfoMixin").parseGroupInfoMixin(c.value);if(!c.success)return c;var i=d("WASmaxInGroupsOptionalContextGroupMixin").parseOptionalContextGroupMixin(b.value);b=d("WASmaxInGroupsDedupAttrsMixin").parseDedupAttrsMixin(b.value);var j=d("WASmaxInGroupsCommonNotificationMixin").parseCommonNotificationMixin(a);if(!j.success)return j;var k=d("WASmaxInGroupsGroupAddressingModeMixin").parseGroupAddressingModeMixin(a);a=d("WASmaxInGroupsParticipantPhoneNumberMixin").parseParticipantPhoneNumberMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({participant:e.value,createType:f.value,createReason:g.value,createGroupSize:h.value,createGroupGroupInfoMixin:c.value,createOptionalContextGroupMixin:i.success?i.value:null,createDedupAttrsMixin:b.success?b.value:null},j.value,{groupAddressingModeMixin:k.success?k.value:null,participantPhoneNumberMixin:a.success?a.value:null}))}g.parseJoinNotificationRequest=a}),98);
__d("WASmaxOutGroupsJoinNotificationResponseAck",["WASmaxAttrs","WASmaxJsx","WASmaxOutGroupsNotificationClientAckMixin","WASmaxParseJid","WASmaxParseReference","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrUserJid,a,["participant"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);b=d("WASmaxOutGroupsNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",{participant:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,b.value)}),a);return b}g.makeJoinNotificationResponseAck=a}),98);
__d("WASmaxGroupsJoinNotificationRPC",["WASmaxInGroupsJoinNotificationRequest","WASmaxOutGroupsJoinNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsJoinNotificationRequest").parseJoinNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("JoinNotification",{Request:b}));return{parsedRequest:b.value,makeJoinNotificationResponseAck:function(){return d("WASmaxOutGroupsJoinNotificationResponseAck").makeJoinNotificationResponseAck(a)}}}g.receiveJoinNotificationRPC=a}),98);
__d("WASmaxInGroupsMemberAddModeChangeNotificationRequest",["WAResultOrError","WASmaxInGroupsCommonNotificationMixin","WASmaxInGroupsGroupAddressingModeMixin","WASmaxInGroupsGroupMemberAddModeMixin","WASmaxInGroupsParticipantPhoneNumberMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"participant");if(!b.success)return b;var c=d("WASmaxInGroupsCommonNotificationMixin").parseCommonNotificationMixin(a);if(!c.success)return c;var e=d("WASmaxInGroupsGroupMemberAddModeMixin").parseGroupMemberAddModeMixin(a);if(!e.success)return e;var f=d("WASmaxInGroupsGroupAddressingModeMixin").parseGroupAddressingModeMixin(a);a=d("WASmaxInGroupsParticipantPhoneNumberMixin").parseParticipantPhoneNumberMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({participant:b.value},c.value,e.value,{groupAddressingModeMixin:f.success?f.value:null,participantPhoneNumberMixin:a.success?a.value:null}))}g.parseMemberAddModeChangeNotificationRequest=a}),98);
__d("WASmaxOutGroupsMemberAddModeChangeNotificationResponseAck",["WASmaxAttrs","WASmaxJsx","WASmaxOutGroupsNotificationClientAckMixin","WASmaxParseJid","WASmaxParseReference","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrUserJid,a,["participant"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);b=d("WASmaxOutGroupsNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",{participant:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,b.value)}),a);return b}g.makeMemberAddModeChangeNotificationResponseAck=a}),98);
__d("WASmaxGroupsMemberAddModeChangeNotificationRPC",["WASmaxInGroupsMemberAddModeChangeNotificationRequest","WASmaxOutGroupsMemberAddModeChangeNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsMemberAddModeChangeNotificationRequest").parseMemberAddModeChangeNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("MemberAddModeChangeNotification",{Request:b}));return{parsedRequest:b.value,makeMemberAddModeChangeNotificationResponseAck:function(){return d("WASmaxOutGroupsMemberAddModeChangeNotificationResponseAck").makeMemberAddModeChangeNotificationResponseAck(a)}}}g.receiveMemberAddModeChangeNotificationRPC=a}),98);
__d("WASmaxInGroupsPromoteNotificationRequest",["WAResultOrError","WASmaxInGroupsCommonNotificationMixin","WASmaxInGroupsGroupAddressingModeMixin","WASmaxInGroupsParticipantMixins","WASmaxInGroupsParticipantPhoneNumberMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantMixins").parseParticipantMixins(a);return!b.success?b:d("WAResultOrError").makeResult({participantMixins:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"promote");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"participant");if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(b.value,"v_id");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,b.value,"prev_v_id");if(!f.success)return f;var g=d("WASmaxInGroupsCommonNotificationMixin").parseCommonNotificationMixin(a);if(!g.success)return g;var i=d("WASmaxInGroupsGroupAddressingModeMixin").parseGroupAddressingModeMixin(a);a=d("WASmaxInGroupsParticipantPhoneNumberMixin").parseParticipantPhoneNumberMixin(a);b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"participant",1,19999,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({participant:c.value,promoteVId:e.value,promotePrevVId:f.value},g.value,{groupAddressingModeMixin:i.success?i.value:null,participantPhoneNumberMixin:a.success?a.value:null,promoteParticipant:b.value}))}g.parsePromoteNotificationRequestPromoteParticipant=h;g.parsePromoteNotificationRequest=a}),98);
__d("WASmaxOutGroupsPromoteNotificationResponseAck",["WASmaxAttrs","WASmaxJsx","WASmaxOutGroupsNotificationClientAckMixin","WASmaxParseJid","WASmaxParseReference","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrUserJid,a,["participant"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);b=d("WASmaxOutGroupsNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",{participant:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,b.value)}),a);return b}g.makePromoteNotificationResponseAck=a}),98);
__d("WASmaxGroupsPromoteNotificationRPC",["WASmaxInGroupsPromoteNotificationRequest","WASmaxOutGroupsPromoteNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsPromoteNotificationRequest").parsePromoteNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("PromoteNotification",{Request:b}));return{parsedRequest:b.value,makePromoteNotificationResponseAck:function(){return d("WASmaxOutGroupsPromoteNotificationResponseAck").makePromoteNotificationResponseAck(a)}}}g.receivePromoteNotificationRPC=a}),98);
__d("WASmaxInGroupsRemoveNotificationMemberMixin",["WAResultOrError","WASmaxInGroupsParticipantMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantMixin").parseParticipantMixin(a);return!b.success?b:b}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"remove");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"v_id");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"prev_v_id");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"subject");if(!e.success)return e;var f=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"reason","default_sub_group_demote");if(!f.success)return f;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"participant",1,1024,h);return!a.success?a:d("WAResultOrError").makeResult({vId:b.value,prevVId:c.value,subject:e.value,reason:f.value,participant:a.value})}g.parseRemoveNotificationMemberParticipant=h;g.parseRemoveNotificationMemberMixin=a}),98);
__d("WASmaxInGroupsRemoveNotificationNonMemberMixin",["WAResultOrError","WASmaxInGroupsParticipantMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"remove");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"participant");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"subject");if(!a.success)return a;b=d("WASmaxInGroupsParticipantMixin").parseParticipantMixin(b.value);return!b.success?b:d("WAResultOrError").makeResult({subject:a.value,participantParticipantMixin:b.value})}g.parseRemoveNotificationNonMemberMixin=a}),98);
__d("WASmaxInGroupsRemoveNotificationOrRemoveNotificationNonMemberMixinGroup",["WAResultOrError","WASmaxInGroupsRemoveNotificationMemberMixin","WASmaxInGroupsRemoveNotificationNonMemberMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsRemoveNotificationMemberMixin").parseRemoveNotificationMemberMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"RemoveNotificationMember",value:b.value});var c=d("WASmaxInGroupsRemoveNotificationNonMemberMixin").parseRemoveNotificationNonMemberMixin(a);return c.success?d("WAResultOrError").makeResult({name:"RemoveNotificationNonMember",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Member","NonMember"],[b,c])}g.parseRemoveNotificationOrRemoveNotificationNonMemberMixinGroup=a}),98);
__d("WASmaxInGroupsRemoveNotificationRequest",["WAResultOrError","WASmaxInGroupsCommonNotificationMixin","WASmaxInGroupsGroupAddressingModeMixin","WASmaxInGroupsParticipantPhoneNumberMixin","WASmaxInGroupsRemoveNotificationOrRemoveNotificationNonMemberMixinGroup","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"remove");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"participant");if(!c.success)return c;var e=d("WASmaxInGroupsCommonNotificationMixin").parseCommonNotificationMixin(a);if(!e.success)return e;var f=d("WASmaxInGroupsGroupAddressingModeMixin").parseGroupAddressingModeMixin(a);a=d("WASmaxInGroupsParticipantPhoneNumberMixin").parseParticipantPhoneNumberMixin(a);b=d("WASmaxInGroupsRemoveNotificationOrRemoveNotificationNonMemberMixinGroup").parseRemoveNotificationOrRemoveNotificationNonMemberMixinGroup(b.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({participant:c.value},e.value,{groupAddressingModeMixin:f.success?f.value:null,participantPhoneNumberMixin:a.success?a.value:null,removeRemoveNotificationOrRemoveNotificationNonMemberMixinGroup:b.value}))}g.parseRemoveNotificationRequest=a}),98);
__d("WASmaxOutGroupsRemoveNotificationResponseAck",["WASmaxAttrs","WASmaxJsx","WASmaxOutGroupsNotificationClientAckMixin","WASmaxParseJid","WASmaxParseReference","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrUserJid,a,["participant"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);b=d("WASmaxOutGroupsNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",{participant:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,b.value)}),a);return b}g.makeRemoveNotificationResponseAck=a}),98);
__d("WASmaxGroupsRemoveNotificationRPC",["WASmaxInGroupsRemoveNotificationRequest","WASmaxOutGroupsRemoveNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsRemoveNotificationRequest").parseRemoveNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("RemoveNotification",{Request:b}));return{parsedRequest:b.value,makeRemoveNotificationResponseAck:function(){return d("WASmaxOutGroupsRemoveNotificationResponseAck").makeRemoveNotificationResponseAck(a)}}}g.receiveRemoveNotificationRPC=a}),98);
__d("WASmaxInGroupsSubjectChangeNotificationRequest",["WAResultOrError","WASmaxInGroupsCommonNotificationMixin","WASmaxInGroupsGroupAddressingModeMixin","WASmaxInGroupsNamedSubjectOrUnnamedSubjectFallbackMixinGroup","WASmaxInGroupsParentGroupMixin","WASmaxInGroupsParticipantPhoneNumberMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"subject");if(!b.success)return b;var c=d("WASmaxParseJid").attrUserJid(a,"participant");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,b.value,"s_o");if(!e.success)return e;var f=d("WASmaxParseUtils").attrIntRange(b.value,"s_t",0,void 0);if(!f.success)return f;var g=d("WASmaxInGroupsParentGroupMixin").parseParentGroupMixin(b.value),h=d("WASmaxInGroupsCommonNotificationMixin").parseCommonNotificationMixin(a);if(!h.success)return h;var i=d("WASmaxInGroupsGroupAddressingModeMixin").parseGroupAddressingModeMixin(a);a=d("WASmaxInGroupsParticipantPhoneNumberMixin").parseParticipantPhoneNumberMixin(a);b=d("WASmaxInGroupsNamedSubjectOrUnnamedSubjectFallbackMixinGroup").parseNamedSubjectOrUnnamedSubjectFallbackMixinGroup(b.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({participant:c.value,subjectSO:e.value,subjectST:f.value,subjectParentGroupMixin:g.success?g.value:null},h.value,{groupAddressingModeMixin:i.success?i.value:null,participantPhoneNumberMixin:a.success?a.value:null,subjectNamedSubjectOrUnnamedSubjectFallbackMixinGroup:b.value}))}g.parseSubjectChangeNotificationRequest=a}),98);
__d("WASmaxOutGroupsSubjectChangeNotificationResponseAck",["WASmaxJsx","WASmaxOutGroupsNotificationClientAckMixin","WASmaxParseJid","WASmaxParseReference","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrUserJid,a,["participant"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);b=d("WASmaxOutGroupsNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",{participant:d("WAWap").USER_JID(b.value)}),a);return b}g.makeSubjectChangeNotificationResponseAck=a}),98);
__d("WASmaxGroupsSubjectChangeNotificationRPC",["WASmaxInGroupsSubjectChangeNotificationRequest","WASmaxOutGroupsSubjectChangeNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsSubjectChangeNotificationRequest").parseSubjectChangeNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("SubjectChangeNotification",{Request:b}));return{parsedRequest:b.value,makeSubjectChangeNotificationResponseAck:function(){return d("WASmaxOutGroupsSubjectChangeNotificationResponseAck").makeSubjectChangeNotificationResponseAck(a)}}}g.receiveSubjectChangeNotificationRPC=a}),98);
__d("WASmaxInNotificationFallbackEnums",["WAJids"],(function(a,b,c,d,e,f,g){b={validators:[(a=d("WAJids")).validateBroadcastJid,a.validateCallJid,a.validateDeviceJid,a.validateDomainJid,a.validateGroupJid,a.validateStatusJid,a.validateUserJid],typeName:"BroadcastJid|CallJid|DeviceJid|DomainJid|GroupJid|StatusJid|UserJid"};g.BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID=b}),98);
__d("WASmaxInNotificationFallbackGenericNotificationRequest",["WAResultOrError","WASmaxInNotificationFallbackEnums","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrJidEnum,a,"from",d("WASmaxInNotificationFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrJidEnum,a,"participant",d("WASmaxInNotificationFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!e.success)return e;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"type");return!a.success?a:d("WAResultOrError").makeResult({id:b.value,from:c.value,participant:e.value,type:a.value})}g.parseGenericNotificationRequest=a}),98);
__d("WASmaxOutNotificationFallbackGenericNotificationResponseAck",["WASmaxAttrs","WASmaxInNotificationFallbackEnums","WASmaxJsx","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrJidEnum,a,["from"],d("WASmaxInNotificationFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);var e=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrJidEnum,a,["participant"],d("WASmaxInNotificationFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!e.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(e.error);a=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WASmaxAttrs").OPTIONAL(d("WAWap").JID,c.value),participant:d("WASmaxAttrs").OPTIONAL(d("WAWap").JID,e.value),"class":"notification",type:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a.value)});return b}g.makeGenericNotificationResponseAck=a}),98);
__d("WASmaxOutNotificationFallbackGenericNotificationResponseBadStanza",["WASmaxAttrs","WASmaxInNotificationFallbackEnums","WASmaxJsx","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a,b){a=a.ackError;var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,b,["id"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);var e=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrJidEnum,b,["from"],d("WASmaxInNotificationFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!e.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(e.error);var f=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrJidEnum,b,["participant"],d("WASmaxInNotificationFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!f.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(f.error);b=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseUtils").attrString,b,["type"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);c=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(c.value),to:d("WASmaxAttrs").OPTIONAL(d("WAWap").JID,e.value),participant:d("WASmaxAttrs").OPTIONAL(d("WAWap").JID,f.value),"class":"notification",type:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,b.value),error:d("WAWap").INT(a)});return c}g.makeGenericNotificationResponseBadStanza=a}),98);
__d("WASmaxNotificationFallbackGenericNotificationRPC",["WASmaxInNotificationFallbackGenericNotificationRequest","WASmaxOutNotificationFallbackGenericNotificationResponseAck","WASmaxOutNotificationFallbackGenericNotificationResponseBadStanza","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInNotificationFallbackGenericNotificationRequest").parseGenericNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GenericNotification",{Request:b}));return{parsedRequest:b.value,makeGenericNotificationResponseBadStanza:function(b){return d("WASmaxOutNotificationFallbackGenericNotificationResponseBadStanza").makeGenericNotificationResponseBadStanza(b,a)},makeGenericNotificationResponseAck:function(){return d("WASmaxOutNotificationFallbackGenericNotificationResponseAck").makeGenericNotificationResponseAck(a)}}}g.receiveGenericNotificationRPC=a}),98);
__d("WAParseGroupNotifications",["WAJids","WALogger","WAResultOrError","WASmaxDecisionTreeUtils","WASmaxGroupsAddNotificationRPC","WASmaxGroupsDeleteNotificationRPC","WASmaxGroupsDemoteNotificationRPC","WASmaxGroupsJoinNotificationRPC","WASmaxGroupsMemberAddModeChangeNotificationRPC","WASmaxGroupsPromoteNotificationRPC","WASmaxGroupsRemoveNotificationRPC","WASmaxGroupsSubjectChangeNotificationRPC","WASmaxNotificationFallbackGenericNotificationRPC","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseMemberAddModeNotification: Unexpected memberAddMode ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseGroupNotification: Unknown notification ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseGroupNotification: Received node with no children"]);j=function(){return a};return a}function a(a){var b=d("WASmaxDecisionTreeUtils").firstChild(a);if(!b.success){d("WALogger").ERROR(j());var c=d("WASmaxNotificationFallbackGenericNotificationRPC").receiveGenericNotificationRPC(a),e=c.makeGenericNotificationResponseBadStanza;c=c.parsedRequest.id;return{action:{type:"unknown"},id:c,ack:function(){return e({ackError:487})}}}c=b.value.tag;switch(c){case"create":return k(a);case"add":return m(a);case"remove":return n(a);case"delete":b=d("WASmaxGroupsDeleteNotificationRPC").receiveDeleteNotificationRPC(a);var f=b.parsedRequest,g=f.participant,h=f.from,l=f.offline,r=f.t;f=f.id;b=b.makeDeleteNotificationResponseAck;return{action:{type:"delete",participant:g,groupJid:h},ack:b,offline:l,serverTs:d("WATimeUtils").castToUnixTime(r),id:f};case"promote":return o(a);case"demote":return p(a);case"subject":return q(a);case"member_add_mode":g=s(a);if(g!=null)return g;break;default:d("WALogger").ERROR(i(),c)}h=d("WASmaxNotificationFallbackGenericNotificationRPC").receiveGenericNotificationRPC(a);var t=h.makeGenericNotificationResponseBadStanza;b=h.parsedRequest.id;return{action:{type:"unknown"},id:b,ack:function(){return t({ackError:487})}}}function k(a){a=d("WASmaxGroupsJoinNotificationRPC").receiveJoinNotificationRPC(a);var b=a.parsedRequest,c=b.from,e=b.createGroupGroupInfoMixin,f=e.id,g=e.creator,h=e.creation,i=e.participant,j=e.namedSubjectOrUnnamedSubjectFallbackMixinGroup,k=e.sO,l=e.sT,m=e.pVId,n=e.description;e=e.groupMemberAddModeMixin;var o=b.createDedupAttrsMixin,p=b.createType,q=b.participant,s=b.t,t=b.offline;b=b.id;a=a.makeJoinNotificationResponseAck;n=n==null?void 0:n.groupInfoDescriptionMixin;k={jid:d("WAJids").toGroupJid(f),creator:(f=g)!=null?f:void 0,creationTs:d("WATimeUtils").castToUnixTime(h),participants:i.map(function(a){var b=a.groupInfoParticipantMixins;a=a.participantNotAddressableMixin;return d("WAResultOrError").makeResult({addressable:(a==null?void 0:a.addressable)!=="false",type:b.name==="GroupInfoParticipantAdmin"?b.value.type:"participant",user:b.name==="GroupInfoParticipantAdmin"?b.value.groupInfoParticipantAdminMixins.value.jid:b.value.participantMixins.value.jid})}),subject:{content:j.value.subject,user:(g=k)!=null?g:void 0,ts:l==null?void 0:d("WATimeUtils").castToUnixTime(l)},description:n==null?void 0:{id:n.id,content:n.bodyElementValue,user:n.participant,ts:d("WATimeUtils").castToUnixTime(n.t)},participantVersion:(f=m)!=null?f:void 0,inviter:(h=q)!=null?h:void 0,memberAddMode:r(e==null?void 0:(i=e.memberAddModeAdminOrAllMembersOrUnknownAddModeMixinGroup)==null?void 0:(j=i.value)==null?void 0:j.elementValue)};g=d("WATimeUtils").castToUnixTime(s);return{action:{type:"join",isNew:p==="new",isE2EEMigration:(o==null?void 0:o.createCtx)==="e2ee_migration",key:o==null?void 0:o.key,serverTs:d("WATimeUtils").castToUnixTime(s),groupJid:c,group:k},serverTs:g,offline:t,ack:a,id:b}}function l(a){if(a===null)return;return a==="invite"?"invite":"accept"}function m(a){a=d("WASmaxGroupsAddNotificationRPC").receiveAddNotificationRPC(a);var b=a.parsedRequest,c=b.from,e=b.participant,f=b.addVId,g=b.addPrevVId,h=b.addReason,i=b.addParticipant,j=b.offline,k=b.t;b=b.id;a=a.makeAddNotificationResponseAck;return{action:{type:"add",versionId:f,previousVersionId:g,reason:l(h),participants:i.map(function(a){return{user:a.participantMixins.value.jid,type:"participant",addressable:((a=a.participantNotAddressableMixin)==null?void 0:a.addressable)!=="false"}}),groupJid:c,participant:e},serverTs:d("WATimeUtils").castToUnixTime(k),offline:j,ack:a,id:b}}function n(a){a=d("WASmaxGroupsRemoveNotificationRPC").receiveRemoveNotificationRPC(a);var b=a.parsedRequest,c=b.offline,e=b.from,f=b.participant,g=b.t,h=b.id;b=b.removeRemoveNotificationOrRemoveNotificationNonMemberMixinGroup;a=a.makeRemoveNotificationResponseAck;var i=b.name==="RemoveNotificationMember"?b.value.participant.map(function(a){return{user:a.participantMixins.value.jid,type:"nonparticipant",addressable:!0}}):[{user:b.value.participantParticipantMixin.participantMixins.value.jid,type:"nonparticipant",addressable:!0}];return{action:{type:"remove",versionId:b.value.vId,previousVersionId:b.value.prevVId,participants:i,groupJid:e,participant:f},serverTs:d("WATimeUtils").castToUnixTime(g),ack:a,offline:c,id:h}}function o(a){a=d("WASmaxGroupsPromoteNotificationRPC").receivePromoteNotificationRPC(a);var b=a.parsedRequest,c=b.promoteVId,e=b.promotePrevVId,f=b.promoteParticipant,g=b.from,h=b.participant,i=b.offline,j=b.t;b=b.id;a=a.makePromoteNotificationResponseAck;return{action:{type:"promote",versionId:c,previousVersionId:e,participants:f.map(function(a){a=a.participantMixins.value.jid;return{user:a,type:"admin",addressable:!0}}),groupJid:g,participant:h},serverTs:d("WATimeUtils").castToUnixTime(j),offline:i,ack:a,id:b}}function p(a){a=d("WASmaxGroupsDemoteNotificationRPC").receiveDemoteNotificationRPC(a);var b=a.parsedRequest,c=b.demoteVId,e=b.demotePrevVId,f=b.demoteParticipant,g=b.from,h=b.participant,i=b.offline,j=b.t;b=b.id;a=a.makeDemoteNotificationResponseAck;return{action:{type:"demote",versionId:c,previousVersionId:e,participants:f.map(function(a){a=a.participantMixins.value.jid;return{user:a,type:"participant",addressable:!0}}),groupJid:g,participant:h},serverTs:d("WATimeUtils").castToUnixTime(j),offline:i,ack:a,id:b}}function q(a){a=d("WASmaxGroupsSubjectChangeNotificationRPC").receiveSubjectChangeNotificationRPC(a);var b=a.parsedRequest,c=b.subjectNamedSubjectOrUnnamedSubjectFallbackMixinGroup,e=b.subjectST,f=b.from,g=b.participant,h=b.offline,i=b.t;b=b.id;a=a.makeSubjectChangeNotificationResponseAck;return{action:{type:"subject",subject:c.name==="NamedSubject"?c.value.subject:null,ts:d("WATimeUtils").castToUnixTime(e),groupJid:f,participant:g},serverTs:d("WATimeUtils").castToUnixTime(i),ack:a,offline:h,id:b}}function r(a){if(a==="admin_add"||a==="all_member_add")return a}function s(a){a=d("WASmaxGroupsMemberAddModeChangeNotificationRPC").receiveMemberAddModeChangeNotificationRPC(a);var b=a.parsedRequest,c=b.memberAddModeAdminOrAllMembersOrUnknownAddModeMixinGroup,e=b.from,f=b.offline,g=b.participant,i=b.t;b=b.id;a=a.makeMemberAddModeChangeNotificationResponseAck;var j=r(c.value.elementValue);if(j==null){d("WALogger").ERROR(h(),c.value.elementValue);return}return{action:{type:"memberAddMode",memberAddMode:j,groupJid:e,participant:g},serverTs:d("WATimeUtils").castToUnixTime(i),ack:a,offline:f,id:b}}g.parseGroupNotification=a}),98);
__d("WACreateHandleGroupNotificationBranch",["Promise","WAParseGroupNotifications","WAResultOrError","WATagsLogger","WAUnknownStanzaError"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["start handling"]);i=function(){return a};return a}var j=d("WATagsLogger").TAGS(["decision tree","handleGroupNotification"]);function a(a){a=(a=a.groupMessage)!=null?a:{};var c=a.handleGroupNotification;return function(a){j.LOG(i());if(c!=null){a=d("WAParseGroupNotifications").parseGroupNotification(a);var e=a.action,f=a.ack,g=a.offline,k=a.serverTs;a=a.id;if(e.type!=="unknown")return c({makeAck:f,action:e,offline:g,serverTs:k,id:a}).then(d("WAResultOrError").makeResult)}return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError)}}g.createHandleGroupNotification=a}),98);
__d("WASmaxInAbPropsServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInAbPropsRefreshRequest",["WAResultOrError","WASmaxInAbPropsServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"abprops");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","server");if(!c.success)return c;var e=d("WASmaxParseJid").attrDeviceJid(a,"from");if(!e.success)return e;b=d("WASmaxParseUtils").attrIntRange(b.value,"protocol",1,10);if(!b.success)return b;a=d("WASmaxInAbPropsServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({type:c.value,from:e.value,abpropsProtocol:b.value},a.value))}g.parseRefreshRequest=a}),98);
__d("WASmaxOutAbPropsNotificationClientAckMixin",["WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrDeviceJid,a,["from"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").DEVICE_JID(c.value),"class":"notification",type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNotificationClientAckMixin=a}),98);
__d("WASmaxOutAbPropsRefreshResponseAck",["WASmaxJsx","WASmaxOutAbPropsNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutAbPropsNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeRefreshResponseAck=a}),98);
__d("WASmaxAbPropsRefreshRPC",["WASmaxInAbPropsRefreshRequest","WASmaxOutAbPropsRefreshResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAbPropsRefreshRequest").parseRefreshRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Refresh",{Request:b}));return{parsedRequest:b.value,makeRefreshResponseAck:function(){return d("WASmaxOutAbPropsRefreshResponseAck").makeRefreshResponseAck(a)}}}g.receiveRefreshRPC=a}),98);
__d("WASmaxInClientLogServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInClientLogLogRequest",["WAResultOrError","WASmaxInClientLogServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"log");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","server");if(!c.success)return c;var e=d("WASmaxParseJid").attrDeviceJid(a,"from");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,b.value,"start_t");if(!f.success)return f;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,b.value,"end_t");if(!b.success)return b;a=d("WASmaxInClientLogServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({type:c.value,from:e.value,logStartT:f.value,logEndT:b.value},a.value))}g.parseLogRequest=a}),98);
__d("WASmaxOutClientLogNotificationClientAckMixin",["WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrDeviceJid,a,["from"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").DEVICE_JID(c.value),"class":"notification",type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNotificationClientAckMixin=a}),98);
__d("WASmaxOutClientLogLogResponseAck",["WASmaxJsx","WASmaxOutClientLogNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutClientLogNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeLogResponseAck=a}),98);
__d("WASmaxClientLogLogRPC",["WASmaxInClientLogLogRequest","WASmaxOutClientLogLogResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInClientLogLogRequest").parseLogRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Log",{Request:b}));return{parsedRequest:b.value,makeLogResponseAck:function(){return d("WASmaxOutClientLogLogResponseAck").makeLogResponseAck(a)}}}g.receiveLogRPC=a}),98);
__d("WASmaxInServerPropsServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInServerPropsTriggerRefreshDeviceFromMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseJid").attrDeviceJid(a,"from");return!b.success?b:d("WAResultOrError").makeResult({from:b.value})}g.parseTriggerRefreshDeviceFromMixin=a}),98);
__d("WASmaxInServerPropsTriggerRefreshServerFromMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");return!b.success?b:d("WAResultOrError").makeResult({from:b.value})}g.parseTriggerRefreshServerFromMixin=a}),98);
__d("WASmaxInServerPropsTriggerRefreshUserFromDeprecatedMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"from");return!b.success?b:d("WAResultOrError").makeResult({from:b.value})}g.parseTriggerRefreshUserFromDeprecatedMixin=a}),98);
__d("WASmaxInServerPropsTriggerRefreshServerFromOrTriggerRefreshDeviceFromOrTriggerRefreshUserFromDeprecatedMixinGroup",["WAResultOrError","WASmaxInServerPropsTriggerRefreshDeviceFromMixin","WASmaxInServerPropsTriggerRefreshServerFromMixin","WASmaxInServerPropsTriggerRefreshUserFromDeprecatedMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInServerPropsTriggerRefreshServerFromMixin").parseTriggerRefreshServerFromMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"TriggerRefreshServerFrom",value:b.value});var c=d("WASmaxInServerPropsTriggerRefreshDeviceFromMixin").parseTriggerRefreshDeviceFromMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"TriggerRefreshDeviceFrom",value:c.value});var e=d("WASmaxInServerPropsTriggerRefreshUserFromDeprecatedMixin").parseTriggerRefreshUserFromDeprecatedMixin(a);return e.success?d("WAResultOrError").makeResult({name:"TriggerRefreshUserFromDeprecated",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ServerFrom","DeviceFrom","UserFromDeprecated"],[b,c,e])}g.parseTriggerRefreshServerFromOrTriggerRefreshDeviceFromOrTriggerRefreshUserFromDeprecatedMixinGroup=a}),98);
__d("WASmaxInServerPropsTriggerRefreshRequest",["WAResultOrError","WASmaxInServerPropsServerNotificationMixin","WASmaxInServerPropsTriggerRefreshServerFromOrTriggerRefreshDeviceFromOrTriggerRefreshUserFromDeprecatedMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"props");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","server");if(!b.success)return b;var c=d("WASmaxInServerPropsServerNotificationMixin").parseServerNotificationMixin(a);if(!c.success)return c;a=d("WASmaxInServerPropsTriggerRefreshServerFromOrTriggerRefreshDeviceFromOrTriggerRefreshUserFromDeprecatedMixinGroup").parseTriggerRefreshServerFromOrTriggerRefreshDeviceFromOrTriggerRefreshUserFromDeprecatedMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({type:b.value},c.value,{triggerRefreshServerFromOrTriggerRefreshDeviceFromOrTriggerRefreshUserFromDeprecatedMixinGroup:a.value}))}g.parseTriggerRefreshRequest=a}),98);
__d("WASmaxInServerPropsEnums",["WAJids"],(function(a,b,c,d,e,f,g){a={validators:[d("WAJids").validateDeviceJid,d("WAJids").validateDomainJid,d("WAJids").validateUserJid],typeName:"DeviceJid|DomainJid|UserJid"};g.DEVICEJID_DOMAINJID_USERJID=a}),98);
__d("WASmaxOutServerPropsNotificationClientAckMixin",["WASmaxInServerPropsEnums","WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrJidEnum,a,["from"],d("WASmaxInServerPropsEnums").DEVICEJID_DOMAINJID_USERJID);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").JID(c.value),"class":"notification",type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNotificationClientAckMixin=a}),98);
__d("WASmaxOutServerPropsTriggerRefreshResponseAck",["WASmaxJsx","WASmaxOutServerPropsNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutServerPropsNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeTriggerRefreshResponseAck=a}),98);
__d("WASmaxServerPropsTriggerRefreshRPC",["WASmaxInServerPropsTriggerRefreshRequest","WASmaxOutServerPropsTriggerRefreshResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInServerPropsTriggerRefreshRequest").parseTriggerRefreshRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("TriggerRefresh",{Request:b}));return{parsedRequest:b.value,makeTriggerRefreshResponseAck:function(){return d("WASmaxOutServerPropsTriggerRefreshResponseAck").makeTriggerRefreshResponseAck(a)}}}g.receiveTriggerRefreshRPC=a}),98);
__d("WACreateHandleServerNotificationBranch",["Promise","WALogger","WAResultOrError","WASmaxAbPropsRefreshRPC","WASmaxClientLogLogRPC","WASmaxDecisionTreeUtils","WASmaxServerPropsTriggerRefreshRPC","WATimeUtils","WAUnknownStanzaError"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseServerNotification notification without children"]);i=function(){return a};return a}function a(a){var c,e=(c=a.abprops)==null?void 0:c.handleAbPropsRefreshNotification,f=(c=a.clientLog)==null?void 0:c.handleClientLogNotification,g=(c=a.serverProps)==null?void 0:c.handleServerPropsRefreshNotification;return function(a){var c=d("WASmaxDecisionTreeUtils").firstChild(a);if(c.success===!1){d("WALogger").ERROR(i());return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError)}c=c.value.tag;switch(c){case"abprops":if(e!=null){c=d("WASmaxAbPropsRefreshRPC").receiveRefreshRPC(a);var j=c.parsedRequest;c=c.makeRefreshResponseAck;return e({serverTs:d("WATimeUtils").castToUnixTime(j.t),id:j.id,offline:j.offline,makeAck:c}).then(d("WAResultOrError").makeResult)}break;case"props":if(g!=null){j=d("WASmaxServerPropsTriggerRefreshRPC").receiveTriggerRefreshRPC(a);c=j.parsedRequest;j=j.makeTriggerRefreshResponseAck;return g({serverTs:d("WATimeUtils").castToUnixTime(c.t),id:c.id,offline:c.offline,makeAck:j}).then(d("WAResultOrError").makeResult)}break;case"log":if(f!=null){c=d("WASmaxClientLogLogRPC").receiveLogRPC(a);j=c.parsedRequest;a=c.makeLogResponseAck;return f({serverTs:d("WATimeUtils").castToUnixTime(j.t),id:j.id,offline:j.offline,makeAck:a}).then(d("WAResultOrError").makeResult)}break}return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError)}}g.createHandleServerNotification=a}),98);
__d("WASmaxInSyncdServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInSyncdNewPatchRequest",["WAResultOrError","WASmaxInSyncdServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"collection");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"name");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"version",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({name:b.value,version:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","server_sync");if(!c.success)return c;var e=d("WASmaxInSyncdServerNotificationMixin").parseServerNotificationMixin(a);if(!e.success)return e;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"collection",1,20,h);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:b.value,type:c.value},e.value,{collection:a.value}))}g.parseNewPatchRequestCollection=h;g.parseNewPatchRequest=a}),98);
__d("WASmaxOutSyncdNewPatchResponseClientAck",["WASmaxJsx","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrDomainJid,a,["from"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{"class":"notification",type:"server_sync",to:d("WAWap").DOMAIN_JID(b.value),id:d("WAWap").STANZA_ID(a.value)});return b}g.makeNewPatchResponseClientAck=a}),98);
__d("WASmaxSyncdNewPatchRPC",["WASmaxInSyncdNewPatchRequest","WASmaxOutSyncdNewPatchResponseClientAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInSyncdNewPatchRequest").parseNewPatchRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("NewPatch",{Request:b}));return{parsedRequest:b.value,makeNewPatchResponseClientAck:function(){return d("WASmaxOutSyncdNewPatchResponseClientAck").makeNewPatchResponseClientAck(a)}}}g.receiveNewPatchRPC=a}),98);
__d("WASyncdConst",["$InternalEnum","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=1e3;c=1e3*60*60;e=2;f=d("WATimeUtils").DAY_MILLISECONDS*2;d=100;var h=2e3,i=10,j=100,k=0,l=3,m=7,n=(b=b("$InternalEnum"))({Star:"star",Contact:"contact",Mute:"mute",PinDEPRECATED:"pin",Pin:"pin_v1",SettingPushName:"setting_pushName",LabelEdit:"label_edit",LabelMessage:"label_message",LabelJid:"label_jid",QuickReply:"quick_reply",LocaleSetting:"setting_locale",Archive:"archive",MarkChatAsRead:"markChatAsRead",ClearChat:"clearChat",DeleteMessageForMe:"deleteMessageForMe",Sentinel:"sentinel",UnarchiveChatsSetting:"setting_unarchiveChats",DeleteChat:"deleteChat",AndroidUnsupportedActions:"android_unsupported_actions",PrimaryFeature:"primary_feature",Subscription:"subscription",Nux:"nux",Agent:"deviceAgent",TimeFormat:"time_format",UserStatusMute:"userStatusMute",PrimaryVersion:"primary_version",RemoveRecentSticker:"removeRecentSticker",ChatAssignment:"agentChatAssignment",ChatAssignmentOpenedStatus:"agentChatAssignmentOpenedStatus",FavoriteSticker:"favoriteSticker",PnForLidChat:"pnForLidChat",ShareOwnPn:"shareOwnPn",ExternalWebBeta:"external_web_beta",MarketingMessage:"marketingMessage",MarketingMessageBroadcast:"marketingMessageBroadcast",StatusPrivacy:"status_privacy",BotWelcomeRequest:"bot_welcome_request",LabelReordering:"label_reordering",PaymentInfo:"payment_info",CustomPaymentMethods:"custom_payment_methods",LockChat:"lock",ChatLockSettings:"setting_chatLock",DeviceCapabilities:"device_capabilities",DisableLinkPreviews:"setting_disableLinkPreviews",NoteEdit:"note_edit",Favorites:"favorites",MerchantPaymentPartner:"merchant_payment_partner"}),o=b({Regular:"regular",RegularLow:"regular_low",RegularHigh:"regular_high",CriticalBlock:"critical_block",CriticalUnblockLow:"critical_unblock_low"}),p=b.Mirrored(["Success","SuccessHasMore","Conflict","ConflictHasMore","ErrorRetry","ErrorFatal","Blocked"]),q=b.Mirrored(["UpToDate","Dirty","FailingFiniteRetry","Fatal","Blocked"]),r=b.Mirrored(["Success","Malformed","Orphan","Unsupported","Skipped","Failed"]),s=b.Mirrored(["Msg","Chat","Agent","ChatAssignment","UserStatusMute","Account"]),t=b.Mirrored(["ApplyRemoteAndDropLocal","SkipRemote","SkipRemoteAndDropLocal"]);b=b.Mirrored(["Patch","Snapshot","Local"]);g.BACKOFF_MIN_TIMEOUT=a;g.BACKOFF_MAX_TIMEOUT=c;g.BACKOFF_BASE=e;g.FINITE_FAILURE_EXPIRY_DURATION=f;g.MIN_INLINE_MUTATIONS=d;g.MAX_INLINE_MUTATIONS=h;g.MIN_PATCH_SIZE=i;g.MAX_PATCH_SIZE=j;g.DEFAULT_COLLECTION_VERSION=k;g.LABEL_ASSOCIATION_SYNC_VERSION=l;g.CHAT_ASSIGNMENT_SYNC_VERSION=m;g.Actions=n;g.CollectionName=o;g.CollectionState=p;g.CollectionSyncState=q;g.SyncActionState=r;g.SyncModelType=s;g.ConflictResolutionState=t;g.SyncDataType=b}),98);
__d("WACreateHandleServerSyncNotificationBranch",["Promise","WALogger","WAResultOrError","WASmaxSyncdNewPatchRPC","WASyncdConst","WATimeUtils","WAUnknownStanzaError"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleServerSyncNotification: Incorrect collection notification"]);i=function(){return a};return a}function a(a){var c=(a=a.syncd)==null?void 0:a.handleSyncdNewPatchNotification;return function(a){if(c==null)return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError);a=d("WASmaxSyncdNewPatchRPC").receiveNewPatchRPC(a);var e=a.parsedRequest,f=e.collection,g=e.offline,j=e.t;e=e.id;a=a.makeNewPatchResponseClientAck;f=new Map(f.map(function(a){var b=a.name;a=a.version;b=d("WASyncdConst").CollectionName.cast(b);if(b==null)d("WALogger").ERROR(i());else return[b,a]}).filter(Boolean));return c({makeAck:a,collections:f,offline:g,id:e,serverTs:d("WATimeUtils").castToUnixTime(j)}).then(d("WAResultOrError").makeResult)}}g.createHandleServerSyncNotification=a}),98);
__d("WARuntimeError",["WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("WAResultOrError").makeError({type:"runtime-error",error:a})}g.runtimeError=a}),98);
__d("WACreateHandleNotification",["Promise","WACreateHandleAccountSyncNotificationBranch","WACreateHandleDevicesNotificationBranch","WACreateHandleEncryptNotificationBranch","WACreateHandleFbDeviceChangeNotificationBranch","WACreateHandleFbMultiwayNotificationBranch","WACreateHandleFbThreadNotificationBranch","WACreateHandleGroupNotificationBranch","WACreateHandleServerNotificationBranch","WACreateHandleServerSyncNotificationBranch","WAResultOrError","WARuntimeError","WASmaxNotificationFallbackGenericNotificationRPC","WASmaxParseUtils","WASmaxParsingFailure","WATagsLogger","WAUnknownStanzaError"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["runtime-error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["runtime-error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["received unknown notifcation: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["start handling"]);l=function(){return a};return a}var m={encrypt:"encrypt","w:gp2":"w:gp2",server:"server",server_sync:"server_sync","fbid:devices":"fbid:devices","fbid:thread":"fbid:thread","fb:multiway":"fb:multiway",mediaretry:"mediaretry",picture:"picture",business:"business",contacts:"contacts",devices:"devices",disappearing_mode:"disappearing_mode",status:"status",account_sync:"account_sync",pay:"pay",psa:"psa",privacy_token:"privacy_token",link_code_companion_reg:"link_code_companion_reg"},n=d("WATagsLogger").TAGS(["decision tree","handleNotification"]);function a(a){var c=d("WACreateHandleEncryptNotificationBranch").createHandleEncryptNotification(a),e=d("WACreateHandleServerNotificationBranch").createHandleServerNotification(a),f=d("WACreateHandleServerSyncNotificationBranch").createHandleServerSyncNotification(a),g=d("WACreateHandleGroupNotificationBranch").createHandleGroupNotification(a),o=d("WACreateHandleAccountSyncNotificationBranch").createHandleAccountSyncNotification(a),p=d("WACreateHandleDevicesNotificationBranch").createHandleDevicesNotification(a);return function(q,r,s){n.DEV(l());var t=d("WASmaxParseUtils").attrStringEnum(q,"type",m);return(h||(h=b("Promise"))).resolve().then(function(){if(!t.success)return d("WAUnknownStanzaError").unknownStanzaError;var b=t.value;switch(b){case"fbid:devices":var h;h=(h=a.fb)==null?void 0:h.handleFbDeviceChangeNotification;if(h)return d("WACreateHandleFbDeviceChangeNotificationBranch").createHandleFbDeviceChangeNotification(h)(q,s);break;case"fbid:thread":h=(h=a.fb)==null?void 0:h.handleFbThreadNotification;if(h)return d("WACreateHandleFbThreadNotificationBranch").createHandleFbThreadNotification(h)(q);break;case"fb:multiway":h=(h=a.fb)==null?void 0:h.handleFbMultiwayNotification;if(h)return d("WACreateHandleFbMultiwayNotificationBranch").createHandleFbMultiwayNotification(h)(q);break;case"encrypt":return c(q);case"server":return e(q);case"server_sync":return f(q);case"w:gp2":return g(q);case"devices":return p(q);case"account_sync":return o(q);case"mediaretry":break;case"picture":break;case"business":break;case"contacts":break;case"disappearing_mode":break;case"status":break;case"pay":break;case"psa":break;case"privacy_token":break;case"link_code_companion_reg":break;default:b}return d("WAUnknownStanzaError").unknownStanzaError})["catch"](function(a){return a instanceof d("WASmaxParsingFailure").SmaxParsingFailure?d("WAUnknownStanzaError").unknownStanzaError:d("WARuntimeError").runtimeError(a)}).then(function(a){if(a.success)return a;var b=d("WASmaxNotificationFallbackGenericNotificationRPC").receiveGenericNotificationRPC(q),c=b.makeGenericNotificationResponseAck;b=b.makeGenericNotificationResponseBadStanza;if(a.error.type==="unknown-stanza"){n.WARN(k(),q.toString());return d("WAResultOrError").makeResult(b({ackError:487}))}else{a.error.type;n.WARN(j(),a.error.error.message);n.ERROR(i(),a.error.error);return d("WAResultOrError").makeResult(c())}})}}g.createHandleNotification=a}),98);
__d("WAMapMixinNameToReceiptType",[],(function(a,b,c,d,e,f){"use strict";var g={SenderType:"sender",ReadType:"read",InactiveType:"inactive",ReadSelfType:"read-self"};function a(a){return g[a]}f.mapMixinNameToReceiptType=a}),66);
__d("WAParseKeyBundleMixing",["WAParsableXmlNode","WASignalKeys"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return{regId:a,identity:d("WASignalKeys").serializeIdentity(b.keysIdentityKeyMixin.elementValue),signedKey:{id:d("WAParsableXmlNode").convertBytesToUint(b.keysSignedPreKeyMixin.skeyIdKeyIDMixin.elementValue,3),publicKey:d("WASignalKeys").serializeIdentity(b.keysSignedPreKeyMixin.skeyValueKeyDataMixin.elementValue),signature:b.keysSignedPreKeyMixin.skeySignatureElementValue},oneTimeKey:null}}g.parseKeyBundleMixin=a}),98);
__d("WATransformToRetryReceipt",["WAParseKeyBundleMixing","WASignalOther","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var b=a.aggregate,c=a.retryMixin,e=a.recipient;a=a.offline;var f=c.keyBundleMixin,g=c.registrationElementValue,h=c.retryCount,i=c.retryId,j=c.retryT;c.retryV;c.type;c=d("WASignalOther").castRegistrationIdFromBytes(g);return{stanzaId:b.stanzaId,retryStanzaId:i,receiptSender:b.receiptSender,retryCount:h,regId:c,offline:a,timestamp:d("WATimeUtils").castToUnixTime(j),keys:f?d("WAParseKeyBundleMixing").parseKeyBundleMixin(c,f):null,recipient:e}};g.transformToRetryReceipt=a}),98);
__d("WACreateHandleGroupReceiptBranch",["Promise","WAMapMixinNameToReceiptType","WAResultOrError","WATagsLogger","WATransformToRetryReceipt"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleGroupReceipt: receipt type "," is not handled yet"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["retry receipt not supported for aggregated messages"]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["decision tree","handleGroupReceiptBranch"]);function a(a){var c=a.handleGroupReceipt,e=a.handleGroupRetryReceipt;return function(a){var f=a.from,g=a.aggregate,l=a.receiptType,m=a.makeAck,n=a.offline,o=a.serverTs,p=a.recipient;a=a.socketId;f=f;n=(n=n)!=null?n:null;if(l==null){var q=p==null?"@me":p;if(c!=null)return c(babelHelpers["extends"]({makeAck:m,author:q,chat:f,offline:n,serverTs:o},g,{receiptType:"delivered"})).then(d("WAResultOrError").makeResult)}else{q=p==null?"@me":l.name==="SenderType"||l.name==="ReadSelfType"?"@me":p;switch(l.name){case"ReadType":case"SenderType":case"InactiveType":case"ReadSelfType":if(c!=null)return c(babelHelpers["extends"]({makeAck:m,author:q,chat:f,offline:n,serverTs:o},g,{receiptType:d("WAMapMixinNameToReceiptType").mapMixinNameToReceiptType(l.name)})).then(d("WAResultOrError").makeResult);break;case"Retry":if(g.aggregatedType!=="none"){k.ERROR(j());return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult(m()))}if(e!=null){g=d("WATransformToRetryReceipt").transformToRetryReceipt({aggregate:g,retryMixin:l.value,recipient:p,offline:n});return e({receiptType:"retry",retryReceipt:g,makeAck:m,author:q,chat:f,offline:n,serverTs:o,socketId:a}).then(d("WAResultOrError").makeResult)}break;case"PlayedType":case"DeliverBizType":case"PlayedSelfType":case"ServerErrorType":case"DeliverLIDFeatureIncapableType":case"EngagedType":case"DeliverMdDowngradeType":case"ViewType":case"DeprecatedDeliveryType":case"UnknownType":k.ERROR(i(),l.name);break;default:l.name}}return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult(m()))}}g.createHandleGroupReceiptBranch=a}),98);
__d("WACreateHandleIndividualReceiptBranch",["Promise","WAJids","WAMapMixinNameToReceiptType","WAResultOrError","WATagsLogger","WATransformToRetryReceipt"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleIndividualReceipt: receipt type "," is not handled yet"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["retry receipt not supported for aggregated messages"]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["decision tree","handleIndividualMessageBranch"]);function a(a){var c=a.handleIndividualReceipt,e=a.handleIndividualRetryReceipt;return function(a){var f=a.aggregate,g=a.receiptType,l=a.makeAck,m=a.offline,n=a.serverTs,o=a.recipient;a=a.socketId;m=(m=m)!=null?m:null;var p=f.receiptSender;p=o==null?d("WAJids").extractUserJid(p):o;if(g==null){var q=o==null?"@me":o;if(c!=null)return c(babelHelpers["extends"]({makeAck:l,author:q,chat:p,offline:m,serverTs:n},f,{receiptType:"delivered"})).then(d("WAResultOrError").makeResult)}else{q=o==null?"@me":g.name==="SenderType"||g.name==="ReadSelfType"?"@me":o;switch(g.name){case"ReadType":case"SenderType":case"InactiveType":case"ReadSelfType":if(c!=null)return c(babelHelpers["extends"]({makeAck:l,author:q,chat:p,offline:m,serverTs:n},f,{receiptType:d("WAMapMixinNameToReceiptType").mapMixinNameToReceiptType(g.name)})).then(d("WAResultOrError").makeResult);break;case"Retry":if(f.aggregatedType!=="none"){k.ERROR(j());return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult(l()))}if(e!=null){f=d("WATransformToRetryReceipt").transformToRetryReceipt({aggregate:f,retryMixin:g.value,recipient:o,offline:m});return e({receiptType:"retry",retryReceipt:f,makeAck:l,author:q,chat:p,offline:m,serverTs:n,socketId:a}).then(d("WAResultOrError").makeResult)}break;case"PlayedType":case"DeliverBizType":case"PlayedSelfType":case"ServerErrorType":case"DeliverLIDFeatureIncapableType":case"EngagedType":case"DeliverMdDowngradeType":case"ViewType":case"DeprecatedDeliveryType":case"UnknownType":k.ERROR(i(),g.name);break;default:g.name}}return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult(l()))}}g.createHandleIndividualReceiptBranch=a}),98);
__d("WASmaxInReceiptAppDataPeerCategoryMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"category","peer_appdata");return!b.success?b:d("WAResultOrError").makeResult({category:b.value})}g.parseAppDataPeerCategoryMixin=a}),98);
__d("WASmaxInReceiptDeliverAppDataPeerPeerDeliveryMixin",["WASmaxInReceiptAppDataPeerCategoryMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptAppDataPeerCategoryMixin").parseAppDataPeerCategoryMixin(a);return!b.success?b:b}g.parseDeliverAppDataPeerPeerDeliveryMixin=a}),98);
__d("WASmaxInReceiptRetryTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"retry");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","retry");if(!a.success)return a;var c=d("WASmaxParseUtils").attrStanzaId(b.value,"id");if(!c.success)return c;var e=d("WASmaxParseUtils").attrIntRange(b.value,"count",1,256);if(!e.success)return e;var f=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,b.value,"v","1");if(!f.success)return f;var g=d("WASmaxParseUtils").attrIntRange(b.value,"t",0,void 0);if(!g.success)return g;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,b.value,"error",0,1024);return!b.success?b:d("WAResultOrError").makeResult({type:a.value,retryId:c.value,retryCount:e.value,retryV:f.value,retryT:g.value,retryError:b.value})}g.parseRetryTypeMixin=a}),98);
__d("WASmaxInReceiptAppDataPeerRetryTypeMixin",["WAResultOrError","WASmaxInReceiptAppDataPeerCategoryMixin","WASmaxInReceiptRetryTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptRetryTypeMixin").parseRetryTypeMixin(a);if(!b.success)return b;a=d("WASmaxInReceiptAppDataPeerCategoryMixin").parseAppDataPeerCategoryMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseAppDataPeerRetryTypeMixin=a}),98);
__d("WASmaxInReceiptDeviceIdentityMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"device-identity");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytes(a.value);return!a.success?a:d("WAResultOrError").makeResult({deviceIdentityElementValue:a.value})}g.parseDeviceIdentityMixin=a}),98);
__d("WASmaxInReceiptKeyDataMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").contentBytesRange(a,32,32);return!a.success?a:d("WAResultOrError").makeResult({elementValue:a.value})}g.parseKeyDataMixin=a}),98);
__d("WASmaxInReceiptIdentityKeyMixin",["WASmaxInReceiptKeyDataMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"identity");if(!a.success)return a;a=d("WASmaxInReceiptKeyDataMixin").parseKeyDataMixin(a.value);return!a.success?a:a}g.parseIdentityKeyMixin=a}),98);
__d("WASmaxInReceiptKeyTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"type");if(!a.success)return a;a=d("WASmaxParseUtils").contentLiteralBytes(a.value,new Uint8Array([5]));return!a.success?a:d("WAResultOrError").makeResult({typeElementValue:a.value})}g.parseKeyTypeMixin=a}),98);
__d("WASmaxInReceiptKeyIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"id");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,3,3);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseKeyIDMixin=a}),98);
__d("WASmaxInReceiptPreKeyMixin",["WAResultOrError","WASmaxInReceiptKeyDataMixin","WASmaxInReceiptKeyIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"key");if(!a.success)return a;var b=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"id");if(!b.success)return b;a=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"value");if(!a.success)return a;b=d("WASmaxInReceiptKeyIDMixin").parseKeyIDMixin(b.value);if(!b.success)return b;a=d("WASmaxInReceiptKeyDataMixin").parseKeyDataMixin(a.value);return!a.success?a:d("WAResultOrError").makeResult({keyIdKeyIDMixin:b.value,keyValueKeyDataMixin:a.value})}g.parsePreKeyMixin=a}),98);
__d("WASmaxInReceiptSignedPreKeyMixin",["WAResultOrError","WASmaxInReceiptKeyDataMixin","WASmaxInReceiptKeyIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"skey");if(!a.success)return a;var b=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"id");if(!b.success)return b;var c=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"value");if(!c.success)return c;a=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"signature");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytesRange(a.value,64,64);if(!a.success)return a;b=d("WASmaxInReceiptKeyIDMixin").parseKeyIDMixin(b.value);if(!b.success)return b;c=d("WASmaxInReceiptKeyDataMixin").parseKeyDataMixin(c.value);return!c.success?c:d("WAResultOrError").makeResult({skeySignatureElementValue:a.value,skeyIdKeyIDMixin:b.value,skeyValueKeyDataMixin:c.value})}g.parseSignedPreKeyMixin=a}),98);
__d("WASmaxInReceiptKeyBundleMixin",["WAResultOrError","WASmaxInReceiptDeviceIdentityMixin","WASmaxInReceiptIdentityKeyMixin","WASmaxInReceiptKeyTypeMixin","WASmaxInReceiptPreKeyMixin","WASmaxInReceiptSignedPreKeyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"keys");if(!b.success)return b;a=d("WASmaxInReceiptKeyTypeMixin").parseKeyTypeMixin(b.value);if(!a.success)return a;var c=d("WASmaxInReceiptIdentityKeyMixin").parseIdentityKeyMixin(b.value);if(!c.success)return c;var e=d("WASmaxInReceiptSignedPreKeyMixin").parseSignedPreKeyMixin(b.value);if(!e.success)return e;var f=d("WASmaxInReceiptPreKeyMixin").parsePreKeyMixin(b.value);if(!f.success)return f;b=d("WASmaxInReceiptDeviceIdentityMixin").parseDeviceIdentityMixin(b.value);return d("WAResultOrError").makeResult({keysKeyTypeMixin:a.value,keysIdentityKeyMixin:c.value,keysSignedPreKeyMixin:e.value,keysPreKeyMixin:f.value,keysDeviceIdentityMixin:b.success?b.value:null})}g.parseKeyBundleMixin=a}),98);
__d("WASmaxInReceiptRegistrationIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"registration");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytesRange(a.value,4,4);return!a.success?a:d("WAResultOrError").makeResult({registrationElementValue:a.value})}g.parseRegistrationIDMixin=a}),98);
__d("WASmaxInReceiptDeliverAppDataPeerPeerRetryMixin",["WAResultOrError","WASmaxInReceiptAppDataPeerRetryTypeMixin","WASmaxInReceiptKeyBundleMixin","WASmaxInReceiptRegistrationIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptAppDataPeerRetryTypeMixin").parseAppDataPeerRetryTypeMixin(a);if(!b.success)return b;var c=d("WASmaxInReceiptRegistrationIDMixin").parseRegistrationIDMixin(a);if(!c.success)return c;a=d("WASmaxInReceiptKeyBundleMixin").parseKeyBundleMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,c.value,{keyBundleMixin:a.success?a.value:null}))}g.parseDeliverAppDataPeerPeerRetryMixin=a}),98);
__d("WASmaxInReceiptPeerDeliverAppDataPeerRetryOrDeliverAppDataPeerDeliveryMixinGroup",["WAResultOrError","WASmaxInReceiptDeliverAppDataPeerPeerDeliveryMixin","WASmaxInReceiptDeliverAppDataPeerPeerRetryMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInReceiptDeliverAppDataPeerPeerRetryMixin").parseDeliverAppDataPeerPeerRetryMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"DeliverAppDataPeerPeerRetry",value:b.value});var c=d("WASmaxInReceiptDeliverAppDataPeerPeerDeliveryMixin").parseDeliverAppDataPeerPeerDeliveryMixin(a);return c.success?d("WAResultOrError").makeResult({name:"DeliverAppDataPeerPeerDelivery",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["PeerRetry","PeerDelivery"],[b,c])}g.parsePeerDeliverAppDataPeerRetryOrDeliverAppDataPeerDeliveryMixinGroup=a}),98);
__d("WASmaxInReceiptDeliverAppDataPeerRequest",["WAResultOrError","WASmaxInReceiptPeerDeliverAppDataPeerRetryOrDeliverAppDataPeerDeliveryMixinGroup","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!b.success)return b;var c=d("WASmaxParseJid").attrDeviceJid(a,"from");if(!c.success)return c;a=d("WASmaxInReceiptPeerDeliverAppDataPeerRetryOrDeliverAppDataPeerDeliveryMixinGroup").parsePeerDeliverAppDataPeerRetryOrDeliverAppDataPeerDeliveryMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({id:b.value,from:c.value,peerDeliverAppDataPeerRetryOrDeliverAppDataPeerDeliveryMixinGroup:a.value})}g.parseDeliverAppDataPeerRequest=a}),98);
__d("WASmaxOutReceiptDeliverAppDataPeerResponseSuccess",["WASmaxAttrs","WASmaxJsx","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrDeviceJid,a,["from"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),"class":"receipt",to:d("WAWap").DEVICE_JID(c.value),type:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a.value)});return b}g.makeDeliverAppDataPeerResponseSuccess=a}),98);
__d("WASmaxReceiptDeliverAppDataPeerRPC",["WASmaxInReceiptDeliverAppDataPeerRequest","WASmaxOutReceiptDeliverAppDataPeerResponseSuccess","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInReceiptDeliverAppDataPeerRequest").parseDeliverAppDataPeerRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("DeliverAppDataPeer",{Request:b}));return{parsedRequest:b.value,makeDeliverAppDataPeerResponseSuccess:function(){return d("WASmaxOutReceiptDeliverAppDataPeerResponseSuccess").makeDeliverAppDataPeerResponseSuccess(a)}}}g.receiveDeliverAppDataPeerRPC=a}),98);
__d("WACreateHandlePeerAppdataReceiptBranch",["Promise","WAParseKeyBundleMixing","WAResultOrError","WASignalOther","WASmaxReceiptDeliverAppDataPeerRPC","WATagsLogger","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Peer appdata receipt is not handled."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["start..."]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["decision tree","handlePeerAppdataReceiptBranch"]);function a(a){var c=a.handlePeerAppdataReceipt,e=a.handlePeerAppdataRetryReceipt;return function(a,f){k.DEV(j());a=d("WASmaxReceiptDeliverAppDataPeerRPC").receiveDeliverAppDataPeerRPC(a);var g=a.parsedRequest,l=g.id,m=g.from;g=g.peerDeliverAppDataPeerRetryOrDeliverAppDataPeerDeliveryMixinGroup;a=a.makeDeliverAppDataPeerResponseSuccess;switch(g.name){case"DeliverAppDataPeerPeerDelivery":if(c!=null)return c({receiptType:"delivered",stanzaId:l,receiptSender:m,makeAck:a}).then(d("WAResultOrError").makeResult);break;case"DeliverAppDataPeerPeerRetry":if(e!=null){var n=g.value,o=n.keyBundleMixin,p=n.registrationElementValue,q=n.retryCount,r=n.retryId,s=n.retryT;n=n.category;p=d("WASignalOther").castRegistrationIdFromBytes(p);return e({receiptType:"retry",category:n,retryReceipt:{stanzaId:l,retryStanzaId:r,receiptSender:m,retryCount:q,regId:p,timestamp:d("WATimeUtils").castToUnixTime(s),keys:o?d("WAParseKeyBundleMixing").parseKeyBundleMixin(p,o):null},makeAck:a,socketId:f}).then(d("WAResultOrError").makeResult)}break;default:g.name}k.WARN(i());return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult(a()))}}g.createHandlePeerAppdataReceiptBranch=a}),98);
__d("WASmaxInReceiptPeerMessageTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","peer_msg");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parsePeerMessageTypeMixin=a}),98);
__d("WASmaxInReceiptSingleMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").attrStanzaId(a,"id");return!b.success?b:d("WAResultOrError").makeResult({id:b.value})}g.parseSingleMixin=a}),98);
__d("WASmaxInReceiptDeliverPeerDeliveryMixin",["WAResultOrError","WASmaxInReceiptPeerMessageTypeMixin","WASmaxInReceiptSingleMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptSingleMixin").parseSingleMixin(a);if(!b.success)return b;a=d("WASmaxInReceiptPeerMessageTypeMixin").parsePeerMessageTypeMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseDeliverPeerDeliveryMixin=a}),98);
__d("WASmaxInReceiptHSMErrorTypeMixin",["WAResultOrError","WASmaxInReceiptEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");if(!a.success)return a;var c=d("WASmaxParseUtils").attrStringEnum(b.value,"type",d("WASmaxInReceiptEnums").ENUM_HSMENVELOPEMISMATCH_STRUCTUREUNAVAILABLE);if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,b.value,"reason",d("WASmaxInReceiptEnums").ENUM_1002_1007_1008);if(!e.success)return e;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,b.value,"sub_type",d("WASmaxInReceiptEnums").ENUM_CONTENT_TITLE);return!b.success?b:d("WAResultOrError").makeResult({type:a.value,errorType:c.value,errorReason:e.value,errorSubType:b.value})}g.parseHSMErrorTypeMixin=a}),98);
__d("WASmaxInReceiptDeliverPeerErrorMixin",["WAResultOrError","WASmaxInReceiptHSMErrorTypeMixin","WASmaxInReceiptSingleMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptSingleMixin").parseSingleMixin(a);if(!b.success)return b;a=d("WASmaxInReceiptHSMErrorTypeMixin").parseHSMErrorTypeMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseDeliverPeerErrorMixin=a}),98);
__d("WASmaxInReceiptPeerCategoryMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"category","peer");return!b.success?b:d("WAResultOrError").makeResult({category:b.value})}g.parsePeerCategoryMixin=a}),98);
__d("WASmaxInReceiptPeerRetryTypeMixin",["WAResultOrError","WASmaxInReceiptPeerCategoryMixin","WASmaxInReceiptRetryTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptRetryTypeMixin").parseRetryTypeMixin(a);if(!b.success)return b;a=d("WASmaxInReceiptPeerCategoryMixin").parsePeerCategoryMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parsePeerRetryTypeMixin=a}),98);
__d("WASmaxInReceiptDeliverPeerPeerRetryMixin",["WAResultOrError","WASmaxInReceiptKeyBundleMixin","WASmaxInReceiptPeerRetryTypeMixin","WASmaxInReceiptRegistrationIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptPeerRetryTypeMixin").parsePeerRetryTypeMixin(a);if(!b.success)return b;var c=d("WASmaxInReceiptRegistrationIDMixin").parseRegistrationIDMixin(a);if(!c.success)return c;a=d("WASmaxInReceiptKeyBundleMixin").parseKeyBundleMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,c.value,{keyBundleMixin:a.success?a.value:null}))}g.parseDeliverPeerPeerRetryMixin=a}),98);
__d("WASmaxInReceiptHistorySyncTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","hist_sync");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseHistorySyncTypeMixin=a}),98);
__d("WASmaxInReceiptOfflineMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrIntRange(a,"offline",0,12);return!a.success?a:d("WAResultOrError").makeResult({offline:a.value})}g.parseOfflineMixin=a}),98);
__d("WASmaxInReceiptDeliverPeerReadMixin",["WAResultOrError","WASmaxInReceiptHistorySyncTypeMixin","WASmaxInReceiptOfflineMixin","WASmaxInReceiptSingleMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptSingleMixin").parseSingleMixin(a);if(!b.success)return b;var c=d("WASmaxInReceiptHistorySyncTypeMixin").parseHistorySyncTypeMixin(a);if(!c.success)return c;a=d("WASmaxInReceiptOfflineMixin").parseOfflineMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,c.value,{offlineMixin:a.success?a.value:null}))}g.parseDeliverPeerReadMixin=a}),98);
__d("WASmaxInReceiptEncryptMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"encrypt");if(!b.success)return b;a=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"enc_p");if(!a.success)return a;b=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"enc_iv");if(!b.success)return b;a=d("WASmaxParseUtils").contentBytesRange(a.value,1,600);if(!a.success)return a;b=d("WASmaxParseUtils").contentBytesRange(b.value,12,12);return!b.success?b:d("WAResultOrError").makeResult({encryptEncPElementValue:a.value,encryptEncIvElementValue:b.value})}g.parseEncryptMixin=a}),98);
__d("WASmaxInReceiptRmrBroadcastDeprecatedMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"rmr");if(!b.success)return b;b=d("WASmaxParseJid").attrBroadcastJid(a,"jid");return!b.success?b:d("WAResultOrError").makeResult({jid:b.value})}g.parseRmrBroadcastDeprecatedMixin=a}),98);
__d("WASmaxInReceiptRmrBroadcastMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"rmr");if(!b.success)return b;b=d("WASmaxParseJid").attrBroadcastJid(a,"jid");if(!b.success)return b;a=d("WASmaxParseJid").attrUserJid(a,"participant");return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,participant:a.value})}g.parseRmrBroadcastMixin=a}),98);
__d("WASmaxInReceiptRmrGroupDeprecatedMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"rmr");if(!b.success)return b;b=d("WASmaxParseJid").attrGroupJid(a,"jid");return!b.success?b:d("WAResultOrError").makeResult({jid:b.value})}g.parseRmrGroupDeprecatedMixin=a}),98);
__d("WASmaxInReceiptRmrGroupMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"rmr");if(!b.success)return b;b=d("WASmaxParseJid").attrGroupJid(a,"jid");if(!b.success)return b;a=d("WASmaxParseJid").attrUserJid(a,"participant");return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,participant:a.value})}g.parseRmrGroupMixin=a}),98);
__d("WASmaxInReceiptRmrIndividualDeprecatedMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"rmr");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");if(!b.success)return b;a=d("WASmaxParseJid").attrUserJid(a,"participant");return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,participant:a.value})}g.parseRmrIndividualDeprecatedMixin=a}),98);
__d("WASmaxInReceiptRmrIndividualMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"rmr");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");return!b.success?b:d("WAResultOrError").makeResult({jid:b.value})}g.parseRmrIndividualMixin=a}),98);
__d("WASmaxInReceiptServerErrorRmrTypes",["WAResultOrError","WASmaxInReceiptRmrBroadcastDeprecatedMixin","WASmaxInReceiptRmrBroadcastMixin","WASmaxInReceiptRmrGroupDeprecatedMixin","WASmaxInReceiptRmrGroupMixin","WASmaxInReceiptRmrIndividualDeprecatedMixin","WASmaxInReceiptRmrIndividualMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInReceiptRmrBroadcastMixin").parseRmrBroadcastMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"RmrBroadcast",value:b.value});var c=d("WASmaxInReceiptRmrGroupMixin").parseRmrGroupMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"RmrGroup",value:c.value});var e=d("WASmaxInReceiptRmrIndividualDeprecatedMixin").parseRmrIndividualDeprecatedMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"RmrIndividualDeprecated",value:e.value});var f=d("WASmaxInReceiptRmrIndividualMixin").parseRmrIndividualMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"RmrIndividual",value:f.value});var g=d("WASmaxInReceiptRmrGroupDeprecatedMixin").parseRmrGroupDeprecatedMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"RmrGroupDeprecated",value:g.value});var h=d("WASmaxInReceiptRmrBroadcastDeprecatedMixin").parseRmrBroadcastDeprecatedMixin(a);return h.success?d("WAResultOrError").makeResult({name:"RmrBroadcastDeprecated",value:h.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["RmrBroadcast","RmrGroup","RmrIndividualDeprecated","RmrIndividual","RmrGroupDeprecated","RmrBroadcastDeprecated"],[b,c,e,f,g,h])}g.parseServerErrorRmrTypes=a}),98);
__d("WASmaxInReceiptServerErrorTypeMixin",["WAResultOrError","WASmaxInReceiptEncryptMixin","WASmaxInReceiptEnums","WASmaxInReceiptServerErrorRmrTypes","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"rmr");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"from_me",d("WASmaxInReceiptEnums").ENUM_FALSE_TRUE);if(!b.success)return b;a=d("WASmaxInReceiptServerErrorRmrTypes").parseServerErrorRmrTypes(a);return!a.success?a:d("WAResultOrError").makeResult({fromMe:b.value,serverErrorRmrTypes:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"rmr",h);if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","server-error");if(!c.success)return c;a=d("WASmaxInReceiptEncryptMixin").parseEncryptMixin(a);return d("WAResultOrError").makeResult({type:c.value,encryptMixin:a.success?a.value:null,rmr:b.value})}g.parseServerErrorTypeRmr=h;g.parseServerErrorTypeMixin=a}),98);
__d("WASmaxInReceiptPeerServerErrorTypeMixin",["WAResultOrError","WASmaxInReceiptPeerCategoryMixin","WASmaxInReceiptServerErrorTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptServerErrorTypeMixin").parseServerErrorTypeMixin(a);if(!b.success)return b;a=d("WASmaxInReceiptPeerCategoryMixin").parsePeerCategoryMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parsePeerServerErrorTypeMixin=a}),98);
__d("WASmaxInReceiptDeliverPeerServerErrorMixin",["WAResultOrError","WASmaxInReceiptPeerServerErrorTypeMixin","WASmaxInReceiptSingleMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptSingleMixin").parseSingleMixin(a);if(!b.success)return b;a=d("WASmaxInReceiptPeerServerErrorTypeMixin").parsePeerServerErrorTypeMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseDeliverPeerServerErrorMixin=a}),98);
__d("WASmaxInReceiptDeliverPeerReceiptType",["WAResultOrError","WASmaxInReceiptDeliverPeerDeliveryMixin","WASmaxInReceiptDeliverPeerErrorMixin","WASmaxInReceiptDeliverPeerPeerRetryMixin","WASmaxInReceiptDeliverPeerReadMixin","WASmaxInReceiptDeliverPeerServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInReceiptDeliverPeerPeerRetryMixin").parseDeliverPeerPeerRetryMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"DeliverPeerPeerRetry",value:b.value});var c=d("WASmaxInReceiptDeliverPeerReadMixin").parseDeliverPeerReadMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"DeliverPeerRead",value:c.value});var e=d("WASmaxInReceiptDeliverPeerServerErrorMixin").parseDeliverPeerServerErrorMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"DeliverPeerServerError",value:e.value});var f=d("WASmaxInReceiptDeliverPeerErrorMixin").parseDeliverPeerErrorMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"DeliverPeerError",value:f.value});var g=d("WASmaxInReceiptDeliverPeerDeliveryMixin").parseDeliverPeerDeliveryMixin(a);return g.success?d("WAResultOrError").makeResult({name:"DeliverPeerDelivery",value:g.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["PeerRetry","Read","ServerError","Error","Delivery"],[b,c,e,f,g])}g.parseDeliverPeerReceiptType=a}),98);
__d("WASmaxInReceiptDeliverPeerRequest",["WAResultOrError","WASmaxInReceiptDeliverPeerReceiptType","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!b.success)return b;var c=d("WASmaxParseJid").attrDeviceJid(a,"from");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"t",0,void 0);if(!e.success)return e;a=d("WASmaxInReceiptDeliverPeerReceiptType").parseDeliverPeerReceiptType(a);return!a.success?a:d("WAResultOrError").makeResult({id:b.value,from:c.value,t:e.value,deliverPeerReceiptType:a.value})}g.parseDeliverPeerRequest=a}),98);
__d("WASmaxOutReceiptDeliverPeerResponseSuccess",["WASmaxJsx","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrDeviceJid,a,["from"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),"class":"receipt",to:d("WAWap").DEVICE_JID(c.value),type:d("WAWap").CUSTOM_STRING(a.value)});return b}g.makeDeliverPeerResponseSuccess=a}),98);
__d("WASmaxReceiptDeliverPeerRPC",["WASmaxInReceiptDeliverPeerRequest","WASmaxOutReceiptDeliverPeerResponseSuccess","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInReceiptDeliverPeerRequest").parseDeliverPeerRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("DeliverPeer",{Request:b}));return{parsedRequest:b.value,makeDeliverPeerResponseSuccess:function(){return d("WASmaxOutReceiptDeliverPeerResponseSuccess").makeDeliverPeerResponseSuccess(a)}}}g.receiveDeliverPeerRPC=a}),98);
__d("WASmaxInReceiptMessageAggregatedMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseJid").attrDeviceJid(a,"jid");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,t:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"participants");if(!b.success)return b;a=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!a.success)return a;var c=d("WASmaxParseUtils").attrStanzaId(b.value,"key");if(!c.success)return c;b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"user",1,1024,h);return!b.success?b:d("WAResultOrError").makeResult({id:a.value,participantsKey:c.value,participantsUser:b.value})}g.parseMessageAggregatedParticipantsUser=h;g.parseMessageAggregatedMixin=a}),98);
__d("WASmaxInReceiptInactiveTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","inactive");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseInactiveTypeMixin=a}),98);
__d("WASmaxInReceiptPlayedSelfTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","played-self");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parsePlayedSelfTypeMixin=a}),98);
__d("WASmaxInReceiptPlayedTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","played");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parsePlayedTypeMixin=a}),98);
__d("WASmaxInReceiptReadSelfTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","read-self");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseReadSelfTypeMixin=a}),98);
__d("WASmaxInReceiptReadTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","read");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseReadTypeMixin=a}),98);
__d("WASmaxInReceiptSenderTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","sender");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseSenderTypeMixin=a}),98);
__d("WASmaxInReceiptUnknownTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"type");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseUnknownTypeMixin=a}),98);
__d("WASmaxInReceiptMessageAggregatedStyleReceiptType",["WAResultOrError","WASmaxInReceiptInactiveTypeMixin","WASmaxInReceiptPlayedSelfTypeMixin","WASmaxInReceiptPlayedTypeMixin","WASmaxInReceiptReadSelfTypeMixin","WASmaxInReceiptReadTypeMixin","WASmaxInReceiptSenderTypeMixin","WASmaxInReceiptUnknownTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInReceiptSenderTypeMixin").parseSenderTypeMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"SenderType",value:b.value});var c=d("WASmaxInReceiptInactiveTypeMixin").parseInactiveTypeMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"InactiveType",value:c.value});var e=d("WASmaxInReceiptReadTypeMixin").parseReadTypeMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"ReadType",value:e.value});var f=d("WASmaxInReceiptReadSelfTypeMixin").parseReadSelfTypeMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"ReadSelfType",value:f.value});var g=d("WASmaxInReceiptPlayedTypeMixin").parsePlayedTypeMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"PlayedType",value:g.value});var h=d("WASmaxInReceiptPlayedSelfTypeMixin").parsePlayedSelfTypeMixin(a);if(h.success)return d("WAResultOrError").makeResult({name:"PlayedSelfType",value:h.value});var i=d("WASmaxInReceiptUnknownTypeMixin").parseUnknownTypeMixin(a);return i.success?d("WAResultOrError").makeResult({name:"UnknownType",value:i.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["SenderType","InactiveType","ReadType","ReadSelfType","PlayedType","PlayedSelfType","UnknownType"],[b,c,e,f,g,h,i])}g.parseMessageAggregatedStyleReceiptType=a}),98);
__d("WASmaxInReceiptRecipientMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"recipient");return!b.success?b:d("WAResultOrError").makeResult({recipient:b.value})}g.parseRecipientMixin=a}),98);
__d("WASmaxInReceiptDeliverMessageAggregatedStyleMixin",["WAResultOrError","WASmaxInReceiptEnums","WASmaxInReceiptMessageAggregatedMixin","WASmaxInReceiptMessageAggregatedStyleReceiptType","WASmaxInReceiptRecipientMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseJid").attrJidEnum(a,"from",d("WASmaxInReceiptEnums").BROADCASTJID_GROUPJID_NEWSLETTERJID_STATUSJID);if(!b.success)return b;var c=d("WASmaxInReceiptRecipientMixin").parseRecipientMixin(a),e=d("WASmaxInReceiptMessageAggregatedMixin").parseMessageAggregatedMixin(a);if(!e.success)return e;a=d("WASmaxInReceiptMessageAggregatedStyleReceiptType").parseMessageAggregatedStyleReceiptType(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({from:b.value,recipientMixin:c.success?c.value:null},e.value,{messageAggregatedStyleReceiptType:a.success?a.value:null}))}g.parseDeliverMessageAggregatedStyleMixin=a}),98);
__d("WASmaxInReceiptDeliverBizRolesMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(b.value,"actual_actors",0,100);if(!a.success)return a;var c=d("WASmaxParseUtils").attrIntRange(b.value,"host_storage",0,100);if(!c.success)return c;b=d("WASmaxParseUtils").attrIntRange(b.value,"privacy_mode_ts",0,void 0);return!b.success?b:d("WAResultOrError").makeResult({bizActualActors:a.value,bizHostStorage:c.value,bizPrivacyModeTs:b.value})}g.parseDeliverBizRolesMixin=a}),98);
__d("WASmaxInReceiptDeliverPaidConversationAggregatedMixin",["WAResultOrError","WASmaxInReceiptEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"delivery_context");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"optimization_goal",d("WASmaxInReceiptEnums").ENUM_DELIVERY_NOOPTIMIZATION);return!b.success?b:d("WAResultOrError").makeResult({optimizationGoal:b.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"source_url");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"referral");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"source_url",i);if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"source_type");return!a.success?a:d("WAResultOrError").makeResult({sourceType:a.value,sourceUrl:b.value})}function k(a){var b=d("WASmaxParseUtils").assertTag(a,"origin");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"referral",j);if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"type");return!a.success?a:d("WAResultOrError").makeResult({type:a.value,referral:b.value})}function l(a){var b=d("WASmaxParseUtils").assertTag(a,"item");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"delivery_context",h);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(a,"origin",k);if(!c.success)return c;var e=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!e.success)return e;var f=d("WASmaxParseUtils").attrString(a,"paid_convo_id");if(!f.success)return f;var g=d("WASmaxParseUtils").attrStringEnum(a,"pricing_model",d("WASmaxInReceiptEnums").ENUM_CBP_NBP);if(!g.success)return g;var i=d("WASmaxParseUtils").attrStringEnum(a,"billable",d("WASmaxInReceiptEnums").ENUM_FALSE_TRUE);if(!i.success)return i;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"pricing_category");return!a.success?a:d("WAResultOrError").makeResult({id:e.value,paidConvoId:f.value,pricingModel:g.value,billable:i.value,pricingCategory:a.value,deliveryContext:b.value,origin:c.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"paid_messaging");if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(a.value,"item",0,128e3,l);return!b.success?b:d("WAResultOrError").makeResult({bizPaidMessagingItem:b.value})}g.parseDeliverPaidConversationAggregatedBizPaidMessagingItemDeliveryContext=h;g.parseDeliverPaidConversationAggregatedBizPaidMessagingItemOriginReferralSourceUrl=i;g.parseDeliverPaidConversationAggregatedBizPaidMessagingItemOriginReferral=j;g.parseDeliverPaidConversationAggregatedBizPaidMessagingItemOrigin=k;g.parseDeliverPaidConversationAggregatedBizPaidMessagingItem=l;g.parseDeliverPaidConversationAggregatedMixin=a}),98);
__d("WASmaxInReceiptDeliverSenderPNMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"sender_pn");return!b.success?b:d("WAResultOrError").makeResult({senderPn:b.value})}g.parseDeliverSenderPNMixin=a}),98);
__d("WASmaxInReceiptBroadcastMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseJid").attrBroadcastJid(a,"from");if(!b.success)return b;a=d("WASmaxParseJid").attrDeviceJid(a,"participant");return!a.success?a:d("WAResultOrError").makeResult({from:b.value,participant:a.value})}g.parseBroadcastMixin=a}),98);
__d("WASmaxInReceiptDeliverStatusMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseJid").attrStatusJid(a,"from");if(!b.success)return b;a=d("WASmaxParseJid").attrDeviceJid(a,"participant");return!a.success?a:d("WAResultOrError").makeResult({from:b.value,participant:a.value})}g.parseDeliverStatusMixin=a}),98);
__d("WASmaxInReceiptGroupMixin",["WAResultOrError","WASmaxInReceiptEnums","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseJid").attrGroupJid(a,"from");if(!b.success)return b;a=d("WASmaxParseJid").attrJidEnum(a,"participant",d("WASmaxInReceiptEnums").DEVICEJID_DEVICEJID);return!a.success?a:d("WAResultOrError").makeResult({from:b.value,participant:a.value})}g.parseGroupMixin=a}),98);
__d("WASmaxInReceiptIndividualMixin",["WAResultOrError","WASmaxInReceiptEnums","WASmaxInReceiptRecipientMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseJid").attrJidEnum(a,"from",d("WASmaxInReceiptEnums").DEVICEJID_DEVICEJID);if(!b.success)return b;a=d("WASmaxInReceiptRecipientMixin").parseRecipientMixin(a);return d("WAResultOrError").makeResult({from:b.value,recipientMixin:a.success?a.value:null})}g.parseIndividualMixin=a}),98);
__d("WASmaxInReceiptIndividualOrGroupOrDeliverStatusOrBroadcastMixinGroup",["WAResultOrError","WASmaxInReceiptBroadcastMixin","WASmaxInReceiptDeliverStatusMixin","WASmaxInReceiptGroupMixin","WASmaxInReceiptIndividualMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInReceiptIndividualMixin").parseIndividualMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"Individual",value:b.value});var c=d("WASmaxInReceiptGroupMixin").parseGroupMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"Group",value:c.value});var e=d("WASmaxInReceiptDeliverStatusMixin").parseDeliverStatusMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"DeliverStatus",value:e.value});var f=d("WASmaxInReceiptBroadcastMixin").parseBroadcastMixin(a);return f.success?d("WAResultOrError").makeResult({name:"Broadcast",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Individual","Group","Status","Broadcast"],[b,c,e,f])}g.parseIndividualOrGroupOrDeliverStatusOrBroadcastMixinGroup=a}),98);
__d("WASmaxInReceiptSenderAggregatedDeliverMixin",["WAResultOrError","WASmaxInReceiptDeprecatedEditMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"item");if(!b.success)return b;b=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!b.success)return b;a=d("WASmaxInReceiptDeprecatedEditMixin").parseDeprecatedEditMixin(a);return d("WAResultOrError").makeResult({id:b.value,deprecatedEditMixin:a.success?a.value:null})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"list");if(!b.success)return b;a=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"item",0,128e3,h);return!b.success?b:d("WAResultOrError").makeResult({id:a.value,listItem:b.value})}g.parseSenderAggregatedDeliverListItem=h;g.parseSenderAggregatedDeliverMixin=a}),98);
__d("WASmaxInReceiptDeprecatedDeliveryTypeMixin",["WAResultOrError","WASmaxInReceiptEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"type",d("WASmaxInReceiptEnums").ENUM_DELIVER_DELIVERY);return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseDeprecatedDeliveryTypeMixin=a}),98);
__d("WASmaxInReceiptViewTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","view");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseViewTypeMixin=a}),98);
__d("WASmaxInReceiptSenderAggregatedStyleReceiptType",["WAResultOrError","WASmaxInReceiptDeprecatedDeliveryTypeMixin","WASmaxInReceiptInactiveTypeMixin","WASmaxInReceiptPlayedSelfTypeMixin","WASmaxInReceiptPlayedTypeMixin","WASmaxInReceiptReadSelfTypeMixin","WASmaxInReceiptReadTypeMixin","WASmaxInReceiptUnknownTypeMixin","WASmaxInReceiptViewTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInReceiptInactiveTypeMixin").parseInactiveTypeMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"InactiveType",value:b.value});var c=d("WASmaxInReceiptReadTypeMixin").parseReadTypeMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"ReadType",value:c.value});var e=d("WASmaxInReceiptReadSelfTypeMixin").parseReadSelfTypeMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"ReadSelfType",value:e.value});var f=d("WASmaxInReceiptPlayedTypeMixin").parsePlayedTypeMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"PlayedType",value:f.value});var g=d("WASmaxInReceiptPlayedSelfTypeMixin").parsePlayedSelfTypeMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"PlayedSelfType",value:g.value});var h=d("WASmaxInReceiptViewTypeMixin").parseViewTypeMixin(a);if(h.success)return d("WAResultOrError").makeResult({name:"ViewType",value:h.value});var i=d("WASmaxInReceiptDeprecatedDeliveryTypeMixin").parseDeprecatedDeliveryTypeMixin(a);if(i.success)return d("WAResultOrError").makeResult({name:"DeprecatedDeliveryType",value:i.value});var j=d("WASmaxInReceiptUnknownTypeMixin").parseUnknownTypeMixin(a);return j.success?d("WAResultOrError").makeResult({name:"UnknownType",value:j.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["InactiveType","ReadType","ReadSelfType","PlayedType","PlayedSelfType","ViewType","DeprecatedDeliveryType","UnknownType"],[b,c,e,f,g,h,i,j])}g.parseSenderAggregatedStyleReceiptType=a}),98);
__d("WASmaxInReceiptDeliverSenderAggregatedStyleMixin",["WAResultOrError","WASmaxInReceiptDeliverBizRolesMixin","WASmaxInReceiptDeliverPaidConversationAggregatedMixin","WASmaxInReceiptDeliverSenderPNMixin","WASmaxInReceiptIndividualOrGroupOrDeliverStatusOrBroadcastMixinGroup","WASmaxInReceiptRecipientMixin","WASmaxInReceiptSenderAggregatedDeliverMixin","WASmaxInReceiptSenderAggregatedStyleReceiptType","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptRecipientMixin").parseRecipientMixin(a);var c=d("WASmaxInReceiptSenderAggregatedDeliverMixin").parseSenderAggregatedDeliverMixin(a);if(!c.success)return c;var e=d("WASmaxInReceiptDeliverPaidConversationAggregatedMixin").parseDeliverPaidConversationAggregatedMixin(a),f=d("WASmaxInReceiptDeliverBizRolesMixin").parseDeliverBizRolesMixin(a),g=d("WASmaxInReceiptDeliverSenderPNMixin").parseDeliverSenderPNMixin(a),h=d("WASmaxInReceiptIndividualOrGroupOrDeliverStatusOrBroadcastMixinGroup").parseIndividualOrGroupOrDeliverStatusOrBroadcastMixinGroup(a);if(!h.success)return h;a=d("WASmaxInReceiptSenderAggregatedStyleReceiptType").parseSenderAggregatedStyleReceiptType(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({recipientMixin:b.success?b.value:null},c.value,{deliverPaidConversationAggregatedMixin:e.success?e.value:null,deliverBizRolesMixin:f.success?f.value:null,deliverSenderPNMixin:g.success?g.value:null,individualOrGroupOrDeliverStatusOrBroadcastMixinGroup:h.value,senderAggregatedStyleReceiptType:a.success?a.value:null}))}g.parseDeliverSenderAggregatedStyleMixin=a}),98);
__d("WASmaxInReceiptIndividualWithRecipientMixin",["WAResultOrError","WASmaxInReceiptRecipientMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseJid").attrDeviceJid(a,"from");if(!b.success)return b;a=d("WASmaxInReceiptRecipientMixin").parseRecipientMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:b.value},a.value))}g.parseIndividualWithRecipientMixin=a}),98);
__d("WASmaxInReceiptIndividualWithRecipientOrGroupOrDeliverStatusOrBroadcastMixinGroup",["WAResultOrError","WASmaxInReceiptBroadcastMixin","WASmaxInReceiptDeliverStatusMixin","WASmaxInReceiptGroupMixin","WASmaxInReceiptIndividualWithRecipientMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInReceiptIndividualWithRecipientMixin").parseIndividualWithRecipientMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IndividualWithRecipient",value:b.value});var c=d("WASmaxInReceiptGroupMixin").parseGroupMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"Group",value:c.value});var e=d("WASmaxInReceiptDeliverStatusMixin").parseDeliverStatusMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"DeliverStatus",value:e.value});var f=d("WASmaxInReceiptBroadcastMixin").parseBroadcastMixin(a);return f.success?d("WAResultOrError").makeResult({name:"Broadcast",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IndividualWithRecipient","Group","Status","Broadcast"],[b,c,e,f])}g.parseIndividualWithRecipientOrGroupOrDeliverStatusOrBroadcastMixinGroup=a}),98);
__d("WASmaxInReceiptDeliverSenderAggregatedStyleSenderTypeMixin",["WAResultOrError","WASmaxInReceiptIndividualWithRecipientOrGroupOrDeliverStatusOrBroadcastMixinGroup","WASmaxInReceiptSenderAggregatedDeliverMixin","WASmaxInReceiptSenderTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptSenderAggregatedDeliverMixin").parseSenderAggregatedDeliverMixin(a);if(!b.success)return b;var c=d("WASmaxInReceiptSenderTypeMixin").parseSenderTypeMixin(a);if(!c.success)return c;a=d("WASmaxInReceiptIndividualWithRecipientOrGroupOrDeliverStatusOrBroadcastMixinGroup").parseIndividualWithRecipientOrGroupOrDeliverStatusOrBroadcastMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,c.value,{individualWithRecipientOrGroupOrDeliverStatusOrBroadcastMixinGroup:a.value}))}g.parseDeliverSenderAggregatedStyleSenderTypeMixin=a}),98);
__d("WASmaxInReceiptNewsletterDeliverMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseJid").attrNewsletterJid(a,"from");if(!b.success)return b;a=d("WASmaxParseJid").attrDeviceJid(a,"participant");return!a.success?a:d("WAResultOrError").makeResult({from:b.value,participant:a.value})}g.parseNewsletterDeliverMixin=a}),98);
__d("WASmaxInReceiptSenderAggregatedDeliverServerIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"item");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"server_id",99,2147476647);return!b.success?b:d("WAResultOrError").makeResult({serverId:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"list");if(!b.success)return b;a=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"item",0,128e3,h);return!b.success?b:d("WAResultOrError").makeResult({id:a.value,listItem:b.value})}g.parseSenderAggregatedDeliverServerIDListItem=h;g.parseSenderAggregatedDeliverServerIDMixin=a}),98);
__d("WASmaxInReceiptDeliverSenderAggregatedStyleViewTypeMixin",["WAResultOrError","WASmaxInReceiptNewsletterDeliverMixin","WASmaxInReceiptSenderAggregatedDeliverServerIDMixin","WASmaxInReceiptViewTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptNewsletterDeliverMixin").parseNewsletterDeliverMixin(a);if(!b.success)return b;var c=d("WASmaxInReceiptSenderAggregatedDeliverServerIDMixin").parseSenderAggregatedDeliverServerIDMixin(a);if(!c.success)return c;a=d("WASmaxInReceiptViewTypeMixin").parseViewTypeMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,c.value,a.value))}g.parseDeliverSenderAggregatedStyleViewTypeMixin=a}),98);
__d("WASmaxInReceiptSingleStyleChatType",["WAResultOrError","WASmaxInReceiptBroadcastMixin","WASmaxInReceiptDeliverStatusMixin","WASmaxInReceiptGroupMixin","WASmaxInReceiptIndividualMixin","WASmaxInReceiptNewsletterDeliverMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInReceiptIndividualMixin").parseIndividualMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"Individual",value:b.value});var c=d("WASmaxInReceiptGroupMixin").parseGroupMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"Group",value:c.value});var e=d("WASmaxInReceiptDeliverStatusMixin").parseDeliverStatusMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"DeliverStatus",value:e.value});var f=d("WASmaxInReceiptBroadcastMixin").parseBroadcastMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"Broadcast",value:f.value});var g=d("WASmaxInReceiptNewsletterDeliverMixin").parseNewsletterDeliverMixin(a);return g.success?d("WAResultOrError").makeResult({name:"NewsletterDeliver",value:g.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Individual","Group","Status","Broadcast","NewsletterDeliver"],[b,c,e,f,g])}g.parseSingleStyleChatType=a}),98);
__d("WASmaxInReceiptDeliverFeatureIncapableErrorTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");if(!a.success)return a;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,b.value,"type","feature-incapable");return!b.success?b:d("WAResultOrError").makeResult({type:a.value,errorType:b.value})}g.parseDeliverFeatureIncapableErrorTypeMixin=a}),98);
__d("WASmaxInReceiptDeliverBizFeatureIncapableTypeWithReasonMixin",["WAResultOrError","WASmaxInReceiptDeliverFeatureIncapableErrorTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(b.value,"reason");if(!b.success)return b;a=d("WASmaxInReceiptDeliverFeatureIncapableErrorTypeMixin").parseDeliverFeatureIncapableErrorTypeMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({bizReason:b.value},a.value))}g.parseDeliverBizFeatureIncapableTypeWithReasonMixin=a}),98);
__d("WASmaxInReceiptOrderStatusErrorTypeMixin",["WAResultOrError","WASmaxInReceiptEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!b.success)return b;var c=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!c.success)return c;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");if(!a.success)return a;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,b.value,"type","order-status-update-failed");if(!b.success)return b;c=d("WASmaxParseUtils").attrStringEnum(c.value,"reason",d("WASmaxInReceiptEnums").ENUM_CANCELLATIONFAILED_INVALIDTRANSITION);return!c.success?c:d("WAResultOrError").makeResult({type:a.value,errorType:b.value,bizReason:c.value})}g.parseOrderStatusErrorTypeMixin=a}),98);
__d("WASmaxInReceiptBizErrorType",["WAResultOrError","WASmaxInReceiptDeliverBizFeatureIncapableTypeWithReasonMixin","WASmaxInReceiptDeliverFeatureIncapableErrorTypeMixin","WASmaxInReceiptHSMErrorTypeMixin","WASmaxInReceiptOrderStatusErrorTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInReceiptDeliverBizFeatureIncapableTypeWithReasonMixin").parseDeliverBizFeatureIncapableTypeWithReasonMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"DeliverBizFeatureIncapableTypeWithReason",value:b.value});var c=d("WASmaxInReceiptDeliverFeatureIncapableErrorTypeMixin").parseDeliverFeatureIncapableErrorTypeMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"DeliverFeatureIncapableErrorType",value:c.value});var e=d("WASmaxInReceiptHSMErrorTypeMixin").parseHSMErrorTypeMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"HSMErrorType",value:e.value});var f=d("WASmaxInReceiptOrderStatusErrorTypeMixin").parseOrderStatusErrorTypeMixin(a);return f.success?d("WAResultOrError").makeResult({name:"OrderStatusErrorType",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["BizFeatureIncapableTypeWithReason","FeatureIncapableErrorType","HSMErrorType","OrderStatusErrorType"],[b,c,e,f])}g.parseBizErrorType=a}),98);
__d("WASmaxInReceiptDeliverBizTypeMixin",["WAResultOrError","WASmaxInReceiptBizErrorType","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptBizErrorType").parseBizErrorType(a);return!b.success?b:d("WAResultOrError").makeResult({bizErrorType:b.value})}g.parseDeliverBizTypeMixin=a}),98);
__d("WASmaxInReceiptDeliverLIDFeatureIncapableTypeMixin",["WAResultOrError","WASmaxInReceiptDeliverFeatureIncapableErrorTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,b.value,"type","feature-incapable");if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,b.value,"reason","lid");if(!b.success)return b;a=d("WASmaxInReceiptDeliverFeatureIncapableErrorTypeMixin").parseDeliverFeatureIncapableErrorTypeMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorType:c.value,errorReason:b.value},a.value))}g.parseDeliverLIDFeatureIncapableTypeMixin=a}),98);
__d("WASmaxInReceiptRoiTemplateSourceMixin",["WAResultOrError","WASmaxInReceiptEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"biz");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"source",d("WASmaxInReceiptEnums").ENUM_BODYLINK_CTACALL_CTAURL_MEDIADOC_MEDIAIMAGE_MEDIAVIDEO_QUICKREPLY);return!b.success?b:d("WAResultOrError").makeResult({source:b.value})}g.parseRoiTemplateSourceMixin=a}),98);
__d("WASmaxInReceiptEngagedTypeMixin",["WAResultOrError","WASmaxInReceiptRoiTemplateSourceMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","engaged");if(!a.success)return a;var c=d("WASmaxParseUtils").attrString(b.value,"value");if(!c.success)return c;b=d("WASmaxInReceiptRoiTemplateSourceMixin").parseRoiTemplateSourceMixin(b.value);return!b.success?b:d("WAResultOrError").makeResult({type:a.value,bizValue:c.value,bizRoiTemplateSourceMixin:b.value})}g.parseEngagedTypeMixin=a}),98);
__d("WASmaxInReceiptRetryMixin",["WAResultOrError","WASmaxInReceiptKeyBundleMixin","WASmaxInReceiptRegistrationIDMixin","WASmaxInReceiptRetryTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptRetryTypeMixin").parseRetryTypeMixin(a);if(!b.success)return b;var c=d("WASmaxInReceiptRegistrationIDMixin").parseRegistrationIDMixin(a);if(!c.success)return c;a=d("WASmaxInReceiptKeyBundleMixin").parseKeyBundleMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,c.value,{keyBundleMixin:a.success?a.value:null}))}g.parseRetryMixin=a}),98);
__d("WASmaxInReceiptSingleStyleReceiptType",["WAResultOrError","WASmaxInReceiptDeliverBizTypeMixin","WASmaxInReceiptDeliverLIDFeatureIncapableTypeMixin","WASmaxInReceiptEngagedTypeMixin","WASmaxInReceiptInactiveTypeMixin","WASmaxInReceiptPlayedSelfTypeMixin","WASmaxInReceiptPlayedTypeMixin","WASmaxInReceiptReadSelfTypeMixin","WASmaxInReceiptReadTypeMixin","WASmaxInReceiptRetryMixin","WASmaxInReceiptServerErrorTypeMixin","WASmaxInReceiptUnknownTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInReceiptServerErrorTypeMixin").parseServerErrorTypeMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ServerErrorType",value:b.value});var c=d("WASmaxInReceiptInactiveTypeMixin").parseInactiveTypeMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"InactiveType",value:c.value});var e=d("WASmaxInReceiptReadTypeMixin").parseReadTypeMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"ReadType",value:e.value});var f=d("WASmaxInReceiptReadSelfTypeMixin").parseReadSelfTypeMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"ReadSelfType",value:f.value});var g=d("WASmaxInReceiptPlayedTypeMixin").parsePlayedTypeMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"PlayedType",value:g.value});var h=d("WASmaxInReceiptPlayedSelfTypeMixin").parsePlayedSelfTypeMixin(a);if(h.success)return d("WAResultOrError").makeResult({name:"PlayedSelfType",value:h.value});var i=d("WASmaxInReceiptRetryMixin").parseRetryMixin(a);if(i.success)return d("WAResultOrError").makeResult({name:"Retry",value:i.value});var j=d("WASmaxInReceiptDeliverLIDFeatureIncapableTypeMixin").parseDeliverLIDFeatureIncapableTypeMixin(a);if(j.success)return d("WAResultOrError").makeResult({name:"DeliverLIDFeatureIncapableType",value:j.value});var k=d("WASmaxInReceiptDeliverBizTypeMixin").parseDeliverBizTypeMixin(a);if(k.success)return d("WAResultOrError").makeResult({name:"DeliverBizType",value:k.value});var l=d("WASmaxInReceiptEngagedTypeMixin").parseEngagedTypeMixin(a);if(l.success)return d("WAResultOrError").makeResult({name:"EngagedType",value:l.value});var m=d("WASmaxInReceiptUnknownTypeMixin").parseUnknownTypeMixin(a);return m.success?d("WAResultOrError").makeResult({name:"UnknownType",value:m.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ServerErrorType","InactiveType","ReadType","ReadSelfType","PlayedType","PlayedSelfType","Retry","LIDFeatureIncapableType","BizType","EngagedType","UnknownType"],[b,c,e,f,g,h,i,j,k,l,m])}g.parseSingleStyleReceiptType=a}),98);
__d("WASmaxInReceiptDeliverSingleStyleMixin",["WAResultOrError","WASmaxInReceiptDeliverBizRolesMixin","WASmaxInReceiptDeliverPaidConversationAggregatedMixin","WASmaxInReceiptDeliverSenderPNMixin","WASmaxInReceiptRecipientMixin","WASmaxInReceiptSingleMixin","WASmaxInReceiptSingleStyleChatType","WASmaxInReceiptSingleStyleReceiptType","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptRecipientMixin").parseRecipientMixin(a);var c=d("WASmaxInReceiptSingleMixin").parseSingleMixin(a);if(!c.success)return c;var e=d("WASmaxInReceiptDeliverPaidConversationAggregatedMixin").parseDeliverPaidConversationAggregatedMixin(a),f=d("WASmaxInReceiptDeliverBizRolesMixin").parseDeliverBizRolesMixin(a),g=d("WASmaxInReceiptDeliverSenderPNMixin").parseDeliverSenderPNMixin(a),h=d("WASmaxInReceiptSingleStyleChatType").parseSingleStyleChatType(a);if(!h.success)return h;a=d("WASmaxInReceiptSingleStyleReceiptType").parseSingleStyleReceiptType(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({recipientMixin:b.success?b.value:null},c.value,{deliverPaidConversationAggregatedMixin:e.success?e.value:null,deliverBizRolesMixin:f.success?f.value:null,deliverSenderPNMixin:g.success?g.value:null,singleStyleChatType:h.value,singleStyleReceiptType:a.success?a.value:null}))}g.parseDeliverSingleStyleMixin=a}),98);
__d("WASmaxInReceiptDeliverMdDowngradeTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","md-downgrade");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseDeliverMdDowngradeTypeMixin=a}),98);
__d("WASmaxInReceiptSenderTypeOrDeliverMdDowngradeTypeOrRetryMixinGroup",["WAResultOrError","WASmaxInReceiptDeliverMdDowngradeTypeMixin","WASmaxInReceiptRetryMixin","WASmaxInReceiptSenderTypeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInReceiptSenderTypeMixin").parseSenderTypeMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"SenderType",value:b.value});var c=d("WASmaxInReceiptDeliverMdDowngradeTypeMixin").parseDeliverMdDowngradeTypeMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"DeliverMdDowngradeType",value:c.value});var e=d("WASmaxInReceiptRetryMixin").parseRetryMixin(a);return e.success?d("WAResultOrError").makeResult({name:"Retry",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["SenderType","MdDowngradeType","Retry"],[b,c,e])}g.parseSenderTypeOrDeliverMdDowngradeTypeOrRetryMixinGroup=a}),98);
__d("WASmaxInReceiptDeliverSingleStyleWithRecipientMixin",["WAResultOrError","WASmaxInReceiptDeliverSenderPNMixin","WASmaxInReceiptIndividualWithRecipientOrGroupOrDeliverStatusOrBroadcastMixinGroup","WASmaxInReceiptSenderTypeOrDeliverMdDowngradeTypeOrRetryMixinGroup","WASmaxInReceiptSingleMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxInReceiptSingleMixin").parseSingleMixin(a);if(!b.success)return b;var c=d("WASmaxInReceiptDeliverSenderPNMixin").parseDeliverSenderPNMixin(a),e=d("WASmaxInReceiptIndividualWithRecipientOrGroupOrDeliverStatusOrBroadcastMixinGroup").parseIndividualWithRecipientOrGroupOrDeliverStatusOrBroadcastMixinGroup(a);if(!e.success)return e;a=d("WASmaxInReceiptSenderTypeOrDeliverMdDowngradeTypeOrRetryMixinGroup").parseSenderTypeOrDeliverMdDowngradeTypeOrRetryMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{deliverSenderPNMixin:c.success?c.value:null,individualWithRecipientOrGroupOrDeliverStatusOrBroadcastMixinGroup:e.value,senderTypeOrDeliverMdDowngradeTypeOrRetryMixinGroup:a.value}))}g.parseDeliverSingleStyleWithRecipientMixin=a}),98);
__d("WASmaxInReceiptReceiptStyles",["WAResultOrError","WASmaxInReceiptDeliverMessageAggregatedStyleMixin","WASmaxInReceiptDeliverSenderAggregatedStyleMixin","WASmaxInReceiptDeliverSenderAggregatedStyleSenderTypeMixin","WASmaxInReceiptDeliverSenderAggregatedStyleViewTypeMixin","WASmaxInReceiptDeliverSingleStyleMixin","WASmaxInReceiptDeliverSingleStyleWithRecipientMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInReceiptDeliverMessageAggregatedStyleMixin").parseDeliverMessageAggregatedStyleMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"DeliverMessageAggregatedStyle",value:b.value});var c=d("WASmaxInReceiptDeliverSenderAggregatedStyleSenderTypeMixin").parseDeliverSenderAggregatedStyleSenderTypeMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"DeliverSenderAggregatedStyleSenderType",value:c.value});var e=d("WASmaxInReceiptDeliverSenderAggregatedStyleViewTypeMixin").parseDeliverSenderAggregatedStyleViewTypeMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"DeliverSenderAggregatedStyleViewType",value:e.value});var f=d("WASmaxInReceiptDeliverSenderAggregatedStyleMixin").parseDeliverSenderAggregatedStyleMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"DeliverSenderAggregatedStyle",value:f.value});var g=d("WASmaxInReceiptDeliverSingleStyleWithRecipientMixin").parseDeliverSingleStyleWithRecipientMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"DeliverSingleStyleWithRecipient",value:g.value});var h=d("WASmaxInReceiptDeliverSingleStyleMixin").parseDeliverSingleStyleMixin(a);return h.success?d("WAResultOrError").makeResult({name:"DeliverSingleStyle",value:h.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["MessageAggregatedStyle","SenderAggregatedStyleSenderType","SenderAggregatedStyleViewType","SenderAggregatedStyle","SingleStyleWithRecipient","SingleStyle"],[b,c,e,f,g,h])}g.parseReceiptStyles=a}),98);
__d("WASmaxInReceiptToAgentParticipantMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"participant");return!b.success?b:d("WAResultOrError").makeResult({participant:b.value})}g.parseToAgentParticipantMixin=a}),98);
__d("WASmaxInReceiptToProxyAccountMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"actual_to");return!b.success?b:d("WAResultOrError").makeResult({actualTo:b.value})}g.parseToProxyAccountMixin=a}),98);
__d("WASmaxInReceiptDeliverRequest",["WAResultOrError","WASmaxInReceiptDeprecatedEditMixin","WASmaxInReceiptOfflineMixin","WASmaxInReceiptReceiptStyles","WASmaxInReceiptToAgentParticipantMixin","WASmaxInReceiptToProxyAccountMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"receipt");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxInReceiptOfflineMixin").parseOfflineMixin(a),e=d("WASmaxInReceiptDeprecatedEditMixin").parseDeprecatedEditMixin(a),f=d("WASmaxInReceiptToProxyAccountMixin").parseToProxyAccountMixin(a),g=d("WASmaxInReceiptToAgentParticipantMixin").parseToAgentParticipantMixin(a);a=d("WASmaxInReceiptReceiptStyles").parseReceiptStyles(a);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,offlineMixin:c.success?c.value:null,deprecatedEditMixin:e.success?e.value:null,toProxyAccountMixin:f.success?f.value:null,toAgentParticipantMixin:g.success?g.value:null,receiptStyles:a.value})}g.parseDeliverRequest=a}),98);
__d("WASmaxOutReceiptDeliverResponseSuccess",["WASmaxAttrs","WASmaxInReceiptEnums","WASmaxJsx","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrJidEnum,a,["from"],d("WASmaxInReceiptEnums").DEVICEJID_BROADCASTJID_DEVICEJID_GROUPJID_NEWSLETTERJID_STATUSJID);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);var e=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!e.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(e.error);var f=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrJidEnum,a,["participant"],d("WASmaxInReceiptEnums").DEVICEJID_USERJID_DEVICEJID);if(!f.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(f.error);a=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrUserJid,a,["recipient"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),"class":"receipt",to:d("WAWap").JID(c.value),type:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,e.value),participant:d("WASmaxAttrs").OPTIONAL(d("WAWap").JID,f.value),recipient:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,a.value)});return b}g.makeDeliverResponseSuccess=a}),98);
__d("WASmaxReceiptDeliverRPC",["WASmaxInReceiptDeliverRequest","WASmaxOutReceiptDeliverResponseSuccess","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInReceiptDeliverRequest").parseDeliverRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Deliver",{Request:b}));return{parsedRequest:b.value,makeDeliverResponseSuccess:function(){return d("WASmaxOutReceiptDeliverResponseSuccess").makeDeliverResponseSuccess(a)}}}g.receiveDeliverRPC=a}),98);
__d("WACreateHandleReceipt",["Promise","WACreateHandleGroupReceiptBranch","WACreateHandleIndividualReceiptBranch","WACreateHandlePeerAppdataReceiptBranch","WAJids","WAResultOrError","WASmaxReceiptDeliverPeerRPC","WASmaxReceiptDeliverRPC","WATagsLogger","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([""," server aggregated receipt is not supported"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['<receipt category="peer"> is not supported yet.']);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["start handling..."]);k=function(){return a};return a}var l=d("WATagsLogger").TAGS(["decision tree","handleReceipt"]);function a(a){var c,e=d("WACreateHandleIndividualReceiptBranch").createHandleIndividualReceiptBranch({handleIndividualReceipt:(c=a.individualMessage)==null?void 0:c.handleIndividualReceipt,handleIndividualRetryReceipt:(c=a.individualMessage)==null?void 0:c.handleIndividualRetryReceipt}),f=d("WACreateHandleGroupReceiptBranch").createHandleGroupReceiptBranch({handleGroupReceipt:(c=a.groupMessage)==null?void 0:c.handleGroupReceipt,handleGroupRetryReceipt:(c=a.groupMessage)==null?void 0:c.handleGroupRetryReceipt}),g=d("WACreateHandlePeerAppdataReceiptBranch").createHandlePeerAppdataReceiptBranch({handlePeerAppdataReceipt:(c=a.appdataMessage)==null?void 0:c.handlePeerAppdataReceipt,handlePeerAppdataRetryReceipt:(c=a.appdataMessage)==null?void 0:c.handlePeerAppdataRetryReceipt});function m(a){var c=a.singleReceiptMixin,g=a.makeAck,i=a.offline,j=a.serverTs;a=a.socketId;var k=c.singleStyleChatType,l=c.singleStyleReceiptType,m=c.id,n=c.recipientMixin;c.deliverBizRolesMixin;c.deliverPaidConversationAggregatedMixin;switch(k.name){case"Individual":return e({aggregate:{aggregatedType:"none",stanzaId:m,receiptSender:k.value.from},receiptType:l,makeAck:g,offline:i,serverTs:j,recipient:n==null?void 0:n.recipient,socketId:a});case"Group":return f({from:k.value.from,aggregate:{aggregatedType:"none",stanzaId:m,receiptSender:k.value.participant},receiptType:l,makeAck:g,offline:i,serverTs:j,recipient:n==null?void 0:n.recipient,socketId:a});case"DeliverStatus":break;case"Broadcast":break;case"NewsletterDeliver":break;default:k.name}return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult(g()))}function n(a){var c=a.aggregateReceiptMixin,g=a.makeAck,i=a.offline,j=a.serverTs;a=a.socketId;var k=c.recipientMixin,l=c.id,m=c.listItem,n=c.individualOrGroupOrDeliverStatusOrBroadcastMixinGroup,o=c.senderAggregatedStyleReceiptType;c.deliverBizRolesMixin;c.deliverPaidConversationAggregatedMixin;c=[l].concat(m.map(function(a){return a.id}));switch(n.name){case"Individual":return e({aggregate:{aggregatedType:"sender",receiptSender:n.value.from,stanzaIds:c},receiptType:o,makeAck:g,offline:i,serverTs:j,recipient:k==null?void 0:k.recipient,socketId:a});case"Group":return f({from:n.value.from,aggregate:{aggregatedType:"sender",stanzaIds:c,receiptSender:n.value.participant},receiptType:o,makeAck:g,offline:i,serverTs:j,recipient:k==null?void 0:k.recipient,socketId:a});case"DeliverStatus":break;case"Broadcast":break}return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult(g()))}return function(a,c){l.DEV(k());if(a.attrs.category==="peer"){l.ERROR(j());var o=d("WASmaxReceiptDeliverPeerRPC").receiveDeliverPeerRPC(a);o=o.makeDeliverPeerResponseSuccess;return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult(o()))}if(a.attrs.category==="peer_appdata")return g(a,c);o=d("WASmaxReceiptDeliverRPC").receiveDeliverRPC(a);a=o.parsedRequest;var p=a.t,q=a.receiptStyles;a=a.offlineMixin;o=o.makeDeliverResponseSuccess;p=d("WATimeUtils").castToUnixTime(p);a=a==null?void 0:a.offline;switch(q.name){case"DeliverMessageAggregatedStyle":var r=q.value,s=r.from,t=r.recipientMixin,u=r.id,v=r.participantsUser;r=r.messageAggregatedStyleReceiptType;var w=d("WAJids").validateGroupJid(s);if(w==null){l.ERROR(i(),s);break}return f({aggregate:{aggregatedType:"server",stanzaId:u,receiptSenders:v.map(function(a){var b=a.jid;a=a.t;return{device:b,ts:d("WATimeUtils").castToUnixTime(a)}})},from:w,receiptType:r,makeAck:o,offline:a,serverTs:p,recipient:t==null?void 0:t.recipient,socketId:c});case"DeliverSenderAggregatedStyleSenderType":s=q.value;u=s.individualWithRecipientOrGroupOrDeliverStatusOrBroadcastMixinGroup;v=s.id;w=s.type;r=s.listItem;w;t={value:{type:w},name:"SenderType"};s=[v].concat(r.map(function(a){return a.id}));switch(u.name){case"Group":return f({aggregate:{aggregatedType:"sender",stanzaIds:s,receiptSender:u.value.participant},from:u.value.from,receiptType:t,makeAck:o,offline:a,serverTs:p,recipient:null,socketId:c});case"Broadcast":break;case"DeliverStatus":break;case"IndividualWithRecipient":return e({aggregate:{aggregatedType:"sender",receiptSender:u.value.from,stanzaIds:s},receiptType:t,makeAck:o,offline:a,serverTs:p,recipient:u.value.recipient,socketId:c})}break;case"DeliverSenderAggregatedStyle":return n({aggregateReceiptMixin:q.value,makeAck:o,serverTs:p,offline:a,socketId:c});case"DeliverSingleStyleWithRecipient":w=q.value;v=w.id;r=w.senderTypeOrDeliverMdDowngradeTypeOrRetryMixinGroup;s=w.individualWithRecipientOrGroupOrDeliverStatusOrBroadcastMixinGroup;switch(s.name){case"IndividualWithRecipient":return e({aggregate:{aggregatedType:"none",receiptSender:s.value.from,stanzaId:v},receiptType:r,makeAck:o,offline:a,serverTs:p,recipient:s.value.recipient,socketId:c});case"Group":return f({from:s.value.from,aggregate:{aggregatedType:"none",stanzaId:v,receiptSender:s.value.participant},receiptType:r,makeAck:o,offline:a,serverTs:p,recipient:null,socketId:c});case"DeliverStatus":break;case"Broadcast":break;default:s.name}break;case"DeliverSingleStyle":return m({singleReceiptMixin:q.value,makeAck:o,serverTs:p,offline:a,socketId:c})}return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult(o()))}}g.createHandleReceipt=a}),98);
__d("WASmaxInStreamErrorEnums",[],(function(a,b,c,d,e,f){a={appdata:"appdata",call:"call",message:"message",notification:"notification",receipt:"receipt"};f.ENUM_APPDATA_CALL_MESSAGE_NOTIFICATION_RECEIPT=a}),66);
__d("WASmaxInStreamErrorAckKickRequest",["WAResultOrError","WASmaxInStreamErrorEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"stream:error");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"ack");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"class",d("WASmaxInStreamErrorEnums").ENUM_APPDATA_CALL_MESSAGE_NOTIFICATION_RECEIPT);if(!a.success)return a;var c=d("WASmaxParseUtils").attrString(b.value,"type");if(!c.success)return c;b=d("WASmaxParseUtils").attrStanzaId(b.value,"id");return!b.success?b:d("WAResultOrError").makeResult({ackClass:a.value,ackType:c.value,ackId:b.value})}g.parseAckKickRequest=a}),98);
__d("WASmaxStreamErrorAckKickRPC",["WASmaxInStreamErrorAckKickRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInStreamErrorAckKickRequest").parseAckKickRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("AckKick",{Request:a}));return{parsedRequest:a.value}}g.receiveAckKickRPC=a}),98);
__d("WASmaxInStreamErrorBadMacRequest",["WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"stream:error");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"bad-mac");return!b.success?b:d("WASmaxParseUtils").voidSuccess}g.parseBadMacRequest=a}),98);
__d("WASmaxStreamErrorBadMacRPC",["WASmaxInStreamErrorBadMacRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInStreamErrorBadMacRequest").parseBadMacRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("BadMac",{Request:a}));return{parsedRequest:a.value}}g.receiveBadMacRPC=a}),98);
__d("WASmaxInStreamErrorCodeRequest",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"stream:error");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"code");return!b.success?b:d("WAResultOrError").makeResult({code:b.value})}g.parseCodeRequest=a}),98);
__d("WASmaxStreamErrorCodeRPC",["WASmaxInStreamErrorCodeRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInStreamErrorCodeRequest").parseCodeRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Code",{Request:a}));return{parsedRequest:a.value}}g.receiveCodeRPC=a}),98);
__d("WASmaxInStreamErrorConflictRequest",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"stream:error");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"conflict");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"code");if(!a.success)return a;var c=d("WASmaxParseUtils").attrString(b.value,"type");if(!c.success)return c;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,b.value,"reason");return!b.success?b:d("WAResultOrError").makeResult({code:a.value,conflictType:c.value,conflictReason:b.value})}g.parseConflictRequest=a}),98);
__d("WASmaxStreamErrorConflictRPC",["WASmaxInStreamErrorConflictRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInStreamErrorConflictRequest").parseConflictRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Conflict",{Request:a}));return{parsedRequest:a.value}}g.receiveConflictRPC=a}),98);
__d("WASmaxInStreamErrorPingKickRequest",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"stream:error");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"ping");if(!b.success)return b;a=d("WASmaxParseUtils").attrStanzaId(b.value,"id");return!a.success?a:d("WAResultOrError").makeResult({pingId:a.value})}g.parsePingKickRequest=a}),98);
__d("WASmaxStreamErrorPingKickRPC",["WASmaxInStreamErrorPingKickRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInStreamErrorPingKickRequest").parsePingKickRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("PingKick",{Request:a}));return{parsedRequest:a.value}}g.receivePingKickRPC=a}),98);
__d("WASmaxInStreamErrorXMLNotWellFormedRequest",["WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"stream:error");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"xml-not-well-formed");return!b.success?b:d("WASmaxParseUtils").voidSuccess}g.parseXMLNotWellFormedRequest=a}),98);
__d("WASmaxStreamErrorXMLNotWellFormedRPC",["WASmaxInStreamErrorXMLNotWellFormedRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInStreamErrorXMLNotWellFormedRequest").parseXMLNotWellFormedRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("XMLNotWellFormed",{Request:a}));return{parsedRequest:a.value}}g.receiveXMLNotWellFormedRPC=a}),98);
__d("WACreateHandleStreamError",["Promise","WAResultOrError","WASmaxDecisionTreeUtils","WASmaxStreamErrorAckKickRPC","WASmaxStreamErrorBadMacRPC","WASmaxStreamErrorCodeRPC","WASmaxStreamErrorConflictRPC","WASmaxStreamErrorPingKickRPC","WASmaxStreamErrorXMLNotWellFormedRPC","WAUnknownStanzaError"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c=a.md,e=a.streamError;return function(a){var f=d("WASmaxDecisionTreeUtils").firstChild(a);if(f.success){f=f.value;switch(f.tag){case"ack":f=d("WASmaxStreamErrorAckKickRPC").receiveAckKickRPC(a);f=f.parsedRequest;return e.handleAckKick(f).then(d("WAResultOrError").makeResult);case"ping":f=d("WASmaxStreamErrorPingKickRPC").receivePingKickRPC(a);f=f.parsedRequest;return e.handlePingKick(f).then(d("WAResultOrError").makeResult);case"xml-not-well-formed":d("WASmaxStreamErrorXMLNotWellFormedRPC").receiveXMLNotWellFormedRPC(a);return e.handleXmlNotWellFormed().then(d("WAResultOrError").makeResult);case"bad-mac":d("WASmaxStreamErrorBadMacRPC").receiveBadMacRPC(a);return e.handleBadMac().then(d("WAResultOrError").makeResult);case"conflict":f=d("WASmaxStreamErrorConflictRPC").receiveConflictRPC(a);f=f.parsedRequest;return e.handleConflict(f).then(d("WAResultOrError").makeResult);default:return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError)}}else{f=d("WASmaxStreamErrorCodeRPC").receiveCodeRPC(a);a=f.parsedRequest;f=a.code;switch(f){case"515":a=c==null?void 0:c.handleRegistrateCompanionSuccess;if(a!=null)return a().then(d("WAResultOrError").makeResult);break;case"516":a=c==null?void 0:c.handleRegistrateCompanionFailure;if(a!=null)return a().then(d("WAResultOrError").makeResult);break;default:return e.handleStreamErrorCode({code:f}).then(d("WAResultOrError").makeResult)}return(h||(h=b("Promise"))).resolve(d("WAUnknownStanzaError").unknownStanzaError)}}}g.createHandleStreamError=a}),98);
__d("WASmaxInLoginDisplayNameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"display_name");return!a.success?a:d("WAResultOrError").makeResult({displayName:a.value})}g.parseDisplayNameMixin=a}),98);
__d("WASmaxInLoginSuccessRequest",["WAResultOrError","WASmaxInLoginDisplayNameMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"success");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrIntRange(a,"props",0,void 0);if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"abprops",0,void 0);if(!e.success)return e;var f=d("WASmaxParseUtils").attrString(a,"location");if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"shard_count",0,4095);if(!g.success)return g;var h=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"creation",0,void 0);if(!h.success)return h;var i=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"companion_enc_static");if(!i.success)return i;var j=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrDeviceJid,a,"lid");if(!j.success)return j;a=d("WASmaxInLoginDisplayNameMixin").parseDisplayNameMixin(a);return d("WAResultOrError").makeResult({t:b.value,props:c.value,abprops:e.value,location:f.value,shardCount:g.value,creation:h.value,companionEncStatic:i.value,lid:j.value,displayNameMixin:a.success?a.value:null})}g.parseSuccessRequest=a}),98);
__d("WASmaxLoginSuccessRPC",["WASmaxInLoginSuccessRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInLoginSuccessRequest").parseSuccessRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Success",{Request:a}));return{parsedRequest:a.value}}g.receiveSuccessRPC=a}),98);
__d("WACreateHandleSuccess",["Promise","WAResultOrError","WASmaxLoginSuccessRPC","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c=(a=a.login)==null?void 0:a.handleLoginSuccess;return function(a){if(c!=null){a=d("WASmaxLoginSuccessRPC").receiveSuccessRPC(a);a=a.parsedRequest;var e=a.t,f=a.props,g=a.abprops,i=a.location,j=a.shardCount,k=a.creation,l=a.companionEncStatic,m=a.lid;a=a.displayNameMixin;return c({timestamp:d("WATimeUtils").castToUnixTime(e),props:f,abprops:g,location:i,shardCount:j,creation:k,companionEncStatic:l,lid:m,displayName:a==null?void 0:a.displayName}).then(d("WAResultOrError").makeResult)}return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult("NO_ACK"))}}g.createHandleSuccess=a}),98);
__d("WAHandleDecisionTreeResult",["WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] unexpected-runtime-error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] runtime-error ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["unrecognized stanza: ",""]);j=function(){return a};return a}function a(a,b){var c=d("WATagsLogger").TAGS(["decision tree"]);return b.then(function(b){if(b.success)return b.value;else if(b.error.type==="unknown-stanza"){c.ERROR(j(),a);return"NO_ACK"}else{b.error.type;c.ERROR(i(),a.tag,b.error.error);return"NO_ACK"}})["catch"](function(b){c.ERROR(h(),a.tag,b);return"NO_ACK"})}g.handleDecisionTreeResult=a}),98);
__d("WAOneQueueHandler",["WAGlobals","WAHandleDecisionTreeResult","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b,c){var e={offline:b.attrs.offline?parseInt(b.attrs.offline,10):null,serverTs:b.attrs.t?d("WATimeUtils").castToUnixTime(parseInt(b.attrs.t,10)):null,tag:b.tag};return d("WAGlobals").getWaOneQueue().handleStanza(function(e){return d("WAHandleDecisionTreeResult").handleDecisionTreeResult(b,a(b,c,e))},e)}}g.handleWithOneQueue=a}),98);
__d("WAServerRPC",["Promise","WACreateHandleAppdata","WACreateHandleChatState","WACreateHandleErrorStanza","WACreateHandleFailure","WACreateHandleInfoBulletin","WACreateHandleIq","WACreateHandleMessage","WACreateHandleNotification","WACreateHandleReceipt","WACreateHandleStreamError","WACreateHandleSuccess","WAHandleDecisionTreeResult","WAOneQueueHandler","WAServerRPCLogger","WAStanzaRootTag"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received unsupported stanza: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unsupported stanza: ",""]);j=function(){return a};return a}function a(a){var c=d("WACreateHandleInfoBulletin").createHandleInfoBulletin(a),e=d("WACreateHandleStreamError").createHandleStreamError(a),f=d("WACreateHandleFailure").createHandleFailure(a),g=d("WACreateHandleSuccess").createHandleSuccess(a),k=d("WACreateHandleMessage").createHandleMessage(a),l=d("WACreateHandleIq").createHandleIq(a),m=d("WACreateHandleChatState").createHandleChatState(a),n=d("WACreateHandleErrorStanza").createHandleErrorStanza(a),o=d("WACreateHandleNotification").createHandleNotification(a),p=d("WACreateHandleAppdata").createHandleAppdata(a),q=d("WACreateHandleReceipt").createHandleReceipt(a);a=function(a,r){switch(a.tag){case d("WAStanzaRootTag").STANZA_ROOT_TAG.MESSAGE:return d("WAOneQueueHandler").handleWithOneQueue(k)(a,r);case d("WAStanzaRootTag").STANZA_ROOT_TAG.NOTIFICATION:return d("WAOneQueueHandler").handleWithOneQueue(o)(a,r);case d("WAStanzaRootTag").STANZA_ROOT_TAG.RECEIPT:return d("WAOneQueueHandler").handleWithOneQueue(q)(a,r);case d("WAStanzaRootTag").STANZA_ROOT_TAG.CHATSTATE:return d("WAHandleDecisionTreeResult").handleDecisionTreeResult(a,m(a));case d("WAStanzaRootTag").STANZA_ROOT_TAG.APPDATA:return d("WAOneQueueHandler").handleWithOneQueue(p)(a,r);case d("WAStanzaRootTag").STANZA_ROOT_TAG.FAILURE:return d("WAHandleDecisionTreeResult").handleDecisionTreeResult(a,f(a));case d("WAStanzaRootTag").STANZA_ROOT_TAG.STREAM_ERROR:return d("WAHandleDecisionTreeResult").handleDecisionTreeResult(a,e(a));case d("WAStanzaRootTag").STANZA_ROOT_TAG.IQ:return d("WAHandleDecisionTreeResult").handleDecisionTreeResult(a,l(a));case d("WAStanzaRootTag").STANZA_ROOT_TAG.IB:return d("WAHandleDecisionTreeResult").handleDecisionTreeResult(a,c(a));case d("WAStanzaRootTag").STANZA_ROOT_TAG.ERROR:return d("WAHandleDecisionTreeResult").handleDecisionTreeResult(a,n(a));case d("WAStanzaRootTag").STANZA_ROOT_TAG.SUCCESS:return d("WAHandleDecisionTreeResult").handleDecisionTreeResult(a,g(a));case d("WAStanzaRootTag").STANZA_ROOT_TAG.XML_STREAM_END:return(h||(h=b("Promise"))).resolve("NO_ACK");default:d("WAServerRPCLogger").logger.WARN(j(),a);d("WAServerRPCLogger").logger.ERROR(i(),a.tag);return(h||(h=b("Promise"))).resolve("NO_ACK")}};return{handleStanza:a}}g.makeServerRPC=a}),98);
__d("WAServerRemoteProceduresHandlers",["Promise","WAHandleErrorStanza","WAHandleIncomingMsg","WAHandleInfoBulletin","WAHandlePrekeyContactIDChangedNotification","WAHandlePrekeyDigestNotification","WAHandlePrekeyLowCountNotification","WAHandleReceipt","WAHandleServerPing","WAHandleStreamError","WALogger","WAServerRPC"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Peer messages are not supported"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Broadcast messages are not supported"]);j=function(){return a};return a}function a(a){var c;return d("WAServerRPC").makeServerRPC({abprops:{handleAbPropsRefreshNotification:(c=a.abprops)==null?void 0:c.handleAbPropsRefreshNotification},accountSync:null,appdataMessage:{handleAppdataMessage:(c=a.appdataMessage)==null?void 0:c.handleAppdataMessage,handlePeerAppdataReceipt:(c=a.appdataMessage)==null?void 0:c.handlePeerAppdataReceipt,handlePeerAppdataRetryReceipt:(c=a.appdataMessage)==null?void 0:c.handlePeerAppdataRetryReceipt},broadcast:{handleBroadcastMessage:function(a){a=a.makeAck;d("WALogger").ERROR(j());return(h||(h=b("Promise"))).resolve(a())}},clientLog:null,comms:{handleEdgeRoutingInfo:d("WAHandleInfoBulletin").handleEdgeRoutingInfo,handleServerPing:d("WAHandleServerPing").handleServerPing},error:{handleErrorStanza:d("WAHandleErrorStanza").handleErrorStanza,handleSmaxErrorStanza:d("WAHandleErrorStanza").handleSmaxErrorStanza},fb:{handleFbDeviceChangeNotification:(c=a.fb)==null?void 0:c.handleFbDeviceChangeNotification,handleFbMultiwayNotification:(c=a.fb)==null?void 0:c.handleFbMultiwayNotification,handleFbThreadNotification:(c=a.fb)==null?void 0:c.handleFbThreadNotification},groupMessage:{handleGroupDirtyBit:null,handleGroupChatState:(c=a.groupMessage)==null?void 0:c.handleGroupChatState,handleGroupMessage:d("WAHandleIncomingMsg").handleGroupMessage,handleGroupNotification:(c=a.groupMessage)==null?void 0:c.handleGroupNotification,handleGroupReceipt:(c=a.groupMessage)==null?void 0:c.handleGroupReceipt,handleGroupRetryReceipt:(c=a.groupMessage)==null?void 0:c.handleGroupRetryReceipt},individualMessage:{handleIndividualMessage:d("WAHandleIncomingMsg").handleIncomingIndividualMsg,handleIndividualReceipt:d("WAHandleReceipt").handleIndividualReceipt,handleIndividualChatState:(c=a.individualMessage)==null?void 0:c.handleIndividualChatState,handleIndividualRetryReceipt:(c=a.individualMessage)==null?void 0:c.handleIndividualRetryReceipt},login:{handleLoginFailure:(c=a.login)==null?void 0:c.handleLoginFailure,handleLoginSuccess:(c=a.login)==null?void 0:c.handleLoginSuccess},md:null,newsletter:null,offline:{handleOfflineEnd:d("WAHandleInfoBulletin").handleOfflineEnd,handleOfflineStart:d("WAHandleInfoBulletin").handleOfflineStart,handleThreadMetadata:(c=a.offline)==null?void 0:c.handleThreadMetadata},peerMessage:{handlePeerMessage:function(a){a=a.makeAck;d("WALogger").ERROR(i());return(h||(h=b("Promise"))).resolve(a())}},prekey:{handlePrekeyContactIDChangedNotification:d("WAHandlePrekeyContactIDChangedNotification").handlePrekeyContactIDChangedNotification,handlePrekeyDigestNotification:d("WAHandlePrekeyDigestNotification").handlePrekeyDigestNotification,handlePrekeyLowCountNotification:d("WAHandlePrekeyLowCountNotification").handlePrekeyLowCountNotification},presence:null,serverProps:null,spam:{handleSpam:(c=a.spam)==null?void 0:c.handleSpam},status:null,streamError:{handleAckKick:d("WAHandleStreamError").handleAckKick,handleBadMac:d("WAHandleStreamError").handleBadMac,handleConflict:d("WAHandleStreamError").handleConflict,handlePingKick:d("WAHandleStreamError").handlePingKick,handleStreamErrorCode:d("WAHandleStreamError").handleStreamErrorCode,handleXmlNotWellFormed:d("WAHandleStreamError").handleXmlNotWellFormed},syncd:null,usync:null})}g.makeServerRemoteProcedureHandlers=a}),98);
__d("WASetAuthKeyPair",["WASetMetaApi"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return d("WASetMetaApi").setMeta({authKeyPair:a})};g.setAuthKeyPair=a}),98);
__d("WAInitAndGetAuthKeyPair",["Promise","WACryptoCurve25519","WACryptoCurve25519Dependencies","WASetAuthKeyPair"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a.authKeyPair!=null?(h||(h=b("Promise"))).resolve(a.authKeyPair):new(d("WACryptoCurve25519").Curve25519)(d("WACryptoCurve25519Dependencies").CURVE25519_SIGNAL_DEPENDENCIES).keyPair.then(function(a){return d("WASetAuthKeyPair").setAuthKeyPair(a).then(function(){return a})})}g.initAndGetAuthKeyPair=a}),98);
__d("WASmaxOutPresenceAvailabilityRequest",["WASmaxAttrs","WASmaxJsx","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.presenceType;a=a.presenceName;b=d("WASmaxJsx").smax("presence",{type:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,b),name:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)});return b}g.makeAvailabilityRequest=a}),98);
__d("WASmaxPresenceAvailabilityRPC",["WAComms","WASmaxOutPresenceAvailabilityRequest","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=d("WASmaxOutPresenceAvailabilityRequest").makeAvailabilityRequest(a);e.next=3;return b("regeneratorRuntime").awrap(d("WAComms").castSmaxStanza(c));case 3:case"end":return e.stop()}},null,this)}g.sendAvailabilityRPC=a}),98);
__d("WASendPresenceStatusProtocol",["WASmaxPresenceAvailabilityRPC"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.status;a=a.name;return d("WASmaxPresenceAvailabilityRPC").sendAvailabilityRPC({presenceType:b,presenceName:a})}g.sendPresenceStatusProtocol=a}),98);
__d("WACommsInit",["WAComms","WAGzip","WAInitAndGetAuthKeyPair","WALogger","WAMockServerShell","WAResolvable","WASendPresenceStatusProtocol","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendPresenceStatusProtocol unavailable failed with error ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendPresenceStatusProtocol available failed with error ",""]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.regInfo,c=a.oneQueue,e=a.stanzaHandler;a=a.getCommsConfig;var f=new(d("WAResolvable").Resolvable)();b=(yield d("WAInitAndGetAuthKeyPair").initAndGetAuthKeyPair(b));a=(yield a({authKeyPair:b}));var g=(b=a.handlers)==null?void 0:b.onOptimisticConnectionChange,j=(b=a.handlers)==null?void 0:b.onConnectionChange,k=!1;b=function(a){a==="in_handshake"?k===!1&&(k=!0):a==="connected"?(void c.newConnection(),f.resolve(),k=!1):a==="disconnected"&&(void c.connectionDropped(),k=!1),j==null?void 0:j(a)};var l=function(a){a==="connected"?d("WASendPresenceStatusProtocol").sendPresenceStatusProtocol({status:"available"})["catch"](function(a){d("WALogger").ERROR(i(),a)}):a==="disconnected"&&d("WASendPresenceStatusProtocol").sendPresenceStatusProtocol({status:"unavailable"})["catch"](function(a){d("WALogger").ERROR(h(),a)}),g==null?void 0:g(a)};a.handlers.onConnectionChange=b;a.handlers.onOptimisticConnectionChange=l;d("WAComms").startComms(e,a,d("WAGzip").gzipInflate,!d("WAMockServerShell").isMockServerMode);d("WAMockServerShell").isMockServerMode&&d("WAMockServerShell").getMockServer!=null&&(yield d("WAMockServerShell").getMockServer().waitForInit(),void c.newConnection(),f.resolve())});return j.apply(this,arguments)}g.initComms=a}),98);
__d("WAGetClockSkewApi",["WAGetMetaApi"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return d("WAGetMetaApi").getMeta().then(function(a){a=a.clockSkew;return{clockSkew:a||0}})};g.getClockSkew=a}),98);
__d("WAOfflineBatchIb",["WADeprecatedSendIq","WAWap"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("WADeprecatedSendIq").deprecatedCastStanza(d("WAWap").wap("ib",null,d("WAWap").wap("offline_batch",{count:d("WAWap").INT(a)})))}g.sendBatchRequestIb=a}),98);
__d("WAPullMode",["WAGlobals","WAOfflineBatchIb","WAServerRPCLogger","WAShiftTimer"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Request next batch: ",". Total requested amount: ",". Downloaded: ",". Processed: ",". Next batch on ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([""," processed < "," next batch check"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," downloaded > "," expected"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Already requested next batch"]);k=function(){return a};return a}var l=0,m=100,n=d("WAServerRPCLogger").logger.TAGS(["PullMode"]);a=function(){function a(){var a=this;this.$1=!1;this.$2=0;this.$3=0;this.$4=0;this.$5=0;this.$6=0;this.$7=new(d("WAShiftTimer").ShiftTimer)(function(){a.$8()})}var b=a.prototype;b.offlineStart=function(a){this.clear(),this.$5=a,this.$9()};b.$10=function(){this.$7.cancel(),this.$7.onOrAfter(l)};b.stanzaReceived=function(){this.$1=!1,this.$4++,this.$10()};b.$9=function(){d("WAOfflineBatchIb").sendBatchRequestIb(d("WAGlobals").getConfig().batchSize()),this.$1=!0,this.$3+=d("WAGlobals").getConfig().batchSize(),this.$2=this.$3-m};b.$8=function(){if(this.$1){n.LOG(k());return}if(this.$4>=this.$5){n.LOG(j(),this.$4,this.$5);return}if(this.$6<this.$2){n.LOG(i(),this.$6,this.$2);return}this.$9();n.LOG(h(),d("WAGlobals").getConfig().batchSize(),this.$3,this.$4,this.$6,this.$2)};b.stanzaProcessed=function(){this.$6++,this.$10()};b.clear=function(){this.$7.cancel(),this.$2=0,this.$4=0,this.$5=0,this.$6=0,this.$3=0,this.$1=!1};return a}();g.PullMode=a}),98);
__d("WAOneQueue",["Promise","WACastStanzas","WAComms","WADanglingQueue","WAGlobals","WAMetrics","WAOfflineUtils","WAPREList","WAPREMetrics","WAPubSub","WAPullMode","WAResolvable","WAShiftTimer","WATagsLogger","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error while casting ack: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cast stanzas ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Acking"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Flushing protocol queue"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Processing stanza with tag "," is done"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Processing stanza with tag ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Drop offline queue as per loosing connection"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Offline queue end"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Offline queue end received while the connection gets dropped"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error while processing: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Execution of "," is done."]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["Execution of ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["Timeout while processing "," offline: ",". Tag: ",", status: ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["Enqueuing "," offline: "," queue size: ","."]);v=function(){return a};return a}var w=6e4,x=d("WATagsLogger").TAGS(["OneQueue"]);a=function(){function a(a){var c=this,e=a.mode,f=a.cryptoManager;a=a.flushables;this.$1=d("WAPubSub").simplePubSub();this.$2=(h||(h=b("Promise"))).resolve();this.$3=[];this.$4=[];this.$8=0;this.$9={};this.$10=[];this.$11=0;this.$14=[];this.$15=new(d("WAResolvable").Resolvable)();this.$5=e;this.$13=f;this.$14=a;this.$7=new(d("WAPullMode").PullMode)();this.$6=new(d("WAShiftTimer").ShiftTimer)(function(){c.$16({operationType:"flush_by_timer"},function(a){return c.$17(a).then(function(){return a.endSuccess()})}).then(function(){})["catch"](function(a){throw a})})}var c=a.prototype;c.$16=function(a,c){var e=this,f=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.ONE_QUEUE,{string:{operationType:a.operationType},"int":{size:this.$8,serverOfflineSize:this.$11}},void 0,d("WAGlobals").getConfig().oneQueueTimeoutMs());void d("WAMetrics").getEventLoopDelay().then(function(a){f.isActive()&&f.addPoint("measure_event_loop_delay",{"int":{eventLoopDelay:a}})});var g=this.$8++;x.LOG(v(),a.operationType,this.$5!==d("WAOfflineUtils").ServerRPCMode.ONLINE,g);f.addPoint("enqueueing_start");var i="enqueueing",j=setTimeout(function(){var b;f.addPoint("enqueueing_timeout");x.WARN(u(),a.operationType,e.$5!==d("WAOfflineUtils").ServerRPCMode.ONLINE,(b=a.stanzaHandlerProps)==null?void 0:b.tag,i)},d("WAGlobals").getConfig().oneQueueTimeoutMs());return new(h||(h=b("Promise")))(function(b,g){e.$2=e.$2.then(function(){f.addPoint("enqueueing_end");i="execution";f.addPoint("execution_start",{bool:{offline:e.$5!==d("WAOfflineUtils").ServerRPCMode.ONLINE}});x.LOG(t(),a.operationType);A(f,function(){return f.addPoint("execution_end")});return c(f)}).then(function(c){x.LOG(s(),a.operationType),b(c)})["catch"](function(a){y(f,a),x.ERROR(r(),a),g(a)})["finally"](function(){e.$8--,clearTimeout(j)})})};c.subscribe=function(a){return this.$1.subscribe(a)};c.getMode=function(){return this.$5};c.handleStanza=function(a,b){var c=this,d=this.$12;return this.$16({operationType:"process_stanza",stanzaHandlerProps:b},function(e){return c.$18(e,a,b,d)}).then(function(){return"NO_ACK"})};c.handleOfflineStartStanza=function(a){if(a.count===0)return;this.$15.resolveWasCalled()&&(this.$15=new(d("WAResolvable").Resolvable)());this.$5=d("WAOfflineUtils").ServerRPCMode.OFFLINE_RESUME;this.$1.publish({type:"offline-start",offlineStats:a});this.$11=a.count;this.$6.onOrAfter(w);this.$7.offlineStart(a.count)};c.handleOfflineEndStanza=function(){var a=this;return this.$16({operationType:"offline_end"},function(b){var c;if(a.$12!==((c=d("WAComms").getComms())==null?void 0:c.socketId)){x.LOG(q());a.$6.cancel();a.$7.clear();return a.$17(b).then(function(){return b.endSuccess()})}x.LOG(p());a.$6.cancel();a.$7.clear();return a.$17(b).then(function(){a.$5=d("WAOfflineUtils").ServerRPCMode.ONLINE,void d("WADanglingQueue").danglingQueueClear(),a.$15.resolve(),a.$1.publish({type:"offline-end"}),b.endSuccess()})}).then(function(){var b=a.$10;a.$10=[];b.forEach(function(a){return a()})})};c.waitForWAInfraOfflineSyncEnd=function(){return this.$15.promise};c.newConnection=function(){var a;this.$12=(a=d("WAComms").getComms())==null?void 0:a.socketId};c.connectionDropped=function(){var a=this;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:x.WARN(o());this.$12=null;this.$7.clear();c.next=5;return b("regeneratorRuntime").awrap(this.$16({operationType:"flush_on_connection_drop"},function(b){return a.$17(b).then(function(){return b.endSuccess()})}));case 5:this.$1.publish({type:"connection-lost"});case 6:case"end":return c.stop()}},null,this)};c.$19=function(){return this.$5===d("WAOfflineUtils").ServerRPCMode.OFFLINE_RESUME?d("WAGlobals").getConfig().batchSize():1};c.$20=function(a,b){a!=null&&(this.$1.publish({type:"offline-entity",serverTs:b,offline:a}),this.$7.stanzaReceived(),this.$6.cancel(),this.$6.onOrAfter(w))};c.$18=function(a,c,d,e){var f=this,g=d.tag,i=d.offline;d=d.serverTs;this.$20(i,d);x.LOG(n(),g);a.addPoint("handling_stanza_start",{string:{stanza_tag:g}});this.$9[g]=((i=this.$9[g])!=null?i:0)+1;return(h||(h=b("Promise"))).resolve(c(this.$13)).then(function(b){a.addPoint("handling_stanza_end");x.LOG(m(),g);!z(b)?f.$3.push({response:b,socketId:e}):(a.addPoint("pending_ack_start"),A(a,function(){return a.addPoint("pending_ack_end")}),f.$3.push({response:b,socketId:e,eventFlow:a}));return b}).then(function(b){return f.$21(a).then(function(){f.$7.stanzaProcessed(),z(b)||a.endSuccess()})})};c.$21=function(a){return this.$3.length>=this.$19()?this.$17(a):(h||(h=b("Promise"))).resolve()};c.$17=function(a){var c=this;x.LOG(l());var e=0,f=Object.entries(this.$9).reduce(function(a,b){var c=b[0];b=b[1];e+=b;return babelHelpers["extends"]({},a,(a={},a["flush_"+c]=b,a))},{});this.$9={};a.addPoint("flushing_start",{"int":babelHelpers["extends"]({},f,{flush_total:e})});A(a,function(){return a.addPoint("flushing_end")});return this.$14.reduce(function(b,d){return b.then(function(){return d.flush({cryptoManager:c.$13},x,a)})},(h||(h=b("Promise"))).resolve()).then(function(){x.LOG(k());return c.$22()})["finally"](function(){c.$5===d("WAOfflineUtils").ServerRPCMode.OFFLINE_RESUME&&c.$1.publish({type:"offline-processed",count:e})})};c.isPendingAcksEmpty=function(){return this.$3.length===0&&this.$4.length===0};c.$22=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:a=[].concat(this.$4,this.$3);x.LOG(j(),a.length);this.$3=[];this.$4=[];c.prev=4;c.next=7;return b("regeneratorRuntime").awrap(d("WACastStanzas").castStanzasByCategories(a,{send:!0,store:d("WAGlobals").getConfig().waDanglingQueue()&&this.$5===d("WAOfflineUtils").ServerRPCMode.OFFLINE_RESUME}));case 7:c.next=14;break;case 9:c.prev=9;c.t0=c["catch"](4);x.ERROR(i(),c.t0.toString());a.forEach(function(a){a=a.eventFlow;(a==null?void 0:a.isActive())&&y(a,c.t0)});throw c.t0;case 14:return c.abrupt("return",(h||(h=b("Promise"))).resolve());case 15:case"end":return c.stop()}},null,this,[[4,9]])};c.enqueue=function(a,c){var e=this,f=c.operationType,g=c.flush;c=c.afterInit;c=c===void 0?!1:c;var h=function(){return e.$16({operationType:f},function(c){return a({cryptoManager:e.$13}).then(function(a){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:if(!g){d.next=3;break}d.next=3;return b("regeneratorRuntime").awrap(e.$17(c));case 3:c.endSuccess();return d.abrupt("return",a);case 5:case"end":return d.stop()}},null,this)})})};if(c&&this.$5!==d("WAOfflineUtils").ServerRPCMode.ONLINE){var i=new(d("WAResolvable").Resolvable)();this.$10.push(function(){h().then(function(a){return i.resolve(a)})["catch"](function(a){return i.reject(a)})});return i.promise}return h()};return a}();function y(a,b){a==null?void 0:a.endFail("error",{string:{error:""+b.toString()}})}function z(a){return!(a==="NO_ACK"||a==="CLOSE_SOCKET")}function A(a,b){var c=a.endSuccess;a.endSuccess=function(a){b(),c(a)}}g.logger=x;g.WAOneQueue=a}),98);
__d("Worm",["WAPREList","WAPREMetrics","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error performing ",": ",""]);h=function(){return a};return a}var i=d("WATagsLogger").TAGS(["WORM"]),j=1e4;a=function(){function a(a){this.$1=a}var c=a.prototype;c.init=function(a){return this.$1.init(a)};c.close=function(){this.$1.close()};c.runInTransaction=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f;f=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.WORM,{string:{operationType:(f=e)!=null?f:"unknown_worm_transaction"},bool:{isWorm:!0}},void 0,j);try{a=(yield this.$1.runInTransaction(a,b,c,{eventFlow:f}));f.endSuccess();return a}catch(a){f.endFail("error");i.ERROR(h(),e,a);throw a}});function c(b,c,d,e){return a.apply(this,arguments)}return c}();return a}();g.WormDatabase=a}),98);
__d("WormEAR",["WACryptoPrimitives","WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h="_encryptedContent";function i(a){if(typeof a==="number")return a;var b=new TextEncoder();a=JSON.stringify(a);if(a==null)throw c("WAErr")("Object can not be stringified");b=b.encode(a);a=new Uint8Array(64);d("WACryptoPrimitives").lowlevel.crypto_hash(a,b,b.length);return a.buffer}a=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.isSecureStore=function(a){return this.$1[a].secure!==!1};b.encrypt=function(a,b){var c=this.$1[b],d=new Set([c.primaryKey]);for(var c=c.indexes,e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;for(var g=g.fields,j=Array.isArray(g),k=0,g=j?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(j){if(k>=g.length)break;l=g[k++]}else{k=g.next();if(k.done)break;l=k.value}l=l;d.add(l)}}l={};for(k=d,j=Array.isArray(k),g=0,k=j?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(j){if(g>=k.length)break;f=k[g++]}else{g=k.next();if(g.done)break;f=g.value}e=f;l=babelHelpers["extends"]({},l,(c={},c[e]=i(a[e]),c))}return babelHelpers["extends"]({},l,(d={},d[h]=this.$3.encrypt(this.$2.encode(b,a)),d))};b.decrypt=function(a,b){return this.$2.decode(b,this.$3.decrypt(a[h]))};b.hashPk=function(a){return i(a)};b.hashSelector=function(a){a=[].concat(a);for(var b=0;b<a.length;b++){var c=a[b];a[b]=i(c)}return a};b.getDecryptionErrorType=function(){return this.$3.getDecryptionErrorType()};return a}();g.ENCRYPTED_COLUMN_NAME=h;g.WormEAR=a}),98);
__d("WAIDBTypes",[],(function(a,b,c,d,e,f){"use strict";function a(){return indexedDB}f.idb=a}),66);
__d("WormIDbStore",["Promise","WAErr","WormEAR","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,c,d){this.$1=b.objectStore(a),this.$2=a,this.$3=d,this.$4=c}var e=a.prototype;e.$5=function(a,b){var c=this.$4.eventFlow.isActive()?this.$4.eventFlow:null;c==null?void 0:c.addPoint(b+"_start");a=a();c==null?void 0:c.addPoint(b+"_end");return a};e.$6=function(a){if(d("WormEAR").ENCRYPTED_COLUMN_NAME in a)return{encrypted:!0,encryptedEntity:a};else return{encrypted:!1,entity:a}};e.$7=function(){return this.$3.isSecureStore(this.$2)};e.$8=function(a){var b=this;if(a==null)return a;var d=this.$6(a);if(!d.encrypted)return d.entity;if(!this.$7())throw c("WAErr")("Attempt to decrypt entity: Store is not secure");return this.$5(function(){return b.$3.decrypt(d.encryptedEntity,b.$2)},"decrypt")};e.$9=function(a){var b=this;return!this.$7()?a:this.$5(function(){return b.$3.encrypt(a,b.$2)},"encrypt")};e.$10=function(a){var b=this;return!this.$7()?a:this.$5(function(){return b.$3.hashPk(a)},"hashPk")};e.$11=function(a){var b=this;return!this.$7()?a:a!=null?this.$5(function(){return b.$3.hashSelector(a)},"hashSelector"):a};e.$12=function(a,c){var d=this;return new(h||(h=b("Promise")))(function(b,e){var f,g=[],h=(c==null?void 0:c.limit)!=null,i=Math.max(0,(f=c==null?void 0:c.limit)!=null?f:0);if(h&&i===0){b(g);return}var j=a();j.onsuccess=function(){var a=j.result;if(a){var f;try{f=d.$8(a.value)}catch(a){e(a);return}(!(c==null?void 0:c.filter)||c.filter(f))&&g.push(f);if(h&&i===g.length){b(g);return}a["continue"]()}else b(g)};j.onerror=e})};e.bulkAdd=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this;yield (h||(h=b("Promise"))).all(a.map(function(a){return new(h||(h=b("Promise")))(function(b,d){var e=c.$1.add(c.$9(a));e.onsuccess=b;e.onerror=d})}))});function c(b){return a.apply(this,arguments)}return c}();e.bulkPut=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this;yield (h||(h=b("Promise"))).all(a.map(function(a){return new(h||(h=b("Promise")))(function(b,d){var e=c.$1.put(c.$9(a));e.onsuccess=b;e.onerror=d})}))});function c(b){return a.apply(this,arguments)}return c}();e.bulkGet=function(a){var c=this;return(h||(h=b("Promise"))).all(a.map(function(a){return new(h||(h=b("Promise")))(function(b,d){var e=c.$1.get(c.$10(a));e.onsuccess=function(){try{b(c.$8(e.result))}catch(a){d(a)}};e.onerror=d})}))};e.readIndex=function(a,b,c){var d=this;return this.$12(function(){return d.$1.index(a).openCursor(d.$11(b),(c==null?void 0:c.order)==="desc"?"prev":"next")},c)};e.readAll=function(a){var b=this;return this.$12(function(){return b.$1.openCursor(null,(a==null?void 0:a.order)==="desc"?"prev":"next")},a)};e.bulkDelete=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this;yield (h||(h=b("Promise"))).all(a.map(function(a){return new(h||(h=b("Promise")))(function(b,d){var e=c.$1["delete"](c.$10(a));e.onsuccess=b;e.onerror=d})}))});function c(b){return a.apply(this,arguments)}return c}();e.clear=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this;yield new(h||(h=b("Promise")))(function(b,c){var d=a.$1.clear();d.onsuccess=b;d.onerror=c})});function c(){return a.apply(this,arguments)}return c}();return a}();g.WormIDbStore=a}),98);
__d("WormIDbTransaction",["WAResolvable","WormIDbStore"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){var e=this;this.$3=c;this.$4=b;this.$1=a;this.$2=new(d("WAResolvable").Resolvable)();this.$1.oncomplete=function(){e.$2.resolve()};this.$1.onerror=this.$1.onabort=function(){e.$2.reject(e.$1.error)}}var b=a.prototype;b.getStore=function(a){return new(d("WormIDbStore").WormIDbStore)(a,this.$1,this.$4,this.$3)};b.commit=function(){return this.$2.promise};b.abort=function(){this.$2.isSettled||this.$1.abort()};return a}();g.WormIDbTransaction=a}),98);
__d("WormIDbUtils",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){return new(g||(g=b("Promise")))(function(b,c){a.onsuccess=function(){return b(a.result)},a.onerror=function(){return c(a.error)}})}f.promisifyIDbRequest=a}),66);
__d("WormIDbUpgrade",["WormIDbUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h="_worm_db_version_",i="schema_hash";function a(a,b){var c=[],d=[],e=new Map(),f=Array.from(Object.keys(b)).map(function(a){return a.toString()});f=new Set(f);var g=a.objectStoreNames.length>0?a.transaction(Array.from(a.objectStoreNames),"readonly"):null;for(var h of Object.keys(b))if(!a.objectStoreNames.contains(h))c.push(b[h]);else{if(b[h].secure!==!1)continue;if(g==null)continue;var i=g.objectStore(h),j=i.indexNames,k=new Set(b[h].indexes.map(function(a){return a.name.toString()})),l=[],m=[];for(var n of b[h].indexes)!j.contains(n.name)?l.push(n):i.index(n.name).unique!==n.unique&&(l.push(n),m.push(n.name));for(i=0;i<j.length;i++){n=j[i];k.has(n)||m.push(n)}(l.length>0||m.length>0)&&e.set(h,{indexesToCreate:l,indexesToDelete:m})}for(n=0;n<a.objectStoreNames.length;n++){j=a.objectStoreNames[n];f.has(j)||d.push(j)}return{storesToCreate:c,storesToDelete:d,storesToModify:e}}function c(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!a.objectStoreNames.contains(h))return!0;a=a.transaction(h,"readonly");a=(yield d("WormIDbUtils").promisifyIDbRequest(a.objectStore(h).get(i)));return a.value!==b});return j.apply(this,arguments)}function e(a,b,c,d,e){var f=c.storesToCreate,g=c.storesToDelete;c=c.storesToModify;for(f of f){var j=a.createObjectStore(f.name,{autoIncrement:f.autoIncrement,keyPath:f.primaryKey});for(var k of f.indexes)j.createIndex(k.name,k.fields.map(function(a){return a.toString()}),{unique:k.unique})}for(j of g)e.has(j)&&a.deleteObjectStore(j);for(k of c){f=k[0];g=k[1];e=g.indexesToCreate;j=g.indexesToDelete;for(c of j)b.objectStore(f).deleteIndex(c);for(g of e)b.objectStore(f).createIndex(g.name,g.fields,{unique:g.unique})}!a.objectStoreNames.contains(h)?j=a.createObjectStore(h,{keyPath:"key"}):j=b.objectStore(h);j.put({key:i,value:d})}g.DB_VERSION_STORE=h;g.SCHEMA_HASH_KEY=i;g.schemaDiff=a;g.shouldUpgradeDb=c;g.upgradeDb=e}),98);
__d("WormIDbDriver",["Promise","WABridge","WACryptoSha256","WAErr","WAIDBTypes","WAOdsEnums","WAResolvable","WATagsLogger","WormIDbTransaction","WormIDbUpgrade","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpected error: ",""]);i=function(){return a};return a}var j=d("WATagsLogger").TAGS(["WormIDbDriver"]);function k(a,e,f){var g=e.onUpgrade,i=e.onBecomeStale,j=e.onClose,k=e.onError;return new(h||(h=b("Promise")))(function(b,e){var h=d("WAIDBTypes").idb().open(a,f);g!=null&&(h.onupgradeneeded=function(){if(h.transaction==null)throw c("WAErr")("Transaction is null on upgradeneeded event");g(h.result,h.transaction)});h.onsuccess=function(){var a=h.result;j!=null&&(a.onclose=j);a.onversionchange=function(){a.close(),i!=null&&i()};b(a)};h.onerror=function(){e(h.error),k!=null&&k(h.error)}})}var l={onBecomeStale:function(){d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.WORM,key:"error.db_stale"})},onClose:function(){d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.WORM,key:"error.db_close"})},onError:function(a){j.ERROR(i(),a)}};function m(a){return a()["catch"](function(a){if(a instanceof Event){if((a==null?void 0:a.type)==="error"){var b;throw c("WAErr")((b=a==null?void 0:a.target.error)!=null?b:"unknown")}throw c("WAErr")((b=a==null?void 0:a.type)!=null?b:"unknown")}throw a})}a=function(){function a(a,b,c,d){d===void 0&&(d=new Set()),this.$4=null,this.$2=a,this.$3=b,this.$5=d,this.$6=c}var e=a.prototype;e.$7=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){this.$4!=null&&(yield this.$4.promise);if(this.$1==null)throw c("WAErr")("IDB is not initialised");a=new(d("WormIDbTransaction").WormIDbTransaction)(this.$1.transaction(a.map(function(a){return a.toString()}),b,{durability:"relaxed"}),f,this.$6);b=(yield e(a));yield a.commit();return b});function e(b,c,d,e){return a.apply(this,arguments)}return e}();e.runInTransaction=function(a,c,e,f){var g=this;return m(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){g.$1==null&&(f.eventFlow.addPoint("db_reinit_start",{bool:{isDbNull:!0}}),yield g.init(),f.eventFlow.addPoint("db_reinit_end"));var b;try{b=(yield g.$7(a,c,e,f))}catch(h){if(g.$6!=null&&h instanceof g.$6.getDecryptionErrorType())f.eventFlow.addPoint("db_recreate_start"),d("WAIDBTypes").idb().deleteDatabase(g.$2),yield g.init(),b=(yield g.$7(a,c,e,f)),f.eventFlow.addPoint("db_recreate_end");else if(h.name==="InvalidStateError")f.eventFlow.addPoint("db_reinit_start",{bool:{isDbInvalid:!0}}),yield g.init(),f.eventFlow.addPoint("db_reinit_end"),b=(yield g.$7(a,c,e,f));else throw h}return b}))};e.close=function(){var a;(a=this.$1)==null?void 0:a.close()};e.init=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this,e=!1;if(this.$4){e=!0;return this.$4.promise}this.$4=new(d("WAResolvable").Resolvable)();var f=!1;this.$1!=null&&(this.$1.close(),this.$1=null,f=!0);var g=!0;try{var h=JSON.stringify(this.$3);if(h==null)throw c("WAErr")("DB schema cannot be serialized");var i=(yield d("WACryptoSha256").sha256Str(h));h=(yield k(this.$2,l));g=(yield d("WormIDbUpgrade").shouldUpgradeDb(h,i));if(!g)this.$1=h;else{var j=d("WormIDbUpgrade").schemaDiff(h,this.$3),m=h.version;h.close();this.$1=(yield k(this.$2,babelHelpers["extends"]({},l,{onUpgrade:function(a,c){return d("WormIDbUpgrade").upgradeDb(a,c,j,i,b.$5)}}),m+1))}(h=this.$4)==null?void 0:h.resolve()}catch(a){(m=this.$4)==null?void 0:m.reject(a);throw a}finally{a==null?void 0:a.eventFlow.addAnnotations({bool:{isCompetingInit:e,isClosingDb:f,shouldUpgrade:g}}),this.$4=null}});function e(b){return a.apply(this,arguments)}return e}();return a}();g.WormIDbDriver=a}),98);
__d("WormDb",["WAErr","Worm","WormEAR","WormIDbDriver","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h={stanzaQueue:{autoIncrement:!0,name:"stanzaQueue",primaryKey:"stanzaQueueId",indexes:[{name:"[jid+priority]",fields:["jid","priority"],unique:!1},{name:"priority",fields:["priority"],unique:!1},{name:"jid",fields:["jid"],unique:!1}],secure:!1}},i;function a(a,b,c,d){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b=new(d("WormEAR").WormEAR)(h,b,c);i=new(d("Worm").WormDatabase)(new(d("WormIDbDriver").WormIDbDriver)(a,h,b,new Set([])));yield i.init(e)});return j.apply(this,arguments)}function e(){if(i==null)throw c("WAErr")("Signal Db v3 is not initialized");return i}g.makeDb=a;g.getDb=e}),98);
__d("WAPersistedQueueApiV2",["MAWODSProxy","WAOdsEnums","WAPersistedQueueApi","WormDb","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return"PQ - "+a};function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAPersistedQueueApi").persistedQueueRead("stanzaQueue"));a.length>0&&(yield p("stanzaQueue",a.map(function(a){a.stanzaQueueId;a=babelHelpers.objectWithoutPropertiesLoose(a,["stanzaQueueId"]);return a})),yield d("WAPersistedQueueApi").persistedQueueClear("stanzaQueue"),d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.PQ_MIGRATION,key:"v3"}));return{ack:k,clear:l,"delete":m,index:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return{equals:function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return{read:function(){var a,d;return(a=(d=j.apply(void 0,b)).equals.apply(d,c)).read.apply(a,arguments)}}},keys:function(){return j.apply(void 0,b).keys()},read:function(){var a;return(a=j.apply(void 0,b)).read.apply(a,arguments)}}},keys:o,read:n,write:p}});return i.apply(this,arguments)}function j(a,b){return{equals:function(c){return{read:function(e){return d("WormDb").getDb().runInTransaction([a],"readonly",function(d){return d.getStore(a).readIndex(b,c,e)},h("index-equal"))}}},keys:function(){return d("WormDb").getDb().runInTransaction([a],"readonly",function(c){return c.getStore(a).readIndex(b)},"index-keys").then(function(a){return a.map(function(a){a=a.stanzaQueueId;return a})})},read:function(c){return d("WormDb").getDb().runInTransaction([a],"readonly",function(d){return d.getStore(a).readIndex(b,void 0,c)},h("index-read"))}}}function k(a,b){return m(a,b)}function l(a){return d("WormDb").getDb().runInTransaction([a],"readwrite",function(b){return b.getStore(a).clear()},h("clear"))}function m(a,b){return d("WormDb").getDb().runInTransaction([a],"readwrite",function(c){return c.getStore(a).bulkDelete(b)},h("delete"))}function n(a,b){return d("WormDb").getDb().runInTransaction([a],"readonly",function(c){return c.getStore(a).readAll(b)},h("read"))}function o(a){return d("WormDb").getDb().runInTransaction([a],"readonly",function(b){return b.getStore(a).readAll()},h("keys")).then(function(a){return a.map(function(a){a=a.stanzaQueueId;return a})})}function p(a,b){return d("WormDb").getDb().runInTransaction([a],"readwrite",function(c){return c.getStore(a).bulkAdd(b)},h("write"))}g.wormApiForPersistedQueue=a;g.persistedQueueIndex=j;g.persistedQueueRead=n;g.persistedQueueKeys=o;g.persistedQueueWrite=p}),98);
__d("WAService",["WAAbPropsInit","WACommsInit","WACryptoLibraryConfig","WACryptoManager","WACryptoManagerUtils","WADanglingQueue","WADeviceNotificationFlushable","WAGetClockSkewApi","WAGlobals","WAICDCFlushable","WAMediaKeysFlushable","WAOfflineUtils","WAOneQueue","WAPersistedQueueApi","WAPersistedQueueApiV2","WAProtocolQueue","WATagsLogger","WATimeUtils","WAWaitForComms","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Worker inited"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["initWAInfra for deviceJid: ",""]);i=function(){return a};return a}var j=d("WATagsLogger").TAGS(["backend"]);function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.regData,c=a.hmacKey,e=a.dependencies,f=a.config,g=a.serverRPC,k=a.getCommsConfig;j.LOG(i(),b.deviceJid);a=d("WACryptoManagerUtils").createCryptoManager(b.regInfo);var l=(yield d("WAPersistedQueueApiV2").wormApiForPersistedQueue());l=d("WAProtocolQueue").initProtocolQueue(l);var m=new(d("WAOneQueue").WAOneQueue)({cryptoManager:a.manager,flushables:[d("WAICDCFlushable").icdcFlushable,d("WADeviceNotificationFlushable").deviceNotificationFlushable,d("WAMediaKeysFlushable").mediaKeysFlushable,d("WAProtocolQueue").protocolQueueFlushable(l),d("WACryptoManager").cryptoManagerFlushable(a.manager)],mode:d("WAOfflineUtils").ServerRPCMode.INIT});d("WADanglingQueue").initDanglingQueue(d("WAPersistedQueueApi").dexieApiForPersistedQueue());d("WAGlobals").setGlobals({config:f,dependencies:e,myJids:{deviceJid:b.deviceJid,userJid:b.userJid},waOneQueue:m,hmacKey:c});d("WACryptoLibraryConfig").setCryptoLibraryConfig("signalFutureMessagesMax",f.getSignalFutureMessagesMax());a=(yield d("WAGetClockSkewApi").getClockSkew());e=a.clockSkew;d("WATimeUtils").setClockSkew(e);yield d("WAAbPropsInit").initAbProps();function n(){return d("WACommsInit").initComms({stanzaHandler:g.handleStanza,getCommsConfig:k,regInfo:b.regInfo,oneQueue:m}).then(function(){return d("WAWaitForComms").unblockComms()})}j.LOG(h());return{oneQueue:m,protocolQueue:l,startComms:n}});return k.apply(this,arguments)}g.makeWAService=a}),98);
__d("MAWBackend",["ACTSanitizerApiLazyLoader","EBBridgedAPIHandler","JSResourceForInteraction","MAWBackendHandlers","MAWClearSignalAndTempStores","MAWCommsConfig","MAWCreateGroupApi","MAWCurrentUser","MAWDefinePersistedJob","MAWDeleteExpiredMsgsApi","MAWDeleteForMeMsgContentCleaner","MAWDyiBatchRestoreDataSync","MAWEbRestoreQueue","MAWEbUploadQueue","MAWEphemeralCleaner","MAWEphemeralConsts","MAWExpiredXMACleaner","MAWFTSDataSync","MAWFbCat","MAWGetNextDeleteDFMContentTs","MAWGetNextDeletePendingStanzaTs","MAWGetNextDeleteUnsendContentTs","MAWGetNextDeletionTsApi","MAWGetNextExpirationTsApi","MAWGetNextExpiredXMATs","MAWGetWorkerStatusApi","MAWHandleReachabilityErrorAdminMsgApi","MAWJobManager","MAWLoadRecentParticipantsApi","MAWMessageReceiveReliabilityLogger","MAWPREListeners","MAWPendingStanzaCleaner","MAWPreloadJobs","MAWProtocolQueueProcess","MAWQplProxy","MAWRemoveExpiredDFMMsgsContent","MAWRemoveExpiredMsgsFromUIApi","MAWRemoveExpiredPendingStanzas","MAWRemoveExpiredUnsendMsgsContent","MAWRemoveExpiredXMAMsgsContentApi","MAWSharedCOP","MAWSharedEbUploadQueue","MAWSharedOfflineQueueMetric","MAWSharedOfflineResumeUINotifier","MAWTaskDefinitions","MAWUnsendMsgContentCleaner","Promise","WAArrayBufferUtils","WABridgedAPIHandler","WADeleteReceiptsApi","WAErr","WAMessageLoggingPublisher","WAMockServerShell","WAPassiveMode","WAServerRemoteProceduresHandlers","WAService","WATagsLogger","WAWaitForComms","WAWaitForUser","asyncToGeneratorRuntime","cr:5475","gkx","isUseridAnnotationEnabled","promiseDone","qpl","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to init worker (post-startup): ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Worker inited"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handle with type "," not found"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["handle with type "," not found"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to init worker (post-startup): ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["deviceJid: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["initWAInfra"]);o=function(){return a};return a}var p=c("requireDeferred")("WorkerRelayEnvironment").__setRef("MAWBackend"),q=c("gkx")("23903")&&c("JSResourceForInteraction")("MAWDebugDefineFunctions").__setRef("MAWBackend"),r=c("gkx")("23903")&&c("JSResourceForInteraction")("WADebugTools").__setRef("MAWBackend"),s=d("WATagsLogger").TAGS(["backend"]);function a(a,b,c,d,e){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,t){s.LOG(o());s.LOG(n(),a.deviceJid);d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(1056839232,"112"),"maw_backend_setup_start");d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(25310776,"6155"),"maw_backend_setup_start");var u=d("MAWSharedCOP").makeCOP(d("MAWProtocolQueueProcess").processProtocolQueueEntries);c("promiseDone")(d("ACTSanitizerApiLazyLoader").loadACTSanitizerApi());d("MAWMessageReceiveReliabilityLogger").subscribeToIncomingMessageEvents(d("WAMessageLoggingPublisher").messageLoggingPublisher);d("MAWFbCat").setFbCat(d("WAArrayBufferUtils").stringToArrayBuffer(a.fbCat));var v=d("WAServerRemoteProceduresHandlers").makeServerRemoteProcedureHandlers(d("MAWBackendHandlers").serverRpcHandlers),w=(yield d("WAService").makeWAService({config:t,dependencies:{clearSignalAndTempStores:d("MAWClearSignalAndTempStores").clearSignalAndTempStores,createGroups:d("MAWCreateGroupApi").createGroups,ephemeralMaxDeletionWindowForUnseenMessage:function(){return d("MAWEphemeralConsts").ephemeralMaxDelectionWindowForUnseenMessage},handleReachabilityErrorAdminMsg:d("MAWHandleReachabilityErrorAdminMsgApi").handleReachabilityErrorAdminMsg,isEmployee:d("MAWCurrentUser").isEmployee,isUseridAnnotationEnabled:c("isUseridAnnotationEnabled"),loadRecentParticipants:d("MAWLoadRecentParticipantsApi").loadRecentParticipants,mediaUploadRoot:function(){return"/wa-msgr/mms"}},getCommsConfig:d("MAWCommsConfig").getCommsConfig,hmacKey:e,regData:a,serverRPC:v})["catch"](function(a){s.ERROR(m(),a);throw a}));d("MAWEbRestoreQueue").initEbRestoreQueue();d("MAWSharedEbUploadQueue").initEbUploadQueue();d("MAWSharedOfflineQueueMetric").makeOfflineQueueMetric(w.oneQueue,d("WAPassiveMode").passiveModeNotifier,u,d("WAMessageLoggingPublisher").messageLoggingPublisher);u.subscribeToOfflineQueue(w.oneQueue,w.protocolQueue);d("MAWSharedOfflineResumeUINotifier").offlineResumeUINotifier.subscribeToWAEvents(w.oneQueue);d("MAWSharedOfflineResumeUINotifier").offlineResumeUINotifier.subscribeToMawEvents(u);d("MAWSharedOfflineResumeUINotifier").offlineResumeUINotifier.subscribeToMessageEvents(d("WAMessageLoggingPublisher").messageLoggingPublisher);d("MAWEphemeralCleaner").startEphemeralCleaner({backendFns:{getNextTs:d("MAWGetNextDeletionTsApi").getNextDeletionTs,purgeEnabled:function(){return!0},removeExpired:function(){return d("MAWDeleteExpiredMsgsApi").deleteExpiredMsgs().then(function(a){return a.length>0?d("WADeleteReceiptsApi").deleteReceipts(a).then(function(){return a.length}):a.length})}},uiFns:{getNextTs:d("MAWGetNextExpirationTsApi").getNextExpirationTs,purgeEnabled:function(){return!0},removeExpired:d("MAWRemoveExpiredMsgsFromUIApi").removeExpiredMsgsFromUI}});d("MAWUnsendMsgContentCleaner").startUnsendMsgContentCleaner({getNextTs:d("MAWGetNextDeleteUnsendContentTs").getNextDeleteUnsendContentTs,purgeEnabled:function(){return!0},removeExpired:d("MAWRemoveExpiredUnsendMsgsContent").removeExpiredUnsendMsgsContent});d("MAWDeleteForMeMsgContentCleaner").startDeleteForMeMsgContentCleaner({getNextTs:d("MAWGetNextDeleteDFMContentTs").getNextDeleteDFMContentTs,purgeEnabled:function(){return!0},removeExpired:d("MAWRemoveExpiredDFMMsgsContent").removeExpiredDFMMsgsContent});d("MAWPendingStanzaCleaner").startPendingStanzaCleaner({getNextTs:d("MAWGetNextDeletePendingStanzaTs").getNextDeletePendingStanzaTs,purgeEnabled:function(){return!0},removeExpired:d("MAWRemoveExpiredPendingStanzas").removeExpiredPendingStanzas});d("MAWExpiredXMACleaner").startExpiredXMACleaner({getNextTs:d("MAWGetNextExpiredXMATs").getNextExpiredXMATs,purgeEnabled:function(){return!0},removeExpired:d("MAWRemoveExpiredXMAMsgsContentApi").removeExpiredXMAMsgsContent});b("cr:5475").getDeferredJobHandlers!=null?d("MAWDefinePersistedJob").setMsgrDeferredJobImplementations(b("cr:5475").getDeferredJobHandlers()):b("cr:5475").getJobHandlers!=null&&d("MAWDefinePersistedJob").setMsgrJobImplementations(b("cr:5475").getJobHandlers());d("WAMockServerShell").isMockServerMode||c("promiseDone")(d("WAWaitForComms").waitForComms().then(function(){return d("MAWTaskDefinitions").registerTasks(d("WAWaitForUser").waitForUserUnblocked())}));c("promiseDone")(p.load().then(function(a){a=a.createWorkerRelayEnvironment;a()}));f.setHandlers("backend",babelHelpers["extends"]({},g.bridgeHandlers,{ebapi:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWaitForComms").waitForComms();var b=d("EBBridgedAPIHandler").ebapi[a.type];b==null&&s.TAGS(["EBBridgedAPI"]).ERROR(l(),a.type);return b.apply(void 0,a.args)});function c(b){return a.apply(this,arguments)}return c}(),igdapi:function(){return(h||(h=b("Promise"))).resolve()},initMockServer:function(a){return d("WAMockServerShell").getMockServer==null?(h||(h=b("Promise"))).reject("Mock server is not available. Make sure you use worker v2"):d("WAMockServerShell").getMockServer().init(a)},runJobFireAndForget:function(a){return d("WAWaitForComms").waitForComms().then(function(){return d("MAWJobManager").getJobManager().fireAndForget(a)})},runJobWaitUntilCompleted:function(a){var b;b=(b=a.args)==null?void 0:(b=b.args)==null?void 0:b.s2sInstanceKey;b!=null&&a.type==="sendMsg"&&d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(25313175,"1551"),"backend_reached",{annotations:{bool:{backendSetupReadyFromWorker:!d("WAWaitForComms").isStillWaitingForComms()}},instanceKey:b});return d("WAWaitForComms").waitForComms().then(function(){return d("MAWJobManager").getJobManager().waitUntilCompleted(a)})},runJobWaitUntilPersisted:function(a){return d("WAWaitForComms").waitForComms().then(function(){return d("MAWJobManager").getJobManager().waitUntilPersisted(a)})},runMock:function(a){return d("WAMockServerShell").getMockServer==null?(h||(h=b("Promise"))).reject("Mock server is not available. Make sure you use worker v2"):d("WAMockServerShell").getMockServer().runMock(a)},setMockVariables:function(a){if(d("WAMockServerShell").getMockServer==null)throw c("WAErr")("Mock server is not available. Make sure you use worker v2");d("WAMockServerShell").getMockServer().setVariables(a.variables)},waapi:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWaitForComms").waitForComms();var b=d("WABridgedAPIHandler").waapi[a.type];b==null&&s.TAGS(["WABridgedAPI"]).ERROR(k(),a.type);return b.apply(void 0,a.args)});function c(b){return a.apply(this,arguments)}return c}()}));d("MAWPREListeners").initializeWAPREMetrics();c("promiseDone")(d("MAWFTSDataSync").initFTS());d("MAWDyiBatchRestoreDataSync").initDyiBatchUpload();r&&r!=null&&q&&q!=null&&c("promiseDone")((h||(h=b("Promise"))).all([q.load(),r.load()]).then(function(a){var b=a[0].getAllDebugFunctions;a=a[1].initDebugFunctions;a(b())}));t=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield w.startComms(),s.LOG(j()),d("MAWGetWorkerStatusApi").updateWorkerStatus("success"),d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(1056839232,"112"),"maw_backend_setup_end"),d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(25310776,"6155"),"maw_backend_setup_end")}catch(a){s.ERROR(i(),a);d("MAWGetWorkerStatusApi").updateWorkerStatus("failed");throw a}});return function(){return a.apply(this,arguments)}}();return t().then(function(){d("MAWEbUploadQueue").listenForEbUploadQueueFlush(),void d("MAWEbRestoreQueue").listenForEbRestoreQueueFlush(),c("MAWPreloadJobs")()})});return t.apply(this,arguments)}g.startMAWBackend=a}),98);
__d("MAWBackfillThreadsForOccamadilloApi",["MAWBridgeThread","MAWDbAppMeta","MAWDbMsgTxns","MAWDexieTable","MAWIndexedDb","MAWTransactionMode","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Backfilled "," threads"]);h=function(){return a};return a}a=d("MAWIndexedDb").makeMsgrTransactor({appMeta:d("MAWTransactionMode").READWRITE,messages:d("MAWTransactionMode").READONLY,threads:d("MAWTransactionMode").READONLY},"backfillThreadsForOccamadillo",function(a){return function(){return a.appMeta.get(d("MAWDbAppMeta").AppMetaKeysEnum.isBackfilledForOccamadillo).then(function(b){return(b==null?void 0:b.value.isBackfilledForOccamadillo)===!0?d("MAWDexieTable").dexieResolve():a.threads.toArray().then(function(b){b.forEach(function(b){return d("MAWDbMsgTxns").getThreadNewestMessageTs(a,b).then(function(a){a!=null&&d("MAWIndexedDb").afterTransaction({tag:"VerifyThreadExists",value:d("MAWBridgeThread").createBridgeThread(b,void 0,void 0,"backfillThreadsForOccamadillo",a)})})});return a.appMeta.put({key:d("MAWDbAppMeta").AppMetaKeysEnum.isBackfilledForOccamadillo,value:{isBackfilledForOccamadillo:!0}}).then(function(){d("WALogger").LOG(h(),b.length)})})})}});g.backfillThreadsForOccamadillo=a}),98);
__d("MAWBulkCreateThread",["FBLogger","MAWDexieTable","MAWGetOrCreateThreadTxns","MAWIndexedDb","MAWLoadThreadsTxns","MAWThreadManagementTxns","MAWTransactionMode","WAGlobals","WAJids","WATimeUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,editMsgHistory:a.READONLY,groupInfo:a.READONLY,media:a.READONLY,messages:a.READWRITE,participants:a.READWRITE,reactions:a.READONLY,threads:a.READWRITE,xma:a.READONLY},"bulkCreateThreadByJid",function(a){return function(b){b=b.threads;var e=[],f=[],g={},h=d("WAGlobals").getMyUserJid(),i=null;c("gkx")("4684")&&(i=b.reduce(function(a,b){var d=a.get(b.authoritativeThreadKey);if(d!=null){d=d.lastActivityTimestampMs===b.lastActivityTimestampMs&&d.lastReadWatermarkTimestampMs===b.lastReadWatermarkTimestampMs;c("FBLogger")("messenger_e2ee_web").mustfix("MAWBulkCreateThread is called with duplicated threads. Data consistency: %s",d?"true":"false")}else a.set(b.authoritativeThreadKey,b);return a},new Map()));var j=function(){if(l){if(m>=k.length)return"break";n=k[m++]}else{m=k.next();if(m.done)return"break";n=m.value}var a=n,b=a.authoritativeThreadKey,c=a.chatJid,h=a.lastActivityTimestampMs,i=a.lastReadWatermarkTimestampMs;a=a.numOfMsgsToLoad;var j=d("WATimeUtils").castToMillisTime(h),o=d("WATimeUtils").castToMillisTime(i);g[c]=a;d("WAJids").switchOnMsgrChatJidType(c,{group:function(a){e.push({authoritativeThreadKey:b,description:"createThreadThroughMI",jid:a,lastActivityTimestamp:j,lastReadWatermarkTimestamp:o})},user:function(a){return f.push({authoritativeThreadKey:b,lastActivityTimestamp:j,lastReadWatermarkTimestamp:o,userJid:a})}})};for(var k=i==null?b:i.values(),l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;b=j();if(b==="break")break}return d("MAWDexieTable").dexieAll([d("MAWGetOrCreateThreadTxns").bulkGetOrCreateThread(a,e),d("MAWThreadManagementTxns").bukGetOrSetupOneToOneThread(a,f)]).then(function(b){var c=b[0];b=b[1];return d("MAWDexieTable").dexieAllSettled([].concat(c,b).map(function(b){var c=b.thread?d("WAJids").interpretAsGroupJid(b.thread.jid):null,e=c!=null;c=b.thread?b.thread:b;return d("MAWLoadThreadsTxns").loadParticipantsAndMsgs(a,b.created&&e,c,(c=g[(c=b.thread)==null?void 0:c.jid])!=null?c:1).then(function(a){a=e&&(b.created||a.length===0||a.some(function(a){return a.addressable!==!0}));e&&d("MAWIndexedDb").afterTransaction({tag:"GroupInviteLoaded",value:{actorId:d("WAJids").extractUserId(h),threadJid:b.thread.jid}});return{chatJid:b.thread.jid,isCreated:b.created,shouldQueryForGroup:a}})}))})}});g.bulkCreateThread=b}),98);
__d("MAWChangeSecurityAlertSettingApi",["MAWDbMsgTypeVersionTxns","MAWIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({appMeta:d("MAWTransactionMode").READWRITE},"changeSecurityAlertSetting",function(a){return function(b){return d("MAWDbMsgTypeVersionTxns").updateSecurityAlertValueForContact(a,b)}});g.changeSecurityAlertSetting=a}),98);
__d("MAWChangeSecurityAlertSettingForSelfApi",["MAWDbMsgTypeVersionTxns","MAWIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({appMeta:d("MAWTransactionMode").READWRITE},"changeSecurityAlertSettingForSelf",function(a){return function(b){return d("MAWDbMsgTypeVersionTxns").updateSecurityAlertValueForSelf(a,b)}});g.changeSecurityAlertSettingForSelf=a}),98);
__d("MAWCheckIfShowOpenMessageHistoryApi",["MAWIndexedDb","MAWLocalizationType","MAWMsgType","MAWTimeUtils","MAWTransactionMode","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY,threads:d("MAWTransactionMode").READONLY},"checkIfShowOpenMessageHistory",function(a){return function(b,c){return a.threads.get({jid:b}).then(function(b){if(b==null||b.isMigratedLocally!=null&&b.isMigratedLocally)return!0;b=a.messages.where(["threadJid","sortOrderMs"]).between([b.jid,0],[b.jid,d("MAWTimeUtils").MAX_TIMESTAMP],!0,!0).filter(function(a){return!(a.type===d("MAWMsgType").MSG_TYPE.ADMIN&&((a=a.msgContent)==null?void 0:a.adminType)===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION)}).first();return b.then(function(a){return a==null?!0:a.ts>d("WATimeUtils").castMilliSecondsToUnixTime(c)})})}});g.checkIfShowOpenMessageHistory=a}),98);
__d("MAWCompareThreadParticipantsApi",["MAWDbParticipantTxns","MAWIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b){a=new Set(a);for(var c=0;c<b.length;c++){var d=b[c];if(!a.has(d))return!1;a["delete"](d)}return a.size===0};a=d("MAWIndexedDb").makeMsgrTransactor({participants:d("MAWTransactionMode").READWRITE},"compareThreadParticipants",function(a){return function(b,c){return d("MAWDbParticipantTxns").getParticipantsInThread(a,c.groupJid).then(function(a){a=a.map(function(a){return a.userJid.split("@")[0]});var c=b;return h(a,c)})}});g.compareThreadParticipants=a}),98);
__d("MAWCompleteUndoThreadCutoverApi",["MAWAdminWriteCutoverThreadMsgTxn","MAWDbThreadTxns","MAWIndexedDb","MAWTransactionMode","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["UpdateAdminMessageAfterUndoCutover failed to get the thread"]);h=function(){return a};return a}b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,ftsBackloggedMessages:a.READWRITE,groupInfo:a.READONLY,media:a.READONLY,messages:a.READWRITE,threads:a.READWRITE},"completeUndoThreadCutover",function(a){return function(b){b=b.threadJid;return d("MAWDbThreadTxns").getThread(a,b).then(function(b){if(!b.success){d("WALogger").WARN(h());return}b=b.value;if(b.isMigratedLocally===!0)return d("MAWDbThreadTxns").markCutoverThreadAsNotMigratedLocally(a,b).then(function(b){return d("MAWAdminWriteCutoverThreadMsgTxn").revertCutoverThreadAdminMsg(a,b).then(function(){return d("MAWAdminWriteCutoverThreadMsgTxn").writeRollbackCutoverAdminMsg(a,b)})})})}});g.completeUndoThreadCutover=b}),98);
__d("MAWCreateThreadApi",["MAWIndexedDb","MAWJids","MAWThreadManagementTxns","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,groupInfo:a.READONLY,media:a.READONLY,messages:a.READWRITE,participants:a.READWRITE,reactions:a.READONLY,threads:a.READWRITE},"createThread",function(a){return function(b,c,e){return d("MAWThreadManagementTxns").getOrSetupOneToOneThread(a,{offlineThreadingId:c,userJid:d("MAWJids").toUserJid(b)}).then(function(a){var b=a.created;a=a.thread;return{created:b,jid:a.jid}})}});g.createThread=b}),98);
__d("MAWDeleteThreadApi",["MAWIndexedDb","MAWThreadManagementTxns","MAWTransactionMode","WALogger","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Successfully deleted thread ",""]);h=function(){return a};return a}b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READWRITE,deletedMessages:a.READWRITE,groupInfo:a.READWRITE,groupInvites:a.READWRITE,media:a.READWRITE,messages:a.READWRITE,participants:a.READWRITE,pendingStanzas:a.READWRITE,reactions:a.READWRITE,threads:a.READWRITE,unrenderedMessages:a.READWRITE},"deleteThread",function(a){return function(b){return a.threads.get({jid:b}).then(function(e){if(e==null)throw c("err")("There was no thread to delete in local delete thread");return d("MAWThreadManagementTxns").deleteAllThreadData(a,e).then(function(){d("WALogger").LOG(h(),b)})})}});g.deleteThread=b}),98);
__d("MAWGetProtocolMsgIdByMediaMsgId",["MAWIndexedDb","MAWTransactionMode","WAJids"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY,threads:d("MAWTransactionMode").READONLY},"getProtocolMsgIdByMediaMsgId",function(a){return function(b){return a.messages.get({msgId:b}).then(function(b){return b==null?null:a.threads.get({jid:b.threadJid}).then(function(a){if(a==null)return null;return d("WAJids").isAuthorSystem(b.author)?null:{author:b.author,chat:a.jid,externalId:b.externalId}})})}});g.getProtocolMsgIdByMediaMsgId=a}),98);
__d("MAWDownloadMediaForUI",["MAWDbMediaTxns","MAWDexieTable","MAWDownloadAndHandleMedia","MAWGetMostRescentDecodedMediaEntry","MAWGetProtocolMsgIdByMediaMsgId","MAWIndexedDb","MAWTransactionMode","Promise","WAGlobals","WAPromiseManagement","WAResultOrError","WAStartMediaDownloadQplFlow","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadMediaForUILayout success"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["start downloadMediaForUILayout. args: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["cannot find xma with xmaId ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["runtime error: ",""]);l=function(){return a};return a}var m=d("WATagsLogger").TAGS(["downloadMediaForUI"]);function a(a){return d("WAGlobals").getConfig().uiLayoutTriggeredMediaDownload()!==!0?(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult()):n(a)["catch"](function(a){m.ERROR(l(),a);return d("WAResultOrError").makeError("runtime-error")})}var n=d("WAPromiseManagement").cacheWhilePending(function(a){switch(a.type){case"mediaId":return"mediaId-"+a.mediaId.toString();case"xmaId":return"xmaId-"+a.xmaId.toString();default:a.type;return"plaintextHash-"+a.plaintextHash}},c);function c(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){m.LOG(j(),a.type);var c;switch(a.type){case"xmaId":c=(yield r(a.xmaId).then(function(a){return a.filter(Boolean)}));break;case"mediaId":c=(yield q(a.mediaId).then(function(a){return a==null?[]:[a]}));break;default:a.type;c=(yield p(a.plaintextHash).then(function(a){return a==null?[]:[a]}));break}if(c.length===0)return d("WAResultOrError").makeError("missing-media");var e=(yield (h||(h=b("Promise"))).all(c.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=(yield s(b));if(!c.success)return c;c=c.value;var e=d("WAStartMediaDownloadQplFlow").startMediaDownloadQplFlow({downloadEntry:"UILayout",msgType:null,protocolMsgId:c});e.addAnnotations({string:{trigger_ui_view:a.triggerUIView}});yield d("MAWDownloadAndHandleMedia").downloadAndHandleMediaImpl({hash:b.plaintextHash,mediaDownloadFlow:e,msgType:null,protocolMsgId:c});return d("WAResultOrError").makeResult()});return function(a){return c.apply(this,arguments)}}())));e=e.filter(function(a){return!a.success});if(e.length>0)return e[0];else{m.LOG(i());return d("WAResultOrError").makeResult()}});return o.apply(this,arguments)}var p=d("MAWIndexedDb").makeMsgrTransactor({media:(e=d("MAWTransactionMode")).READONLY},"getMedia",function(a){return function(b){return d("MAWDbMediaTxns").maybeGetMediaFromPlaintextHash(a,b)}}),q=d("MAWIndexedDb").makeMsgrTransactor({media:e.READONLY},"getMediaByMediaId",function(a){return function(b){return d("MAWDbMediaTxns").maybeGetMediaFromMediaId(a,b)}}),r=d("MAWIndexedDb").makeMsgrTransactor({media:e.READONLY,xma:e.READONLY},"getMediaByXMAId",function(a){return function(b){return a.xma.get(b).then(function(c){if(c==null){m.ERROR(k(),b);return[]}return d("MAWDexieTable").dexieAll([d("MAWDbMediaTxns").maybeGetMediaFromMediaId(a,c.defaultPreviewMediaId),d("MAWDbMediaTxns").maybeGetMediaFromMediaId(a,c.headerMediaId),d("MAWDbMediaTxns").maybeGetMediaFromMediaId(a,c.faviconMediaId)])})}});function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("MAWGetMostRescentDecodedMediaEntry").findMostRecentMediaEntry(a.mediaEntries);if(!a.success)return a;a=a.value;var b=a[0];a[1];a=(yield d("MAWGetProtocolMsgIdByMediaMsgId").getProtocolMsgIdByMediaMsgId(b));return a==null?d("WAResultOrError").makeError("no-protocol-msg-id"):d("WAResultOrError").makeResult(a)});return t.apply(this,arguments)}g.downloadMediaForUI=a}),98);
__d("MAWDyiDownloadMedia",["MAWGetMediaPlaintextApi","MAWHandleMediaPreviewBeforeDownloadApi","MAWHandleMediaPreviewDownloadApi","MAWUpdateMediaEntryForMsgApi","WAAPI","WAStartMediaDownloadQplFlow","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=d("WAStartMediaDownloadQplFlow").startMediaDownloadQplFlow({downloadEntry:"MAWDyiDownloadMedia",msgType:null,protocolMsgId:a});b=(yield c("WAAPI").downloadMedia({downloadMediaMetric:f,getMediaPlaintext:d("MAWGetMediaPlaintextApi").getMediaPlaintext,handleMediaPreviewBeforeDownload:d("MAWHandleMediaPreviewBeforeDownloadApi").handleMediaPreviewBeforeDownload,handleMediaPreviewDownload:d("MAWHandleMediaPreviewDownloadApi").handleMediaPreviewDownload,hash:b,mediaEntry:e,onlyIfMediaTTLIsValid:!1,protocolMsgId:a,updateMediaEntryForMsg:d("MAWUpdateMediaEntryForMsgApi").updateMediaEntryForMsg}));b.success===!1?f.endFail(b.error):f.endSuccess();return b});return h.apply(this,arguments)}g.dyiDownloadMedia=a}),98);
__d("MAWDyiGetThreadList",["MAWDexieTable","MAWDyiBatchRestoreDataSync","MAWEBBackendQPLUtils","MAWIndexedDb","MAWTransactionMode","Random"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({dyiBatch:d("MAWTransactionMode").READWRITE},"dyiGetThreadList",function(a){return function(b,c){a.dyiBatch.clear();d("MAWEBBackendQPLUtils").logDyiE2EGetThreadList(c,b.length);b=b.reduce(function(b,e){return b.then(function(b){b=d("Random").uint32();return a.dyiBatch.add({isThread:!0,numMessages:0,numMessagesRestored:0,oldestTs:0,qplFlowDescriptor:0,qplInstanceKeyE2E:c,qplInstanceKeyForThread:b,threadId:e})})},a.dyiBatch.add({isThread:!0,numMessages:0,numMessagesRestored:0,numThreadsRestored:0,oldestTs:0,qplFlowDescriptor:1,qplInstanceKeyE2E:c})).then(function(){var b=a.dyiBatch.toArray().then(function(a){a.forEach(function(a){var b=a.threadId;if(b!=null){a=d("MAWEBBackendQPLUtils").startDYIBackupRestoreQplUserFlow(b,a.qplInstanceKeyForThread);d("MAWDyiBatchRestoreDataSync").restoreMessagesForThread(b,-1,a,c)}})});d("MAWDexieTable").dexieResolve(b)});return b.then(function(){return d("MAWDexieTable").dexieResolve()})}});g.dyiGetThreadList=a}),98);
__d("MAWFTSEBMessagesDataSync",["FBLogger","I64","MAWBridge","MAWFTSIndexedDb","MAWFTSWorker","MAWTransactionMode","MAWVault","Promise","asyncToGeneratorRuntime","err","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(a=c("justknobx"))._("2645"),k=a._("2606")+a._("2646"),l=a._("2647"),m=[],n=new Map(),o=[];function p(a){var b;m=m.filter(function(b){return b.tabId!==a});o=o.filter(function(b){return b!==a});if(!n.has(a))return;window.clearTimeout((b=n.get(a))==null?void 0:b.aliveTimeout);(b=n.get(a))==null?void 0:(b=b.ongoingTask)==null?void 0:b.reject(c("err")("Tab is closed"));n["delete"](a)}function q(a,b){var c=window.setTimeout(function(){p(a)},l),d=n.get(a);b&&r(a);if(d!=null){window.clearTimeout(d.aliveTimeout);d.aliveTimeout=c;return}n.set(a,{aliveTimeout:c,ongoingTask:null})}e=function(a){var c=a.hasFocus;a=a.tabId;q(a,c);return(i||(i=b("Promise"))).resolve()};f=function(a){a=a.tabId;p(a);return(i||(i=b("Promise"))).resolve()};function r(a){if(o.length>0&&o[0]===a)return;o=[a].concat(o.filter(function(b){return b!==a}))}a=function(a){a=a.tabId;q(a,!0);return(i||(i=b("Promise"))).resolve()};function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var d=n.get(a);if(d==null)return;var e=new(i||(i=b("Promise")))(function(a,b){d.ongoingTask={reject:b,resolve:a}});try{yield (i||(i=b("Promise"))).race([e,new i(function(a,b){window.setTimeout(function(){b(c("err")("Task timeout"))},k)})])}catch(a){c("FBLogger")("fts_worker").mustfix("Failed to restore FTS index for tab %s",a.message)}finally{e=n.get(a);e!=null&&(e.ongoingTask=null);m=m.filter(function(b){return b.tabId!==a})}});return t.apply(this,arguments)}var u=function(a){var e=a.tabId,f=a.threadJid;if(!d("MAWFTSWorker").isFTSInitiated())return(i||(i=b("Promise"))).resolve(!1);if(m.length>=j)return(i||(i=b("Promise"))).resolve(!1);if(!o.slice(0,j).includes(e))return(i||(i=b("Promise"))).resolve(!1);if(m.some(function(a){return a.threadJid===f}))return(i||(i=b("Promise"))).resolve(!1);m.push({tabId:e,threadJid:f});c("promiseDone")(s(e));return(i||(i=b("Promise"))).resolve(!0)},v=function(a){var c=a.error;a=a.tabId;if(c==null){var d;(d=n.get(a))==null?void 0:(d=d.ongoingTask)==null?void 0:d.resolve()}else{(d=n.get(a))==null?void 0:(a=d.ongoingTask)==null?void 0:a.reject(c)}return(i||(i=b("Promise"))).resolve()},w=d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsRestoreStatus:d("MAWTransactionMode").READWRITE},function(a){return function(b,c){return a.ftsRestoreStatus.get(b).then(function(e){if(e!=null&&(h||(h=d("I64"))).lt((h||(h=d("I64"))).of_string(e.restoredUntilSortOrderMs),(h||(h=d("I64"))).of_string(c)))return;return a.ftsRestoreStatus.put({restoredUntilSortOrderMs:c,threadId:b})})}}),x=d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsRestoreStatus:d("MAWTransactionMode").READWRITE},function(a){return function(b){return a.ftsRestoreStatus.get(b)}}),y=d("MAWFTSIndexedDb").makeMsgrFTSTransactor({ftsRestoreStatus:d("MAWTransactionMode").READWRITE},function(a){return function(){return a.ftsRestoreStatus.toCollection().toArray()}}),z=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.newSortOrderMs,c=a.threadId;a=a.unvaultedBridgeSearchMessages;var e=d("MAWFTSWorker").getFTSWorker(),f=a.map(function(a){var b;b=(b=a.msg)==null?void 0:b.content;return b==null?null:{chatId:c,id:a.externalId,textFragments:[d("MAWVault").isVaulted(b)?d("MAWVault").unvault(b):b],timestamp:a.sortOrderMs}}).filter(Boolean);e.setEphemeralBacklog(f);yield e.index({estimatedNumMessages:f.length,type:"EB"});yield w(c,b);d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"AddMessageSearchResult",value:a}]})});return function(b){return a.apply(this,arguments)}}(),A=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.threadId;a=(yield x(a));return(a=a==null?void 0:a.restoredUntilSortOrderMs)!=null?a:null});return function(b){return a.apply(this,arguments)}}(),B=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.newSortOrderMs;a=a.threadId;yield w(a,b)});return function(b){return a.apply(this,arguments)}}(),C=function(){return y()};g.searchFTSReportTabAlive=e;g.searchFTSReportTabDestroy=f;g.searchFTSReportTabForeground=a;g.searchFTSRequestRestoreTask=u;g.searchFTSReportTabTaskComplete=v;g.searchIndexUpdate=z;g.searchGetFTSNextTimestamp=A;g.searchSetFTSNextTimestamp=B;g.searchFTSGetThreadsRestoreStatus=C}),98);
__d("MAWGetAllMessageIdsAndRangesForThreadApi",["MAWDbMsg","MAWDbMsgTxns","MAWDexieTable","MAWIndexedDb","MAWMsgType","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";var h=1e3,i={hasMoreAfter:!1,hasMoreBefore:!1,maxSortOrder:"0",minSortOrder:"0",msgIdsAndCorrespondingSortOrders:[]};function j(a){var b=a.ephemeralSetting,c=a.serverTs;a=a.type;return d("MAWMsgType").isEBSupportedMsgType(a)&&c!=null&&!(b!=null&&b.ephemeralExpirationInSec>0)}function k(a,b,c){return a.messages.where(["threadJid","sortOrderMs"]).between([b,0],[b,Number.MAX_SAFE_INTEGER]).filter(function(a){return j(a)}).reverse().limit(c).toArray()}a=d("MAWIndexedDb").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY,threads:d("MAWTransactionMode").READONLY},"getAllMessageIdsAndRangesForThread",function(a){return function(b,c){var e=Math.min(h,c);return a.threads.where("jid").startsWith(b).first().then(function(b){return b!=null?d("MAWDexieTable").dexieAll([k(a,b.jid,e),d("MAWDbMsgTxns").getThreadOldestMessageId(a,b.jid)]).then(function(a){var b=a[0];a=a[1];if(b.length===0)return i;var c=b.map(function(a){return[a.msgId,""+d("MAWDbMsg").getSortOrderWithFallback(a)]}),f=c[c.length-1],g=c[0];b=c.length===e&&b[b.length-1].msgId!==a;a=f[1];f=g[1];return{hasMoreAfter:!1,hasMoreBefore:b,maxSortOrder:f,minSortOrder:a,msgIdsAndCorrespondingSortOrders:c}}):i})["catch"](function(){return i})}});g.getAllMessageIdsAndRangesForThread=a}),98);
__d("MAWGetAllThreadsAsJsonApi",["MAWAckLevel","MAWDbChunkTxns","MAWDbGroupInfoTxns","MAWDbMedia","MAWDbMediaTxns","MAWDbMsg","MAWDbMsgTxns","MAWDbParticipantTxns","MAWDbReactionsTxns","MAWDbThreadTxns","MAWDexieTable","MAWIndexedDb","MAWMsgType","MAWTransactionMode","MAWVault","WAGlobals","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b,c,d){return[{uri:a!=null?"messages/inbox/"+b+"/"+c+"/"+d[a.toString()]:""}]},i=function(a,b,c,e){switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:return{common:b,content:d("MAWVault").unvault(a.msgContent.content),jsonType:"text"};case d("MAWMsgType").MSG_TYPE.IMAGE:return{common:b,jsonType:"photo",photos:h(a.mediaId,c,"photos",e)};case d("MAWMsgType").MSG_TYPE.VIDEO:return{common:b,jsonType:"video",videos:h(a.mediaId,c,"videos",e)};case d("MAWMsgType").MSG_TYPE.PTT:return{audio_files:h(a.mediaId,c,"audio",e),common:b,jsonType:"audio"};case d("MAWMsgType").MSG_TYPE.GIF:return{common:b,gifs:h(a.mediaId,c,"gifs",e),jsonType:"gif"};case d("MAWMsgType").MSG_TYPE.STICKER:return{common:b,jsonType:"sticker",sticker:{uri:a.mediaId!=null?"messages/stickers_used/"+e[a.mediaId.toString()]:""}};default:return null}},j=function(a,b,c,d){var e="";a=a.filter(function(a){return a.userJid.toString()!==b}).map(function(a){return a.userJid.toString()});if(d.success){d=d.value.name;if(d!=null)e=d;else switch(a.length){case 2:e=a[0]+"and"+a[1];break;case 3:e=""+a[0]+a[1]+"and"+a[2];break;case 4:e=""+a[0]+a[1]+a[2]+"and1other";break;default:e=""+a[0]+a[1]+a[2]+"and"+(a.length-3)+"others"}}else e=a[0];return e==null?"unknown_user_"+c:e.toLowerCase().replace(/ /g,"")+("_"+c)},k=function(a,b){var c=d("WAGlobals").getMyUserJid().toString(),e=b.chatId,f=b.jid,g={audio:{},gifs:{},messages:[],participants:[],photos:{},stickers:{},threadName:"",videos:{}};return d("MAWDexieTable").dexieAll([a.messages.where("threadJid").equals(f).count(),d("MAWDbMsgTxns").getThreadNewestMessageId(a,b)]).then(function(b){var c=b[0];b=b[1];return d("MAWDexieTable").dexieAll([d("MAWDbParticipantTxns").getParticipantsInThread(a,f),d("MAWDbMsgTxns").getMsgsFromOffset(a,f,(b=b)!=null?b:d("MAWDbMsg").craftMsgId(e,0),c,!0,!1),d("MAWDbGroupInfoTxns").getGroupInfo(a,d("WAJids").toGroupJid(f))])}).then(function(b){var f=b[0],h=b[1].msgs,k=b[2],l=h.filter(function(a){return a.ephemeralSetting==null}),m={},n={},o={},p={};b=l.filter(function(a){return a.mediaId!=null});return d("MAWDexieTable").dexieAll([d("MAWDbMediaTxns").getMediaFromMsgs(a,b),d("MAWDbReactionsTxns").getReactionsFromMessages(a,l)]).then(function(b){var h=b[0];b=b[1];b.forEach(function(a){var b=a.author,c=a.reaction;a=a.reactToMsgId;if(a!=null&&c!=null){a=a.toString();a in p||(p[a]=[]);p[a].push({actor:b,reaction:c})}});return d("MAWDexieTable").dexieAll(h.map(function(b){var c=b.hashedPlaintextHash,e=b.mediaId.toString();m[e]=c.toString();o[c.toString()]={mediaId:e,mediaType:b.mediaType};return d("MAWDbChunkTxns").maybeGetChunkFromHash(a,c)})).then(function(a){a.filter(Boolean).forEach(function(a){var b=a.mimetype.split("/");b[0];b=b[1];var c=a.hashedPlaintextHash.toString();b=c+"."+b;c=o[c];var e=c.mediaId;c=c.mediaType;n[e]=b;switch(c){case d("MAWDbMedia").MEDIA_TYPE.GIF:g.gifs[b]=a.blobData;break;case d("MAWDbMedia").MEDIA_TYPE.IMAGE:g.photos[b]=a.blobData;break;case d("MAWDbMedia").MEDIA_TYPE.STICKER:g.stickers[b]=a.blobData;break;case d("MAWDbMedia").MEDIA_TYPE.VIDEO:g.videos[b]=a.blobData;break;case d("MAWDbMedia").MEDIA_TYPE.PTT:g.audio[b]=a.blobData;break;default:break}});g.threadName=j(f,c,e,k);l.forEach(function(a){var b={is_unsent:a.ack<d("MAWAckLevel").ACK.sent,sender_name:a.author,timestamp:a.ts,type:a.type},c=a.msgId.toString();c in p&&(b=babelHelpers["extends"]({},b,{reactions:p[c]}));c=i(a,b,g.threadName,n);c!=null&&g.messages.push(c)});return g})})})};b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,groupInfo:a.READONLY,media:a.READONLY,messages:a.READONLY,participants:a.READONLY,reactions:a.READONLY,threads:a.READWRITE,xma:a.READONLY},"getAllThreadsAsJson",function(a){return function(){var b={};return d("MAWDexieTable").dexieAll([d("MAWDbThreadTxns").getAllThreadsForUser(a,d("WAGlobals").getMyUserJid())]).then(function(c){c=c[0];return d("MAWDexieTable").dexieAll(c.map(function(b){return k(a,b)})).then(function(a){a.forEach(function(a){b[a.threadName]=a});return b})})}});g.getAllThreadsAsJson=b}),98);
__d("MAWCreateMaybeAddPointForMediaRender",["MAWQplProxy","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b,e){if(a==null)return;d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(25302828,"2195"),b,{annotations:e,instanceKey:a})}}g.createMaybeAddPointForMediaRender=a}),98);
__d("MAWGetBlobDataUrlByMediaIdApi",["FBLogger","MAWCreateMaybeAddPointForMediaRender","MAWIndexedDb","MAWMaybeWithTimeout","MAWMediaDownloadManager","MAWMediaUtils","MAWTimedJob","MAWTransactionMode","Promise","WAAssertUnreachable","WALogger","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getBlobDataUrlByHashedPlaintextHashCall cannot find media with hash: ",", from ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["getBlobDataUrlByHashedPlaintextHashCall cannot find chunk with hash: ",", from ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["getBlobDataUrlByMediaIdDbCall cannot find media with mediaId: ",", from ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["getBlobDataUrlByMediaIdDbCall cannot find chunk with mediaId: ",", from ",""]);l=function(){return a};return a}a=function(a,e,f){var g=d("MAWCreateMaybeAddPointForMediaRender").createMaybeAddPointForMediaRender(f);g("fetch_blob_api_start",{string:{fetch_by:"mediaId"}});return m(a,e).then(function(f){if(f.success===!1)switch(f.error){case"missing_media":g("fetch_blob_api_fail_no_media_found");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getBlobDataUrlByMediaId because media is not in the media db. mediaId is %s, from %s",a,e);default:f;throw c("WAAssertUnreachable")(f.error)}f=f.value;var i=f.blob,j=f.media;if(i!=null)return i;g("fetch_blob_api_no_media_blob_found");return d("MAWMaybeWithTimeout").maybeWithTimeout(new(h||(h=b("Promise")))(function(a){g("fetch_blob_api_fetch_chunk_start"),d("MAWMediaDownloadManager").setToMediaDownloadManager(j.mediaId,a)}).then(function(a){g("fetch_blob_api_fetch_chunk_success");return a}),d("MAWTimedJob").DEFAULT_TIMEOUT_MS,function(){g("fetch_blob_api_fetch_chunk_fail_timeout");d("WALogger").ERROR(l(),a,e);throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getBlobDataUrlByMediaId in time. mediaId is %s, from %s",a,e)})})};var m=d("MAWIndexedDb").makeMsgrTransactor({chunk:(e=d("MAWTransactionMode")).READONLY,media:e.READONLY},"getBlobDataUrlByMediaId",function(a){return function(b,c){return a.media.get(b).then(function(e){if(e==null){d("WALogger").ERROR(k(),b,c);return d("WAResultOrError").makeError("missing_media")}return a.chunk.where("hashedPlaintextHash").equals(e.hashedPlaintextHash).first().then(function(a){return a==null?d("WAResultOrError").makeResult({blob:null,media:e}):d("WAResultOrError").makeResult({blob:new Blob([a.blobData],{type:a.mimetype}),media:e})})})}});f=function(a,e,f){var g=d("MAWCreateMaybeAddPointForMediaRender").createMaybeAddPointForMediaRender(f);g("fetch_blob_api_start",{string:{fetch_by:"plaintextHash"}});return n(a,e).then(function(f){if(!f.success){g("fetch_blob_api_fail_no_media_found");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getBlobDataUrlByHashedPlaintextHash because hash is not in the media db. hash is %s, from %s",a,e)}f=f.value;if(f.status==="found_media_and_blob"){g("fetch_blob_api_success");return f.blob}f.status;g("fetch_blob_api_no_media_blob_found");return d("MAWMaybeWithTimeout").maybeWithTimeout(new(h||(h=b("Promise")))(function(b){g("fetch_blob_api_fetch_chunk_start"),d("MAWMediaDownloadManager").setToMediaPlaintextDownloadManager(a,b)}).then(function(a){g("fetch_blob_api_fetch_chunk_success");return a}),d("MAWTimedJob").DEFAULT_TIMEOUT_MS,function(){g("fetch_blob_api_fetch_chunk_fail_timeout");d("WALogger").ERROR(j(),a,e);throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getBlobDataUrlByHashedPlaintextHash in time. hash is %s, from "+e,a,e)})})};var n=d("MAWIndexedDb").makeMsgrTransactor({chunk:e.READONLY,media:e.READONLY},"getBlobDataUrlByHashedPlaintextHash",function(a){return function(b,c){var e=d("MAWMediaUtils").genHMACPlaintextHash(b);return a.media.where("hashedPlaintextHash").equals(e).first().then(function(b){if(b==null){d("WALogger").ERROR(i(),e,c);return d("WAResultOrError").makeError("missing_media")}return a.chunk.where("hashedPlaintextHash").equals(b.hashedPlaintextHash).first().then(function(a){return a==null?d("WAResultOrError").makeResult({media:b,status:"found_media_need_blob"}):d("WAResultOrError").makeResult({blob:new Blob([a.blobData],{type:a.mimetype}),status:"found_media_and_blob"})})})}});g.getBlobDataUrlByMediaId=a;g.getBlobDataUrlByHashedPlaintextHash=f}),98);
__d("MAWGetBlobDataUrlByXMAIdApi",["FBLogger","MAWGetBlobDataUrlByMediaIdApi","MAWIndexedDb","MAWTransactionMode","WALogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMediaIdByXMAIdDbCall does not have valid information type - ",", from ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMediaIdByXMAIdDbCall cannot find xma with xmaId "," and info type ",", from ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["getBlobDataUrlByXMAId cannot find mediaId for xmaId "," and info type ",", from ",""]);j=function(){return a};return a}a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(yield k(a,b,c));if(e==null){d("WALogger").WARN(j(),a,b,c);return}return d("MAWGetBlobDataUrlByMediaIdApi").getBlobDataUrlByMediaId(e,"getBlobDataUrlByXMAId - "+((a=c)!=null?a:""))});return function(b,c,d){return a.apply(this,arguments)}}();var k=d("MAWIndexedDb").makeMsgrTransactor({chunk:d("MAWTransactionMode").READONLY,media:d("MAWTransactionMode").READONLY,xma:d("MAWTransactionMode").READONLY},"getMediaIdByXMAIdDbCall",function(a){return function(b,e,f){return a.xma.get(b).then(function(a){if(a==null){d("WALogger").ERROR(i(),b,e,f);c("FBLogger")("messenger_web_media").mustfix("Failed to getBlobDataUrlByXMAId because xma is not in the xma db. xmaId is %s, info type is %s, from %s",b,e,f);return}var g;switch(e){case"preview":g=a.defaultPreviewMediaId;break;case"header":g=a.headerMediaId;break;case"favicon":g=a.faviconMediaId;break;default:d("WALogger").ERROR(h(),e,f);c("FBLogger")("messenger_web_media").mustfix("Failed to getBlobDataUrlByXMAId because xma does not have valid information type. xmaId is %s, info type is %s, from %s",b,e,f);return}return g})}});g.getBlobDataUrlByXMAId=a}),98);
__d("MAWGetDeviceChangeAlertsByOptionsApi",["MAWDbGetDeviceChangeAlertsByOptionsTxn","MAWIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({deviceChangeAlerts:d("MAWTransactionMode").READWRITE},"getDeviceChangeAlertsByOptions",function(a){return function(b){return d("MAWDbGetDeviceChangeAlertsByOptionsTxn").getDeviceChangeAlertsByOptionsTxn(a,b)}});g.getDeviceChangeAlertsByOptions=a}),98);
__d("MAWGetEphemeralSettingsApi",["MAWDexieTable","MAWIndexedDb","MAWTransactionMode","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received invalid chat jid for getting ephemeral settings"]);h=function(){return a};return a}a=d("MAWIndexedDb").makeMsgrTransactor({ephemeralSettings:d("MAWTransactionMode").READONLY},"getEphemeralSettings",function(a){return function(b){b=d("WAJids").interpretAsUserJid(b);if(b==null){d("WALogger").ERROR(h());return d("MAWDexieTable").dexieResolve()}return a.ephemeralSettings.get({userJid:b}).then(function(a){return a==null?void 0:a.ephemeralSetting})}});g.getEphemeralSettings=a}),98);
__d("MAWGetGroupSuperAdminApi",["MAWDbParticipantTxns","MAWIndexedDb","MAWTransactionMode","WAJids"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({participants:d("MAWTransactionMode").READONLY},"getGroupSuperAdmin",function(a){return function(b){b=d("MAWDbParticipantTxns").getParticipantsInThread(a,b);return b.then(function(a){a=a.filter(function(a){return a.type==="superadmin"});if(a.length!==0&&a[0]){a=a[0];return d("WAJids").extractUserId(a.userJid)}else return null})}});g.getGroupSuperAdmin=a}),98);
__d("MAWGetLatestThreadIdsApi",["MAWDexieTable","MAWIndexedDb","MAWTransactionMode","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] getLatestThreadIds complete, threads count: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] getLatestThreadIds started"]);i=function(){return a};return a}a=d("MAWIndexedDb").makeMsgrTransactor({threads:d("MAWTransactionMode").READONLY},"getLatestThreadIds",function(a){return function(b){d("WALogger").LOG(i());b=a.threads.orderBy("threadOrder").reverse().limit(b).toArray();return b.then(function(a){var b=[];a.forEach(function(a){b.push(a.jid.split("@")[0])});d("WALogger").LOG(h(),b.length);return d("MAWDexieTable").dexieResolve(b)})}});g.getLatestThreadIds=a}),98);
__d("MAWGetMaybeNextNonAdminMsgSortOrderMsApi",["MAWDbMsgTxns","MAWDbThreadTxns","MAWDexieTable","MAWIndexedDb","MAWRestoreMsgsTxns","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY,threads:d("MAWTransactionMode").READONLY},"getMaybeNextNonAdminMsgSortOrderMs",function(a){return function(b,c){return d("MAWDexieTable").dexieAll([d("MAWDbMsgTxns").maybeGetMsg(a,c),d("MAWDbThreadTxns").getThread(a,b)]).then(function(b){var c=b[0];b=b[1];var e=0;if(d("MAWRestoreMsgsTxns").isE2eeOrCutoverAdminMsg(c)&&b.success&&c!=null)return d("MAWRestoreMsgsTxns").getNextMsgBasedOnSortOrderMs(a,b.value,c==null?void 0:c.msgId).then(function(a){a!=null&&a.sortOrderMs!=null&&(e=a.sortOrderMs);return{minMsgTimestampMs:e}});else c!=null&&c.sortOrderMs!=null&&(e=c.sortOrderMs);return{minMsgTimestampMs:e}})}});g.getMaybeNextNonAdminMsgSortOrderMs=a}),98);
__d("MAWGetSecureThreadTotalCount",["MAWReStoreTiming","MAWTransactionMode","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWReStoreTiming").makeShimTransactor("getSecureThreadTotalCount",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=0;a=a.tables.e2ee_threads.keys(new WeakMap());var c=(yield a.next());while(!c.done)b++,c=(yield a.next());return b});return function(b){return a.apply(this,arguments)}}(),{threads:d("MAWTransactionMode").READONLY},function(a){return function(){return a.threads.count()}});g.getSecureThreadTotalCount=a}),98);
__d("MAWGetSecurityAlertSettingApi",["MAWDbMsgTypeVersionTxns","MAWIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({appMeta:d("MAWTransactionMode").READONLY},"getSecurityAlertSetting",function(a){return function(){return d("MAWDbMsgTypeVersionTxns").getSecuritySettingForContact(a)}});g.getSecurityAlertSetting=a}),98);
__d("MAWGetSecurityAlertSettingForSelfAndContactApi",["MAWDbAppMeta","MAWDbMsgTypeVersionTxns","MAWReStoreTiming","MAWTransactionMode","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWReStoreTiming").makeShimTransactor("getSecurityAlertSettingForSelfAndContact",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=(b=(yield a.tables.e2ee_appMeta.get(d("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlert)))==null?void 0:b.value.allowSecurityAlert)!=null?b:!1;a=(a=(a=(yield a.tables.e2ee_appMeta.get(d("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlertForSelf)))==null?void 0:a.value.allowSecurityAlertForSelf)!=null?a:!0;return{allowSecurityAlertForContact:b,allowSecurityAlertForSelf:a}});return function(b){return a.apply(this,arguments)}}(),{appMeta:d("MAWTransactionMode").READONLY},function(a){return function(){return d("MAWDbMsgTypeVersionTxns").maybeBulkGetSecuritySetting(a)}});g.getSecurityAlertSettingForSelfAndContact=a}),98);
__d("MAWGetThreadLastMessageTsApi",["MAWDbMsgTxns","MAWIndexedDb","MAWTransactionMode","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY,threads:d("MAWTransactionMode").READONLY},"getThreadLastMessageTs",function(a){return function(b){return a.threads.get({authoritativeThreadKey:b}).then(function(b){if(b==null)return;return d("MAWDbMsgTxns").getThreadNewestMessageBySortOrder(a,b.jid).then(function(a){return a==null?null:d("WATimeUtils").castUnixTimeToMillisTime((a=a.serverTs)!=null?a:d("WATimeUtils").castToUnixTime(0))})})}});g.getThreadLastMessageTs=a}),98);
__d("MAWGetThreadLastNumMessagesBySortOrderApi",["MAWDbMsgTxns","MAWIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY,threads:d("MAWTransactionMode").READONLY},"getThreadLastNumMessagesBySortOrder",function(a){return function(b,c){return a.threads.get({authoritativeThreadKey:b}).then(function(b){return b==null?[]:d("MAWDbMsgTxns").getThreadNewestNumMessagesBySortOrder(a,b.jid,c)})}});g.getThreadLastNumMessagesBySortOrder=a}),98);
__d("MAWGetThreadsInfoApi",["MAWDbThreadTxns","MAWIndexedDb","MAWTransactionMode","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getThreadIdByDeduplicationKey ",""]);h=function(){return a};return a}a=d("MAWIndexedDb").makeMsgrTransactor({threads:d("MAWTransactionMode").READONLY},"getThreadIdByDeduplicationKey",function(a){return function(b){d("WALogger").DEV(h(),b);return d("MAWDbThreadTxns").getThreadByDeduplicationKey(a,b).then(function(a){return a.success?{jid:a.value.jid}:null})}});g.getThreadIdByDeduplicationKey=a}),98);
__d("blobToDataUri",["Promise","err","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var d,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:d=new FileReader();e=new(h||(h=b("Promise")))(function(a,b){d.onloadend=a,d.onerror=b});d.readAsDataURL(a);g.next=5;return b("regeneratorRuntime").awrap(e);case 5:f=d.result;if(!(typeof f!=="string")){g.next=8;break}throw c("err")('Unexpected result type "%s" when reading Blob as DataURL.',f instanceof ArrayBuffer?"ArrayBuffer":typeof f);case 8:return g.abrupt("return",f);case 9:case"end":return g.stop()}},null,this)}g["default"]=a}),98);
__d("MAWGetThumbnailBlobDataUrlByMediaIdApi",["FBLogger","MAWCreateMaybeAddPointForMediaRender","MAWDbChunkTxns","MAWDbMedia","MAWDbMediaTxns","MAWIndexedDb","MAWMaybeWithTimeout","MAWMediaPreviewDownloadManager","MAWMediaUtils","MAWTransactionMode","Promise","WAResultOrError","WATagsLogger","asyncToGeneratorRuntime","blobToDataUri"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Chunk missing for thumbnail despite having a thumbnailPlaintextHash in the media table"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["getImageThumbnail: returning generated jpegThumbnail from chunk"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["getImageThumbnail: unable to generate jpegThumbnail as chunk is missing"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["cannot find thumbnail to download"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["cannot find thumbnail to download with mediaId: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Returning data uri for ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to create thumbnail data uri from blob for ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Returning data uri for ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to create thumbnail data uri from blob for ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Returning data uri for ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to create thumbnail data uri from blob for ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["Found jpegThumbnail entry for ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["No media found for ",""]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["Get thumbnail blob for "," from ",""]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["Returning data uri for ",""]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to create thumbnail data uri from blob for ",""]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["Returning data uri for ",""]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to create thumbnail data uri from blob for ",""]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["Returning data uri for ",""]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to create thumbnail data uri from blob for ",""]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose(["Found jpegThumbnail entry for ",""]);D=function(){return a};return a}function E(){var a=babelHelpers.taggedTemplateLiteralLoose(["No media found for ",""]);E=function(){return a};return a}function F(){var a=babelHelpers.taggedTemplateLiteralLoose(["Get thumbnail blob for "," from , from ",""]);F=function(){return a};return a}var G=d("WATagsLogger").TAGS(["getThumbnailBlobDataUrlByMediaId"]);a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){G.LOG(F(),a,b);e=d("MAWCreateMaybeAddPointForMediaRender").createMaybeAddPointForMediaRender(e);e("fetch_thumbnail_blob_api_start");var f=(yield J(a));if(f==null){G.WARN(E(),a);e("fetch_thumbnail_blob_api_fail_no_media_found_in_db");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId because media is not in the media db. mediaId is %s, from %s",a,b)}var g=(yield M(f));if(g.success===!0){G.LOG(D(),a);e("fetch_thumbnail_blob_api_success");var h=(yield c("blobToDataUri")(g.value));if(!Boolean(h)){G.ERROR(C(),a);e("fetch_thumbnail_blob_api_fail_no_data_uri");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId because data uri is null. mediaId is %s, from %s",a,b)}G.LOG(B(),a);return h}h=g.error;switch(h){case"missing_jpeg_thumbnail":if(f.mediaType===d("MAWDbMedia").MEDIA_TYPE.IMAGE||f.mediaType===d("MAWDbMedia").MEDIA_TYPE.VIDEO){g=(yield H(f));if(g!=null){e("fetch_thumbnail_blob_api_success");h=(yield c("blobToDataUri")(g));if(!Boolean(h)){G.ERROR(A(),a);e("fetch_thumbnail_blob_api_fail_no_data_uri");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId because data uri is null. mediaId is %s, from %s",a,b)}G.LOG(z(),a);return h}if((f==null?void 0:f.mediaType)===d("MAWDbMedia").MEDIA_TYPE.VIDEO){e("fetch_thumbnail_blob_api_fail_not_able_to_generate_video_thumbnail_on_the_fly");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId in time (for video). mediaId is %s, from %s",a,b)}g=(yield I(f));if(g==null){e("fetch_thumbnail_blob_api_fail_not_able_to_generate_image_thumbnail_on_the_fly");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId in time or to generate thumnbail on the fly. mediaId is %s, from %s",a,b)}e("fetch_thumbnail_blob_api_success");h=(yield c("blobToDataUri")(g));if(!Boolean(h)){G.ERROR(y(),a);e("fetch_thumbnail_blob_api_fail_no_data_uri");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId because data uri is null. mediaId is %s, from %s",a,b)}G.LOG(x(),a);return h}e("fetch_thumbnail_blob_api_fail_missing_thumbnail");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId, invalid media (missing_jpeg_thumbnail). mediaId is %s, from %s",a,b);case"invalid_media":e("fetch_thumbnail_blob_api_fail_invalid_media");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId, invalid media. mediaId is %s, from %s",a,b)}});return function(b,c,d){return a.apply(this,arguments)}}();e=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e=d("MAWCreateMaybeAddPointForMediaRender").createMaybeAddPointForMediaRender(e);e("fetch_thumbnail_blob_api_start");a=d("MAWMediaUtils").genHMACPlaintextHash(a);G.LOG(w(),a,b);var f=(yield K(a));if(f==null){G.WARN(v(),a);e("fetch_thumbnail_blob_api_fail_no_media_found_in_db");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByHashedPlaintextHash because media is not in the media db. hashedPlaintextHash is %s, from %s",a,b)}var g=(yield M(f));if(g.success===!0){G.LOG(u(),a);e("fetch_thumbnail_blob_api_success");var h=(yield c("blobToDataUri")(g.value));if(!Boolean(h)){G.ERROR(t(),a);e("fetch_thumbnail_blob_api_fail_no_data_uri");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId because data uri is null. hashedPlaintextHash is %s, from %s",a,b)}G.LOG(s(),a);return h}h=g.error;switch(h){case"missing_jpeg_thumbnail":if(f.mediaType===d("MAWDbMedia").MEDIA_TYPE.IMAGE||f.mediaType===d("MAWDbMedia").MEDIA_TYPE.VIDEO){g=(yield H(f));if(g!=null){e("fetch_thumbnail_blob_api_success");h=(yield c("blobToDataUri")(g));if(!Boolean(h)){G.ERROR(r(),a);e("fetch_thumbnail_blob_api_fail_no_data_uri");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId because data uri is null. hashedPlaintextHash is %s, from %s",a,b)}G.LOG(q(),a);return h}if((f==null?void 0:f.mediaType)===d("MAWDbMedia").MEDIA_TYPE.VIDEO){e("fetch_thumbnail_blob_api_fail_not_able_to_generate_video_thumbnail_on_the_fly");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByHashedPlaintextHash in time (for video). hashedPlaintextHash is %s, from %s",a,b)}g=(yield I(f));if(g==null){e("fetch_thumbnail_blob_api_fail_not_able_to_generate_image_thumbnail_on_the_fly");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByHashedPlaintextHash in time or to generate thumnbail on the fly. hashedPlaintextHash is %s, from %s",a,b)}h=(yield c("blobToDataUri")(g));if(!Boolean(h)){G.ERROR(p(),a);e("fetch_thumbnail_blob_api_fail_no_data_uri");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId because data uri is null. hashedPlaintextHash is %s, from %s",a,b)}G.LOG(o(),a);return h}e("fetch_thumbnail_blob_api_fail_missing_thumbnail");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId, invalid media (missing_jpeg_thumbnail). hashedPlaintextHash is %s, from %s",a,b);case"invalid_media":e("fetch_thumbnail_blob_api_fail_invalid_media");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId, invalid media. hashedPlaintextHash is %s, from %s",a,b)}});return function(b,c,d){return a.apply(this,arguments)}}();var H=function(a,c){var e=d("MAWCreateMaybeAddPointForMediaRender").createMaybeAddPointForMediaRender(c);e("fetch_thumbnail_blob_api_thumbnail_download_start");c=d("MAWMediaPreviewDownloadManager").getMediaPreviewDownloadingResolvable(a.plaintextHash);if(c==null){e("fetch_thumbnail_blob_api_thumbnail_download_fail_no_resolvable");return(i||(i=b("Promise"))).resolve(null)}return d("MAWMaybeWithTimeout").maybeWithTimeout(c.promise,1e4,function(){G.WARN(n(),a.mediaId);G.ERROR(m());return null}).then(function(a){e("fetch_thumbnail_blob_api_thumbnail_download_success");return a})["catch"](function(a){e("fetch_thumbnail_blob_api_thumbnail_download_fail_timeout");throw a})},I=(f=d("MAWIndexedDb")).makeMsgrTransactor({chunk:(h=d("MAWTransactionMode")).READONLY,media:h.READONLY},"generateThumbnailFromMediaChunk",function(a){return function(b,c){var e=d("MAWCreateMaybeAddPointForMediaRender").createMaybeAddPointForMediaRender(c);e("fetch_thumbnail_blob_api_thumbnail_generate_from_media_start");return d("MAWDbChunkTxns").maybeGetChunkFromHash(a,b.hashedPlaintextHash).then(function(a){if(a==null){G.ERROR(l());e("fetch_thumbnail_blob_api_thumbnail_generate_from_media_fail_chunk_missing");return}G.WARN(k());e("fetch_thumbnail_blob_api_thumbnail_generate_from_media_success");return new Blob([a.blobData],{type:a.mimetype})})}}),J=f.makeMsgrTransactor({media:h.READONLY},"getFullMedia",function(a){return function(b){return d("MAWDbMediaTxns").maybeGetMediaFromMediaId(a,b)}}),K=f.makeMsgrTransactor({media:h.READONLY},"getFullMedia",function(a){return function(b){return d("MAWDbMediaTxns").maybeGetMediaFromHashedPlaintextHash(a,b)}}),L=f.makeMsgrTransactor({chunk:h.READONLY},"getChunkForThumbnail",function(a){return function(b){return d("MAWDbChunkTxns").maybeGetChunkByPlaintextHash(a,b)}}),M=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=d("MAWCreateMaybeAddPointForMediaRender").createMaybeAddPointForMediaRender(b);b("fetch_thumbnail_blob_api_get_thumbnail_from_db_start");a=N(a);if(a.success===!1){b("fetch_thumbnail_blob_api_get_thumbnail_from_db_fail_invalid_media");return a}a=a.value;var c=a.jpegThumbnail;a=a.thumbnailPlaintextHash;if(a!=null){a=(yield L(a));if(a!=null){b("fetch_thumbnail_blob_api_get_thumbnail_from_db_success");return d("WAResultOrError").makeResult(new Blob([a.blobData],{type:a.mimetype}))}else b("fetch_thumbnail_blob_api_get_thumbnail_from_db_fail_no_valid_hash"),G.ERROR(j())}if(c!=null){b("fetch_thumbnail_blob_api_get_thumbnail_from_db_success");return d("WAResultOrError").makeResult(new Blob([c],{type:"image/jpeg"}))}b("fetch_thumbnail_blob_api_get_thumbnail_from_db_fail_missing_thumbnail");return d("WAResultOrError").makeError("missing_jpeg_thumbnail")});return function(b,c){return a.apply(this,arguments)}}(),N=function(a){var b,c=null,e=null;switch(a.mediaType){case d("MAWDbMedia").MEDIA_TYPE.IMAGE:c=(b=a.validatedImageInfo)==null?void 0:b.jpegThumbnail;e=(b=a.validatedImageInfo)==null?void 0:b.thumbnailPlaintextHash;break;case d("MAWDbMedia").MEDIA_TYPE.VIDEO:c=(b=a.validatedVideoInfo)==null?void 0:b.jpegThumbnail;e=(b=a.validatedVideoInfo)==null?void 0:b.thumbnailPlaintextHash;break;default:return d("WAResultOrError").makeError("invalid_media")}return d("WAResultOrError").makeResult({jpegThumbnail:c,thumbnailPlaintextHash:e})};g.getThumbnailBlobDataUrlByMediaId=a;g.getThumbnailBlobDataUrlByHashedPlaintextHash=e}),98);
__d("MAWGetWAIDevices",["WADevicesState","WAGlobals","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.users;yield d("WAGlobals").getWaOneQueue().waitForWAInfraOfflineSyncEnd();yield d("WADevicesState").getDevicesState().waitForUserDevices(b,"getWAIDevices");return d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return a.storage.bulkLoadIdentities(b)},{afterInit:!0,flush:!1,operationType:"maw_load_identities"}).then(function(a){var b=new Map();for(a of a){var c=a[0],d=a[1];b.set(c,Array.from(d.keys()))}return b})});return h.apply(this,arguments)}g.getWAIDevices=a}),98);
__d("MAWGetWATimeApi",["Promise","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){return(h||(h=b("Promise"))).resolve({clockSkew:d("WATimeUtils").getClockSkew(),millisTime:d("WATimeUtils").millisTime(),unixTime:d("WATimeUtils").unixTime()})};g.getWATime=a}),98);
__d("MAWGetWorkerHeartbeatApi",["MAWGetWorkerStatusApi","Promise","WAResolvable"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new(d("WAResolvable").Resolvable)();d("MAWGetWorkerStatusApi").onWorkerStateChange(function(a){var b=a.value;a.success&&(b==null?void 0:b.startup)==="success"&&!i.resolveWasCalled()&&i.resolve(!0)});a=function(){return(h||(h=b("Promise"))).resolve(!0)};g.getWorkerHeartbeat=a}),98);
__d("MAWInsertAdminMessageInCutoverThreadsApi",["MAWAdminWriteCutoverThreadMsgTxn","MAWDbThreadTxns","MAWIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,ftsBackloggedMessages:a.READWRITE,groupInfo:a.READONLY,media:a.READONLY,messages:a.READWRITE,threads:a.READWRITE},"insertAdminMessageInCutoverThreads",function(a){return function(b){var c=b.openThreadId,e=b.threadJid;b=b.traceId;return d("MAWAdminWriteCutoverThreadMsgTxn").writeCutoverThreadAdminMsg(a,e,c,b).then(function(b){b=b.needsMarkThreadAsMigrated;if(b)return d("MAWDbThreadTxns").markCutoverThreadAsMigratedLocally(a,e)}).then(function(){return!0})}});g.insertAdminMessageInCutoverThreads=b}),98);
__d("MAWLoadMediaApi",["FBLogger","MAWDbChunkTxns","MAWDbMediaTxns","MAWDbMsg","MAWDexieTable","MAWIndexedDb","MAWMediaAfterTxns","MAWTransactionMode","WALogger","WATimeUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to load media for thread. ThreadJid "," does not exist"]);h=function(){return a};return a}var i=20;b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,media:a.READONLY,messages:a.READONLY,threads:a.READONLY},"loadMoreMedia",function(a){return function(b){var e=b.earliestLoadedMediaMessageId,f=b.earliestLoadedMediaTs,g=b.threadJid,j=0,k=!1,l=0;return a.threads.get({jid:g}).then(function(b){if(b==null)throw d("WALogger").ERROR(h(),g);b=a.messages.where(["threadJid","sortOrderMs"]).between([b.jid,d("MAWDbMsg").MIN_MSG_SORT_ORDER],[b.jid,f],!0,c("gkx")("2616")===!0);return c("gkx")("2616")===!0?b.filter(n).until(m).reverse().toArray():b.filter(n).limit(i).reverse().toArray()}).then(function(b){var f,h=b.findIndex(function(a){return a.msgId===e});h=k?h+1:0;h=c("gkx")("2616")===!0?b.slice(h,h+i+1):b;b=h.length===i;var j=h[h.length-1];f=(f=j==null?void 0:j.sortOrderMs)!=null?f:d("MAWDbMsg").MIN_MSG_SORT_ORDER;d("MAWIndexedDb").afterTransaction({tag:"NewMediaRange",value:{earliestLoadedMediaTs:f,hasMoreBefore:b,lastLoadedMessageId:c("gkx")("2616")===!0?(f=j==null?void 0:j.msgId)!=null?f:e:void 0,threadJid:g}});return d("MAWDbMediaTxns").getMsgMediaPairFromMsgs(a,h).then(function(b){d("MAWDexieTable").dexieAll(b.map(function(b){var e=b[0],f=b[1];return d("MAWDbChunkTxns").hasMediaChunk(a,f.hashedPlaintextHash).then(function(b){b||c("FBLogger")("messenger_web_media").warn("loadMoreMedia cannot find chunk for mediaId: %s",f.mediaId),d("MAWMediaAfterTxns").handleNewMediaAfterTxn(e,f,b,a)})}))})});function m(a){j++;a.msgId===e?k=!0:k&&l++;if(l>i)return!0;return j>i&&!k&&a.sortOrderMs!==f?!0:!1}function n(a){var b=d("WATimeUtils").unixTime(),c=d("MAWDbMsg").isMediaMsg(a);a=a.messageExpirationTs==null||a.messageExpirationTs>b;return c&&a}}});g.loadMoreMedia=b}),98);
__d("MAWMarkBackupAsCompleted",["MAWSharedEbUploadQueue"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.queueId;var b=d("MAWSharedEbUploadQueue").ebUploadQueue();return b.ack([a])}g.markBackupAsCompleted=a}),98);
__d("MAWThreadUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){return a.threads.where("jid").equals(b).modify(c)}f.updateThreadWithJid=a}),66);
__d("MAWMarkThreadAsUnreadApi",["MAWBridgeThread","MAWDbMsgTxns","MAWIndexedDb","MAWThreadUtils","MAWTimeUtils","MAWTransactionMode","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY,threads:d("MAWTransactionMode").READWRITE},"markThreadAsUnread",function(a){return function(b){return a.threads.get({jid:b}).then(function(c){if(c==null)return;return d("MAWDbMsgTxns").getThreadNewestMessageTs(a,c,"use_cached_fields").then(function(e){var f=d("MAWTimeUtils").ensureValidMillisTime(e),g=d("WATimeUtils").castToMillisTime(0);if(f==null||e===g)return;e={lastReadMsg:null};return d("MAWThreadUtils").updateThreadWithJid(a,b,e).then(function(a){a===1&&d("MAWIndexedDb").afterTransaction({tag:"ThreadTimestampsUpdated",value:d("MAWBridgeThread").createBridgeThreadTimestampsUpdated(c.jid,g,f,!0)})})})})}});g.markThreadAsUnread=a}),98);
__d("MAWMediaSizeCheck",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a>100*1024}f.isMinSizeForImagePreviewGeneration=a}),66);
__d("MAWOptimisticUploadMedia",["MAWConfig","MAWFrontendMediaUtils","MAWGetDownloadableThumbnailForMediaApi","MAWGetMediaPlaintextApi","MAWGetOrCreateMediaKnownEntriesApi","MAWMediaSizeCheck","MAWMediaUtils","MAWOptimisticUploadManager","MAWStartMediaUploadQplFlow","MAWUpdateMediaEntryForMsgApi","MAWUpdateMediaEntryForOptimisticUploadApi","WAAPI","WAHashUtils","WALogger","WAMediaCrypto","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["optimisticUploadMedia: fileUploadResult success, setting with previewPlaintextHash"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["optimisticUploadMedia: previewUploadResult success"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["OptimisticUploadMedia - unsupported preview media type ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["optimisticUploadMedia: preview uploading"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["optimisticUploadMedia: thumbnail_exists: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["optimisticUploadMedia: File is already being uploaded"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["optimisticUploadMedia: fileUploadResult success"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["optimisticUploadMedia: file uploading"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Expected chatJid in optimisticUploadMedia"]);p=function(){return a};return a}function q(a,b,c){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield d("MAWMediaUtils").hashBlob(a));f=d("WAHashUtils").toPlaintextHash(f);var g=d("MAWOptimisticUploadManager").getOptimisticUploadManager();g=g.get(f);if(g!=null)return d("WAResultOrError").makeError("already_uploading");if(b==null){d("WALogger").ERROR(p());return d("WAResultOrError").makeError("missing_chat_jid")}g=e.type==="regular"?e.mediaType:"preview";var h=(yield d("MAWStartMediaUploadQplFlow").startMediaUploadQplFlow({chatJid:b,fileSize:a.size,serverMediaType:g,uploadEntry:"optimisticUploadMedia"}));b=c("WAAPI").uploadMedia({chatJid:b,filename:g==="document"?a.name:void 0,getDownloadableThumbnailForMedia:d("MAWGetDownloadableThumbnailForMediaApi").getDownloadableThumbnailForMedia,getMediaKnownEntries:d("MAWGetOrCreateMediaKnownEntriesApi").getOrCreateMediaKnownEntries,getMediaPlaintext:d("MAWGetMediaPlaintextApi").getMediaPlaintext,hash:f,mediaTypeDetails:e,protocolMsgId:null,size:a.size,updateMediaEntryForMsg:d("MAWUpdateMediaEntryForMsgApi").updateMediaEntryForMsg,updateMediaEntryForOptimisticUpload:d("MAWUpdateMediaEntryForOptimisticUploadApi").updateMediaEntryForOptimisticUpload,uploadMediaMetric:h});return d("WAResultOrError").makeResult({plaintextHash:f,uploadPromise:b})});return r.apply(this,arguments)}function a(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.file,c=a.jid;a=a.thumbnail;var e=d("MAWOptimisticUploadManager").getOptimisticUploadManager(),f=d("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(b.type);f=f.serverMediaType;d("WALogger").LOG(o());var g=(yield q(b,c,{mediaType:f,type:"regular"}));if(g.success===!0)d("WALogger").LOG(n()),e.set(g.value.plaintextHash,{file:b,optimisticUploadPromise:g.value.uploadPromise,previewPlaintextHash:null});else{var p=g.error;switch(p){case"already_uploading":d("WALogger").LOG(m());break;case"missing_chat_jid":break}}p=null;d("WALogger").LOG(l(),a!=null);if(a&&t(f,b.size)){d("WALogger").LOG(k());var r=d("WAMediaCrypto").convertServerMediaTypeToPreviewMediaType(f);if(r==null){d("WALogger").ERROR(j(),f);return}f=(yield q(a,c,{messageType:r,type:"preview"}));f.success===!0&&(d("WALogger").LOG(i()),p=f.value.plaintextHash,e.set(f.value.plaintextHash,{file:a,optimisticUploadPromise:f.value.uploadPromise}),g.success===!0&&(d("WALogger").LOG(h()),e.set(g.value.plaintextHash,{file:b,optimisticUploadPromise:g.value.uploadPromise,previewPlaintextHash:p})))}});return s.apply(this,arguments)}function t(a,b){if(a==="image"&&d("MAWConfig").getConfig().skipPreviewUploadForImages()===!0)return!1;if(a!=="image")return!0;a;return d("MAWMediaSizeCheck").isMinSizeForImagePreviewGeneration(b)}g.optimisticUploadMedia=a;g.shouldUploadPreview=t}),98);
__d("MAWPredistributeSKDMApi",["MAWSendSenderKeyDistributionMsg"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b){return d("MAWSendSenderKeyDistributionMsg").maybePreEstablishSessionsAndSendSenderKeyDistributionMsg(a,b)};g.predistributeSKDM=a}),98);
__d("MAWWriteLocalXMAMsgApi",["MAWAckLevel","MAWAuthor","MAWDbMsgTxns","MAWDexieTable","MAWIndexedDb","MAWMsgType","MAWTransactionMode","MAWVault","MAWWriteMsgTxns","WAJids","WALogger","WATimeUtils","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["msgToQuotedMsg-XMA: Unsupported message type ",""]);h=function(){return a};return a}b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,ftsBackloggedMessages:a.READWRITE,groupInfo:a.READONLY,media:a.READONLY,messages:a.READWRITE,participants:a.READONLY,threads:a.READWRITE,unrenderedMessages:a.READWRITE,xma:a.READONLY},"writeLocalXMAMsg",function(a){return function(b,c,e,f,g){f.content!=null&&(f.content=d("MAWVault").vault(f.content));return d("MAWDexieTable").dexieAll([a.threads.get({jid:c}),a.messages.where("externalId").equals(b).toArray(),i(a,f.quote,c)]).then(function(c){var h=c[0],i=c[1];c=c[2];if(h==null)return{type:"missing_thread"};i=i.find(function(a){return a.threadJid===h.jid&&a.author===g});if(i!=null)return{protocolMsgId:{author:g,chat:h.jid,externalId:i.externalId},type:"already_sent"};else{i={ack:d("MAWAckLevel").ACK.clock,altIndex:void 0,author:g,ephemeralSetting:f.ephemeralSetting,externalId:b,isForwarded:f.isForwarded,specialTextSize:f.specialTextSize,threadJid:h.jid,ts:e};i=j(i,f,c);c=f.isFirstMsg;var k=f.openMessageOtid,l=f.openMessageParticipantCount,m=f.optimisticMsg,n=f.participantCount;return d("MAWWriteMsgTxns").writeMsg(a,i,h,{isCurrentDeviceSendingMsg:!0,isFirstMsg:c,isOutgoing:!0,openMessageOtid:k,openMessageParticipantCount:l,optimisticMsg:m,participantCount:n}).then(function(){return{protocolMsgId:{author:g,chat:h.jid,externalId:b},type:"sent"}})}})}});function i(a,b,c){return b==null?d("MAWDexieTable").dexieResolve(null):d("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(a,b).then(function(b){return b==null?null:a.threads.get({jid:b.threadJid}).then(function(a){var e=b?k(b):null;b.messageExpirationTs!=null&&b.messageExpirationTs<d("WATimeUtils").unixTime()&&e!=null&&(e=babelHelpers["extends"]({},e,{mediaId:void 0,msgContent:void 0,type:d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL,xmaMessageType:void 0}));if(a==null||a.jid===c)return{content:e,remoteJid:null};a=d("WAJids").interpretAndValidateJid(a.jid);a=a.jidType==="group"?a.groupJid:null;return{content:e,remoteJid:a}})})}function j(a,b,e){var f,g;if(b.quote!=null&&(e==null?void 0:e.content)!=null){var h;g=e==null?void 0:(h=e.content)==null?void 0:h.externalId;f={content:e==null?void 0:e.content,remoteJid:(h=e==null?void 0:e.remoteJid)!=null?h:void 0}}if(b.xmaMessageType==null)throw c("err")("XMA Message Missing xmaMessageType");return babelHelpers["extends"]({},a,{quote:f,quoteExternalId:g,type:d("MAWMsgType").MSG_TYPE.XMA,xmaMessageType:b.xmaMessageType})}function k(a){var b={author:d("MAWAuthor").getAuthorUserJid(a.author)||d("WAJids").AUTHOR_ME,externalId:a.externalId,mediaId:a.mediaId,msgId:a.msgId,specialTextSize:a.specialTextSize,ts:a.ts,xmaMessageType:a.xmaMessageType};switch(a.type){case d("MAWMsgType").MSG_TYPE.IMAGE:return babelHelpers["extends"]({},b,{msgContent:a.msgContent,type:d("MAWMsgType").MSG_TYPE.IMAGE});case d("MAWMsgType").MSG_TYPE.VIDEO:return babelHelpers["extends"]({},b,{msgContent:a.msgContent,type:d("MAWMsgType").MSG_TYPE.VIDEO});case d("MAWMsgType").MSG_TYPE.PTT:return babelHelpers["extends"]({},b,{msgContent:a.msgContent,type:d("MAWMsgType").MSG_TYPE.PTT});case d("MAWMsgType").MSG_TYPE.TEXT:return babelHelpers["extends"]({},b,{msgContent:a.msgContent,type:d("MAWMsgType").MSG_TYPE.TEXT});case d("MAWMsgType").MSG_TYPE.STICKER:return babelHelpers["extends"]({},b,{msgContent:a.msgContent,type:d("MAWMsgType").MSG_TYPE.STICKER});case d("MAWMsgType").MSG_TYPE.GIF:return babelHelpers["extends"]({},b,{msgContent:a.msgContent,type:d("MAWMsgType").MSG_TYPE.GIF});case d("MAWMsgType").MSG_TYPE.XMA:return babelHelpers["extends"]({},b,{msgContent:a.msgContent,type:d("MAWMsgType").MSG_TYPE.XMA,xmaMessageType:a.xmaMessageType});default:d("WALogger").ERROR(h(),a.type);throw c("err")("Trying to reply to a message type that does not support replies")}}g.writeLocalXMAMsg=b}),98);
__d("MAWSaveRTCCallXMAMsg",["MAWAckLevel","MAWBridgeXMA","MAWDexieTable","MAWExternalId","MAWFrontendMediaUtils","MAWGetDownloadableThumbnailForMediaApi","MAWGetMediaPlaintextApi","MAWGetMsgIdByProtocolMsgId","MAWGetOrCreateMediaKnownEntriesApi","MAWIndexedDb","MAWMediaManagementTxns","MAWMediaUtils","MAWMsgUtil","MAWOptimisticUploadManager","MAWSendMediaMsg","MAWStartMediaUploadQplFlow","MAWTransactionMode","MAWUpdateMediaEntryForMsgApi","MAWUpdateMediaEntryForOptimisticUploadApi","MAWWriteLocalXMAMsgApi","MAWXMAManagementTxns","Promise","WAAPI","WAArmadilloXMA.pb","WALogger","WAMediaUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to upload media xma"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWSaveRTCCallXMAMsg - Message missing in db"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to send xma - missing thread"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWSaveRTCCallXMAMsg - XMAMessageType is null"]);l=function(){return a};return a}a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.args,c=a.author,e=a.chatJid,f=a.faviconFile,g=a.ts;a=a.xmaArgs;var h=b.xmaMessageType;if(h==null){d("WALogger").ERROR(l());return}g=(yield d("MAWWriteLocalXMAMsgApi").writeLocalXMAMsg(d("MAWExternalId").generateExternalId(),e,g,b,c));if(g.type==="missing_thread"){d("WALogger").ERROR(k());return}b=(yield d("MAWGetMsgIdByProtocolMsgId").getMsgIdByProtocolMsgId(g.protocolMsgId));if(!b.success){d("WALogger").ERROR(j());return}c=b.value;a=babelHelpers["extends"]({},a,{overlayIconGlyph:(b=a.overlayIconGlyph)!=null?b:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NONE});b=(yield p(f,c,h,g.protocolMsgId,a));f=d("MAWOptimisticUploadManager").getOptimisticUploadManager();h=(yield o(b,e,g.protocolMsgId,f));if(!(h==null?void 0:h.uploadResult.success)){d("WALogger").ERROR(i());return d("MAWMsgUtil").updateSystemAckWithTxn(c,d("MAWAckLevel").ACK.failed)}a=h.uploadResult;b=h.media;yield d("MAWSendMediaMsg").maybePersistMediaEntry(b.plaintextHash,c,e,g.protocolMsgId.externalId,a==null?void 0:(c=a.value)==null?void 0:c.objectId,d("MAWMediaUtils").getServerMediaTypeFromMediaType(b.mediaType,"xma-media"));f["delete"](h.media.plaintextHash)});return function(b){return a.apply(this,arguments)}}();function m(a,b,c,d,e,f){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h){h=h.get(a);h=h==null?void 0:h.optimisticUploadPromise;if(h!=null)return h;h=(yield d("MAWStartMediaUploadQplFlow").startMediaUploadQplFlow({chatJid:b,fileSize:g,serverMediaType:f,uploadEntry:"saveRTCCallXMAMsg"}));return c("WAAPI").uploadMedia({chatJid:b,getDownloadableThumbnailForMedia:d("MAWGetDownloadableThumbnailForMediaApi").getDownloadableThumbnailForMedia,getMediaKnownEntries:function(a){return d("MAWGetOrCreateMediaKnownEntriesApi").getOrCreateMediaKnownEntries(a)},getMediaPlaintext:d("MAWGetMediaPlaintextApi").getMediaPlaintext,hash:a,mediaTypeDetails:{mediaType:f,type:"regular"},protocolMsgId:e,size:g,updateMediaEntryForMsg:d("MAWUpdateMediaEntryForMsgApi").updateMediaEntryForMsg,updateMediaEntryForOptimisticUpload:d("MAWUpdateMediaEntryForOptimisticUploadApi").updateMediaEntryForOptimisticUpload,uploadMediaMetric:h})});return n.apply(this,arguments)}function o(a,c,e,f){if(a==null)return(h||(h=b("Promise"))).resolve();var g=d("MAWMediaUtils").getServerMediaTypeFromMediaType(a.mediaType,"xma-media");return m(a.plaintextHash,c,e,g,a.size,f).then(function(b){return{media:a,uploadResult:b}})}function p(a,b,c,d,e){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d,e){a=(yield r(a));return t(b,a,c,d,e)});return q.apply(this,arguments)}function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null)return a;var b=a.file,e=d("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(b.type),f=e.mediaType;e=e.serverMediaType;var g=(yield d("MAWMediaUtils").genBlobHashes(b)),h=g[0];g=g[1];if(f!=="Image")throw c("err")("Expected Image when sending XMA share");var i=(yield d("WAMediaUtils").blobToArrayBuffer(b));return{blobArrayBuffer:i,file:b,hashedPlaintextHash:g,mediaInfo:{validatedAudioInfo:null,validatedDocumentFileInfo:null,validatedImageInfo:{height:a.height,width:a.width},validatedVideoInfo:null},mediaType:f,plaintextHash:h,serverMediaType:e}});return s.apply(this,arguments)}function t(a,b,c,e,f){var g;return d("MAWIndexedDb").makeMsgrTransactor({chunk:(g=d("MAWTransactionMode")).READWRITE,media:g.READWRITE,mediaBackup:g.READWRITE,messages:g.READWRITE,unrenderedMessages:g.READWRITE,xma:g.READWRITE},"saveRTCXMAMediaAndMetadata",function(g){return function(){var h=new Map();if(b!=null){var i=h.get(b.plaintextHash);i==null&&h.set(b.plaintextHash,d("MAWMediaManagementTxns").attachHashAndSaveMedia(g,e,b.blobArrayBuffer,b.plaintextHash,void 0,void 0,b.mediaType,b.mediaInfo,b.file,!1))}i=Array.from(h.values());return d("MAWDexieTable").dexieAll(i).then(function(h){h=h.reduce(function(a,b){return a.set(b.plaintextHash,b)},new Map());var i=b!=null?h.get(b.plaintextHash):void 0;return d("MAWXMAManagementTxns").saveXMA(g,void 0,void 0,i==null?void 0:i.mediaId,c,a,void 0,e,f).then(function(a){d("MAWIndexedDb").afterTransaction({tag:"NewXMA",value:d("MAWBridgeXMA").createBridgeXMA(i,a,!1)});return i})})}})()}g.saveRTCCallXMAMsg=a}),98);
__d("WASmaxOutChatstateComposingMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.hasComposingMediaAudio;a=d("WASmaxJsx").smax("chatstate",null,d("WASmaxJsx").smax("composing",{media:d("WASmaxAttrs").OPTIONAL_LITERAL("audio",a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeComposingMixin=a}),98);
__d("WASmaxOutChatstatePausedMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("chatstate",null,d("WASmaxJsx").smax("paused",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePausedMixin=a}),98);
__d("WASmaxOutChatstateComposingOrPausedMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutChatstateComposingMixin","WASmaxOutChatstatePausedMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.composing)return d("WASmaxOutChatstateComposingMixin").mergeComposingMixin(a,b.composing);if(b.isPaused)return d("WASmaxOutChatstatePausedMixin").mergePausedMixin(a);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeComposingOrPausedMixinGroup=a}),98);
__d("WASmaxOutChatstateInternalTestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.testConfig;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("test",{config:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeInternalTestMixin=a}),98);
__d("WASmaxOutChatstateClientNotificationRequest",["WASmaxJsx","WASmaxMixins","WASmaxOutChatstateComposingOrPausedMixinGroup","WASmaxOutChatstateInternalTestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.chatstateTo,c=a.internalTestMixinArgs;a=a.composingOrPausedMixinGroupArgs;b=d("WASmaxOutChatstateComposingOrPausedMixinGroup").mergeComposingOrPausedMixinGroup(d("WASmaxMixins").optionalMerge(d("WASmaxOutChatstateInternalTestMixin").mergeInternalTestMixin,d("WASmaxJsx").smax("chatstate",{to:d("WAWap").JID(b)}),c),a);return b}g.makeClientNotificationRequest=a}),98);
__d("WASmaxChatstateClientNotificationRPC",["WAComms","WASmaxOutChatstateClientNotificationRequest","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=d("WASmaxOutChatstateClientNotificationRequest").makeClientNotificationRequest(a);e.next=3;return b("regeneratorRuntime").awrap(d("WAComms").castSmaxStanza(c));case 3:case"end":return e.stop()}},null,this)}g.sendClientNotificationRPC=a}),98);
__d("WASendChatStateProtocol",["WALogger","WASmaxChatstateClientNotificationRPC"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendChatStateProtocol Sending "," to ",""]);h=function(){return a};return a}function a(a,b){d("WALogger").LOG(h(),b,a);var c;b==="idle"?c={isPaused:!0}:(b,c={composing:{hasComposingMediaAudio:b==="recording_audio"}});return d("WASmaxChatstateClientNotificationRPC").sendClientNotificationRPC({chatstateTo:a,composingOrPausedMixinGroupArgs:c})}g.sendChatStateProtocol=a}),98);
__d("MAWSendChatStateFromComposerApi",["FBLogger","MAWIndexedDb","MAWTransactionMode","WASendChatStateProtocol"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({threads:d("MAWTransactionMode").READONLY},"sendChatStateFromComposer",function(a){return function(b){var e=b.chatJid,f=b.state;return a.threads.get({jid:e}).then(function(a){if(a==null)return;a=a.jid;d("WASendChatStateProtocol").sendChatStateProtocol(a,f)["catch"](function(a){return c("FBLogger")(a).mustfix("Caught while sending chat state from composer.")})})}});g.sendChatStateFromComposer=a}),98);
__d("MAWSetEphemeralSettingsFromFrontendApi",["FBLogger","MAWEphemeralSettingsTxns","MAWIndexedDb","MAWJobDefinitions","MAWJobManager","MAWTransactionMode","Promise","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,ephemeralSettings:a.READWRITE,groupInfo:a.READONLY,media:a.READONLY,messages:a.READWRITE,threads:a.READWRITE},"handleAndWriteOutgoingUserEphemeralSettingChange",function(a){return function(b,c,e,f){return d("MAWEphemeralSettingsTxns").handleAndWriteOutgoingUserEphemeralSettingChange(a,b,c,e,f)}});e=function(a){var e=a.chatJid,f=a.ephemeralExpirationInSec,g=a.ephemeralLastUpdatedOrSetTimestamp,j=a.isEphemeralSettingReset;if(e==null){c("FBLogger")("messenger_e2ee_web").mustfix("Both chatJid and threadId passed to setEphemeralSettingsFromFrontend are null");return(h||(h=b("Promise"))).resolve({success:!1})}var k=(a=g)!=null?a:d("WATimeUtils").unixTime();return i(e,f,k,j).then(function(a){if(a.success){var b={ephemeralExpirationInSec:f,ephemeralLastUpdatedOrSetTimestamp:k};d("MAWJobManager").getJobManager().fireAndForget(d("MAWJobDefinitions").jobSerializers.sendEphemeralSettingMsg(e,{ephemeralSetting:b,isEphemeralSettingReset:j,isForSyncResponse:!1}))}return a})};g.setEphemeralSettingsFromFrontend=e}),98);
__d("MAWSetEphemeralSettingsOfPeerFromMIApi",["MAWDbGroupInfoTxns","MAWDexieTable","MAWEphemeralSettingsTxns","MAWGetOrCreateThreadTxns","MAWIndexedDb","MAWTransactionMode","WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,ephemeralSettings:a.READWRITE,existingUsers:a.READWRITE,groupInfo:a.READWRITE,groupInvites:a.READONLY,media:a.READONLY,messages:a.READWRITE,participants:a.READWRITE,reactions:a.READWRITE,threads:a.READWRITE,xma:a.READONLY},"handleAndWriteIncomingEphemeralSetting",function(a){return function(b,c,e,f,g,h,i){var j=d("WAJids").interpretAsGroupJid(c);j=d("MAWDexieTable").dexieAll([d("MAWGetOrCreateThreadTxns").getExistingThread(a,c),j!=null?d("MAWDbGroupInfoTxns").getGroupInfo(a,j):d("MAWDexieTable").dexieResolve()]);return j.then(function(b){var e=b[0];b=b[1];if(e!=null)return{created:!1,thread:e};b=b==null?void 0:(e=b.value)==null?void 0:e.creationTs;return d("MAWGetOrCreateThreadTxns").getOrCreateThread(a,{createTs:b==null?null:d("WATimeUtils").castUnixTimeToMillisTime(b),description:"handleAndWriteIncomingEphemeralSetting",jid:c})}).then(function(c){c=c.thread;return d("MAWEphemeralSettingsTxns").handleAndWriteIncomingEphemeralSetting(a,b,null,e,f,g,c,i,null,h)})}});b=function(a){var b=a.author,c=a.chatJid,d=a.ephemeralExpirationInSec,e=a.ephemeralLastUpdatedOrSetTimestamp,f=a.fromWAI,g=a.isEphemeralSettingReset;a=a.serverTs;return h(b,c,d,e,g,f,a).then(function(){return{success:!0}})};g.setEphemeralSettingsFromMI=b}),98);
__d("MAWUpdateDeviceChangeAlertsApi",["MAWDbGetUnArchivedDeviceChangeAlertsCountTxn","MAWDbUpdateDeviceChangeAlertsTxn","MAWIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({deviceChangeAlerts:d("MAWTransactionMode").READWRITE},"updateDeviceChangeAlerts",function(a){return function(b){return d("MAWDbUpdateDeviceChangeAlertsTxn").updateDeviceChangeAlertsTxn(a,b).then(function(b){return d("MAWDbGetUnArchivedDeviceChangeAlertsCountTxn").getUnArchivedDeviceChangeAlertsCountTxn(a).then(function(){return b})})}});g.updateDeviceChangeAlerts=a}),98);
__d("MAWUpdateLSThreadFromGroupInfoApi",["MAWBridgeTypesCreators","MAWIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({groupInfo:d("MAWTransactionMode").READWRITE},"updateLSThreadFromGroupInfo",function(a){return function(b){return a.groupInfo.get(b).then(function(a){a!=null&&d("MAWIndexedDb").afterTransaction({tag:"GroupInfoUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedGroupInfo(a)})})}});g.updateLSThreadFromGroupInfo=a}),98);
__d("mawAdminWriteDualThreadCutoverMsgTxns",["MAWDbThreadTxns","MAWLocalizationType","MAWLocalizationUtils","MAWWriteMsgTxns","WALogger","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["dualThreadCutover failed to get the thread"]);h=function(){return a};return a}function a(a,b,c){return d("MAWDbThreadTxns").getThread(a,b).then(function(b){if(!b.success){d("WALogger").WARN(h());return{needsMarkThreadAsMigrated:!1}}b=b.value;if(b.didInsertDualThreadCutoverAdminMsg===!0)return{needsMarkThreadAsMigrated:!1};var e=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:[],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE,version:1},b.jid,d("WATimeUtils").castMillisTimeToUnixTime(c)),f=babelHelpers["extends"]({},b,{didInsertDualThreadCutoverAdminMsg:!0});return a.threads.put(f).then(function(){return d("MAWWriteMsgTxns").writeMsg(a,e,f).then(function(){return{needsMarkThreadAsMigrated:!0}})})})}g["default"]=a}),98);
__d("MAWWriteAdminMessageForDualThreadCutoverApi",["MAWDbThreadTxns","MAWIndexedDb","MAWTransactionMode","mawAdminWriteDualThreadCutoverMsgTxns"],(function(a,b,c,d,e,f,g){"use strict";b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,ftsBackloggedMessages:a.READWRITE,groupInfo:a.READONLY,media:a.READONLY,messages:a.READWRITE,threads:a.READWRITE},"writeAdminMessageForDualThreadCutover",function(a){return function(b){var e=b.chatJid;b=b.cutoverTimestampMs;return c("mawAdminWriteDualThreadCutoverMsgTxns")(a,e,b).then(function(b){b=b.needsMarkThreadAsMigrated;if(b)return d("MAWDbThreadTxns").markCutoverThreadAsMigratedLocally(a,e)})}});g.writeAdminMessageForDualThreadCutover=b}),98);
__d("MAWWriteAdminMessageForEphemeralSettingsChange",["MAWDbGroupInfoTxns","MAWDexieTable","MAWEphemeralAdminMsgBuildTxns","MAWGetOrCreateThreadTxns","MAWHIMLogger","MAWIndexedDb","MAWTransactionMode","WAJids","WAResultOrError","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot create a thread for message after missing thread creation attempt"]);h=function(){return a};return a}a=6*d("WATimeUtils").HOUR_SECONDS;e=d("MAWIndexedDb").makeMsgrTransactor({chunk:(b=d("MAWTransactionMode")).READONLY,ephemeralSettings:b.READWRITE,ftsBackloggedMessages:b.READWRITE,groupInfo:b.READWRITE,groupInvites:b.READONLY,media:b.READONLY,messages:b.READWRITE,participants:b.READWRITE,reactions:b.READONLY,threads:b.READWRITE,xma:b.READONLY},"writeAdminMessageForEphemeralSettingsChange",function(a){return function(b){var e=b.author,f=b.chatJid,g=b.expirationInSec,i=b.isEphemeralSettingReset,j=b.isTurningOnEphemeralSetting,k=b.serverTs;b=d("WAJids").interpretAsGroupJid(f);b=d("MAWDexieTable").dexieAll([d("MAWGetOrCreateThreadTxns").getExistingThread(a,f),b!=null?d("MAWDbGroupInfoTxns").getGroupInfo(a,b):d("MAWDexieTable").dexieResolve()]);return b.then(function(b){var c=b[0];b=b[1];if(c!=null)return{created:!1,thread:c};b=b==null?void 0:(c=b.value)==null?void 0:c.creationTs;return d("MAWGetOrCreateThreadTxns").getOrCreateThread(a,{createTs:b==null?null:d("WATimeUtils").castUnixTimeToMillisTime(b),description:"writeAdminMessageForEphemeralSettingsChange",jid:f})}).then(function(b){b=b==null?void 0:b.thread;if(b==null){c("MAWHIMLogger").ERROR(h());return d("WAResultOrError").makeError({type:"no_thread"})}return d("MAWEphemeralAdminMsgBuildTxns").writeEphemeralSettingAdminMsg(a,e,g,k,b,j,i,null)}).then(function(){})}});g.REVOKE_CONTENT_EXPIRATION_IN_SEC=a;g.writeAdminMessageForEphemeralSettingsChange=e}),98);
__d("MAWWritePinMessageAdminMsgTxns",["MAWCurrentUser","MAWLocalizationType","MAWLocalizationUtils","MAWWriteMsgTxns","WATimeUtils","emptyFunction","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f){return a.threads.get({jid:e}).then(function(e){if(e==null)throw c("err")("Invalid chat Id when try to write admin message for pin message");var g=b===d("MAWCurrentUser").getID()?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE,h=g===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE?[b]:[];h=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:h,adminType:g,version:1},e.jid,d("WATimeUtils").castMillisTimeToUnixTime(f),void 0,f);return d("MAWWriteMsgTxns").writeDedupedAdminMessage(a,h,e,f).then(c("emptyFunction"))})}g.writePinMessageAdminMsg=a}),98);
__d("MAWWriteAdminMessageForPinMessageApi",["MAWIndexedDb","MAWTransactionMode","MAWWritePinMessageAdminMsgTxns"],(function(a,b,c,d,e,f,g){"use strict";b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,ftsBackloggedMessages:a.READWRITE,groupInfo:a.READONLY,media:a.READONLY,messages:a.READWRITE,threads:a.READWRITE},"MAWWriteAdminMessageForPinMessage",function(a){return function(b){var c=b.actorFbid,e=b.chatJid;b=b.serverAuthoritativeTimestampMs;return d("MAWWritePinMessageAdminMsgTxns").writePinMessageAdminMsg(a,c,e,b)}});g.writeAdminMessageForPinMessage=b}),98);
__d("MAWWriteThreadHotlikeCustomizationAdminMsgTxns",["MAWCurrentUser","MAWLocalizationType","MAWLocalizationUtils","MAWWriteMsgTxns","WATimeUtils","emptyFunction","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f,g){return a.threads.get({jid:f}).then(function(f){if(f==null)throw c("err")("Invalid chat Id when try to write admin message for thread hotlike customization");var h=b===d("MAWCurrentUser").getID();h=h?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE;var i=[];h===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE?i.push(e):i.push(b,e);i=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:i,adminType:h,version:1},f.jid,d("WATimeUtils").castMillisTimeToUnixTime(g),void 0,g);return d("MAWWriteMsgTxns").writeDedupedAdminMessage(a,i,f,g).then(c("emptyFunction"))})}g.writeThreadHotlikeCustomizationAdminMsg=a}),98);
__d("MAWWriteAdminMessageForThreadHotlikeCustomizationApi",["MAWIndexedDb","MAWTransactionMode","MAWWriteThreadHotlikeCustomizationAdminMsgTxns"],(function(a,b,c,d,e,f,g){"use strict";b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,ftsBackloggedMessages:a.READWRITE,groupInfo:a.READONLY,media:a.READONLY,messages:a.READWRITE,threads:a.READWRITE},"writeAdminMessageForThreadHotlikeCustomization",function(a){return function(b){var c=b.actorFbid,e=b.chatJid,f=b.serverAuthoritativeTimestampMs;b=b.threadIcon;return d("MAWWriteThreadHotlikeCustomizationAdminMsgTxns").writeThreadHotlikeCustomizationAdminMsg(a,c,b,e,f)}});g.writeAdminMessageForThreadHotlikeCustomization=b}),98);
__d("MAWWriteThreadNicknameCustomizationAdminMsgTxns",["MAWCurrentUser","MAWLocalizationType","MAWLocalizationUtils","MAWWriteMsgTxns","WATimeUtils","emptyFunction","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f,g,h){return a.threads.get({jid:e}).then(function(e){if(e==null)throw c("err")("Invalid chat Id when try to write admin message for thread nickname customization");var i=d("MAWCurrentUser").getID(),j=b===i&&b!==g,k=g===i&&g!==b,l=g===b&&i===g;i=g===b&&i!==g;var m;l&&f.length>0?m=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:l&&f.length===0?m=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:i&&f.length>0?m=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:i&&f.length===0?m=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:j&&f.length>0?m=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:j&&f.length===0?m=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:k&&f.length>0?m=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:k&&f.length===0?m=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:f.length>0?m=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:m=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME;l=[];switch(m){case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:l.push(g,f);break;case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:l.push(b,f);break;case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:l.push(f);break;case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:l.push(g);break;case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:l.push(b);break;case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:l.push(b,g,f);break;default:break}i=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:l,adminType:m,version:1},e.jid,d("WATimeUtils").castMillisTimeToUnixTime(h),void 0,h);return d("MAWWriteMsgTxns").writeDedupedAdminMessage(a,i,e,h).then(c("emptyFunction"))})}g.writeThreadNicknameCustomizationAdminMsg=a}),98);
__d("MAWWriteAdminMessageForThreadNicknameCustomizationApi",["MAWIndexedDb","MAWTransactionMode","MAWWriteThreadNicknameCustomizationAdminMsgTxns"],(function(a,b,c,d,e,f,g){"use strict";b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,ftsBackloggedMessages:a.READWRITE,groupInfo:a.READONLY,media:a.READONLY,messages:a.READWRITE,threads:a.READWRITE},"writeAdminMessageForThreadNicknameCustomization",function(a){return function(b){var c=b.actorFbid,e=b.chatJid,f=b.nickName,g=b.participantId;b=b.serverAuthoritativeTimestampMs;return d("MAWWriteThreadNicknameCustomizationAdminMsgTxns").writeThreadNicknameCustomizationAdminMsg(a,c,e,f,g,b)}});g.writeAdminMessageForThreadNicknameCustomization=b}),98);
__d("MAWWriteThreadPhotoCustomizationAdminMsgTxns",["MAWCurrentUser","MAWLocalizationType","MAWLocalizationUtils","MAWWriteMsgTxns","WATimeUtils","emptyFunction","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f){return a.threads.get({jid:e}).then(function(e){if(e==null)throw c("err")("Invalid chat Id when try to write admin message for thread photo customization");var g=b===d("MAWCurrentUser").getID()?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,h=g===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO?[b]:[];h=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:h,adminType:g,version:1},e.jid,d("WATimeUtils").castMillisTimeToUnixTime(f),void 0,f);return d("MAWWriteMsgTxns").writeDedupedAdminMessage(a,h,e,f).then(c("emptyFunction"))})}g.writeThreadPhotoCustomizationAdminMsg=a}),98);
__d("MAWWriteAdminMessageForThreadPhotoCustomizationApi",["MAWIndexedDb","MAWTransactionMode","MAWWriteThreadPhotoCustomizationAdminMsgTxns"],(function(a,b,c,d,e,f,g){"use strict";b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,ftsBackloggedMessages:a.READWRITE,groupInfo:a.READONLY,media:a.READONLY,messages:a.READWRITE,threads:a.READWRITE},"writeAdminMessageForThreadPhotoCustomization",function(a){return function(b){var c=b.actorFbid,e=b.chatJid;b=b.serverAuthoritativeTimestampMs;return d("MAWWriteThreadPhotoCustomizationAdminMsgTxns").writeThreadPhotoCustomizationAdminMsg(a,c,e,b)}});g.writeAdminMessageForThreadPhotoCustomization=b}),98);
__d("MAWWriteThreadThemeCustomizationAdminMsgTxns",["MAWCurrentUser","MAWLocalizationType","MAWLocalizationUtils","MAWWriteMsgTxns","WATimeUtils","emptyFunction","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f,g,h){return a.threads.get({jid:g}).then(function(g){if(g==null)throw c("err")("Invalid chat Id when try to write admin message for thread theme customization");var i=b===d("MAWCurrentUser").getID();i=i?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME;var j=[];i===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME?j.push(f):j.push(b,f);e!=null&&j.push(e);j=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:j,adminType:i,version:1},g.jid,d("WATimeUtils").castMillisTimeToUnixTime(h),void 0,h);return d("MAWWriteMsgTxns").writeDedupedAdminMessage(a,j,g,h).then(c("emptyFunction"))})}g.writeThreadThemeCustomizationAdminMsg=a}),98);
__d("MAWWriteAdminMessageForThreadThemeCustomizationApi",["MAWIndexedDb","MAWTransactionMode","MAWWriteThreadThemeCustomizationAdminMsgTxns"],(function(a,b,c,d,e,f,g){"use strict";b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,ftsBackloggedMessages:a.READWRITE,groupInfo:a.READONLY,media:a.READONLY,messages:a.READWRITE,threads:a.READWRITE},"writeAdminMessageForThreadThemeCustomization",function(a){return function(b){var c=b.actorFbid,e=b.chatJid,f=b.serverAuthoritativeTimestampMs,g=b.themeEmoji;b=b.themeNameWithSubtitle;return d("MAWWriteThreadThemeCustomizationAdminMsgTxns").writeThreadThemeCustomizationAdminMsg(a,c,g,b,e,f)}});g.writeAdminMessageForThreadThemeCustomization=b}),98);
__d("MAWWriteUnpinMessageAdminMsgTxns",["MAWCurrentUser","MAWLocalizationType","MAWLocalizationUtils","MAWWriteMsgTxns","WATimeUtils","emptyFunction","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f){return a.threads.get({jid:e}).then(function(e){if(e==null)throw c("err")("Invalid chat Id when try to write admin message for unpin message");var g=b===d("MAWCurrentUser").getID()?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE,h=g===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE?[b]:[];h=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:h,adminType:g,version:1},e.jid,d("WATimeUtils").castMillisTimeToUnixTime(f),void 0,f);return d("MAWWriteMsgTxns").writeDedupedAdminMessage(a,h,e,f).then(c("emptyFunction"))})}g.writeUnpinMessageAdminMsg=a}),98);
__d("MAWWriteAdminMessageForUnpinMessageApi",["MAWIndexedDb","MAWTransactionMode","MAWWriteUnpinMessageAdminMsgTxns"],(function(a,b,c,d,e,f,g){"use strict";b=d("MAWIndexedDb").makeMsgrTransactor({chunk:(a=d("MAWTransactionMode")).READONLY,ftsBackloggedMessages:a.READWRITE,groupInfo:a.READONLY,media:a.READONLY,messages:a.READWRITE,threads:a.READWRITE},"MAWWriteAdminMessageForUnpinMessage",function(a){return function(b){var c=b.actorFbid,e=b.chatJid;b=b.serverAuthoritativeTimestampMs;return d("MAWWriteUnpinMessageAdminMsgTxns").writeUnpinMessageAdminMsg(a,c,e,b)}});g.writeAdminMessageForUnpinMessage=b}),98);
__d("WAGetIdentityKeys",["MAWTransactionMode","WADbSignal","WADbTransactor","WAErr","WALogger","WASignalKeys"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] ",""]);h=function(){return a};return a}var i="IdentityKey was null";a=d("WADbTransactor").makeSignalTransactor({meta:d("MAWTransactionMode").READONLY},"getIdentityKeys",function(a){return function(){return a.meta.get(d("WADbSignal").MetaKeysEnum.identityKeyPair).then(function(a){a=a==null?void 0:a.value.identityKeyPair;if(a==null){d("WALogger").ERROR(h(),i);throw c("WAErr")(i)}var b=d("WASignalKeys").serializePubKey(a);a=a.privateKey;return{identityPrivateKey:a,identityPublicKey:b}})}});g.errNullKey=i;g.getIdentityKeys=a}),98);
__d("WAGetRemotePublicIdentityKey",["MAWTransactionMode","WADbTransactor","WAJids"],(function(a,b,c,d,e,f,g){"use strict";a=d("WADbTransactor").makeSignalTransactor({identity:d("MAWTransactionMode").READONLY},"getRemotePublicIdentityKey",function(a){return function(b,c){c=d("WAJids").toMsgrUserJid(c);c=d("WAJids").toDeviceJid(c,b);return a.identity.get(c).then(function(a){return a==null?null:{remotePublicIdentityKey:a.identity}})}});g.getRemotePublicIdentityKey=a}),98);
__d("WAGetThreadDevicesInfoApi",["MAWTransactionMode","WADbTransactor","WAHex","WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=d("WADbTransactor").makeSignalTransactor({identity:d("MAWTransactionMode").READONLY},"getThreadDevicesInfo",function(a){return function(b){b=b.fbid;b=d("WAJids").toMsgrUserJid(b);return a.identity.where("userJid").equals(b).toArray().then(function(a){return a.map(function(a){return{deviceId:d("WAJids").extractDeviceId(a.deviceJid),firstSeenTs:a.firstSeenTs!=null?d("WATimeUtils").toDate(a.firstSeenTs):null,identityKey:d("WAHex").toHex(a.identity).replace(/(.{2})/g,"$1 ").trim()}})})}});g.getThreadDevicesInfo=a}),98);
__d("MAWBridgeHandlers",["IGDHandleContinueMediaDownload","MAWBackfillThreadsForOccamadilloApi","MAWBulkCreateThread","MAWChangeSecurityAlertSettingApi","MAWChangeSecurityAlertSettingForSelfApi","MAWCheckIfShowOpenMessageHistoryApi","MAWClearSignalAndTempStores","MAWCompareThreadParticipantsApi","MAWCompleteUndoThreadCutoverApi","MAWCreateThreadApi","MAWCreateThreadThroughMI","MAWDeleteThreadApi","MAWDownloadMediaForUI","MAWDyiDownloadMedia","MAWDyiGetThreadList","MAWEBUploadTrackingUtils","MAWEbUploadQueue","MAWEncryptedBackupsStateManager","MAWEphemeralSettingsCache","MAWFTSDataSync","MAWFTSEBMessagesDataSync","MAWGetAllMessageIdsAndRangesForThreadApi","MAWGetAllThreadsAsJsonApi","MAWGetBlobDataUrlByMediaIdApi","MAWGetBlobDataUrlByXMAIdApi","MAWGetDeviceChangeAlertsByOptionsApi","MAWGetEphemeralSettingsApi","MAWGetGroupSuperAdminApi","MAWGetLatestThreadIdsApi","MAWGetMaybeNextNonAdminMsgSortOrderMsApi","MAWGetProtocolMsgIdByMediaMsgId","MAWGetProtocolMsgIdByMsgId","MAWGetSecureThreadTotalCount","MAWGetSecurityAlertSettingApi","MAWGetSecurityAlertSettingForSelfAndContactApi","MAWGetThreadLastMessageTsApi","MAWGetThreadLastNumMessagesBySortOrderApi","MAWGetThreadsInfoApi","MAWGetThumbnailBlobDataUrlByMediaIdApi","MAWGetWAIDevices","MAWGetWATimeApi","MAWGetWorkerHeartbeatApi","MAWGetWorkerStatusApi","MAWInsertAdminMessageInCutoverThreadsApi","MAWLoadMediaApi","MAWLoadMsgsApi","MAWLoadThreadsTxns","MAWMarkBackupAsCompleted","MAWMarkThreadAsUnreadApi","MAWOptimisticUploadMedia","MAWPredistributeSKDMApi","MAWRestoreMsgsTxns","MAWSaveRTCCallXMAMsg","MAWSendChatStateFromComposerApi","MAWSetEphemeralSettingsFromFrontendApi","MAWSetEphemeralSettingsOfPeerFromMIApi","MAWSharedCOP","MAWUpdateDeviceChangeAlertsApi","MAWUpdateLSThreadFromGroupInfoApi","MAWWriteAdminMessageForDualThreadCutoverApi","MAWWriteAdminMessageForEphemeralSettingsChange","MAWWriteAdminMessageForPinMessageApi","MAWWriteAdminMessageForThreadHotlikeCustomizationApi","MAWWriteAdminMessageForThreadNicknameCustomizationApi","MAWWriteAdminMessageForThreadPhotoCustomizationApi","MAWWriteAdminMessageForThreadThemeCustomizationApi","MAWWriteAdminMessageForUnpinMessageApi","Promise","WAGetCurrentUserDeviceInfoApi","WAGetIdentityKeys","WAGetRemotePublicIdentityKey","WAGetThreadDevicesInfoApi","WALogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["LoadMoreMsgs from COP fails: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[maw_core_lla] Handler not implemented and should not be used outside Instamadillo"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[messenger_e2ee_web] Handler not implemented and should not be used outside of Instamadillo"]);k=function(){return a};return a}a={ackWithInstanceKey:function(a){return d("MAWEbUploadQueue").ackWithInstanceKey(a.instanceKey,a.success)},addEbUploadTrackingWorkerQPL:function(a){return d("MAWEBUploadTrackingUtils").handleBridgeEbUploadTrackingQPL(a.qplType,a.qplInstanceKey,a.pointName,a.annotations)},backfillThreadsForOccamadillo:function(){return d("MAWBackfillThreadsForOccamadilloApi").backfillThreadsForOccamadillo()},backupWriteCompletionHook:function(){d("WALogger").WARN(k());return(h||(h=b("Promise"))).resolve()},bulkCreateThread:function(a){return d("MAWBulkCreateThread").bulkCreateThread(a)},changeSecurityAlertSetting:function(a){return d("MAWChangeSecurityAlertSettingApi").changeSecurityAlertSetting(a.isEnableAlert)},changeSecurityAlertSettingForSelf:function(a){return d("MAWChangeSecurityAlertSettingForSelfApi").changeSecurityAlertSettingForSelf(a.isEnableSelfAlert)},checkForDecryptionFailuresToPointRestore:function(){return d("MAWRestoreMsgsTxns").checkForDecryptionFailuresToPointRestore()},checkIfGroupParticipant:function(a){return d("MAWLoadThreadsTxns").checkIfGroupParticipant(a)},checkIfShowOpenMessageHistory:function(a){return d("MAWCheckIfShowOpenMessageHistoryApi").checkIfShowOpenMessageHistory(a.chatJid,a.timestampMs)},clearSignalAndTempStores:function(a){return d("MAWClearSignalAndTempStores").clearSignalAndTempStores()},compareThreadParticipants:function(a){return d("MAWCompareThreadParticipantsApi").compareThreadParticipants(a.participantIds,a.existingGroup)},completeUndoThreadCutover:function(a){return d("MAWCompleteUndoThreadCutoverApi").completeUndoThreadCutover(a)},continueMediaDownload:function(a){return d("IGDHandleContinueMediaDownload").handleContinueMediaDownload(a)},createThread:function(a){return d("MAWCreateThreadApi").createThread(a.contactFbid,a.threadKey,a.description)},createThreadThroughMI:function(a){return d("MAWCreateThreadThroughMI").createThreadThroughMI(a)},deleteThread:function(a){return d("MAWDeleteThreadApi").deleteThread(a.chatJid)},downloadMediaForUI:function(a){return d("MAWDownloadMediaForUI").downloadMediaForUI(a)},dyiDownloadMedia:function(a){return d("MAWDyiDownloadMedia").dyiDownloadMedia(a.protocolMsgId,a.hash,a.mediaEntry)},dyiGetThreadList:function(a){return d("MAWDyiGetThreadList").dyiGetThreadList(a.threadJids,a.qplInstanceKeyE2E)},getAllMessageIdsAndRangesForThread:function(a){return d("MAWGetAllMessageIdsAndRangesForThreadApi").getAllMessageIdsAndRangesForThread(a.chatJid,a.limit)},getAllThreadsAsJson:function(){return d("MAWGetAllThreadsAsJsonApi").getAllThreadsAsJson()},getBlobDataUrlByHashedPlaintextHash:function(a){return d("MAWGetBlobDataUrlByMediaIdApi").getBlobDataUrlByHashedPlaintextHash(a.plaintextHash,a.description,a.qplInstanceKey)},getBlobDataUrlByMediaId:function(a){return d("MAWGetBlobDataUrlByMediaIdApi").getBlobDataUrlByMediaId(a.mediaId,a.description,a.qplInstanceKey)},getBlobDataUrlByXMAId:function(a){return d("MAWGetBlobDataUrlByXMAIdApi").getBlobDataUrlByXMAId(a.xmaId,a.infoType,a.description)},getCurrentUserDeviceId:function(){return d("WAGetCurrentUserDeviceInfoApi").getCurrentUserDeviceId()},getCurrentUserDeviceInfo:function(){return d("WAGetCurrentUserDeviceInfoApi").getCurrentUserDeviceInfo()},getDeviceChangeAlertsByOptions:function(a){return d("MAWGetDeviceChangeAlertsByOptionsApi").getDeviceChangeAlertsByOptions(a.options)},getEphemeralSettings:function(a){return d("MAWGetEphemeralSettingsApi").getEphemeralSettings(a.threadId)},getGroupSuperAdmin:function(a){return d("MAWGetGroupSuperAdminApi").getGroupSuperAdmin(a.chatJid)},getIdentityKeys:function(a){return d("WAGetIdentityKeys").getIdentityKeys()},getLatestThreadIds:function(a){return d("MAWGetLatestThreadIdsApi").getLatestThreadIds(a.numThreads)},getMaybeNextNonAdminMsgSortOrderMs:function(a){return d("MAWGetMaybeNextNonAdminMsgSortOrderMsApi").getMaybeNextNonAdminMsgSortOrderMs(a.chatJid,a.mayBeAdminMsgId)},getProtocolMsgIdByMediaMsgId:function(a){return d("MAWGetProtocolMsgIdByMediaMsgId").getProtocolMsgIdByMediaMsgId(a.msgId)},getProtocolMsgIdByMsgId:function(a){return d("MAWGetProtocolMsgIdByMsgId").getProtocolMsgIdByMsgId(a.msgId)},getRemotePublicIdentityKey:function(a){return d("WAGetRemotePublicIdentityKey").getRemotePublicIdentityKey(a.deviceId,a.userId)},getSecureThreadTotalCount:function(a){return d("MAWGetSecureThreadTotalCount").getSecureThreadTotalCount()},getSecurityAlertSetting:function(a){return d("MAWGetSecurityAlertSettingApi").getSecurityAlertSetting()},getSecurityAlertSettingForSelfAndContact:function(a){return d("MAWGetSecurityAlertSettingForSelfAndContactApi").getSecurityAlertSettingForSelfAndContact()},getThreadDevicesInfo:function(a){return d("WAGetThreadDevicesInfoApi").getThreadDevicesInfo(a)},getThreadIdByDeduplicationKey:function(a){return d("MAWGetThreadsInfoApi").getThreadIdByDeduplicationKey(a.deduplicationKey)},getThreadLastMessageTs:function(a){return d("MAWGetThreadLastMessageTsApi").getThreadLastMessageTs(a.threadKey)},getThreadLastNumMessagesBySortOrder:function(a){return d("MAWGetThreadLastNumMessagesBySortOrderApi").getThreadLastNumMessagesBySortOrder(a.threadKey,a.numMsgs)},getThumbnailBlobDataUrlByHashedPlaintextHash:function(a){return d("MAWGetThumbnailBlobDataUrlByMediaIdApi").getThumbnailBlobDataUrlByHashedPlaintextHash(a.plaintextHash,a.description,a.qplInstanceKey)},getThumbnailBlobDataUrlByMediaId:function(a){return d("MAWGetThumbnailBlobDataUrlByMediaIdApi").getThumbnailBlobDataUrlByMediaId(a.mediaId,a.description,a.qplInstanceKey)},getWAIDevices:function(a){return d("MAWGetWAIDevices").getWAIDevices(a)},getWATime:function(){return d("MAWGetWATimeApi").getWATime()},getWorkerHeartbeat:function(){return d("MAWGetWorkerHeartbeatApi").getWorkerHeartbeat()},getWorkerStatus:function(){return d("MAWGetWorkerStatusApi").getWorkerStatus()},handleInstamadilloDYIRangeQueryRestore:function(){d("WALogger").WARN(j());return(h||(h=b("Promise"))).resolve()},insertAdminMessageInCutoverThreads:function(a){return d("MAWInsertAdminMessageInCutoverThreadsApi").insertAdminMessageInCutoverThreads(a)},loadMoreMedia:function(a){return d("MAWLoadMediaApi").loadMoreMedia(a)},loadMoreMsgs:function(a){return d("MAWLoadMsgsApi").loadMsgs(a.chatJid,a.offsetMsgId,a.numMsgs,a.direction)},loadMsgsByExternalId:function(a){return d("MAWLoadMsgsApi").loadMsgsByExternalId(a.externalId,a.config)},markBackupAsCompleted:function(a){return d("MAWMarkBackupAsCompleted").markBackupAsCompleted(a)},markThreadAsUnread:function(a){return d("MAWMarkThreadAsUnreadApi").markThreadAsUnread(a.chatJid)},maw_load_msgs:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.actionType==="user")try{yield d("MAWSharedCOP").getCOP().loadMoreMsgs(a.chatJid,a.numMsgs)}catch(a){d("WALogger").ERROR(i(),a)}return d("MAWLoadMsgsApi").loadMsgsFromTs(a.chatJid,a.numMsgs,a.direction,a.sortOrderMs,a.includeOriginalMsg,a.msgId,a.config)});function c(b){return a.apply(this,arguments)}return c}(),optimisticUploadMedia:function(a){return d("MAWOptimisticUploadMedia").optimisticUploadMedia(a)},predistributeSKDM:function(a){return d("MAWPredistributeSKDMApi").predistributeSKDM(a.groupJid,a.userJids)},saveRTCCallXMAMsg:function(a){return d("MAWSaveRTCCallXMAMsg").saveRTCCallXMAMsg(a)},search:function(a){return d("MAWFTSDataSync").search(a)},searchFTSGetThreadsRestoreStatus:function(a){return d("MAWFTSEBMessagesDataSync").searchFTSGetThreadsRestoreStatus(a)},searchFTSReportTabAlive:function(a){return d("MAWFTSEBMessagesDataSync").searchFTSReportTabAlive(a)},searchFTSReportTabDestroy:function(a){return d("MAWFTSEBMessagesDataSync").searchFTSReportTabDestroy(a)},searchFTSReportTabForeground:function(a){return d("MAWFTSEBMessagesDataSync").searchFTSReportTabForeground(a)},searchFTSReportTabTaskComplete:function(a){return d("MAWFTSEBMessagesDataSync").searchFTSReportTabTaskComplete(a)},searchFTSRequestRestoreTask:function(a){return d("MAWFTSEBMessagesDataSync").searchFTSRequestRestoreTask(a)},searchGetFTSNextTimestamp:function(a){return d("MAWFTSEBMessagesDataSync").searchGetFTSNextTimestamp(a)},searchIndexUpdate:function(a){return d("MAWFTSEBMessagesDataSync").searchIndexUpdate(a)},searchSetFTSNextTimestamp:function(a){return d("MAWFTSEBMessagesDataSync").searchSetFTSNextTimestamp(a)},sendChatStateFromComposer:function(a){return d("MAWSendChatStateFromComposerApi").sendChatStateFromComposer(a)},setEncryptedBackupsState:function(a){return d("MAWEncryptedBackupsStateManager").setEncryptedBackupsState(a.newState)},setEphemeralSettingCache:function(a){return d("MAWEphemeralSettingsCache").setEphemeralSettingCache(a.jid,a.settings)},setEphemeralSettingsFromFrontend:function(a){return d("MAWSetEphemeralSettingsFromFrontendApi").setEphemeralSettingsFromFrontend(a)},setEphemeralSettingsFromMI:function(a){return d("MAWSetEphemeralSettingsOfPeerFromMIApi").setEphemeralSettingsFromMI(a)},updateDeviceChangeAlerts:function(a){return d("MAWUpdateDeviceChangeAlertsApi").updateDeviceChangeAlerts(a.alert)},updateLSThreadFromGroupInfo:function(a){return d("MAWUpdateLSThreadFromGroupInfoApi").updateLSThreadFromGroupInfo(a.groupJid)},writeAdminMessageForDualThreadCutover:function(a){return d("MAWWriteAdminMessageForDualThreadCutoverApi").writeAdminMessageForDualThreadCutover(a)},writeAdminMessageForEphemeralSettingsChange:function(a){return d("MAWWriteAdminMessageForEphemeralSettingsChange").writeAdminMessageForEphemeralSettingsChange(a)},writeAdminMessageForPinMessage:function(a){return d("MAWWriteAdminMessageForPinMessageApi").writeAdminMessageForPinMessage(a)},writeAdminMessageForThreadHotlikeCustomization:function(a){return d("MAWWriteAdminMessageForThreadHotlikeCustomizationApi").writeAdminMessageForThreadHotlikeCustomization(a)},writeAdminMessageForThreadNicknameCustomization:function(a){return d("MAWWriteAdminMessageForThreadNicknameCustomizationApi").writeAdminMessageForThreadNicknameCustomization(a)},writeAdminMessageForThreadPhotoCustomization:function(a){return d("MAWWriteAdminMessageForThreadPhotoCustomizationApi").writeAdminMessageForThreadPhotoCustomization(a)},writeAdminMessageForThreadThemeCustomization:function(a){return d("MAWWriteAdminMessageForThreadThemeCustomizationApi").writeAdminMessageForThreadThemeCustomization(a)},writeAdminMessageForUnpinMessage:function(a){return d("MAWWriteAdminMessageForUnpinMessageApi").writeAdminMessageForUnpinMessage(a)}};g.bridgeHandlers=a}),98);
__d("MAWCommonBridgeErrorTransport",["MAWBridge"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("MAWBridge").getBridge().fireAndForget("event","fbErrorProxy",a)}g.log=a}),98);
__d("MAWCommonWebWorkerErrorLogging",["Env","ErrorGuard","ErrorPubSub","ErrorSetup","JSErrorLoggingConfig","MAWCommonBridgeErrorTransport","SiteData","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(){var a;(h||(h=c("ErrorGuard"))).skipGuardGlobal((i||(i=c("Env"))).nocatch);c("ErrorSetup").setup({appId:c("JSErrorLoggingConfig").appId,client_revision:c("SiteData").client_revision,extra:c("JSErrorLoggingConfig").extra,loggingFramework:"worker",projectBlocklist:c("JSErrorLoggingConfig").projectBlocklist,report_source:c("JSErrorLoggingConfig").report_source,report_source_ref:c("JSErrorLoggingConfig").report_source_ref,sample_weight:(a=c("JSErrorLoggingConfig").sampleWeight)!=null?a:0,site_category:"armadillo-worker"},d("MAWCommonBridgeErrorTransport").log);self.addEventListener("unhandledrejection",function(a){a=a.reason;(j||(j=c("ErrorPubSub"))).reportError(c("getErrorSafe")(a))})}c("ErrorSetup").preSetup();g.init=a}),98);
__d("MAWCompareWorkerSetupArgs",["FBLogger","WACryptoUtils","err"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){if((a==null?void 0:a.prefixAndSuffix)!==(b==null?void 0:b.prefixAndSuffix))return!1;a=a==null?void 0:a.encryptionKey;b=b==null?void 0:b.encryptionKey;if(a==null&&b==null)return!0;if(a==null&&b!=null||a!=null&&b==null)return!1;if(a==null||b==null)throw c("err")("encryptionKeyA and encryptionKeyB cannot be null at this point");return d("WACryptoUtils").arrayBuffersEqual(a,b)}function a(a,b){if(a.sessionId!==b.sessionId){c("FBLogger")("maw_worker").warn("[MAWCompareWorkerSetupArgs] Session id has changed. Worker session id: %s, Frontend session id: %s",a.sessionId,b.sessionId);return!0}return b.fbId!==a.fbId||!h(b.vaultMaterials,a.vaultMaterials)}g.didWorkerSetupArgsChange=a}),98);
__d("MAWDbInitIndexedDb",["MAWIndexedDb","MWEARKeychainV3","WALogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DB INIT] REGULAR DB INIT"]);h=function(){return a};return a}function a(){d("WALogger").LOG(h());return d("MAWIndexedDb").makeDB(d("MWEARKeychainV3").getDbEncryptionKey,{enableDataSyncMiddleware:!0,enableMutationValidator:c("gkx")("1627")})}g.dbInit=a}),98);
__d("MAWReStoreMigrationUtils",["Deferred","MAWDbAppMeta","MAWDbObjEncryption","MAWDbSchema.restore","MAWGetDbVersion","MAWReStoreDbSetup","MWEARKeychainV3","Promise","WATagsLogger","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error fetching batch: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["REQUESTING ",""]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["DBInit","Migration"]),l=new Map(d("MAWDbSchema.restore").clientSchema.map(function(a){return[a.name,a]}));function a(a){return new(h||(h=b("Promise")))(function(b,c){var d=indexedDB.open(a);d.onupgradeneeded=function(a){a.target.transaction.abort(),b(null)};d.onerror=function(a){c("Error opening database: "+a.target.error)};d.onsuccess=function(a){a=a.target.result;b(a)}})}function e(a){var b=new(c("Deferred"))();a=indexedDB.deleteDatabase(a);a.onsuccess=function(){return b.resolve()};a.onerror=function(a){return b.reject(a)};return b.getPromise()}function m(a,c){var e=a.transaction("appMeta").objectStore("appMeta");return new(h||(h=b("Promise")))(function(a,b){var f=e.get(c);f.onsuccess=function(b){b=b.target.result;if(b==null){a();return}a(d("MAWDbObjEncryption").decryptDbObj(b,"appMeta",d("MWEARKeychainV3").getDbEncryptionKey))};f.onerror=function(a){k.LOG(j(),a),b(a)}})}function n(a,c,e){if(a==null)return(h||(h=b("Promise"))).resolve();var f=a.transaction("appMeta","readwrite").objectStore("appMeta");return new(h||(h=b("Promise")))(function(a,b){var g;g=f.put(d("MAWDbObjEncryption").encryptDbObj({key:c,value:(g={},g[c]=e,g)},"appMeta",d("MWEARKeychainV3").getDbEncryptionKey));g.onsuccess=function(){a()};g.onerror=function(a){b(a)}})}function o(a,c){return new(h||(h=b("Promise")))(function(b,d){var e=a.transaction(c).objectStore(c);e=e.count();e.onsuccess=function(a){b(a.target.result)};e.onerror=function(a){d(a)}})}function p(a,c){var d="e2ee_"+c;c=l.get(d);return c==null?(h||(h=b("Promise"))).resolve(-1):a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new WeakMap();a=(yield a[d].keys(b,"asc",void 0));b=0;var c=(yield a.next());while(!c.done)b++,c=(yield a.next());return b});return function(b){return a.apply(this,arguments)}}(),"readonly",void 0,void 0,f.id+":152")}function q(a,d){var e=100,f=[];return new(h||(h=b("Promise")))(function(b){if(d==null){b([]);return}var g=a==null?d.openCursor():d.openCursor(IDBKeyRange.lowerBound(a,!0));g.onsuccess=function(a){a=a.target.result;a&&f.length<e?(f.push([a.key,a.value]),a["continue"]()):b(f)};g.onerror=function(a){k.ERROR(i(),a.target.error);throw c("err")("Error opening cursor: "+a.target.error)}})}function r(a,c){return new(h||(h=b("Promise")))(function(b){var d=a.transaction([c],"readwrite"),e=d.objectStore(c);e.add({}).onsuccess=function(a){b(a.target.result);try{d.abort()}catch(a){}}})}function s(a){var b=d("MAWGetDbVersion").getArmadilloDbVersion()*10;return a.version===b}function t(){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("MAWReStoreDbSetup").getDB());yield a.runInTransaction(function(a){return a.e2ee_appMeta.put({key:d("MAWDbAppMeta").AppMetaKeysEnum.hasMigratedFromDexie,value:(a={},a[d("MAWDbAppMeta").AppMetaKeysEnum.hasMigratedFromDexie]=!0,a)})},"readwrite",void 0,void 0,f.id+":231")});return u.apply(this,arguments)}g.getDBForMigration=a;g.deleteDB=e;g.fetchAppMetaKey=m;g.putAppMetaKey=n;g.indexedDBCount=o;g.restoreCount=p;g.fetchIDBBatch=q;g.getNextKey=r;g.isLatestDexieVersion=s;g.selfCertify=t}),98);
__d("MAWRestoreDbBackwardMigration",["I64","MAWBridge","MAWCurrentUser","MAWDbAppMeta","MAWDbObjEncryption","MAWDbSchema.restore","MAWDexieTable","MAWIndexedDBDeletion","MAWIndexedDb","MAWIndexedDbMetadata","MAWQplProxy","MAWReStoreDbSetup","MAWReStoreMigrationUtils","MAWRestoreDbState","MAWRestoreSchemaIndexedDB","MAWTransactionMode","MWEARKeychainV3","Promise","ReQL","ReStoreMigrateUtil","WAExceededStorageQuota","WATagsLogger","asyncToGeneratorRuntime","gkx","promiseDone","qex","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to close db migration indicator: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Successfully closed db migration indicator"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Armadillo DB to ReStore migration error: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Database cleanup done."]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Migration complete, adding meta to allow migrations from Dexie to ReStore"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Migrating data from v3 to v1 for ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Purged all stale data"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Purging stale data v1"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Starting backwards migration to dexie"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Checking if we need to migrate the database: ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["Already migrated to Dexie"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["No ReStore database to migrate"]);u=function(){return a};return a}var v=d("WATagsLogger").TAGS(["DBInit","Migration","Revert"]);function w(a){return function(b){var c;return babelHelpers["extends"]({},b,(c={},c[a]=(i||(i=d("I64"))).to_int32(b[a]),c))}}function x(){if(c("gkx")("1159")&&d("MAWRestoreDbState").getTargetDbState()==="dexie")return!0;if(c("gkx")("1159")&&d("MAWRestoreDbState").getTargetDbState()==="restore")return!1;if(c("qex")._("1210")===!0)return!1;return c("qex")._("736")===!0?!1:c("gkx")("23906")&&c("gkx")("23907")}function a(){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("MAWCurrentUser").getID();a=d("MAWIndexedDbMetadata").restoreDbName2(a);if(!x())return!1;var e=(yield d("MAWReStoreMigrationUtils").getDBForMigration(a));if(e==null){v.LOG(u());return!0}e.close();e=d("MAWQplProxy").startQplUserFlow(c("qpl")._(1056837640,"750"));var f=d("MAWIndexedDb").makeMAWIndexedDBFactory(v);try{e.addPoint("get_restore_db_start");var g=(yield d("MAWReStoreDbSetup").getDB());e.addPoint("get_restore_db_end");var i=(yield g.tables.e2ee_appMeta.get("restoreToDexieMigrationComplete"));if((i==null?void 0:i.value.restoreToDexieMigrationComplete)===!0){v.LOG(t());d("MAWRestoreSchemaIndexedDB").closeDB();e.endSuccess({string:{reason:"already_migrated"}});return!0}v.LOG(s(),g!=null);v.LOG(r());d("MAWBridge").getBridge().fireAndForget("event","isDbMigrating",{status:!0});e.addPoint("dexie_init_start");yield f.makeDB(d("MWEARKeychainV3").getDbEncryptionKey,{enableDataSyncMiddleware:!0,enableMutationValidator:!1});e.addPoint("dexie_init_end");var y=f.getDBExn(),z=new Map(d("MAWDbSchema.restore").clientSchema.map(function(a){return[a.name,a]}));i=Object.keys(d("MAWDbSchema.restore").msgrDbStores).filter(function(a){return z.has(a)});var A=new Map(i.map(function(a){return[a,a.replace("e2ee_","")]})),B=Array.from(A.values());v.LOG(q());e.addPoint("purge_old_data_start");yield y.transact(d("MAWTransactionMode").READWRITE,B,function(){return d("MAWDexieTable").dexieAll(B.map(function(a){return y.stores[a].clear()})).then(function(){v.LOG(p())})});e.addPoint("purge_old_data_end");e.addPoint("data_migration_start");yield (h||(h=b("Promise"))).all(i.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c=A.get(a),e=z.get(a);b=(b=e==null?void 0:e.primary_key)!=null?b:[];var f=b[0];b=(b=e==null?void 0:e.auto_increment)!=null?b:!1;if(c==null)return;var h=y.stores[c];v.LOG(o(),a);var i=!0,j=!1,k;try{var l=function*(){var a=p,b=f!=null&&(e==null?void 0:e.auto_increment)===!0?a.map(w(f)):a;yield y.transact(d("MAWTransactionMode").READWRITE,[c],function(){return h.bulkPut(b).then(function(){})});g.clearCacheIfSupported==null?void 0:g.clearCacheIfSupported()};for(var m=babelHelpers.asyncIterator(d("ReStoreMigrateUtil").fetchReQLBatch(d("ReQL").fromTableAscending(g.tables[a]),100)),n,p;n=(yield m.next()),i=n.done,p=(yield n.value),!i;i=!0)yield* l()}catch(a){j=!0,k=a}finally{try{!i&&m["return"]!=null&&(yield m["return"]())}finally{if(j)throw k}}if(b&&f!=null){var q=(yield g.tables[a].peekNextAutoIncrementId());q>0&&(yield y.transact(d("MAWTransactionMode").READWRITE,[c],function(){var a;return h.add((a={},a[f]=q,a)).then(function(){return h["delete"](q)})}))}});return function(b){return a.apply(this,arguments)}}()));e.addPoint("data_migration_end");e.addAnnotations({"int":{num_of_tables:i.length}});v.LOG(n());var C=y.stores.appMeta,D=d("MAWDbAppMeta").AppMetaKeysEnum.hasMigratedFromDexie;yield y.transact(d("MAWTransactionMode").READWRITE,["appMeta"],function(){var a;return C.put(d("MAWDbObjEncryption").encryptDbObj({key:D,value:(a={},a[D]=!1,a)},"appMeta",d("MWEARKeychainV3").getDbEncryptionKey))});d("MAWBridge").getBridge().fireAndForget("event","isDbMigrating",{status:!1});d("MAWRestoreSchemaIndexedDB").closeDB();yield d("MAWIndexedDBDeletion").deleteDB(a,"maw_v3");yield f.closeDB();e.endSuccess();v.LOG(m());return!0}catch(a){yield f.closeDB();d("MAWRestoreSchemaIndexedDB").closeDB();v.ERROR(l(),a);d("WAExceededStorageQuota").checkQuotaExceededError(a);i=typeof a.message==="string"?a.message:"Unknown error";e.endFail("migration_failed_with_error",{string:{error:i}});return!1}finally{c("promiseDone")(d("MAWBridge").getBridge().sendAndReceive("event","isDbMigrating",{status:!1}).then(function(){v.LOG(k())})["catch"](function(a){v.ERROR(j(),a)}))}});return y.apply(this,arguments)}g.migrateToDexieFromRestore=a}),98);
__d("MWOneDbDualWriteHooksIgnore",[],(function(a,b,c,d,e,f){"use strict";var g=!1;function a(){g=!0;return function(){g=!1}}function b(){return g}f.ignore=a;f.isIgnored=b}),66);
__d("WADbSchema",[],(function(a,b,c,d,e,f){"use strict";a={e2ee_mediaKeys:!0,e2ee_browserEncryptionMeta:!0,e2ee_contacts:!0,e2ee_danglingQueue:!0,e2ee_identity:!0,e2ee_meta:!0,e2ee_personalSenderKeyStatuses:!0,e2ee_prekey:!0,e2ee_prekeyGeneration:!0,e2ee_receipts:!0,e2ee_senderKeySessions:!0,e2ee_sentBytesCache:!0,e2ee_session:!0,e2ee_signedPrekey:!0,e2ee_staleQueue:!0,e2ee_stanzaQueue:!0,e2ee_tasks:!0};f.signalDbStores=a}),66);
__d("MAWRestoreDbMigration",["I64","LSQueryBulkUtils","MAWBridge","MAWDbAppMeta","MAWDbObjEncryption","MAWDbSchema.restore","MAWGetDbVersion","MAWIndexedDb","MAWReStoreDbSetup","MAWReStoreMigrationUtils","MAWRestoreDbState","MWEARKeychainV3","MWOneDbDualWriteHooksIgnore","WADbSchema","WAResultOrError","WATagsLogger","err","gkx","justknobx","promiseDone","qex"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to close db migration indicator: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Successfully closed db migration indicator"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Incrementing failed migration counter: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Incrementing failure count as executeMigration returned false"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Resetting DB migration from restoreToDexie to allow backwards migration"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Marking DB as not needing migration in the future."]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Migration completed with status: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Migrated database is self certifying that migration completed successfully"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Starting DB migration"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Skipping due to previous failures"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Migration is currently disabled, skipping the attempt"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["Already migrated db, no need to migrate"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["Skipping due to source db not existing"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["Dexie is not on latest version, updating to latest version: V",""]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["Checking if we need to migrate the database"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["Completing migration"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["Data counts match.... completing migration"]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["Data moved, checking for consistency"]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["Moving data"]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["Previous migration attempt purged"]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["Purging previous migration attempt"]);C=function(){return a};return a}var D=d("WATagsLogger").TAGS(["DBInit","Migration"]),E=c("justknobx")._("1864"),F=c("justknobx")._("1871"),G=new Map(d("MAWDbSchema.restore").clientSchema.filter(function(a){return!(a.name in d("WADbSchema").signalDbStores)}).map(function(a){return[a.name,a]})),H=function(a){return new Promise(function(b){return setTimeout(b,a)})};function I(){return d("MAWRestoreDbState").getTargetDbState()==="restore"?!0:c("qex")._("744")===!0||c("gkx")("23908")}async function J(a){a=await a.tables.e2ee_appMeta.get(d("MAWDbAppMeta").AppMetaKeysEnum.hasMigratedFromDexie);return(a==null?void 0:a.value.hasMigratedFromDexie)===!0}async function K(a,b){var c=await d("MAWReStoreMigrationUtils").getDBForMigration(a);if(c==null)return;c.close();await d("MAWReStoreDbSetup").closeDB();c=await d("MAWReStoreDbSetup").getDB();c=await J(c);c||(D.LOG(C()),b==null?void 0:b.addAnnotations({bool:{purgedPreviousAttempt:!0}}),await d("MAWReStoreDbSetup").closeDB(),await d("MAWReStoreMigrationUtils").deleteDB(a),D.LOG(B()))}async function L(a,b,c){if(b==null)return;var e="e2ee_"+c,g=await d("MAWReStoreMigrationUtils").fetchIDBBatch(null,b.transaction(c).objectStore(c)),i=G.get(e)||{},j=i.auto_increment;i=i.primary_key;i=(i=i)!=null?i:[];var k=i[0];i=async function(){var i=g.map(function(a){a[0];a=a[1];a=babelHelpers.extends({},d("MAWDbObjEncryption").decryptDbObj(a,c,d("MWEARKeychainV3").getDbEncryptionKey));k!=null&&j===!0&&(a[k]=(h||(h=d("I64"))).of_int32(a[k]));return a});await a.runInTransaction(async function(a){await d("LSQueryBulkUtils").bulkPut(a[e],i)},"readwrite",void 0,void 0,f.id+":145");a.clearCacheIfSupported==null?void 0:a.clearCacheIfSupported();g=await d("MAWReStoreMigrationUtils").fetchIDBBatch(g[g.length-1][0],b.transaction(c).objectStore(c))};while(g.length)await i();if(j===!0){i=await d("MAWReStoreMigrationUtils").getNextKey(b,c);var l=(h||(h=d("I64"))).of_int32(i);await a.runInTransaction(async function(a){var b;b=(b={},b[k]=l,b);var c=d("MWOneDbDualWriteHooksIgnore").ignore();await a[e].add(b);await a[e].delete(l);c()},"readwrite",void 0,void 0,f.id+":162")}}async function M(a,b,e){var f=Array.from(a.objectStoreNames).filter(function(a){return G.has("e2ee_"+a)});D.LOG(A());e==null?void 0:e.addPoint("table-migration-start");await f.reduce(function(c,d){return c.then(function(){return L(b,a,d)})},Promise.resolve());e==null?void 0:e.addPoint("table-migration-end");D.LOG(z());e==null?void 0:e.addPoint("data-verification-start");f=await f.reduce(function(c,e){return c.then(async function(c){var f=await Promise.all([d("MAWReStoreMigrationUtils").indexedDBCount(a,e),d("MAWReStoreMigrationUtils").restoreCount(b,e)]),g=f[0];f=f[1];b.clearCacheIfSupported==null?void 0:b.clearCacheIfSupported();return[].concat(c,[[e,g===f]])})},Promise.resolve([]));if(!f.every(function(a){a=a[1];return a})){f=f.filter(function(a){a=a[1];return!a}).map(function(a){a=a[0];return a});throw c("err")("count mismatch: "+f.join(",")+" ")}D.LOG(y());e==null?void 0:e.addPoint("data-verification-end");D.LOG(x());return!0}async function N(){var a;a=await ((a=navigator.storage)==null?void 0:a.estimate==null?void 0:a.estimate());return(a=a==null?void 0:a.usage)!=null?a:0}async function a(a,b,c){D.LOG(w());c==null?void 0:c.addPoint("open-source-db-start");var e=await d("MAWReStoreMigrationUtils").getDBForMigration(a);c==null?void 0:c.addPoint("open-source-db-end");c==null?void 0:c.addAnnotations({bool:{shouldRunMigration:e!=null},int:{storageSize:await N()}});if(e!=null&&d("MAWReStoreMigrationUtils").isLatestDexieVersion(e)!==!0){D.LOG(v(),d("MAWGetDbVersion").getArmadilloDbVersion());e.close();var f=d("MAWIndexedDb").makeMAWIndexedDBFactory(D,"shim_idb");await f.makeDB(d("MWEARKeychainV3").getDbEncryptionKey,{enableDataSyncMiddleware:!1,enableMutationValidator:!1});await f.closeDB();e=await d("MAWReStoreMigrationUtils").getDBForMigration(a)}if(e==null){D.LOG(u());c==null?void 0:c.addAnnotations({string:{migrationSkipReason:"new-indexeddb"}});await d("MAWReStoreMigrationUtils").selfCertify();return d("WAResultOrError").makeResult()}f=await Promise.all([d("MAWReStoreMigrationUtils").fetchAppMetaKey(e,d("MAWDbAppMeta").AppMetaKeysEnum.restoreMigrationAttempts),d("MAWReStoreMigrationUtils").fetchAppMetaKey(e,d("MAWDbAppMeta").AppMetaKeysEnum.hasMigratedFromDexie)]);a=f[0];f=f[1];a=(a=a==null?void 0:(a=a.value)==null?void 0:a.restoreMigrationAttempts)!=null?a:0;f=(f=f==null?void 0:(f=f.value)==null?void 0:f.hasMigratedFromDexie)!=null?f:!1;if(f===!0){D.LOG(t());c==null?void 0:c.addAnnotations({string:{migrationSkipReason:"previously-migrated"}});e.close();return d("WAResultOrError").makeResult()}if(!I()){D.LOG(s());c==null?void 0:c.addAnnotations({string:{migrationSkipReason:"migration-disabled"}});e.close();return d("WAResultOrError").makeError()}if(a>F){c==null?void 0:c.addAnnotations({string:{migrationSkipReason:"exceeded-max-attempts"}});D.LOG(r());e.close();return d("WAResultOrError").makeError()}c==null?void 0:c.addPoint("checking-target-db-start");await K(b,c);c==null?void 0:c.addPoint("checking-target-db-end");return O(e,c,a)}async function O(a,b,e){try{D.LOG(q());var g=await d("MAWReStoreDbSetup").getDB();if(await J(g)){D.LOG(p());b==null?void 0:b.addAnnotations({string:{migrationSkipReason:"previously-migrated-v3-indicates"}});a.close();return d("WAResultOrError").makeResult()}d("MAWBridge").getBridge().fireAndForget("event","isDbMigrating",{status:!0});var h=await Promise.race([H(E).then(function(){throw c("err")("timeout")}),M(a,g,b)]).then(function(a){return typeof a==="boolean"?a:!1});D.LOG(o(),h);h?(b==null?void 0:b.addPoint("mark-migration-complete-start"),D.LOG(n()),await d("MAWReStoreMigrationUtils").putAppMetaKey(a,d("MAWDbAppMeta").AppMetaKeysEnum.hasMigratedFromDexie,!0),D.LOG(m()),await g.runInTransaction(function(a){return a.e2ee_appMeta.put({key:d("MAWDbAppMeta").AppMetaKeysEnum.restoreToDexieMigrationComplete,value:(a={},a[d("MAWDbAppMeta").AppMetaKeysEnum.restoreToDexieMigrationComplete]=!1,a)})},"readwrite",void 0,void 0,f.id+":377"),await g.runInTransaction(function(a){return a.e2ee_appMeta.put({key:d("MAWDbAppMeta").AppMetaKeysEnum.hasMigratedFromDexie,value:(a={},a[d("MAWDbAppMeta").AppMetaKeysEnum.hasMigratedFromDexie]=!0,a)})},"readwrite",void 0,void 0,f.id+":387"),b==null?void 0:b.addPoint("mark-migration-complete-end")):(b==null?void 0:b.addPoint("incrementing-failure-counter-start"),D.LOG(l()),await d("MAWReStoreMigrationUtils").putAppMetaKey(a,d("MAWDbAppMeta").AppMetaKeysEnum.restoreMigrationAttempts,e+1),b==null?void 0:b.addPoint("incrementing-failure-counter-end"));a.close();return h?d("WAResultOrError").makeResult():d("WAResultOrError").makeError()}catch(b){a!=null&&(D.LOG(k(),b),await d("MAWReStoreMigrationUtils").putAppMetaKey(a,d("MAWDbAppMeta").AppMetaKeysEnum.restoreMigrationAttempts,e+1),a.close());throw b}finally{c("promiseDone")(d("MAWBridge").getBridge().sendAndReceive("event","isDbMigrating",{status:!1}).then(function(){D.LOG(j())}).catch(function(a){D.ERROR(i(),a)}))}}g.migrateToRestoreFromDexie=a}),98);
__d("MAWDbInitShimIndexedDb",["MAWCurrentUser","MAWGetReStoreDBError","MAWIndexedDbMetadata","MAWQplProxy","MAWReStoreDbSetup","MAWRestoreDbBackwardMigration","MAWRestoreDbMigration","MAWRestoreDbState","MAWShimIndexedDb","MWLSIndexedDBName","ReStoreIDBFactory","WAResultOrError","WATagsLogger","asyncToGeneratorRuntime","gkx","qex","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Running shimmed db init"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to migrate to shim: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error with ReStore db setup"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Shim IndexedDB initializing"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Shim IndexedDB is not enabled, early return initialisation"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to migrate back to dexie from restore: ",""]);m=function(){return a};return a}var n=d("WATagsLogger").TAGS(["DBInit","ShimIndexedDb"]);function a(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("MAWRestoreDbBackwardMigration").migrateToDexieFromRestore()["catch"](function(a){n.ERROR(m(),a);return!1}));if(a){d("MAWRestoreDbState").setIsUsingShim(!1);return}if(d("MAWRestoreDbState").getTargetDbState()!=="restore"&&c("gkx")("23906")!==!0&&c("qex")._("1210")!==!0&&c("qex")._("736")!==!0){n.LOG(l());d("MAWRestoreDbState").setIsUsingShim(!1);return}n.LOG(k());a=d("MAWCurrentUser").getID();var b=d("MAWIndexedDbMetadata").dbName(a);a=c("qex")._("1210")?d("MWLSIndexedDBName").dbName():d("MAWIndexedDbMetadata").restoreDbName2(a);var e=d("MAWQplProxy").startQplUserFlow(c("qpl")._(1056845565,"194"),{string:{version:"shim_indexed_db"}});e.addPoint("migrate-db");b=(yield d("MAWRestoreDbMigration").migrateToRestoreFromDexie(b,a,e).then(function(a){a?e.endSuccess():e.endFail("migrate-db-fail");return a})["catch"](function(a){e.addAnnotations({string:{failureReason:a}});e.endFail("migrate-db-fail");if(a instanceof c("MAWGetReStoreDBError")){n.ERROR(j());throw a}n.ERROR(i(),a);return d("WAResultOrError").makeError()}));d("MAWRestoreDbState").setIsUsingShim(b.success);if(!b.success)return;a=new(d("ReStoreIDBFactory").ReStoreIDBFactory)(yield d("MAWReStoreDbSetup").getDB());n.LOG(h());return d("MAWShimIndexedDb").makeShimDB({IDBKeyRange:d("ReStoreIDBFactory").ReStoreIDBKeyRange,enableDataSyncMiddleware:!0,enableMutationValidator:c("gkx")("1627"),indexedDB:a})});return o.apply(this,arguments)}g.dbInit=a}),98);
__d("MAWCryptoAuthTokenWrapper",["MessengerWebInitData"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("MessengerWebInitData").cryptoAuthToken}g.getCryptoAuthToken=a}),98);
__d("MAWDeviceRegistrationActions",["MAWCurrentUser","MAWDexieTable","MAWLoggerUtils","MessengerWebInitData","WACompareIdentity","WADbSignal","WALoggerTag","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": signedPrekey}"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Device Registration Meta Check] Device Id should be a number"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWDeviceRegistrationActions: sessionId is null"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);o=function(){return a};return a}var p="Device registration meta is incomplete: ",q=d("WATagsLogger").TAGS([d("MAWLoggerUtils").Tag.DeviceRegistration]);function r(a,b,e,f,g){(a!=null||b!=null||e!=null||f!=null||g!=null)&&(a==null&&q.TAGS([c("WALoggerTag").SignedPrekey]).ERROR(o(),p,d("WADbSignal").MetaKeysEnum.lastSignedPrekeyId),b==null&&q.ERROR(n(),p,d("WADbSignal").MetaKeysEnum.deviceUUID),e==null&&q.ERROR(m(),p,d("WADbSignal").MetaKeysEnum.regId),f==null&&q.ERROR(l(),p,d("WADbSignal").MetaKeysEnum.identityKeyPair),g==null&&q.ERROR(k(),p,d("WADbSignal").MetaKeysEnum.fbid))}function a(a){var b;return d("MAWDexieTable").dexieAll([a.meta.bulkGet([(b=d("WADbSignal")).MetaKeysEnum.lastSignedPrekeyId,b.MetaKeysEnum.deviceUUID,b.MetaKeysEnum.lastSessionDeviceWasLinkedTo,b.MetaKeysEnum.regId,b.MetaKeysEnum.identityKeyPair,b.MetaKeysEnum.fbid,b.MetaKeysEnum.deviceId,b.MetaKeysEnum.registrationVersion]),d("WACompareIdentity").compareIdentityDexie(a)]).then(function(b){var d=b[0],e=d[0],f=d[1],g=d[2],k=d[3],l=d[4],m=d[5],n=d[6];d=d[7];var o=b[1],s=e==null?void 0:(b=e.value)==null?void 0:b.lastSignedPrekeyId,t=f==null?void 0:(e=f.value)==null?void 0:e.deviceUUID,u=g==null?void 0:(b=g.value)==null?void 0:b.lastSessionDeviceWasLinkedTo,v=k==null?void 0:(f=k.value)==null?void 0:f.regId,w=l==null?void 0:(e=l.value)==null?void 0:e.identityKeyPair;b=m==null?void 0:(g=m.value)==null?void 0:g.fbid;var x=n==null?void 0:(k=n.value)==null?void 0:k.deviceId,y=d==null?void 0:d.value.registrationVersion;if(s==null||t==null||v==null||w==null||b==null){r(s,t,v,w,b);return null}c("MessengerWebInitData").sessionId==null&&q.ERROR(j());if(x!=null&&typeof x!=="number"){q.ERROR(i());return null}return a.signedPrekey.get(s).then(function(a){if(a==null){q.TAGS([c("WALoggerTag").SignedPrekey]).ERROR(h(),p);return null}return{deviceId:x,deviceUUID:t,identityCompareResult:o,lastSessionDeviceWasLinkedTo:u,lastSignedPrekeyId:s,registrationVersion:y,signalRegInfo:{identityKeyPair:w,regId:v,signedPreKey:a}}})})}function b(a,b){var c;return d("MAWDexieTable").dexieAll([a.meta.bulkPut([{key:(c=d("WADbSignal")).MetaKeysEnum.deviceUUID,value:{deviceUUID:b.deviceUUID}},{key:c.MetaKeysEnum.fbid,value:{fbid:d("MAWCurrentUser").getID()}},{key:c.MetaKeysEnum.regId,value:{regId:b.signalRegInfo.regId}},{key:c.MetaKeysEnum.identityKeyPair,value:{identityKeyPair:b.signalRegInfo.identityKeyPair}},{key:c.MetaKeysEnum.lastSignedPrekeyId,value:{lastSignedPrekeyId:b.signalRegInfo.signedPreKey.keyId}},{key:c.MetaKeysEnum.registrationVersion,value:{registrationVersion:b.registrationVersion}},{key:c.MetaKeysEnum.authKeyPair,value:{authKeyPair:b.signalRegInfo.authKeyPair}}]),a.signedPrekey.put(b.signalRegInfo.signedPreKey)])}function e(a,b){return a.meta.put({key:d("WADbSignal").MetaKeysEnum.deviceId,value:{deviceId:b}})}function f(a,b,c){return a.contacts.get(b).then(function(d){if(d!=null)return a.contacts.put(babelHelpers["extends"]({},d,{icdcInfo:c}));else return a.contacts.put({contactJid:b,dhash:null,icdcInfo:c})}).then(function(){})}g.getRegistrationMetaDexie=a;g.saveUnsentRegistrationMeta=b;g.saveDeviceId=e;g.saveICDC=f}),98);
__d("XArmadilloWebLinkDeviceToSessionControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/messenger/armadillo/link_device/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("MAWDeviceRegistrationSessionUtil",["CSRFGuard","CurrentMessengerUser","DTSG","DTSGUtils","MAWLoggerUtils","PHPQuerySerializer","SprinkleConfig","WAAPI","WATagsLogger","WAWorkerGlobalScope","XArmadilloWebLinkDeviceToSessionControllerRouteBuilder","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[LinkDeviceToTheSession] fetch result is not succesful"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[LinkDeviceToTheSession] success"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[LinkDeviceToTheSession] parse response error ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[LinkDeviceToTheSession] fetch is not 200: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[LinkDeviceToTheSession] fetch error ",", is fetch defined: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[LinkDeviceToTheSession] deviceUUID is null"]);n=function(){return a};return a}var o=d("WATagsLogger").TAGS([d("MAWLoggerUtils").Tag.DeviceRegistration]);function a(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e;e=(e=d("WAWorkerGlobalScope").workerGlobalScope.location)==null?void 0:e.origin;if(e==null||e==="")return;if(d("CurrentMessengerUser").isTestUser()&&e.includes("twshared"))return;if(a==null){o.ERROR(n());return}e=new URL(e).hostname;e=(e=c("XArmadilloWebLinkDeviceToSessionControllerRouteBuilder").buildUri({}).setDomain(e))==null?void 0:(e=e.setProtocol("https"))==null?void 0:e.toString();if(e==null)return;var f=d("DTSG").getToken();if(f==null)return;a={device_id:a,fb_dtsg:f};c("SprinkleConfig").param_name&&(a[c("SprinkleConfig").param_name]=c("DTSGUtils").getNumericValue(f));f=d("WAWorkerGlobalScope").workerGlobalScope.fetch;var g;try{g=(yield f(e,{body:(h||(h=c("PHPQuerySerializer"))).serialize(a),headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",redirect:"error"}))}catch(a){o.ERROR(m(),a,f!=null);return}if(!g.ok){o.ERROR(l(),g.status);return}e=(yield g.text());d("CSRFGuard").exists(e)&&(e=d("CSRFGuard").clean(e));var p;try{p=JSON.parse(e)}catch(a){o.ERROR(k(),a);return}((a=p)==null?void 0:a.success)===!0?(o.LOG(j()),yield c("WAAPI").saveLastSessionDeviceWasLinkedTo({sessionId:b})):o.WARN(i())});return p.apply(this,arguments)}g.linkDeviceToTheSession=a}),98);
__d("WAPreRegistrationCrypto",["WACryptoManager","WAErr","WASignalSignatures","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a,c,e,f,g,h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return b("regeneratorRuntime").awrap(d("WACryptoManager").generateRegistrationInfo());case 2:a=k.sent;c=a.regId;e=a.staticKeyPair;f=a.authKeyPair;g=Date.now();k.next=9;return b("regeneratorRuntime").awrap(d("WASignalSignatures").generateSignedPreKey(1,g,e));case 9:h=k.sent;i=h.plainObject;j=h.record;return k.abrupt("return",{regId:c,identityKeyPair:e,authKeyPair:f,signedPreKey:{keyId:i.id,encoded:j}});case 13:case"end":return k.stop()}},null,this)}function e(a){var b=d("WASignalSignatures").deserializeSignedPreKey(a.signedPreKey.encoded);if(b==null||b.id!==a.signedPreKey.keyId)throw c("WAErr")("Badly formatted signed prekey");return{regId:a.regId,identityPubKeyType:5,identityPubKey:a.identityKeyPair.publicKey,signedPreKey:b}}g.makeRegistrationData=a;g.serializeRegistrationData=e}),98);
__d("MAWDeviceRegistrationUtilWorker",["FBLogger","MAWConstants","MAWCurrentUser","URI","WABase64","WADbDeviceRegistration","WAPreRegistrationCrypto","WAWorkerGlobalScope","asyncToGeneratorRuntime","err","gkx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){var c=new Uint8Array(b);a=a;for(b=b-1|0;b>=0;--b)c[b]=a&255,a=a>>>8;return c}function j(a,b,c,e,f,g,h,j,k){var l;f=(l=d("WABase64")).encodeB64(i(f,4));g=l.encodeB64(i(g,1));h=l.encodeB64(h);var m=l.encodeB64(i(j.id,3)),n=l.encodeB64(j.keyPair.publicKey);l=l.encodeB64(j.signature);j=new Map().set("fbid",a).set("fb_cat",b).set("app_id",c).set("device_id",e).set("e_regid",f).set("e_keytype",g).set("e_ident",h).set("e_skey_id",m).set("e_skey_val",n).set("e_skey_sig",l);if(k){a=d("WABase64").encodeB64(k.signedICDCIdentityList);b=d("WABase64").encodeB64(k.ihash);j.set("icdc_list",a).set("icdc_ts",k.ts).set("icdc_seq",k.seq).set("ihash",b)}return j}function k(a){var b=[];a.forEach(function(a,c,d){b.push(encodeURIComponent(c)+("="+encodeURIComponent(a.toString())))});return b.join("&")}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("WAWorkerGlobalScope").workerGlobalScope.fetch(b,{body:a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"POST"}));return yield b.json()});return m.apply(this,arguments)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("WAWorkerGlobalScope").workerGlobalScope.fetch(b,{body:a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"POST"}));return b.json()});return o.apply(this,arguments)}function p(){var a=new(h||(h=c("URI")))(s()+d("WADbDeviceRegistration").ICDC_ENDPOINT);return a.toString()}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=p();a=(yield l(a,b));if(a==null)throw c("err")(d("WADbDeviceRegistration").NULL_RESPONSE_FROM_SERVER);if(a.status!==200)throw c("err")("WA Server returned status code "+a.status+" while attempting device registration");return a});return r.apply(this,arguments)}function s(){var a=Number(d("MAWCurrentUser").getAppID()),b=d("WADbDeviceRegistration").REG_FB_DOMAIN;switch(a){case 1217981644879628:case 936619743392459:case 487152425211411:case 1035956773910536:b=d("WADbDeviceRegistration").REG_IGD_DOMAIN;break;case 772021112871879:b=d("WADbDeviceRegistration").REG_MSGR_DOMAIN;break;default:b=d("WADbDeviceRegistration").REG_FB_DOMAIN}return b}function t(){var a=new(h||(h=c("URI")))(s()+d("WADbDeviceRegistration").REGISTRATION_ENDPOINT);return a.toString()}var u=new Set(["www.facebook.com","intern.facebook.com","web.facebook.com","www.instagram.com","www.messenger.com"]);function v(){if(c("gkx")("2456")){var a=d("WAWorkerGlobalScope").workerGlobalScope.location.hostname;u.has(a)||c("FBLogger")("bt","device_registration").warn("Invalid subdomain for device registration: %s",a)}}function w(a){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=t();v();var e;try{e=(yield n(a,b))}catch(a){throw c("err")("Post request failed: "+(a==null?void 0:a.message)+" url:"+b)}if(e==null)throw c("err")(d("WADbDeviceRegistration").NULL_RESPONSE_FROM_SERVER);if(e.wa_device_id==null||e.status!==200){a=e.message!=null?': "'+e.message+'"':"";b="WA Server returned status code "+e.status+a+" while attempting device registration";throw c("err")(b)}if(typeof e.wa_device_id!=="number")throw c("err")("Device ID from WA Server was not a number");return{deviceId:e.wa_device_id,icdcSuccess:(a=e.icdc_success)!=null?a:!1,type:e.type}});return x.apply(this,arguments)}function a(a,b,c,d){a=new Map().set("fbid",a).set("fb_cat",b).set("app_id",c).set("device_id",d);b=k(a);return q(b)}function e(a,b,c,d,e,f,g,h,i){a=j(a,b,c,d,e,f,g,h,i);b=k(a);return w(b)}function f(){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAPreRegistrationCrypto").makeRegistrationData());return{deviceUUID:c("uuidv4")(),lastSignedPrekeyId:a.signedPreKey.keyId,registrationVersion:d("MAWConstants").CURRENT_REGISTRATION_VERSION,signalRegInfo:a}});return y.apply(this,arguments)}g.getRegistrationEndpoint=t;g.fetchICDC=a;g.register=e;g.createNewRegistrationMeta=f}),98);
__d("MAWDeviceRegistrationWorker",["IGDWebUtils","MAWClearSignalAndTempStores","MAWCryptoAuthTokenWrapper","MAWCurrentUser","MAWDeviceRegistrationActions","MAWDeviceRegistrationSessionUtil","MAWDeviceRegistrationUtilWorker","MAWJids","MAWLoggerUtils","MAWODSProxy","MAWQplProxy","MessengerWebInitData","Promise","WADbDeviceRegistration","WADbMetaTxns","WADbRegistrationApi","WAICDCUtils","WAIdentityUtils","WAJids","WAMockServerShell","WAOdsEnums","WAPreRegistrationCrypto","WASignalKeys","WATagsLogger","WATimeUtils","asyncToGeneratorRuntime","cr:7755","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Skipping device registration"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Crypto Auth Token was null or incomplete"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot process ICDC payload during registration: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Beginning device registration"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Device registration failure - ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);n=function(){return a};return a}var o=typeof window!=="undefined"?window:self,p=d("WATagsLogger").TAGS([d("MAWLoggerUtils").Tag.DeviceRegistration]),q=!1,r,s=function(){return d("IGDWebUtils").isInstagramWebSupportedApp(Number(d("MAWCurrentUser").getAppID()))};function t(a){var b;b=(b=o.location.origin)!=null?b:"unknown";q||(r=d("MAWQplProxy").startQplUserFlow(c("qpl")._(25302457,"311"),{bool:{identityCompareResult:a.identityCompareResult},"int":{registrationVersion:a.registrationVersion},string:{hostname:b}}),q=!0)}function u(){if(q){var a;(a=r)==null?void 0:a.endFail("failure_during_device_registration");r=null}}function a(){if(q){var a;(a=r)==null?void 0:a.endSuccess();r=null}}function v(a){var b;(b=r)==null?void 0:b.addPoint("wa_registration_response",{string:{registrationType:a}})}function w(a){return{message:a,registrationState:d("WADbDeviceRegistration").RegistrationStatesEnum.failed}}function x(a){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){p.LOG(l());var b=(yield d("MAWDeviceRegistrationUtilWorker").createNewRegistrationMeta());yield d("WADbRegistrationApi").inMetaStoreAndSignedPreKeyTransaction(d("MAWDeviceRegistrationActions").saveUnsentRegistrationMeta)(b);var e=d("MAWCurrentUser").getID(),f=b.deviceUUID,g=d("WAPreRegistrationCrypto").serializeRegistrationData(b.signalRegInfo),h=null,i=!1;i=(i=i?1019394685547802:d("MAWCurrentUser").getAppID())==null?void 0:i.toString();if(i==null)return w("appId is null, cannot register to WhatsApp");if(e==="0")return w(d("WADbDeviceRegistration").DEVICE_REGISTER_ERROR_ZERO_AS_USER_ID);var j=null,m=null;try{var n=(yield d("MAWDeviceRegistrationUtilWorker").fetchICDC(e,a.encrypted_serialized_cat,i,f)),o=[].concat(d("WAICDCUtils").base64DeviceIdentitiesToSerializedPubKeys(n.device_identities));if(n.curr_identity_idx!=null){var q=n.curr_identity_idx;o[q]=d("WASignalKeys").serializeIdentity(g.identityPubKey)}else o.push(d("WASignalKeys").serializeIdentity(g.identityPubKey));j=d("WAICDCUtils").computeICDCInfoForUpload(b.signalRegInfo.identityKeyPair,n.icdc_seq,o,"registration","registration");m=(yield d("WAIdentityUtils").computeIdentitiesHash(o))}catch(a){p.ERROR(k(),a)}q=!1;try{b=(yield d("MAWDeviceRegistrationUtilWorker").register(e,a.encrypted_serialized_cat,i,f,g.regId,g.identityPubKeyType,g.identityPubKey,g.signedPreKey,j&&m?{ihash:m,seq:j.icdcInfo.seq,signedICDCIdentityList:j.encodedSignedICDC,ts:j.icdcInfo.timestamp}:null));n=b==null?void 0:b.type;n!=null&&d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.REGISTRATION_TYPE,key:n});h=b==null?void 0:b.deviceId;q=(o=b==null?void 0:b.icdcSuccess)!=null?o:!1;v(b==null?void 0:b.type)}catch(a){return w(a)}if(h==null)return w(d("WADbDeviceRegistration").NULL_RESPONSE_FROM_SERVER);a=d("MAWJids").toUserJid(e);if(!s()){i=c("MessengerWebInitData").sessionId;i!=null&&c("promiseDone")(d("MAWDeviceRegistrationSessionUtil").linkDeviceToTheSession(f,i))}if(j!=null&&q){g=j.icdcInfo;yield d("WADbRegistrationApi").saveICDCInTransaction(d("MAWDeviceRegistrationActions").saveICDC)(a,{devices:g.devices,dirty:!0,sequence:g.seq,signingDeviceIndex:g.signingDeviceIndex,timestamp:g.timestamp})}yield d("WADbRegistrationApi").inSaveDeviceIdTransaction(d("MAWDeviceRegistrationActions").saveDeviceId)(h);return{message:d("WADbDeviceRegistration").DEVICE_SUCCESSFULLY_REGISTERED,registrationState:d("WADbDeviceRegistration").RegistrationStatesEnum.finished}});return y.apply(this,arguments)}function e(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){e=(e=e)!=null?e:d("MAWCryptoAuthTokenWrapper").getCryptoAuthToken();if(e==null||e.encrypted_serialized_cat===""){p.WARN(j());return w(d("WADbDeviceRegistration").DEVICE_REGISTER_ERROR_EMPTY_CAT_TOKEN)}if(!d("WATimeUtils").isInFuture(d("WATimeUtils").castToUnixTime(e.expiration_time_in_seconds)))return w(d("WADbDeviceRegistration").DEVICE_REGISTER_ERROR_EXPIRED_CAT_TOKEN);if(d("WAMockServerShell").isMockServerMode){var f=(yield d("MAWDeviceRegistrationUtilWorker").createNewRegistrationMeta());yield (h||(h=b("Promise"))).all([d("WADbRegistrationApi").inMetaStoreAndSignedPreKeyTransaction(d("MAWDeviceRegistrationActions").saveUnsentRegistrationMeta)(f),d("WADbRegistrationApi").inSaveDeviceIdTransaction(d("MAWDeviceRegistrationActions").saveDeviceId)(d("WAJids").interpretAsDeviceId(1)),d("WADbMetaTxns").saveCAT(e)]);return{message:"Skipping registration because of Mock Server",registrationState:d("WADbDeviceRegistration").RegistrationStatesEnum.finished}}b("cr:7755")!=null&&(yield b("cr:7755").updateRegDataFromLocalStorage());f=(yield d("WADbRegistrationApi").checkExistingRegTransaction(d("MAWDeviceRegistrationActions").getRegistrationMetaDexie));a!=null&&d("MAWQplProxy").sendQplPointThroughBridge(a,"device_registration_check",{annotations:{bool:{identityCompareResult:f==null?void 0:f.identityCompareResult},"int":{registrationVersion:f==null?void 0:f.registrationVersion}}});a=(f==null?void 0:f.identityCompareResult)===!1;if(f==null||f.deviceId==null||a){try{yield d("MAWClearSignalAndTempStores").clearSignalAndTempStores(),yield d("WADbMetaTxns").saveCAT(e)}catch(a){return w(a)}t({identityCompareResult:f==null?void 0:f.identityCompareResult,registrationVersion:f==null?void 0:f.registrationVersion});return x(e)}else{yield d("WADbMetaTxns").saveCAT(e);a=c("MessengerWebInitData").sessionId;e=f.lastSessionDeviceWasLinkedTo==null||f.lastSessionDeviceWasLinkedTo!==a;a!=null&&!(f.deviceUUID===a||f.deviceUUID.startsWith(a+"-"))&&e&&!s()&&c("promiseDone")(d("MAWDeviceRegistrationSessionUtil").linkDeviceToTheSession(f.deviceUUID,a))}p.LOG(i());return{message:d("WADbDeviceRegistration").DEVICE_ALREADY_REGISTERED,registrationState:d("WADbDeviceRegistration").RegistrationStatesEnum.finished}});return z.apply(this,arguments)}function f(a){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.DEVICE_REGISTRATION,key:"fail"});d("MAWCurrentUser").isEmployee()||d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.DEVICE_REGISTRATION_NON_EMPLOYEE,key:"fail"});p.ERROR(n(),d("WADbDeviceRegistration").FAILED_REGISTRATION_RETRIES);for(a of a)p.ERROR(m(),a);u()}g.endRegistrationTimerSuccess=a;g.handleRegistrationError=w;g.setupDeviceRegistration=e;g.logDeviceRegistrationRetryFailure=f}),98);
__d("MAWDeviceRegistrationInitWorker",["MAWCurrentUser","MAWDeviceRegistrationWorker","MAWLoggerUtils","MAWODSProxy","MAWQplProxy","MAWRotateCAT","WADbDeviceRegistration","WALogger","WAOdsEnums","WAPromiseRetryLoop","WARetryUtils","WATagsLogger","asyncToGeneratorRuntime","gkx","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Registration finished, ending device registration promise retry loop"]);i=function(){return a};return a}var j=c("gkx")("1312");e={algo:{backoff:{first:0,second:1,type:"fibonacci"},toMs:function(a){return a===0?(1+a)*1e3:(9+a)*1e3},type:"adjust"}};var k=j?e:d("WARetryUtils").FIBONACCI_BACKOFF;function a(){var a=0,e=new Set(),f=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({code:function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){a++;if(a>d("WADbDeviceRegistration").MAX_DEVICE_REGISTRATION_RETRIES){d("MAWDeviceRegistrationWorker").logDeviceRegistrationRetryFailure(e);var f=d("MAWDeviceRegistrationWorker").handleRegistrationError(d("WADbDeviceRegistration").FAILED_REGISTRATION_RETRIES);b(f);return}try{f=a===1?c("qpl")._(25310776,"6155"):null;var g=null;a===2&&j&&(g=(yield d("MAWRotateCAT").rotateCAT()));f=(yield d("MAWDeviceRegistrationWorker").setupDeviceRegistration(f,g));g=new Map([["attempt",a],["is_cat_experiment",j?"true":"false"],["result",f.registrationState]]);g=Array.from(g,function(a){return a.join(".")}).join(".");d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.DEVICE_REGISTRATION,key:g});f.registrationState===d("WADbDeviceRegistration").RegistrationStatesEnum.finished&&(f.message===d("WADbDeviceRegistration").DEVICE_SUCCESSFULLY_REGISTERED&&(d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.DEVICE_REGISTRATION,key:"success"}),d("MAWCurrentUser").isEmployee()||d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.DEVICE_REGISTRATION_NON_EMPLOYEE,key:"success"}),d("MAWDeviceRegistrationWorker").endRegistrationTimerSuccess()),d("WALogger").LOG(i()),b(f));e.add(f.message)}catch(a){g="Uncaught device registration error - "+a;d("WATagsLogger").TAGS([d("MAWLoggerUtils").Tag.DeviceRegistration]).WARN(h(),g);e.add(""+g)}});function g(a){return f.apply(this,arguments)}return g}(),name:"deviceRegistration",timer:k});d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(25310776,"6155"),"device_registration_start");f.start();return f.promise()}g.initDeviceRegistration=a}),98);
__d("createReStoreColdEBTablesPersistence",["MAWLSDBEncryption","MAWQplProxy","Promise","WAExceededStorageQuota","asyncToGeneratorRuntime","err","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return a!=null&&typeof a==="object"&&Object.prototype.hasOwnProperty.call(a,"SENTINEL_DELETED")?!0:!1}function j(a){return new window.Promise(function(b,c){a.onsuccess=function(a){b(a.target.result)},a.onerror=function(a){c(a)}})}function a(a){var e=!0;return{clearCache:function(){},close:function(){a.close(),e=!1},flush:function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f){if(!e||f.size===0)return;var g=Array.from(f.keys()),k=d("MAWQplProxy").startQplUserFlow(c("qpl")._(521485383,"2200"),{bool:{ebsmv2:!1},string_array:{tables:g}}),l=a.transaction(a.objectStoreNames,"readwrite",{durability:"relaxed"});d("WAExceededStorageQuota").listenToQuotaExceededError(l);g=new window.Promise(function(a,b){l.oncomplete=function(b){k.endSuccess(),a(b.target.result)},l.onerror=function(a){var c;k.endFail((c=a==null?void 0:(c=a.target)==null?void 0:c.error)!=null?c:"flush_failure");b(a)}});yield (h||(h=b("Promise"))).all(Array.from(f).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a[0];a=a[1];var e=l.objectStore(c);yield (h||(h=b("Promise"))).all(Array.from(a).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a=a[1];if(i(a))yield j(e["delete"](b));else{a=d("MAWLSDBEncryption").encryptLSDBObj(a,c);yield j(e.put(a,b))}});return function(b){return a.apply(this,arguments)}}()))});return function(b){return a.apply(this,arguments)}}()));yield g});function g(a){return f.apply(this,arguments)}return g}(),get:function(a,b,d,e){throw c("err")("Unsupported operation")},queueCommitWork:void 0,runExclusively:function(a){throw c("err")("Unsupported operation")},shouldApplySync:function(){throw c("err")("Unsupported operation")},shouldInline:function(a,b){return!1},shouldSync:function(){throw c("err")("Unsupported operation")},types:["indexeddb"],uniqueId:""}}g["default"]=a}),98);
__d("MAWPersistedEBLSDB",["EBSMProperties","LSMetadata","MAWCurrentUser","MAWIndexedDbMetadata","Promise","createReStoreColdEBTablesPersistence","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){var a=d("MAWCurrentUser").getID();return new(h||(h=b("Promise")))(function(b,e){var f=indexedDB.open(d("MAWIndexedDbMetadata").ebLSDBName(a),c("EBSMProperties").dbVersion);f.onerror=function(a){return e(a)};f.onsuccess=function(a){var c=a.target.result;b(c);c.onversionchange=function(a){a.newVersion==null&&c.close()}};f.onupgradeneeded=function(a){a=a.target.result;var b=Object.keys(d("LSMetadata").schema.tableNames);for(var e=0;e<b.length;e++){var f=b[e];c("EBSMProperties").persistedTables.has(f)&&!a.objectStoreNames.contains(f)&&a.createObjectStore(f,{autoIncrement:!0})}}}).then(function(a){return c("createReStoreColdEBTablesPersistence")(a)}).then(function(a){return i=a}).then(function(a){})}function e(){if(i==null)throw c("err")("EBLSDB initialization error");return i}g.makeEBLSDB=a;g.getEBLSDB=e}),98);
__d("MAWDeleteDanglingParticipantsStartupJob",["MAWDbVersion","MAWIndexedDb","MAWODSProxy","MAWQplProxy","MAWTransactionMode","WALogger","WAOdsEnums","asyncToGeneratorRuntime","gkx","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Delete Dangling Participants] ",""]);h=function(){return a};return a}function i(a){d("WALogger").LOG(h(),a)}var j=d("MAWIndexedDb").makeMsgrTransactor({participants:d("MAWTransactionMode").READWRITE,threads:d("MAWTransactionMode").READONLY},"deleteDanglingParticipantsStartupJob",function(a){return function(){return a.threads.toArray().then(function(b){return a.participants.where("threadJid").noneOf(b.map(function(a){return a.jid}))["delete"]()})}});a={run:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(c("gkx")("24027")){i("Starting job...");d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_DELETE_DANGLING_PARTICIPANTS,key:"start"});var a=(yield d("MAWDbVersion").getDBVersion());if(a!=null&&a>=85){var b;i(""+((b=a)!=null?b:"null"));b=(yield d("MAWQplProxy").measurePerfInQPL(c("qpl")._(25310776,"6155"),"startup_job:delete_dangling_participants",function(){return j()}));d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_DELETE_DANGLING_PARTICIPANTS,key:b>0?"deleted":"good"});i("Found and deleted "+b+" dangling participants")}else{i("Expected DBVersion >= 85, but got "+((b=a)!=null?b:"null")+" instead");d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_DELETE_DANGLING_PARTICIPANTS,key:"db_version_not_ready"})}}});function e(){return a.apply(this,arguments)}return e}()};e=a;g["default"]=e}),98);
__d("MAWStartupJob",["MAWDeleteDanglingParticipantsStartupJob","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=[c("MAWDeleteDanglingParticipantsStartupJob")];function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield (h||(h=b("Promise"))).all(i.map(function(a){return a.run()}))});return j.apply(this,arguments)}g.runMAWStartupJobs=a}),98);
__d("MAWWADbObjEncoding",["MAWArmadilloContactsTableSchema.pb","WAErr","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case"contacts":return d("MAWArmadilloContactsTableSchema.pb").ContactsTableSchemaProtoSpec;default:throw c("WAErr")("Store "+a+" does not have proto")}}function a(a,b){return d("encodeProtobuf").encodeProtobuf(h(a),b).readByteArray()}function b(a,b){return d("decodeProtobuf").decodeProtobuf(h(a),b)}g.encode=a;g.decode=b}),98);
__d("WormTypes",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.toEncryptedBytes=a}),66);
__d("MAWWADb",["MAWCryptoConsts","MAWKeychainCrypto","MAWKeychainNaClCrypto","MAWKeychainUtil","MAWQplProxy","MAWWADbObjEncoding","MWEARKeychainV3","WAPREList","WATagsLogger","WormTypes","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error performing initDb: ",""]);h=function(){return a};return a}var i=1e4,j=d("WATagsLogger").TAGS(["WORM"]);function k(a){return{addAnnotations:function(b){return a.addAnnotations(babelHelpers["extends"]({},b))},addPoint:function(b,c){return a.addPoint(b,babelHelpers["extends"]({},c))},endFail:function(b,c){return a.endFail(b,babelHelpers["extends"]({},c))},endSuccess:function(b){return a.endSuccess(babelHelpers["extends"]({},b))},getFlowDetails:function(){return{instanceKey:-1,name:d("WAPREList").PRE_METRIC.WORM}},isActive:function(){return!0}}}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=c("qpl")._(1056839327,"560");b=d("MAWQplProxy").startQplUserFlow(b,{bool:{isWorm:!0},string:{operationType:"initDb"}},void 0,i);try{yield a(k(b),{decode:d("MAWWADbObjEncoding").decode,encode:d("MAWWADbObjEncoding").encode},{decrypt:function(a){var b=d("MAWKeychainCrypto").getKeyVersionFromCipherData(a),c=d("MWEARKeychainV3").getDbEncryptionKey(b);c=c.key;return d("MAWKeychainNaClCrypto").decryptTweetNaClArrayBuffer(c,a,b)},encrypt:function(a){var b=d("MWEARKeychainV3").getDbEncryptionKey(),c=b.key;b=b.version;b=d("MAWKeychainUtil").makeAAD(b,d("MAWCryptoConsts").CIPHER_ID);return d("WormTypes").toEncryptedBytes(d("MAWKeychainNaClCrypto").encryptTweetNaClArrayBuffer(c,a,b))},getDecryptionErrorType:function(){return d("MAWKeychainNaClCrypto").EARDecryptionError}}),b.endSuccess()}catch(a){b.endFail("error");j.ERROR(h(),a);throw a}});return l.apply(this,arguments)}g.initWaDbWithMawCtx=a}),98);
__d("MAWWebWorkerLogger",["MAWBridge","MAWConsoleLogger","MAWLeakDetection","MAWLoggingSwitches","MAWSaveLogToDisk","WAAbPropsInit","WAJids","WATagsLogger","asyncToGeneratorRuntime","err","fb-error"],(function(a,b,c,d,e,f,g){"use strict";var h=2;function a(){d("WATagsLogger").initializeWaLogger(i)}var i={debug:function(a,b,c){d("MAWConsoleLogger").logToConsole("log",a,b,c)},devConsole:function(a,b,c,e){for(var f=arguments.length,g=new Array(f>4?f-4:0),h=4;h<f;h++)g[h-4]=arguments[h];switch(a){case"DEV":d("MAWConsoleLogger").logToConsole.apply(void 0,["log",b,c,e].concat(g));break;case"DEV_XMPP":d("MAWConsoleLogger").logToConsole.apply(void 0,["log",b,c,e].concat(g));break;case"LOG":d("MAWConsoleLogger").logToConsole.apply(void 0,["info",b,c,e].concat(g));break;case"WARN":d("MAWConsoleLogger").logToConsole.apply(void 0,["warn",b,c,e].concat(g));break;case"ERROR":d("MAWConsoleLogger").logToConsole.apply(void 0,["error",b,c,e].concat(g));break;case"CATCHING":d("MAWConsoleLogger").logToConsole.apply(void 0,["error",b,c,e].concat(g));break}},error:function(a,b,e){a=d("MAWLeakDetection").maybeReplaceVaultedString(a);e?m(a,b,e):m("webworker",b,c("err")(d("WAJids").maybeSanitizeLogLineText(a)));d("MAWConsoleLogger").logToConsole("error",a,b)},info:function(a,b){k("log",a,b),d("MAWConsoleLogger").logToConsole("info",a,b)},logRestricted:function(a,b){k("logRestricted",a,b),d("MAWConsoleLogger").logToConsole("log",a,b)},warn:function(a,b){k("warn",a,b),d("MAWConsoleLogger").logToConsole("warn",a,b)}};function j(){try{return d("WAAbPropsInit").getAbProp("msgrw_logger_entries")}catch(a){return d("WAAbPropsInit").getAbDefault("msgrw_logger_entries")}}function k(a,b,c){if(d("MAWLoggingSwitches").removeLoggingFromBridge){d("MAWSaveLogToDisk").saveLogEntry("worker",d("MAWSaveLogToDisk").formatLog({date:Date.now(),logLevel:a,logString:b,tags:c}));return}a!=="debug"&&d("MAWBridge").getBridge().fireAndForget("event","log",{logLevel:a,logString:b,tags:c},!0)}function e(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("MAWSaveLogToDisk").forceCachedLogEntryPersist()});return l.apply(this,arguments)}function m(a,b,e){var f=0;if(e.taalOpcodes!=null){var g;(g=e.taalOpcodes)==null?void 0:g.forEach(function(a){a===c("fb-error").TAALOpcode.PREVIOUS_FRAME&&f++})}else f=h;d("MAWLoggingSwitches").removeLoggingFromBridge&&d("MAWSaveLogToDisk").saveLogEntry("worker",d("MAWSaveLogToDisk").formatErrorForLogging(a,b,e,f,j(),e.stack));d("MAWBridge").getBridge().fireAndForget("event","logError",{entriesToReport:j(),framesToPop:f,logString:a,message:e.message,stack:e.stack,tags:b},!0)}g.setupWebWorkerWaLogger=a;g.flushLogs=e}),98);
__d("registerExecutionContext",["BroadcastChannelClientServerHandshake","FBLogger","asyncToGeneratorRuntime","getBroadcastChannelForExecutionContext","loadTaskHandlerResource","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var d=a.context,e=a.name,f=a.payload;try{var g=(yield c("loadTaskHandlerResource")(e));if(g==null)throw c("FBLogger")("maw_worker").mustfixThrow("No task handler found in context %s",e);e=(yield g.handleTask(f,d));g={context:d,result:e,type:"task_success"};b.postMessage(g)}catch(g){c("FBLogger")("maw_worker").catching(g).mustfix("%s executionContext: Failed to execute task %s",String(a.context.executionContext),a.name);e={context:d,reason:(f=g.message)!=null?f:"",type:"task_failure"};b.postMessage(e)}return});return i.apply(this,arguments)}function a(a){var b=c("getBroadcastChannelForExecutionContext")(a);d("BroadcastChannelClientServerHandshake").listen(b);var e=new Set();b.addEventListener("message",function(a){switch(a.data.type){case"execute_task":a=a.data;var d=a.context.taskID;if(e.has(d))return;e.add(d);c("promiseDone")(h(a,b)["finally"](function(){e["delete"](d)}));break;default:}});return function(){return b.close()}}g["default"]=a}),98);
__d("registerMAWExecutionContext",["CometTaskFrameworkTypes","registerExecutionContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("registerExecutionContext")(d("CometTaskFrameworkTypes").ExecutionContext.MAW_WORKER)}g["default"]=a}),98);
__d("MAWCommonMainWebWorker",["BrowserLockManager","EARInitType","EBSMGating","MAWBridge","MAWCommonWebWorkerErrorLogging","MAWCompareWorkerSetupArgs","MAWCurrentUser","MAWDataSyncQueue","MAWDbInitIndexedDb","MAWDbInitShimIndexedDb","MAWDeleteOldLogsFromDisk","MAWDeviceRegistrationInitWorker","MAWEBSwitch","MAWFTSIndexedDb","MAWGetDbVersion","MAWHMACKey","MAWIndexedDbMetadata","MAWJobsIndexedDb","MAWLoggingSwitches","MAWPersistedEBLSDB","MAWQplProxy","MAWRestoreDbState","MAWStartupJob","MAWVaultMaterials","MAWWADb","MAWWebWorkerLogger","MAWWorkerSetupArgs","MWSetupDBEncryption","Promise","WACrossWorkerPortal","WADbDeviceRegistration","WADbRegistrationApi","WADevToolsBridge","WALogger","WAResultOrError","WorkerMessagePort","WorkerSelf","WormDb","asyncToGeneratorRuntime","cr:8231","err","gkx","justknobx","memoizeOneWithArgs","pageID","promiseDone","qpl","registerMAWExecutionContext"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Missing DevTool port. Not able to setup DevTool"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["No action required for setup."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Worker requires a reboot to upgrade"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Worker has already gone through initialization before."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker receive invalid message: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Worker should not run initWorker() more than once."]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["EBLS init failed with error ",""]);o=function(){return a};return a}d("MAWWebWorkerLogger").setupWebWorkerWaLogger();d("MAWCommonWebWorkerErrorLogging").init();var p,q=!1;e=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var e;e=a.call(this,b,c)||this;e.onmessage=null;d("WorkerSelf").init(babelHelpers.assertThisInitialized(e));e.$BridgeAdaptor$p_1=b;e.onUnhandledMessage.add(function(a){e.onmessage&&e.onmessage({data:a})});return e}var c=b.prototype;c.getBridgePort=function(){return this};return b}(d("WorkerMessagePort").WorkerSyncedMessagePort);var r=function(a,b){return d("MAWQplProxy").measurePerfInQPL(c("qpl")._(25310776,"6155"),"backend_"+a,b)};d("MWSetupDBEncryption").setPerformanceMeasurementTool(r);var s=c("memoizeOneWithArgs")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield r("make_signal_and_ear",function(){return(h||(h=b("Promise"))).all([d("MAWJobsIndexedDb").makeJobsDb(),d("MWSetupDBEncryption").init(c("EARInitType").MAW_INIT).then(function(a){if(!a.success){var b;throw(b=a.payload)!=null?b:c("err")("Worker failed to setup encryption DB with no error.")}return a}),d("MAWFTSIndexedDb").makeFTSDB(),d("MAWWADb").initWaDbWithMawCtx(function(a,b,c){return d("WormDb").makeDb(d("MAWIndexedDbMetadata").signalWorm(d("MAWCurrentUser").getID()),b,c,{eventFlow:a})})])});if(d("EBSMGating").isPersistedEBTableEnabled()&&!d("EBSMGating").isEBSMV2Enabled()){var a=d("MAWQplProxy").startQplUserFlow(c("qpl")._(521478580,"1409"),{bool:{eb_switch:c("MAWEBSwitch").isEnabled()},"int":{timestamp:Date.now()}});try{yield r("make_eblsdb",function(){return d("MAWPersistedEBLSDB").makeEBLSDB()})}catch(b){a.endFail("Initialisation failed when calling makeEBLSDB with error "+b)}a.endSuccess()}yield r("make_shim_db",d("MAWDbInitShimIndexedDb").dbInit);yield r("make_db",d("MAWDbInitIndexedDb").dbInit);b("cr:8231")==null?void 0:b("cr:8231").init()["catch"](function(a){d("WALogger").ERROR(o(),a)});c("promiseDone")(d("MAWStartupJob").runMAWStartupJobs());return c("BrowserLockManager")!=null?r("request_maw_registration_lock",function(){return new(h||(h=b("Promise")))(function(a,d){c("promiseDone")(c("BrowserLockManager").request("maw_registration_lock",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var b=(yield t());a(b)}catch(a){d(a)}})))})}):t()})),t=c("memoizeOneWithArgs")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield r("init_device_reg_overall",function(){return d("MAWDeviceRegistrationInitWorker").initDeviceRegistration()})),e=a.message;a=a.registrationState;if(a===d("WADbDeviceRegistration").RegistrationStatesEnum.failed)throw c("err")("registration_failed: "+e);a=(yield (h||(h=b("Promise"))).all([r("load_reg_in_txn",function(){return d("WADbRegistrationApi").loadAllRegistrationMetaInTransaction()}),r("gen_insert_hmac",function(){return d("MAWHMACKey").generateAndInsertHMACKey()})]));e=a[0];a=a[1];return{hmacKey:a,regData:e}}));function u(){var a=d("MAWBridge").getBridge();a=d("WACrossWorkerPortal").attachPortal(a,["event","threadEvent"],function(a,b){var c=a.length>0?a[a.length-1]:null;c!=null&&c.type==="request"&&c.content.name==="uiUpdate"&&c.content.arg.events&&b.type==="request"&&b.content.name==="uiUpdate"?Array.prototype.push.apply(c.content.arg.events,b.content.arg.events):a.push(b);return a},c("pageID"));return a}function v(a,b,c,d,e){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){f=f==null?yield s():yield f;var h=f.hmacKey;f=f.regData;void g(f,h,d("MAWBridge").getBridge(),a(f.regInfo),b);d("MAWLoggingSwitches").removeLoggingFromBridge&&void d("MAWDeleteOldLogsFromDisk").deleteOldLogsOnStartup();if(c("gkx")("3282"))if(e==null)d("WALogger").ERROR(i());else{g=d("WACrossWorkerPortal").attachPortal(d("WADevToolsBridge").getDevToolBridge(),["devtool"],function(a,b){a.push(b);return a},c("pageID"));g.setPort(e)}});return w.apply(this,arguments)}function x(a){try{var b=u();b.setPort(a.getBridgePort());if(c("BrowserLockManager")!=null)return d("WAResultOrError").makeResult(s())}catch(a){return d("WAResultOrError").makeError(a)}return d("WAResultOrError").makeResult(null)}function a(a,e,f,g){if(q){d("WALogger").WARN(n());return}a.addMessageListener("force-flush-data",function(){self.dispatchEvent(new CustomEvent("force-flush-logs")),c("promiseDone")(d("MAWDataSyncQueue").forceFlushDataSyncQueue())});a.addMessageListener("force-flush-logs-only",function(){self.dispatchEvent(new CustomEvent("force-flush-logs"))});var h=c("justknobx")._("1495")||c("gkx")("1159"),i=h?d("WAResultOrError").makeResult(null):x(a);a.addMessageListener("worker-setup",function(){var n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if(b!=null&&b.type!=="worker-setup"){d("WALogger").WARN(m(),b);return}a.postMessage({setupHash:b.setupHash,type:"worker-setup-ack"});var n=d("MAWWorkerSetupArgs").getWorkerSetupArgs();if(n!=null){if(!f.isSharedWorkerContext())throw c("err")("only shared workers can perform re-init!");d("WALogger").DEV(l());n=d("MAWCompareWorkerSetupArgs").didWorkerSetupArgsChange(n,b.content);n?(d("WALogger").DEV(k()),a.postMessage({action:"reboot-required",setupHash:b.setupHash,status:"already-setup",type:"worker-setup"}),self.close()):(p!=null&&(yield p),d("WALogger").DEV(j()),a.postMessage({action:"no-action",setupHash:b.setupHash,status:"already-setup",type:"worker-setup"}));return}c("justknobx")._("1495")&&d("MAWGetDbVersion").setArmadilloDbVersionForTest(b.content.testDbVersion);c("gkx")("1159")&&d("MAWRestoreDbState").setTargetDbState(b.content.testDbMigrationState);h&&(i=x(a));if(!i.success){a.postMessage({msg:(n=i.payload)==null?void 0:n.message,setupHash:b.setupHash,status:"failure",type:"worker-setup"});return}d("MAWWorkerSetupArgs").setWorkerSetupArgs(b.content);try{p=v(e,f,b.content.devToolMessageChannelPort2,i.value,g);yield p;n=b.content.vaultMaterials;if(c("gkx")("23909")){if(n==null||n.encryptionKey==null||n.prefixAndSuffix==null)throw c("err")("Vault materials was null in worker setup");d("MAWVaultMaterials").initializeVaultMaterials(n)}c("registerMAWExecutionContext")();a.postMessage({setupHash:b.setupHash,status:"success",type:"worker-setup"})}catch(e){c("gkx")("23986")&&c("promiseDone")(d("MAWWebWorkerLogger").flushLogs());a.postMessage({msg:e.message,setupHash:b.setupHash,status:"failure",type:"worker-setup"});throw e}});return function(a){return n.apply(this,arguments)}}());q=!0}g.BridgeAdaptor=e;g.performDeviceRegistration=t;g.initWorker=a}),98);
__d("MAWCreateJobNotImplemented",["WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([""," not implemented for MAW"]);h=function(){return a};return a}function a(a){return[{info:function(b,c){return{code:function(){d("WALogger").WARN(h(),a)},requirements:null}},stepName:"NOT_IMPLEMENTED"}]}g.createNotImplementedJob=a}),98);
__d("MAWLowLevelApiImpl",["MAWBridgeHandlers"],(function(a,b,c,d,e,f,g){"use strict";function a(){return{bridgeHandlers:d("MAWBridgeHandlers").bridgeHandlers}}g.makeLowLevelApi=a}),98);
__d("MAWMainWebWorker",["CurrentWorkerMessagePort","FalcoLoggerTransports","MAWBackend","MAWCommonMainWebWorker","MAWLowLevelApiImpl","MAWMainWebWorkerConfig","WABridge","WADynamicRouterSync","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=!((b=c("gkx")("23949"))!=null?b:!1);function a(){var a=new(d("MAWCommonMainWebWorker").BridgeAdaptor)(d("CurrentWorkerMessagePort").getMessagePort(),"MAWMainWebWorker");d("WABridge").makeWABridge(new(d("WADynamicRouterSync").DynamicRouterSync)());d("MAWCommonMainWebWorker").initWorker(a,d("MAWLowLevelApiImpl").makeLowLevelApi,d("MAWMainWebWorkerConfig").waConfig,d("MAWBackend").startMAWBackend);h&&d("FalcoLoggerTransports").attach()}g["default"]=a}),98);
__d("MAWMainWebWorkerV2",["MAWMainWebWorker"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("MAWMainWebWorker")}),98);
__d("NullStateNoResults",["cr:3584"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:3584")}),98);
__d("NullStateNoResultsFB",["CometEmptyStatesNoResultsDarkMode.svg.react","CometEmptyStatesNoResultsGrayWash.svg.react","SVGIcon"],(function(a,b,c,d,e,f,g){"use strict";a={dark:d("SVGIcon").svgIcon(c("CometEmptyStatesNoResultsDarkMode.svg.react")),"default":d("SVGIcon").svgIcon(c("CometEmptyStatesNoResultsGrayWash.svg.react"))};g["default"]=a}),98);
__d("SharedWorkerBootstrap",["CurrentSharedWorker","CurrentWorkerMessagePort"],(function(a,b,c,d,e,f,g){"use strict";function a(a){h(function(){return b.call(null,a)})}function c(a){h(function(){return a})}function h(a){d("CurrentSharedWorker").onInitComplete(function(){var b=a();if(typeof b==="function"||b!==null)try{b(d("CurrentWorkerMessagePort").getMessagePort())}catch(a){}})}g.start=a;g.startServerJS=c}),98);
__d("SharedOrWebWorkerBootstrapInit",["SharedWorkerBootstrap","WorkerBootstrap"],(function(a,b,c,d,e,f){"use strict";function a(a){"SharedWorkerGlobalScope"in self&&self instanceof self.SharedWorkerGlobalScope?b("SharedWorkerBootstrap").startServerJS(a):b("WorkerBootstrap").startServerJS(a)}f.startServerJS=a}),66);