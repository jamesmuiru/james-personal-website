;/*FB_PKG_DELIM*/

__d("getEmojiSize",["CometComposerStylingConstants","CometLexicalEmojiNode","getResolvedShouldShrink"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.emojiSizeOverride,e=a.formattedTextStyling,f=a.textLength;a=babelHelpers.objectWithoutPropertiesLoose(a,["emojiSizeOverride","formattedTextStyling","textLength"]);if(b!=null)return b;b=f>=d("CometComposerStylingConstants").MAX_DYNAMIC_TEXT_LENGTH;f=c("getResolvedShouldShrink")(babelHelpers["extends"]({formattedTextStyling:e,textExceedsLength:b},a));return(b=e==null?void 0:e.fontSize)!=null?b:f?d("CometLexicalEmojiNode").COMPOSER_EMOJI_SIZE_SMALL:d("CometLexicalEmojiNode").COMPOSER_EMOJI_SIZE_LARGE}g["default"]=a}),98);
__d("CometComposerEmojiPluginForLexical.react",["CometLexicalEmojiNode","Lexical","LexicalText","getEmojiSize","getUpgradedCometEmojiComposerHandler","react","useCometStatusAreaTextData","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));b=h;var i=b.useLayoutEffect,j=b.useRef,k=b.c;function a(a){var b=k(49),e=a.activeAttachmentType,f=a.alwaysShrinkText,g=a.editor,h=a.emojiSizeOverride,m=a.formattedTextPreset,n=a.formattingType,o=(a=c("useCometStatusAreaTextData")(m))==null?void 0:a.formattedTextStyling;if(b[0]!==h||b[1]!==e||b[2]!==f||b[3]!==o||b[4]!==n){a=(m=h)!=null?m:c("getEmojiSize")({activeAttachmentType:e,alwaysShrinkText:f,formattedTextStyling:o,formattingType:n,textLength:0});b[0]=h;b[1]=e;b[2]=f;b[3]=o;b[4]=n;b[5]=a}else a=b[5];var p=j(a);b[6]===Symbol["for"]("react.memo_cache_sentinel")?(m=new Set(),b[6]=m):m=b[6];var q=j(m);b[7]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a,b){q.current.forEach(function(c){b.update(function(){var b=d("Lexical").$getNodeByKey(c);b!==null&&b.setSize(a)})}),p.current=a},b[7]=a):a=b[7];var r=a;b[8]!==g?(m=function(){if(g!=null){var a=q.current;g.getEditorState().read(function(){d("Lexical").$nodesOfType(d("CometLexicalEmojiNode").EmojiNode).forEach(function(b){a.add(b.getKey())})});return g.registerMutationListener(d("CometLexicalEmojiNode").EmojiNode,function(b){b.forEach(function(b,c){b==="created"?a.add(c):b==="destroyed"&&a["delete"](c)})})}},a=[g],b[8]=g,b[9]=m,b[10]=a):(m=b[9],a=b[10]);i(m,a);b[11]!==g||b[12]!==e||b[13]!==f||b[14]!==h||b[15]!==o||b[16]!==n?(m=function(){if(g!=null)return l({activeAttachmentType:e,alwaysShrinkText:f,editor:g,emojiSizeOverride:h,formattedTextStyling:o,formattingType:n})},a=[g,e,f,o,n,h],b[11]=g,b[12]=e,b[13]=f,b[14]=h,b[15]=o,b[16]=n,b[17]=m,b[18]=a):(m=b[17],a=b[18]);i(m,a);b[19]!==g||b[20]!==e||b[21]!==f||b[22]!==h||b[23]!==o||b[24]!==n||b[25]!==r?(m=function(){g!=null&&g.update(function(){var a=g.getEditorState().read(d("LexicalText").$rootTextContent).length;a=c("getEmojiSize")({activeAttachmentType:e,alwaysShrinkText:f,emojiSizeOverride:h,formattedTextStyling:o,formattingType:n,textLength:a});p.current!==a&&r(a,g)})},b[19]=g,b[20]=e,b[21]=f,b[22]=h,b[23]=o,b[24]=n,b[25]=r,b[26]=m):m=b[26];b[27]!==g||b[28]!==e||b[29]!==f||b[30]!==o||b[31]!==n||b[32]!==h?(a=[g,e,f,o,n,h],b[27]=g,b[28]=e,b[29]=f,b[30]=o,b[31]=n,b[32]=h,b[33]=a):a=b[33];i(m,a);b[34]!==g||b[35]!==e||b[36]!==f||b[37]!==h||b[38]!==o||b[39]!==n||b[40]!==r?(m=function(){if(g!=null)return g.registerTextContentListener(function(a){a=c("getEmojiSize")({activeAttachmentType:e,alwaysShrinkText:f,emojiSizeOverride:h,formattedTextStyling:o,formattingType:n,textLength:a.length});p.current!==a&&r(a,g)})},b[34]=g,b[35]=e,b[36]=f,b[37]=h,b[38]=o,b[39]=n,b[40]=r,b[41]=m):m=b[41];b[42]!==g||b[43]!==e||b[44]!==f||b[45]!==o||b[46]!==n||b[47]!==h?(a=[g,e,f,o,n,h],b[42]=g,b[43]=e,b[44]=f,b[45]=o,b[46]=n,b[47]=h,b[48]=a):a=b[48];i(m,a)}function l(a){var b=a.editor,d=a.emojiSizeOverride,e=babelHelpers.objectWithoutPropertiesLoose(a,["editor","emojiSizeOverride"]),f=function(){},g=b.registerTextContentListener(function(a){a=c("getEmojiSize")(babelHelpers["extends"]({emojiSizeOverride:d,textLength:a.length},e));f();f=c("getUpgradedCometEmojiComposerHandler")(b,a)});return function(){f(),g()}}e=c("withComposerViewStatePart")(a,function(a){var b;return{activeAttachmentType:(b=a.attachmentArea)==null?void 0:b.activeAttachmentType,editor:a.lexicalEditor,emojiSizeOverride:a.emojiSizeOverride,formattedTextPreset:(b=a.formattedText)==null?void 0:b.currentFormattedTextPreset,formattingType:a.formattingType}});g["default"]=e}),98);
__d("CometComposerHashtagPluginForLexical.react",["react","requireDeferred","useDeferredModuleOnReady","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));b=h;var i=b.useEffect,j=b.c,k=c("requireDeferred")("getUpgradedCometHashtagComposerHandler").__setRef("CometComposerHashtagPluginForLexical.react");function a(a){var b=j(4),d=a.editor,e=c("useDeferredModuleOnReady")(k),f;b[0]!==d||b[1]!==e?(a=function(){if(d!=null&&e!=null)return e(d)},f=[d,e],b[0]=d,b[1]=e,b[2]=a,b[3]=f):(a=b[2],f=b[3]);i(a,f)}e=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor}});g["default"]=e}),98);
__d("FeedComposerCometHashtagTypeheadListItem.react",["CometSearchMentionsBaseViewItem.react","FDSTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(11),d,e;b[0]!==a?(d=a.entry,e=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]),b[0]=a,b[1]=d,b[2]=e):(d=b[1],e=b[2]);a=d.label;var f=d.rawData.subtext,g;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(g="x1y1aw1k x1sxyh0 xwib8y2 xurb0ha x168biu4",b[3]=g):g=b[3];b[4]!==a||b[5]!==f?(g=j.jsx("div",{className:g,children:j.jsx(c("FDSTextPairing.react"),{headline:a,level:4,meta:f})}),b[4]=a,b[5]=f,b[6]=g):g=b[6];b[7]!==e||b[8]!==d||b[9]!==g?(a=j.jsx(c("CometSearchMentionsBaseViewItem.react"),babelHelpers["extends"]({},e,{entry:d,children:g})),b[7]=e,b[8]=d,b[9]=g,b[10]=a):a=b[10];return a}g["default"]=a}),98);
__d("cometHashtagsLexicalCreateNodeStrategy",["CometLexicalGenericEntityNode","cometBaseMentionsLexicalCreateNodeStrategy","cometMentionsDataEntryText"],(function(a,b,c,d,e,f,g){"use strict";a=c("cometBaseMentionsLexicalCreateNodeStrategy")(function(a){return d("CometLexicalGenericEntityNode").$createCometLexicalGenericEntityNode({id:a.key,text:c("cometMentionsDataEntryText")(a),type:"Hashtag"})});b=a;g["default"]=b}),98);
__d("getHashtagRegexForTypeahead",["getHashtagRegexString"],(function(a,b,c,d,e,f,g){function a(){return new RegExp(c("getHashtagRegexString")()+"$","i")}g["default"]=a}),98);
__d("createCometHashtagMatchStrategy",["getHashtagRegexForTypeahead"],(function(a,b,c,d,e,f,g){"use strict";var h=["#","\\uFF03"];function a(a){var b=a.minMatchLength;return{findMentionableString:function(a){if(h.includes(a))return{leadOffset:0,matchingString:a,replaceableString:a};var d=new RegExp(c("getHashtagRegexForTypeahead")());d=d.exec(a);if(d!==null){a=d[1].length;d=d[0].substring(a);if(d!=null&&d.length>=b)return{leadOffset:a,matchingString:d,replaceableString:d}}return null},name:"HashtagMatchStrategy("+b.toString()+")"}}g["default"]=a}),98);
__d("createFeedComposerCometHashtagDataEntry_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"context"},{kind:"RootArgument",name:"scopeID"}],kind:"Fragment",metadata:{mask:!1},name:"createFeedComposerCometHashtagDataEntry_data",selections:[{alias:null,args:null,concreteType:"Hashtag",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Variable",name:"callsite",variableName:"context"},{kind:"Variable",name:"scope_id",variableName:"scopeID"}],kind:"ScalarField",name:"typeahead_snippets",storageKey:null}],storageKey:null}],type:"TypeaheadHashtagResultV2",abstractKey:null};e.exports=a}),null);
__d("createFeedComposerCometHashtagDataEntry",["createFeedComposerCometHashtagDataEntry_data.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;h!==void 0?h:h=b("createFeedComposerCometHashtagDataEntry_data.graphql");function a(a){a=a==null?void 0:a.node;if(a==null)return null;var b=a.id,c=a.name;a=a.typeahead_snippets;a=a!=null&&a.length>=1?a[0]:null;return b==null||c==null?null:{key:b,label:c,rawData:{id:b,name:c,subtext:a},type:"entry"}}g["default"]=a}),98);
__d("useFeedComposerCometHashtagTypeaheadDataSourceQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6694436457246277"}),null);
__d("useFeedComposerCometHashtagTypeaheadDataSourceQuery.graphql",["useFeedComposerCometHashtagTypeaheadDataSourceQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"context"},c={defaultValue:!1,kind:"LocalArgument",name:"includeImageUrls"},d={defaultValue:!1,kind:"LocalArgument",name:"includeMetatext"},e={defaultValue:null,kind:"LocalArgument",name:"limit"},f={defaultValue:null,kind:"LocalArgument",name:"query"},g={defaultValue:null,kind:"LocalArgument",name:"scopeID"},h={defaultValue:null,kind:"LocalArgument",name:"sessionID"},i={kind:"Variable",name:"scope_id",variableName:"scopeID"};i=[{alias:null,args:[{fields:[{kind:"Variable",name:"context",variableName:"context"},{kind:"Variable",name:"include_image_urls",variableName:"includeImageUrls"},{kind:"Variable",name:"include_metatext",variableName:"includeMetatext"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"query",variableName:"query"},i,{kind:"Variable",name:"session_id",variableName:"sessionID"}],kind:"ObjectValue",name:"argument"}],concreteType:"TypeaheadHashtagResultV2",kind:"LinkedField",name:"hashtag_typeahead_v2",plural:!0,selections:[{alias:null,args:null,concreteType:"Hashtag",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Variable",name:"callsite",variableName:"context"},i],kind:"ScalarField",name:"typeahead_snippets",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,c,d,e,f,g,h],kind:"Fragment",metadata:null,name:"useFeedComposerCometHashtagTypeaheadDataSourceQuery",selections:i,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[f,h,e,a,c,d,g],kind:"Operation",name:"useFeedComposerCometHashtagTypeaheadDataSourceQuery",selections:i},params:{id:b("useFeedComposerCometHashtagTypeaheadDataSourceQuery_facebookRelayOperation"),metadata:{},name:"useFeedComposerCometHashtagTypeaheadDataSourceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useFeedComposerCometHashtagTypeaheadDataSource",["createFeedComposerCometHashtagDataEntry","react","useCometTypeaheadGraphQLDataSource","useFeedComposerCometHashtagTypeaheadDataSourceQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).c,k=h!==void 0?h:h=b("useFeedComposerCometHashtagTypeaheadDataSourceQuery.graphql");function a(a){var b=j(8),d=a.context,e=a.includeMetatext,f=a.limit,g=a.scopeID;b[0]!==d||b[1]!==e||b[2]!==f||b[3]!==g?(a=function(a){a=a.query;return{context:d,includeMetatext:e,limit:f,query:a,scopeID:g,sessionID:""}},b[0]=d,b[1]=e,b[2]=f,b[3]=g,b[4]=a):a=b[4];var h;b[5]!==f||b[6]!==a?(h={gqlQuery:k,limit:f,normalize:l,queryVariablesBuilderFunction:a},b[5]=f,b[6]=a,b[7]=h):h=b[7];return c("useCometTypeaheadGraphQLDataSource")(h)}function l(a){a=a==null?void 0:a.hashtag_typeahead_v2;return a==null?[]:a.map(function(a){if(a==null)return;return c("createFeedComposerCometHashtagDataEntry")(a)}).filter(Boolean)}g["default"]=a}),98);
__d("useFeedComposerCometHashtagsDataSourceResolverConfig",["createCometHashtagMatchStrategy","react","useCometMentionsDataSourceResolverConfig","useCometTypeaheadCompositeDataSource","useFeedComposerCometHashtagTypeaheadDataSource"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useMemo;var i=b.c;function a(a){var b=i(14),d=a.context,e=a.includeMetatext,f=a.limit,g=a.payloadDecorators;a=a.scopeID;var h;b[0]!==d||b[1]!==e||b[2]!==f||b[3]!==a?(h={context:d,includeMetatext:e,limit:f,scopeID:a},b[0]=d,b[1]=e,b[2]=f,b[3]=a,b[4]=h):h=b[4];d=c("useFeedComposerCometHashtagTypeaheadDataSource")(h);if(b[5]!==g){a=(e=g)!=null?e:[];b[5]=g;b[6]=a}else a=b[6];b[7]!==f||b[8]!==d||b[9]!==a?(h={limit:f,networkDataSource:d,payloadDecorators:a},b[7]=f,b[8]=d,b[9]=a,b[10]=h):h=b[10];e=c("useCometTypeaheadCompositeDataSource")(h);b[11]===Symbol["for"]("react.memo_cache_sentinel")?(g=c("createCometHashtagMatchStrategy")({minMatchLength:0}),b[11]=g):g=b[11];b[12]!==e?(f=[{dataSource:e,matchStrategy:g}],b[12]=e,b[13]=f):f=b[13];d=f;a=d;return c("useCometMentionsDataSourceResolverConfig")(a,!0)}g["default"]=a}),98);
__d("CometComposerHashtagTypeaheadPluginForLexical.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","FeedComposerCometHashtagTypeheadListItem.react","cometHashtagsLexicalCreateNodeStrategy","cr:2971","react","useCometTypeaheadViewListStrategy","useFeedComposerCometHashtagsDataSourceResolverConfig","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(6),c,d;b[0]!==a?(c=a.editor,d=babelHelpers.objectWithoutPropertiesLoose(a,["editor"]),b[0]=a,b[1]=c,b[2]=d):(c=b[1],d=b[2]);if(c==null)return null;b[3]!==d||b[4]!==c?(a=j.jsx(k,babelHelpers["extends"]({},d,{editor:c})),b[3]=d,b[4]=c,b[5]=a):a=b[5];return a}function k(a){var d=i(9),e=a.editor;a=a.groupID;var f=a==null?"MAIN_COMPOSER":"GROUP_COMPOSER";a=a;var g;d[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=b("cr:2971")!=null?[b("cr:2971")({limit:1})]:void 0,d[0]=g):g=d[0];d[1]!==f||d[2]!==a?(g={context:f,includeMetatext:!0,limit:6,payloadDecorators:g,scopeID:a},d[1]=f,d[2]=a,d[3]=g):g=d[3];f=c("useFeedComposerCometHashtagsDataSourceResolverConfig")(g);d[4]===Symbol["for"]("react.memo_cache_sentinel")?(a={viewItemStrategyRenderer:c("FeedComposerCometHashtagTypeheadListItem.react")},d[4]=a):a=d[4];g=c("useCometTypeaheadViewListStrategy")(a);d[5]!==f||d[6]!==e||d[7]!==g?(a=j.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("cometHashtagsLexicalCreateNodeStrategy"),dataSourceResolverConfig:f,editor:e,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),viewStrategyRenderer:g}),d[5]=f,d[6]=e,d[7]=g,d[8]=a):a=d[8];return a}e=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor}});g["default"]=e}),98);
__d("CometComposerIsDirtyPluginForLexical.react",["LexicalText","composerLexicalEditorViewStateReducer","react","useComposerViewStateDispatcher","useComposerViewStateReducer","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));b=h;var i=b.useEffect,j=b.c;function a(a){var b=j(5),e=a.editor,f=a.lexicalIsDirty;c("useComposerViewStateReducer")(c("composerLexicalEditorViewStateReducer"));var g=c("useComposerViewStateDispatcher")(),h;b[0]!==e||b[1]!==f||b[2]!==g?(a=function(){if(e!=null){var a=e.getEditorState().read(d("LexicalText").$rootTextContent).length>0;a===!0&&a!==f&&g({isDirty:!0,type:"SET_LEXICAL_DIRTY_STATE"});return e.registerTextContentListener(function(b){b=b.length>0;b!==a&&g({isDirty:b,type:"SET_LEXICAL_DIRTY_STATE"})})}},h=[g,e,f],b[0]=e,b[1]=f,b[2]=g,b[3]=a,b[4]=h):(a=b[3],h=b[4]);i(a,h)}e=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor,lexicalIsDirty:a.lexicalEditorIsDirty}});g["default"]=e}),98);
__d("URLMatchUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=/^(([\w-]+\.)+(xn--[\w-]+|\w+)|\[([\da-f]{0,4}:)*(?:[\da-f]{1,4}|(?:(?:\d{1,3}\.){3}\d{1,3}))\])(:[0-9]+)?([/\?].*)?$/;return a.match(b)!==null}function b(a){return a.trim().replace(/(^\w+:|^)\/\//,"").replace(/^www\./,"").replace(/\/*$/,"").toLowerCase()}f.isURL=a;f.canonicalizeURL=b}),66);
__d("composerLinkAttachmentChecker",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return(a==null?void 0:(a=a.linkAttachment)==null?void 0:a.url)!==(b==null?void 0:(a=b.linkAttachment)==null?void 0:a.url)}f["default"]=a}),66);
__d("composerLinkAttachmentReducer",["composerAttachmentAreaReducer","emptyFunction","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c;if(((c=a.attachmentArea)==null?void 0:c.activeAttachmentType)==="FORMATTED_TEXT"||((c=a.attachmentArea)==null?void 0:c.activeAttachmentType)==="SHARE")return a;var d=b.url;c=[].concat(((b=(c=a.linkAttachment)==null?void 0:c.urlStack)!=null?b:[]).filter(function(a){return!a.startsWith(d)&&!d.startsWith(a)}),[d]);var e=(b=a.linkAttachment)==null?void 0:b.selectedLinkPreview;e!=null&&(c=c.filter(function(a){return a!==e}).concat(e));return babelHelpers["extends"]({},a,{linkAttachment:babelHelpers["extends"]({},a.linkAttachment,{url:c[c.length-1],urlStack:c})})}function i(a,b){var d,e;d=(d=(d=a.linkAttachment)==null?void 0:d.urlStack)!=null?d:[];var f=d[d.length-1];e=c("gkx")("3733")?((e=(e=a.linkAttachment)==null?void 0:e.removedAttachmentPreviewUrls)!=null?e:new Set()).add(f):void 0;if(d.length<=1){b.onRemovedLast(!0);return babelHelpers["extends"]({},a,{attachmentArea:{activeAttachmentType:void 0,previousAttachmentType:"LINK"},linkAttachment:{isLinkAttachmentEnabled:(f=a.linkAttachment)==null?void 0:f.isLinkAttachmentEnabled,removedAttachmentPreviewUrls:e}})}f=d.slice(0,-1);d=f[f.length-1];b.onRemovedLast(!1);return babelHelpers["extends"]({},a,{linkAttachment:babelHelpers["extends"]({},a.linkAttachment,{removedAttachmentPreviewUrls:e,selectedLinkPreview:void 0,url:d,urlStack:f})})}function j(a){return babelHelpers["extends"]({},a,{attachmentArea:{activeAttachmentType:void 0,previousAttachmentType:"LINK"},linkAttachment:{isLinkAttachmentEnabled:(a=a.linkAttachment)==null?void 0:a.isLinkAttachmentEnabled}})}function k(a,b){var c;if(a.useOriginalContentLinkAttachment===!0)return babelHelpers["extends"]({},a,{originalContentLinkAttachment:babelHelpers["extends"]({},a.originalContentLinkAttachment,{linkPreview:{share_scrape_data:b.shareScrapeData},url:b.url})});else if(((c=a.linkAttachment)==null?void 0:c.url)!==b.url)return a;return babelHelpers["extends"]({},a,{linkAttachment:babelHelpers["extends"]({},a.linkAttachment,{linkPreview:{share_scrape_data:b.shareScrapeData},url:b.url})})}function l(a,b){return babelHelpers["extends"]({},a,{useOriginalContentLinkAttachment:b.useOriginalContentLinkAttachment})}function m(a,b){var c;c=((c=(c=a.linkAttachment)==null?void 0:c.urlStack)!=null?c:[]).filter(function(a){return a!==b.selectedLinkPreview}).concat(b.selectedLinkPreview);return babelHelpers["extends"]({},a,{linkAttachment:babelHelpers["extends"]({},a.linkAttachment,{selectedLinkPreview:b.selectedLinkPreview,url:b.selectedLinkPreview,urlStack:c})})}function n(a,b){var c,d=a.linkAttachment;c=(c=d==null?void 0:d.customAttachments)!=null?c:[];c=c[0].throwback_card;return d==null||c==null?a:babelHelpers["extends"]({},a,{linkAttachment:babelHelpers["extends"]({},d,{customAttachments:[{throwback_card:babelHelpers["extends"]({},c,{media_ids:b.mediaIds})}]})})}function a(a,b){switch(b.type){case"ADD_LINK_URL":return h(a,b);case"REMOVE_LINK_URL":return i(a,b);case"REMOVE_ATTACHMENT_TYPE":var e=d("composerAttachmentAreaReducer").getCanAlterAttachmentData(b,"LINK",a);if(e)return i(a,{onRemovedLast:c("emptyFunction"),type:"REMOVE_LINK_URL"});else return a;case"REMOVE_ALL_LINKS":return j(a);case"SET_LINK_PREVIEW":return k(a,b);case"SET_USE_ORIGINAL_CONTENT":return l(a,b);case"SET_SELECTED_LINK_PREVIEW":return m(a,b);case"SET_THROWBACK_MEDIA":return n(a,b)}return a}g["default"]=a}),98);
__d("CometComposerLinksPluginForLexical.react",["ConstUriUtils","Lexical","LexicalLink","LexicalUtils","Promise","URLMatchUtils","URLMatcher","composerLinkAttachmentChecker","composerLinkAttachmentReducer","react","useComposerViewStateDispatcher","useComposerViewStateReducer","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h,i;i||(i=d("react"));e=i;e.useCallback;var j=e.useEffect,k=e.c;function l(a,b){var e=a.getTextContent(),f=e.length,g=e,h=0,i=a,j=0,k;while((k=c("URLMatcher").match(g))!=null&&k!=null){var l=g.indexOf(k),m=h+l,n=k.length,o=void 0;if(m>0)o=e[m-1]===" ";else{var p=a.getPreviousSibling();d("Lexical").$isElementNode(p)&&(p=p.getLastDescendant());p===null?o=!0:o=d("Lexical").$isLineBreakNode(p)||d("Lexical").$isTextNode(p)&&p.getTextContent().endsWith(" ")}if(m+n<f)p=e[m+n]===" ";else{m=a.getNextSibling();d("Lexical").$isElementNode(m)&&(m=m.getFirstDescendant());m===null?p=!0:p=d("Lexical").$isLineBreakNode(m)||d("Lexical").$isTextNode(m)&&m.getTextContent().startsWith(" ")}if(o&&p&&d("URLMatchUtils").isURL(d("URLMatchUtils").canonicalizeURL(k))&&d("ConstUriUtils").isValidUri(k)){m=void 0;if(l===0){o=i.splitText(n);m=o[0];i=o[1]}else{p=i.splitText(l+j,l+n+j);m=p[1];i=p[2]}o=d("LexicalLink").$createAutoLinkNode(k);o.append(d("Lexical").$createTextNode(k));m.replace(o);b(o);j=0}else j=l+n;p=l+n;g=g.substring(p);h+=p}}function m(a){var b=a.getChildren(),e=b.length;for(var f=0;f<e;f++){var g=b[f];if(!d("Lexical").$isTextNode(g)||!g.isSimpleText()){o(a);return}}g=a.getTextContent();b=c("URLMatcher").match;if(b(g)!==g||!d("URLMatchUtils").isURL(d("URLMatchUtils").canonicalizeURL(g))||!d("ConstUriUtils").isValidUri(g)){o(a);return}e=a.getPreviousSibling();d("Lexical").$isElementNode(e)&&(e=e.getLastDescendant());if(e!==null&&!(d("Lexical").$isLineBreakNode(e)||d("Lexical").$isTextNode(e)&&e.getTextContent().endsWith(" "))){o(a);return}f=a.getNextSibling();d("Lexical").$isElementNode(f)&&(f=f.getFirstDescendant());if(f!==null&&!(d("Lexical").$isLineBreakNode(f)||d("Lexical").$isTextNode(f)&&f.getTextContent().startsWith(" "))){o(a);return}b=a.getURL();b!==g&&a.setURL(g)}function n(a){var b=a.getPreviousSibling(),c=a.getNextSibling();a=a.getTextContent();d("LexicalLink").$isAutoLinkNode(b)&&!d("Lexical").$isLineBreakNode(b)&&!a.startsWith(" ")&&o(b);d("LexicalLink").$isAutoLinkNode(c)&&!d("Lexical").$isLineBreakNode(c)&&!a.endsWith(" ")&&o(c)}function o(a){var b=a.getChildren(),c=b.length;for(c=c-1;c>=0;c--)a.insertAfter(b[c]);a.remove();return b.map(function(a){return a.getLatest()})}function a(a){var e=k(9),f=a.editor,g=a.isLinkAttachmentEnabled,i=a.removedAttachmentPreviewUrls;c("useComposerViewStateReducer")(c("composerLinkAttachmentReducer"),c("composerLinkAttachmentChecker"));var o=c("useComposerViewStateDispatcher")();e[0]!==i||e[1]!==o||e[2]!==g?(a=function(a,c){if(i==null?void 0:i.has(a))return;o({type:"ADD_LINK_URL",url:a});(g||c===!0)&&o({attachmentType:"LINK",onRemove:function(a){return new(h||(h=b("Promise")))(function(b){a({onRemovedLast:b,type:"REMOVE_LINK_URL"})})},type:"ACTIVATE_ATTACHMENT_TYPE"})},e[0]=i,e[1]=o,e[2]=g,e[3]=a):a=e[3];var p=a,q;e[4]!==f||e[5]!==g||e[6]!==p?(a=function(){if(f!=null)return d("LexicalUtils").mergeRegister(f.registerMutationListener(d("LexicalLink").AutoLinkNode,function(a){if(g)return;var b=new WeakSet();f.getEditorState().read(function(){var c=function(){if(g){if(h>=e.length)return"break";i=e[h++]}else{h=e.next();if(h.done)return"break";i=h.value}var a=i,c=a[0];a=a[1];var j=f.getElementByKey(c);(a==="created"||a==="updated")&&j!==null&&!b.has(j)&&(b.add(j),j.addEventListener("click",function(a){f.getEditorState().read(function(){var a=d("Lexical").$getNodeByKey(c);a!=null&&p(a.getURL(),!0)})}))};for(var e=a,g=Array.isArray(e),h=0,e=g?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i,j=c();if(j==="break")break}})}),f.registerNodeTransform(d("Lexical").TextNode,function(a){var b=a.getParentOrThrow();if(d("LexicalLink").$isAutoLinkNode(b)){m(b);b=b.getLatest();p(b.getURL())}else a.isSimpleText()&&l(a,function(a){p(a.getURL())}),n(a)}),f.registerNodeTransform(d("LexicalLink").AutoLinkNode,function(a){m(a);a=a.getLatest();p(a.getURL())}))},q=[p,f,g],e[4]=f,e[5]=g,e[6]=p,e[7]=a,e[8]=q):(a=e[7],q=e[8]);j(a,q)}f=c("withComposerViewStatePart")(a,function(a){var b;return{editor:a.lexicalEditor,isLinkAttachmentEnabled:(b=(b=a.linkAttachment)==null?void 0:b.isLinkAttachmentEnabled)!=null?b:!0,removedAttachmentPreviewUrls:(b=a.linkAttachment)==null?void 0:b.removedAttachmentPreviewUrls}});g["default"]=f}),98);
__d("getInitialComposerLinkData",["Lexical","LexicalLink"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a!=null){var b=new Map();a.getEditorState().read(function(){return d("Lexical").$nodesOfType(d("LexicalLink").AutoLinkNode).forEach(function(a){return b.set(a.getKey(),a.getTextContent())})});return b}return new Map()}g["default"]=a}),98);
__d("handlePendingMisinformationOnComposerSubmit",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){for(var d=0;d<a.length;d++){var e=b[a[d]];if(e==null)continue;e=e.status;switch(e){case"ACCEPTED":case"CLEAN":case"FAILED":break;case"DECISION_DEFERRED":var f=[].concat(c.current);c.current.length=0;f.forEach(function(a){a=a.onHalt;a()});return;case"DIRTY_AWAITING_DECISION":case"FETCHING":return;default:return e}}f=[].concat(c.current);c.current.length=0;f.forEach(function(a){a=a.onContinue;a()})}f["default"]=a}),66);
__d("hasNoLinksToAnalyze",["Lexical","LexicalLink"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){var f;a=Array.from(a);if(c!=null){var g=new Set([]);c==null?void 0:c.getEditorState().read(function(){return d("Lexical").$nodesOfType(d("LexicalLink").AutoLinkNode).forEach(function(a){return g.add(a.getURL())})});e!=null&&g.add(e);f=a.filter(function(a){return g.has(a)})}return((c=f)!=null?c:a).every(function(a){a=b[a];if(a==null)return!0;a=a.status;switch(a){case"ACCEPTED":case"CLEAN":case"FAILED":return!0;case"DECISION_DEFERRED":case"DIRTY_AWAITING_DECISION":case"FETCHING":return!1;default:return a}})}g["default"]=a}),98);
__d("onCloseConfirmationDialog",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){switch(c){case"ACCEPTED":a({__type:"ACCEPT_URL",url:b});break;case"NO_DECISION":a({__type:"ENTER_COOLDOWN_PERIOD"});break;default:return c}}f["default"]=a}),66);
__d("maybeTriggerMisinformationDialog",["onCloseConfirmationDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=a.composedURLs,e=a.composerPhase,f=a.composerType,g=a.dialogIsOpen,h=a.dispatch,i=a.misinformationRecords,j=b.onCloseDialog;a=b.onTriggerDialog;b=b.openConfirmationDialog;if(g.current===!0)return;var k=Array.from(d).find(function(a){return((a=i[a])==null?void 0:a.status)==="DIRTY_AWAITING_DECISION"});if(k!=null){g=i[k];if(g==null)return;d=g.confirmationRenderer;if(d==null)return;a();b({composerPhase:e,composerType:f,confirmationRenderer:d},function(a){j(),c("onCloseConfirmationDialog")(h,k,a)})}}g["default"]=a}),98);
__d("cometMisinformationLinkDetectorPluginInternalStateReducerQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6541317025960799"}),null);
__d("cometMisinformationLinkDetectorPluginInternalStateReducerQuery.graphql",["cometMisinformationLinkDetectorPluginInternalStateReducerQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],c=[{kind:"Variable",name:"params",variableName:"input"}],d={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e=[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],f={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},g=[f];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"cometMisinformationLinkDetectorPluginInternalStateReducerQuery",selections:[{alias:null,args:c,concreteType:"LinkPreviewRoot",kind:"LinkedField",name:"link_preview",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"composer_post_confirmation_renderer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometMisinformationLinkComposerConfirmationDialog_confirmationRenderer"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"cometMisinformationLinkDetectorPluginInternalStateReducerQuery",selections:[{alias:null,args:c,concreteType:"LinkPreviewRoot",kind:"LinkedField",name:"link_preview",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"composer_post_confirmation_renderer",plural:!1,selections:[d,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"cid",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title_for_comet",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"description_for_comet",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"ManualFactCheck",kind:"LinkedField",name:"fact_checks",plural:!0,selections:[f,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"FactCheckProvider",kind:"LinkedField",name:"provider",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},f],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"external_uri",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachment_thumbnail",plural:!1,selections:[d,{alias:null,args:[{kind:"Literal",name:"height",value:60},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:60}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:g,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:g,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:g,type:"GenericAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:g,type:"MontageImage",abstractKey:null},{kind:"InlineFragment",selections:g,type:"MontageVideo",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_page_admin_warning",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_rating_badge",storageKey:null}],type:"MisinformationComposerPostConfirmationRenderer",abstractKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("cometMisinformationLinkDetectorPluginInternalStateReducerQuery_facebookRelayOperation"),metadata:{},name:"cometMisinformationLinkDetectorPluginInternalStateReducerQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("cometMisinformationLinkDetectorPluginInternalStateReducer",["CometRelay","FBLogger","WebPixelRatio","cometMisinformationLinkDetectorPluginInternalStateReducerQuery.graphql","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("cometMisinformationLinkDetectorPluginInternalStateReducerQuery.graphql");function j(a,b){return l(a,b,"ADD")}function k(a,b){return l(a,b,"REMOVE")}function l(a,b,c){if(a.composedURLs.has(b)===(c==="ADD"))return a;var d=new Set(a.composedURLs);c==="ADD"?d.add(b):d["delete"](b);return babelHelpers["extends"]({},a,{composedURLs:d})}function m(a,b,d){var e=a.misinformationRecords[b];if(e==null){c("FBLogger")("misinformation").mustfix("Tried to update a misinformation record for a URL that was not being tracked.");return a}var f=Object.entries(d).find(function(a){var b=a[0];a=a[1];return e[b]!==a});return f===!1?a:babelHelpers["extends"]({},a,{misinformationRecords:babelHelpers["extends"]({},a.misinformationRecords,(f={},f[b]=babelHelpers["extends"]({},e,d),f))})}function a(a,b){switch(b.__type){case"ACCEPT_URL":return m(a,b.url,{status:"ACCEPTED"});case"ENTER_COOLDOWN_PERIOD":return Object.keys(a.misinformationRecords).reduce(function(b,c){var d;d=(d=b.misinformationRecords[c])==null?void 0:d.status;if(d==null)return b;switch(d){case"ACCEPTED":case"CLEAN":case"DECISION_DEFERRED":case"FAILED":case"FETCHING":return a;case"DIRTY_AWAITING_DECISION":return m(b,c,{status:"DECISION_DEFERRED"});default:return d}},a);case"EXIT_COOLDOWN_PERIOD":return Object.keys(a.misinformationRecords).reduce(function(b,c){var d;d=(d=b.misinformationRecords[c])==null?void 0:d.status;if(d==null)return b;switch(d){case"ACCEPTED":case"CLEAN":case"DIRTY_AWAITING_DECISION":case"FAILED":case"FETCHING":return a;case"DECISION_DEFERRED":return m(b,c,{status:"DIRTY_AWAITING_DECISION"});default:return d}},a);case"MARK_URL_FAILED_DETECTION":return m(a,b.url,{status:"FAILED"});case"SET_DETECTION_RESULT":return m(a,b.url,{confirmationRenderer:b.confirmationRenderer,status:b.confirmationRenderer!=null?"DIRTY_AWAITING_DECISION":"CLEAN"});case"TRACK_COMPOSED_URL":if(a.misinformationRecords[b.url]!=null)return j(a,b.url);var c,e,f={confirmationRenderer:void 0,dispose:function(){c&&(c.unsubscribe(),c=null),e&&(e.dispose(),e=null)},status:"FETCHING"},g={input:{url:b.url},scale:d("WebPixelRatio").get()},h=d("relay-runtime").getRequest(i);h=d("relay-runtime").createOperationDescriptor(h,g);e=a.environment.retain(h);var l=!0;c=d("CometRelay").fetchQuery(a.environment,i,g).subscribe({error:function(){b.dispatch({__type:"MARK_URL_FAILED_DETECTION",url:b.url})},next:function(a){a=(a=a.link_preview)==null?void 0:a.composer_post_confirmation_renderer;l?f.confirmationRenderer=a:b.dispatch({__type:"SET_DETECTION_RESULT",confirmationRenderer:a,url:b.url})}});l=!1;return babelHelpers["extends"]({},j(a,b.url),{misinformationRecords:babelHelpers["extends"]({},a.misinformationRecords,(h={},h[b.url]=f,h))});case"UNTRACK_COMPOSED_URL":return k(a,b.url);default:return b.__type}}g["default"]=a}),98);
__d("useMisinformationState",["CometRelay","cometMisinformationLinkDetectorPluginInternalStateReducer","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useMemo;var i=b.useReducer,j=b.useState,k=b.c;function a(a){var b=k(10),e=d("CometRelay").useRelayEnvironment(),f;b[0]!==a?(f=new Set(a==null?void 0:a.values()),b[0]=a,b[1]=f):f=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a={},b[2]=a):a=b[2];b[3]!==f||b[4]!==e?(a={composedURLs:f,environment:e,misinformationRecords:a},b[3]=f,b[4]=e,b[5]=a):a=b[5];f=a;e=f;a=i(c("cometMisinformationLinkDetectorPluginInternalStateReducer"),e);f=a[0];e=a[1];a=f.composedURLs;f=f.misinformationRecords;var g=j("COMPOSING"),h=g[0];g=g[1];b[6]!==a||b[7]!==h||b[8]!==f?(e={composedURLs:a,composerPhase:h,dispatch:e,misinformationRecords:f,setComposerPhase:g},b[6]=a,b[7]=h,b[8]=f,b[9]=e):e=b[9];return e}g["default"]=a}),98);
__d("CometComposerMisinformationLinkDetectorPluginForLexical.react",["JSResourceForInteraction","Lexical","LexicalLink","getInitialComposerLinkData","handlePendingMisinformationOnComposerSubmit","hasNoLinksToAnalyze","maybeTriggerMisinformationDialog","react","useCometLazyDialog","useComposerPreSubmitHook","useMisinformationState","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));b=h;var i=b.useCallback,j=b.useEffect,k=b.useMemo,l=b.useRef,m=c("JSResourceForInteraction")("CometMisinformationLinkComposerConfirmationDialog.react").__setRef("CometComposerMisinformationLinkDetectorPluginForLexical.react");function a(a){var b=a.composerType,e=a.editor,f=a.linkAttachment;a=k(function(){return c("getInitialComposerLinkData")(e)},[e]);var g=c("useMisinformationState")(a),h=g.composedURLs,n=g.composerPhase,o=g.dispatch,p=g.misinformationRecords,q=g.setComposerPhase,r=l(a),s=l(null);g=c("useCometLazyDialog")(m);var t=g[0],u=l(!1),v=i(function(a,b){b=b.getEditorState().read(function(){return a.getTextContent()});var c=r.current;c.has(a.getKey())||c.set(a.getKey(),b);h.has(b)||o({__type:"TRACK_COMPOSED_URL",dispatch:o,url:b})},[h,o]),w=i(function(a){var b=r.current,c=b.get(a);c!=null&&(f==null?void 0:f.url)!==c&&o({__type:"UNTRACK_COMPOSED_URL",url:c});b["delete"](a)},[o,f==null?void 0:f.url]);j(function(){var a=f==null?void 0:f.url;a!=null&&(h.has(a)||o({__type:"TRACK_COMPOSED_URL",dispatch:o,url:a}))},[h,o,f]);j(function(){if(b==="share")return;s.current=p;var a=function(){u.current=!0},d=function(){u.current=!1};c("maybeTriggerMisinformationDialog")({composedURLs:h,composerPhase:n,composerType:b,dialogIsOpen:u,dispatch:o,misinformationRecords:p},{onCloseDialog:d,onTriggerDialog:a,openConfirmationDialog:t})},[h,n,b,o,p,t]);var x=l([]);j(function(){var a=Array.from(h);c("handlePendingMisinformationOnComposerSubmit")(a,p,x)},[h,p]);function y(a){var b=a.onContinue,d=a.onHalt;q("COMMITTING");x.current.push({onContinue:function(){q("COMPOSING"),b()},onHalt:function(){q("COMPOSING"),d()}});a=c("hasNoLinksToAnalyze")(h,p,e,f==null?void 0:f.url);if(a){a=[].concat(x.current);x.current.length=0;a.forEach(function(a){a=a.onContinue;a()})}else o({__type:"EXIT_COOLDOWN_PERIOD"})}c("useComposerPreSubmitHook")(y);j(function(){return function(){var a=s.current;a!==null&&Object.keys(a).forEach(function(b){b=a[b];b!=null&&b.dispose()})}},[]);j(function(){if(e!=null)return e.registerMutationListener(d("LexicalLink").AutoLinkNode,function(a){var b=e.getEditorState();a.forEach(function(a,c){var f=b.read(function(){return d("Lexical").$getNodeByKey(c)});a==="created"&&f!=null?v(f,e):a==="destroyed"&&w(c)})})},[w,e,v]);return}a.displayName=a.name+" [from "+f.id+"]";e=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor,linkAttachment:a.linkAttachment}});g["default"]=e}),98);
__d("CometComposerWarnStatusTextLengthForLexical.react",["CometComposerInlineErrorRenderer.react","CometComposerStylingConstants","MLCCharacterLimitCountPlugin.react","lengthInUTF8Bytes","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useState,k=b.c;function a(a){var b=k(13),e=a.characterLimit,f=a.customWarningLimit,g=a.lexicalEditor;a=a.xstyle;var h=j(null),l=h[0],m=h[1],n=(h=f)!=null?h:d("CometComposerStylingConstants").COMPOSER_WARNING_LIMIT;b[0]!==n?(f=function(a){a<=n?m(a):a>n&&m(null)},b[0]=n,b[1]=f):f=b[1];h=f;b[2]!==g||b[3]!==e||b[4]!==h?(f=i.jsx(c("MLCCharacterLimitCountPlugin.react"),{editor__DEPRECATED:g,limit:e,onChange:h,strlen:c("lengthInUTF8Bytes")}),b[2]=g,b[3]=e,b[4]=h,b[5]=f):f=b[5];b[6]!==l||b[7]!==n||b[8]!==a?(g=l!=null&&l<=n&&i.jsx(c("CometComposerInlineErrorRenderer.react"),{error:l,xstyle:a}),b[6]=l,b[7]=n,b[8]=a,b[9]=g):g=b[9];b[10]!==f||b[11]!==g?(e=i.jsxs(i.Fragment,{children:[f,g]}),b[10]=f,b[11]=g,b[12]=e):e=b[12];return e}g["default"]=a}),98);
__d("CometProductTaggingConstants",[],(function(a,b,c,d,e,f){"use strict";a=7;b=16;c=8;d=46;e=50;f.DOT_HINT_BORDER_SIZE=a;f.DOT_HINT_DOT_SIZE=b;f.DOT_HINT_PADDING=c;f.TOTAL_DOT_SIZE=d;f.VIDEO_CENTER_X_AND_Y_VALUE=e}),66);
__d("UnpublishedContentTypeApiEnum",[],(function(a,b,c,d,e,f){a=Object.freeze({SCHEDULED:"SCHEDULED",SCHEDULED_RECURRING:"SCHEDULED_RECURRING",DRAFT:"DRAFT",ADS_POST:"ADS_POST",INLINE_CREATED:"INLINE_CREATED",PREVIEW:"PREVIEW",VALIDATION:"VALIDATION",PUBLISHED:"PUBLISHED",REVIEWABLE_BRANDED_CONTENT:"REVIEWABLE_BRANDED_CONTENT"});f["default"]=a}),66);
__d("ComposerStoryMutationLogging",["UnpublishedContentTypeApiEnum","cometComposerLogger","getJSEnumSafe","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e){var f=d.isComposerPostLogged,g=babelHelpers.objectWithoutPropertiesLoose(d,["isComposerPostLogged"]);if(f===!0)return;f=babelHelpers["extends"]({},g,{composerEntryPicker:b.composer_entry_picker,composerEntryPointName:b.composer_entry_point,composerSourceSurface:b.composer_source_surface,composerType:b.composer_type,unpublishedContentType:b.unpublished_content_data&&c("getJSEnumSafe")(c("UnpublishedContentTypeApiEnum"),b.unpublished_content_data.unpublished_content_type)});c("cometComposerLogger")({fields:f,type:"COMPOSER_POST"},a,e);d.isComposerPostLogged=!0}function b(a){a=(a=a==null?void 0:(a=a.variables)==null?void 0:a.creationSessionID)!=null?a:"";a===""&&c("recoverableViolation")("Expected to provide a creationSessionID here","comet_composer");return a}g.logComposerPostAction=a;g.getCreationSessionId=b}),98);
__d("ComposerTelemetryFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("101");b=d("FalcoLoggerInternal").create("composer_telemetry",a);e=b;g["default"]=e}),98);
__d("FeedComposerCometMentionsPluginForLexical.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","FeedComposerCometMentionsViewItemResolver.react","cometMentionsLexicalCreateNodeStrategy","react","useCometMentionsViewListStrategy","useFeedComposerCometMentionsDataSourceResolverConfig","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useState,k=b.c;function a(a){var b=k(6),c,d;b[0]!==a?(c=a.editor,d=babelHelpers.objectWithoutPropertiesLoose(a,["editor"]),b[0]=a,b[1]=c,b[2]=d):(c=b[1],d=b[2]);if(c==null)return null;b[3]!==d||b[4]!==c?(a=i.jsx(l,babelHelpers["extends"]({},d,{editor:c})),b[3]=d,b[4]=c,b[5]=a):a=b[5];return a}function l(a){var b=k(12),d=a.composerType,e=a.contextID,f=a.createNodeStrategy,g=a.editor;a=a.postID;f=f===void 0?c("cometMentionsLexicalCreateNodeStrategy"):f;var h=j(void 0),l=h[0],m=h[1];h=d==="feed";b[0]!==e||b[1]!==h||b[2]!==l||b[3]!==a?(d={contextID:e,enableTypeSelection:h,mentionTypesForNetwork:l,postID:a,shouldBootstrapOnLayoutEffect:!0},b[0]=e,b[1]=h,b[2]=l,b[3]=a,b[4]=d):d=b[4];e=c("useFeedComposerCometMentionsDataSourceResolverConfig")(d);b[5]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(a){switch(a.rawData.type){case"MENTION_TYPE_SELECTION":m(a.rawData.typesToShow);return{shouldMentionSelectedEntry:!1};case"MENTION_TYPE_RESET":m(void 0);return{shouldMentionSelectedEntry:!1};default:return{shouldMentionSelectedEntry:!0}}},b[5]=h):h=b[5];l=h;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(a={viewItemStrategyRenderer:c("FeedComposerCometMentionsViewItemResolver.react")},b[6]=a):a=b[6];d=c("useCometMentionsViewListStrategy")(a);b[7]!==f||b[8]!==e||b[9]!==g||b[10]!==d?(h=i.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:f,dataSourceResolverConfig:e,editor:g,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),mentionsHandlerForSelectedEntry:l,viewStrategyRenderer:d}),b[7]=f,b[8]=e,b[9]=g,b[10]=d,b[11]=h):h=b[11];return h}e=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor}});g["default"]=e}),98);
__d("composerAudienceFeedTransform",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("ComposerTelemetryFalcoEvent").__setRef("composerAudienceFeedTransform");function a(a,b,c){var d,e=a==null?void 0:(d=a.albumData)==null?void 0:d.albumID,f=(a==null?void 0:a.viewerEditPostFeatureCapabilities)?a.viewerEditPostFeatureCapabilities.includes("POST_CONTAINER"):!1;h.onReady(function(b){return b.log(function(){var b;return{call_site:"composerAudienceFeedTransform",creation_session_id:(b=a.creationSessionID)!=null?b:"",debug_info:"viewState privacy info:"+((b=(b=a.audience)==null?void 0:(b=b.privacy)==null?void 0:b.base_state)!=null?b:"null")+" |albumID:"+((b=e)!=null?b:"null")+" |canMovePostToAlbum:"+f.toString(),event:"transform"}})});e!=null?f?c(babelHelpers["extends"]({},b,{audience:{album_id:e}})):c(b):c(babelHelpers["extends"]({},b,{audience:a.audience}))}g["default"]=a}),98);
__d("extractMessageFromPlainText",["CometLexicalEmojiNode","CometLexicalEntityTextNode","Lexical","LexicalUtils","UnicodeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=[],b="",c=!1,e=d("LexicalUtils").$dfs(),f=e.length;for(var g=0;g<f;g++){var i=e[g].node;if(d("Lexical").$isElementNode(i))continue;var j=i.getTextContent(),k=j.length,l=0;while(!c&&l<=k&&j[l]===" ")l+=1;if(l===k)continue;c=!0;k=j.substring(l);d("CometLexicalEntityTextNode").isCometLexicalEntityTextNode(i)?(a.push({entity:{id:i.getEntity().id},length:(h||(h=d("UnicodeUtils"))).strlen(k),offset:h.strlen(b)}),b+=k):d("CometLexicalEmojiNode").$isEmojiNode(i)?b+=i.getRawText():b+=k}j=b.trim();l=b.length-1;i=a.length;for(k=i-1;k>=0;k-=1){e=a[k];f=e.offset;if(f<=l)break;a.pop()}return{ranges:a,text:j}}g["default"]=a}),98);
__d("composerLexicalMessageFeedTransform",["LexicalText","cr:3325","extractMessageFromPlainText"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e,f){var g=a.lexicalEditor;if(g==null){f(babelHelpers["extends"]({},e));return}g=g.getEditorState().read(function(){if(a.formattingType==="MARKDOWN"&&b("cr:3325")!=null)return b("cr:3325")(d("LexicalText").$rootTextContent().trim());else return c("extractMessageFromPlainText")()});f(babelHelpers["extends"]({},e,{formatting:a.formattingType==="MARKDOWN"?"MARKDOWN":void 0,message:g}))}g["default"]=a}),98);
__d("composerTrackingTransform",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){a.tracking!=null?c(babelHelpers["extends"]({},b,{is_tracking_encrypted:!0,tracking:a.tracking.encrypted_tracking})):c(b)}f["default"]=a}),66);
__d("linkAttachmentAreaFeedTransform",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){var d,e;d=((d=a.originalContentLinkAttachment)==null?void 0:d.isSponsoredPost)===!0;var f=a.useOriginalContentLinkAttachment===!0,g=a.reshareFilterMetadata!=null&&a.reshareFilterMetadata.filter_id!=null&&a.reshareFilterMetadata.is_used?{filter_id:a.reshareFilterMetadata.filter_id,gradient_background:a.reshareFilterMetadata.gradient_background}:void 0,h=b.is_throwback_post;if(h==null&&((e=a.linkAttachment)==null?void 0:(e=e.goodwillCampaignInfo)==null?void 0:e.campaignId)!=null){h=((e=a.linkAttachment)==null?void 0:e.storyId)!=null?"THROWBACK_POST":"NOT_THROWBACK_POST"}if(((e=a.linkAttachment)==null?void 0:e.customAttachments)===void 0&&((e=a.linkAttachment)==null?void 0:(e=e.linkPreview)==null?void 0:e.share_scrape_data)===void 0)c(babelHelpers["extends"]({},b));else if(((e=a.originalContentLinkAttachment)==null?void 0:(e=e.linkPreview)==null?void 0:e.share_scrape_data)!==void 0&&(f||d)){c(babelHelpers["extends"]({},b,{attachments:[{link:{share_scrape_data:(e=a.originalContentLinkAttachment)==null?void 0:(f=e.linkPreview)==null?void 0:f.share_scrape_data}}],reshare_filter_metadata:g,reshare_original_post:"RESHARE_ORIGINAL_POST"}))}else{c(babelHelpers["extends"]({},b,{attachments:((d=a.linkAttachment)==null?void 0:d.customAttachments)||[{link:{share_scrape_data:(e=a.linkAttachment)==null?void 0:(f=e.linkPreview)==null?void 0:f.share_scrape_data}}],is_throwback_post:h,reshare_filter_metadata:g}))}}f["default"]=a}),66);