;/*FB_PKG_DELIM*/

__d("Comet360PhotoTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["Cylindrical","Equirectangular","TiledCubemap"]);f.Comet360PhotoProjection=a}),66);
__d("CometSphericalPhotoUtils",["Comet360PhotoTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.getPhotoSphereMetadata();return a==null?null:h(a)}function h(a){var b=Number(a.CroppedAreaImageWidthPixels)/Number(a.CroppedAreaImageHeightPixels),c=Number(a.CroppedAreaImageWidthPixels)/Number(a.FullPanoWidthPixels)*Math.PI*2,e=Number(a.CroppedAreaImageHeightPixels)/Number(a.FullPanoHeightPixels)*Math.PI*2,f=Number(a.InitialViewHeadingDegrees),g=Number(a.InitialViewPitchDegrees),h=Number(a.InitialViewVerticalFOVDegrees),j=Number(a.CroppedAreaImageHeightPixels)===Number(a.CroppedAreaImageWidthPixels)*2?d("Comet360PhotoTypes").Comet360PhotoProjection.Equirectangular:d("Comet360PhotoTypes").Comet360PhotoProjection.Cylindrical;switch(a.ProjectionType){case"equirectangular":j=d("Comet360PhotoTypes").Comet360PhotoProjection.Equirectangular;break;case"cylindrical":j=d("Comet360PhotoTypes").Comet360PhotoProjection.Cylindrical;break}return{aspectRatio:b,horizontalFov:c,projectionType:j,startingView:{heading:i(f),horizontalFov:null,pitch:i(g),verticalFov:h!==0?i(h):null},verticalFov:e}}function i(a){return a/180*Math.PI}g.createEncodingFromSphericalImage=a}),98);
__d("EndianAwareDataView",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){c===void 0&&(c=0),this.$2=new DataView(a,c),this.$1=b}var b=a.prototype;b.getByteLength=function(){return this.$2.byteLength};b.getU8=function(a){return this.$2.getUint8(a)};b.getI8=function(a){return this.$2.getInt8(a)};b.getU16=function(a){return this.$2.getUint16(a,this.$1)};b.getI16=function(a){return this.$2.getInt16(a,this.$1)};b.getU32=function(a){return this.$2.getUint32(a,this.$1)};b.getI32=function(a){return this.$2.getInt32(a,this.$1)};b.getF32=function(a){return this.$2.getFloat32(a,this.$1)};return a}();f["default"]=a}),66);
__d("EndianAwareDataReader",["EndianAwareDataView"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$2=new(c("EndianAwareDataView"))(a,b),this.$1=0}var b=a.prototype;b.canReadU8=function(){return this.$1<this.$2.getByteLength()};b.canReadU16=function(){return this.$1<this.$2.getByteLength()-1};b.canReadU32=function(){return this.$1<this.$2.getByteLength()-3};b.seekTo=function(a){this.$1=a};b.seekRelative=function(a){this.$1+=a};b.readU8=function(){var a=this.$2.getU8(this.$1);this.$1+=1;return a};b.peekU8=function(){return this.$2.getU8(this.$1)};b.readI8=function(){var a=this.$2.getI8(this.$1);this.$1+=1;return a};b.peekI8=function(){return this.$2.getI8(this.$1)};b.readU16=function(){var a=this.$2.getU16(this.$1);this.$1+=2;return a};b.peekU16=function(){return this.$2.getU16(this.$1)};b.readI16=function(){var a=this.$2.getI16(this.$1);this.$1+=2;return a};b.peekI16=function(){return this.$2.getI16(this.$1)};b.readU32=function(){var a=this.$2.getU32(this.$1);this.$1+=4;return a};b.peekU32=function(){return this.$2.getU32(this.$1)};b.readI32=function(){var a=this.$2.getI32(this.$1);this.$1+=4;return a};b.peekI32=function(){return this.$2.getI32(this.$1)};b.readF32=function(){var a=this.$2.getF32(this.$1);this.$1+=4;return a};b.peekF32=function(){return this.$2.getF32(this.$1)};return a}();g["default"]=a}),98);
__d("parseIFDEntry",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.readU16(),c=a.readU16(),d=a.readU32(),e=Object.freeze({offset:a.peekU32(),type:"offset"});switch(c){case 1:case 2:case 7:if(d<5){e={type:"data",values:[]};for(var f=0;f<d;f++)e.values.push(a.readU8())}break;case 6:if(d<5){e={type:"data",values:[]};for(f=0;f<d;f++)e.values.push(a.readI8())}break;case 3:if(d<3){e={type:"data",values:[]};for(f=0;f<d;f++)e.values.push(a.readU16())}break;case 8:if(d<3){e={type:"data",values:[]};for(f=0;f<d;f++)e.values.push(a.readI16())}break;case 4:d<2&&(e={type:"data",values:[a.readU32()]});break;case 9:d<2&&(e={type:"data",values:[a.readI32()]});break;case 11:d<2&&(e={type:"data",values:[a.readF32()]});break;case 5:case 10:case 12:a.seekRelative(4);break}return{format:c,tag:b,value:e}}f["default"]=a}),66);
__d("parseIFDTable",["parseIFDEntry"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.readU16(),d=[];for(var e=0;e<b;e++)d.push(c("parseIFDEntry")(a));b=a.readU32();return{entries:d,nextTableOffset:b}}g["default"]=a}),98);
__d("parseTIFFHeader",["EndianAwareDataReader","parseIFDTable"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=0);var d=new Uint8Array(a,b),e=!0;if(d[0]===77&&d[1]===77)e=!1;else if(d[0]!==73||d[1]!==73)return null;d=new(c("EndianAwareDataReader"))(a,e);d.seekTo(b+2);if(d.readU16()!==42)return null;a=d.readU32();d.seekRelative(a-8);e=c("parseIFDTable")(d);return[e]}g["default"]=a}),98);
__d("extractJPEGOrientationData",["genArrayBufferFromFile","parseTIFFHeader"],(function(a,b,c,d,e,f,g){"use strict";var h=65496,i=65498,j=1165519206;function a(a){return c("genArrayBufferFromFile")(a).then(function(a){var b=new DataView(a);if(b.getUint16(0,!1)!==h)return null;var d=2;while(d<a.byteLength-2&&b.getUint16(d)!==i){var e=b.getUint16(d),f=e&65280;e=e&255;if(f===65280)if(e===225){if(b.getUint32(d+4)!==j||b.getUint16(d+8)!==0)return null;f=c("parseTIFFHeader")(a,d+10);if(f!=null){f=f[0];for(var f=f.entries,g=Array.isArray(f),k=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(g){if(k>=f.length)break;l=f[k++]}else{k=f.next();if(k.done)break;l=k.value}l=l;if(l.tag===274){l=l.value;if(l.type==="data"){l=l.values[0];if(l==null)return null;return l===0||l===1||l===2||l===3||l===4||l===5||l===6||l===7||l===8?l:null}return null}}}return null}else if(e!==0&&(e<208||e>217)){l=b.getUint16(d+2,!1);d+=l+2}}return null})}g["default"]=a}),98);
__d("genDimensionsFromImageFile",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){var c=new Image(),d=new(g||(g=b("Promise")))(function(a,b){c.onload=function(){a({height:c.height,width:c.width})},c.onerror=function(){b()}});a instanceof File?c.src=URL.createObjectURL(a):c.src=a;return d}f["default"]=a}),66);
__d("genDurationAndDimensionsFromVideoFile",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){var c=document.createElement("video"),d=new(g||(g=b("Promise")))(function(a,b){c.onloadedmetadata=function(){a({duration:c.duration,height:c.videoHeight,width:c.videoWidth})},c.onerror=function(){b()}});a instanceof File?c.src=URL.createObjectURL(a):c.src=a;return d}f["default"]=a}),66);
__d("genIsHEICFile",["genArrayBufferFromFile"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[102,116,121,112],d=[104,101,105,99],e=[104,101,105,120];return c("genArrayBufferFromFile")(a).then(function(a){a=new Uint8Array(a);var c=a.slice(4,8).reduce(function(a,c,d){return a&&c===b[d]},!0);if(!c)return!1;c=a.slice(8,12).reduce(function(a,b,c){return a&&b===d[c]},!0);if(c)return!0;c=a.slice(8,12).reduce(function(a,b,c){return a&&b===e[c]},!0);return c?!0:!1})}g["default"]=a}),98);
__d("genIsNonAnimatedGifFile",["genArrayBufferFromFile"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return a[b]===0&&a[b+1]===33&&a[b+2]===249&&a[b+3]===4&&a[b+8]===0&&(a[b+9]===44||a[b+9]===33)}function a(a){var b=[71,73,70,56,55,97],d=[71,73,70,56,57,97];return c("genArrayBufferFromFile")(a).then(function(a){a=new Uint8Array(a);var c=a.slice(0,6).reduce(function(a,c,d){return a&&c===b[d]},!0);if(c)return!0;c=a.slice(0,6).reduce(function(a,b,c){return a&&b===d[c]},!0);if(!c)return!1;c=0;for(var e=6;e+9<a.length;++e){h(a,e)&&c++;if(c>1)return!1}return!0})}g["default"]=a}),98);
__d("readVINT",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=0;b=Math.min(a.length,(b=b)!=null?b:Number.MAX_VALUE);var d=0;while(c<b){var e=a[c];if(e===0)d+=8,c++;else{d+=8-Math.floor(Math.log2(e));if(d>b||d<0)return null;e=g(a,d);return{vintData:e,nextReadOffset:d}}}return null}function g(a,b){var c=Math.floor(b/8),d=a[c],e=8-b%8;e<8&&(d^=1<<e);e=new Uint8Array(new ArrayBuffer(b-c));e[0]=d;e.set(a.slice(c+1,b),1);return e}f["default"]=a}),66);
__d("readEBMLHeader",["$InternalEnum","readVINT"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.reduce(function(a,b){return a*256+b},0)}function i(a){return String.fromCharCode.apply(String,Array.from(a))}var j=b("$InternalEnum")({EBML:440786851,EBMLVersion:17030,EBMLReadVersion:17143,EBMLMaxSizeLength:17139,EBMLMaxIDLength:17138,DocType:17026,DocTypeVersion:17031,DocTypeReadVersion:17029});function k(a){var b=c("readVINT")(a,4);if(b==null)return null;var d=h(a.slice(0,b.nextReadOffset));d=j.cast(d);var e=c("readVINT")(a.slice(b.nextReadOffset));if(e==null)return null;var f=h(e.vintData);b=b.nextReadOffset+e.nextReadOffset;e=b+f;if(e>a.length)return null;f=a.slice(b,e);return{id:d,data:f,nextReadOffset:e}}function l(a){a=k(a);if(a==null||a.id!==j.EBML)return null;a=a.data;var b=new Map(),c=k(a);while(c!=null)c.id!=null&&b.set(c.id,c.data),a=a.slice(c.nextReadOffset),c=k(a);return b}function a(a){var b,c=l(new Uint8Array(a));if(c==null)return null;a=function(a,b){a=c.get(a);if(a==null)return null;else return b(a)};var d=a(j.DocType,i);return d==null?null:{ebmlVersion:(b=a(j.EBMLVersion,h))!=null?b:1,ebmlReadVersion:(b=a(j.EBMLReadVersion,h))!=null?b:1,ebmlMaxIDLength:(b=a(j.EBMLMaxIDLength,h))!=null?b:4,ebmlMaxSizeLength:(b=a(j.EBMLMaxSizeLength,h))!=null?b:8,docType:d,docTypeVersion:(b=a(j.DocTypeVersion,h))!=null?b:1,docTypeReadVersion:(d=a(j.DocTypeReadVersion,h))!=null?d:1}}g["default"]=a}),98);
__d("isValidMKV",["Promise","readEBMLHeader"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){a=c("readEBMLHeader")(a);if(a==null)return!1;else return a.ebmlMaxIDLength===4&&a.ebmlMaxSizeLength>=1&&a.ebmlMaxSizeLength<=8&&a.docType==="matroska"}function a(a){return new(h||(h=b("Promise")))(function(b,c){var d=new FileReader();d.onerror=function(){return c(d.error)};d.onload=function(){var a=d.result;a instanceof ArrayBuffer?b(i(a)):c()};d.readAsArrayBuffer(a)})}g["default"]=a}),98);
__d("translateMediaViewStateData",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a.state!=="CLIENT_PROCESSING_COMPLETE"||a.fileType==="UNKNOWN")return;var b=a.file,c=a.fileType;if(a.fileType==="VIDEO"){a=a.trimData;return{extra:{fileType:c,trimData:a},file:b}}return{extra:{fileType:c},file:b}}f["default"]=a}),66);
__d("CometComposerHeadlessMediaUploaderImpl.react",["CometSphericalPhotoUtils","Promise","convertVideoToPhoto","cr:1029","extractJPEGOrientationData","genDimensionsFromImageFile","genDurationAndDimensionsFromVideoFile","genIsHEICFile","genIsNonAnimatedGifFile","genIsNonAnimatedWebPFile","gkx","isValidMKV","promiseDone","react","recoverableViolation","translateMediaViewStateData","useCometComposerLoggerDispatcher"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useCallback,k=e.useEffect;function a(a){var e=a.composerUploader,f=a.dispatch;a.isWorkDraftingFor;var g=a.mediaAttachments,i=a.mediaUploadStatuses,l=a.preventDefaultErrorHandler,m=a.useOptimisticMediaPost,n=c("useCometComposerLoggerDispatcher")(),o=j(function(a){f(babelHelpers["extends"]({type:"MEDIA_UPLOAD_STARTED"},a))},[f]),p=j(function(a){f(babelHelpers["extends"]({type:"MEDIA_UPLOAD_PROGRESS"},a))},[f]),q=j(function(a){var b=i&&i[a.uploadID];b!=null&&b.resolveFileUpload({attachmentID:a.entID,attachmentType:a.attachmentType})},[i]),r=j(function(a){f({entID:a.entID,imageURL:a.attachmentType==="PHOTO"?a.imageURL:void 0,takenTime:a.attachmentType==="PHOTO"?a.takenTime:void 0,type:"MEDIA_UPLOAD_SUCCESSFUL",uploadID:a.uploadID})},[f]),s=j(function(a){f(babelHelpers["extends"]({type:"MEDIA_UPLOAD_FAILED"},a))},[f]),t=j(function(a){if(a.isSpherical){var b=d("CometSphericalPhotoUtils").createEncodingFromSphericalImage(a.sphericalImage);b&&f({sphericalEncoding:b,type:"SET_MEDIA_ATTACHMENT_ITEM_SPHERICAL_ENCODING",uploadID:a.uploadID})}},[f]);k(function(){e.startedObserver.subscribe(o);e.progressObserver.subscribe(p);e.successObserver.subscribe(r);e.errorObserver.subscribe(s);e.sphericalImageDetectedObserver.subscribe(t);m&&e.successObserver.subscribe(q);return function(){e.startedObserver.unsubscribe(o),e.progressObserver.unsubscribe(p),e.successObserver.unsubscribe(r),e.errorObserver.unsubscribe(s),e.sphericalImageDetectedObserver.unsubscribe(t)}});var u=j(function(a){var b=a.map(function(a){return a.file&&((a=a.file)==null?void 0:a.uploadID)}).filter(Boolean);f({type:"MARK_UPLOADS_CLIENT_PROCESSING",uploadIDs:b});a.forEach(function(a){var b;return n({fields:{media_id:(b=(b=a.file)==null?void 0:b.uploadID)!=null?b:"",media_type:a.fileType},type:"MEDIA_UPLOAD_PROCESS_START"})})},[f,n]),v=j(function(a){var d=a.file;if(d)return c("genIsHEICFile")(d).then(function(c){c&&f({type:"MARK_UNKNOWN_UPLOADS_AS_PHOTO",uploadIDs:[d==null?void 0:d.uploadID].filter(Boolean)});return(h||(h=b("Promise"))).resolve(a)});else return(h||(h=b("Promise"))).resolve(a)},[f]),w=j(function(a){var d=a.file;if(d)return c("isValidMKV")(d).then(function(c){c&&f({type:"MARK_UNKNOWN_UPLOADS_AS_VIDEO",uploadIDs:[d==null?void 0:d.uploadID].filter(Boolean)});return(h||(h=b("Promise"))).resolve(a)});else return(h||(h=b("Promise"))).resolve(a)},[f]),x=j(function(a){var d=a.file;if(d)return c("genIsNonAnimatedGifFile")(d).then(function(c){c&&f({type:"MARK_UPLOADS_AS_PHOTO",uploadIDs:[d==null?void 0:d.uploadID].filter(Boolean)});return(h||(h=b("Promise"))).resolve(a)});else return(h||(h=b("Promise"))).resolve(a)},[f]),y=j(function(a){var d=a.file;return d?c("extractJPEGOrientationData")(d).then(function(c){c!=null&&c>0&&f({attachment:a,type:"SET_MEDIA_ATTACHMENT_ITEM_USE_CDN_PREVIEW"});return(h||(h=b("Promise"))).resolve(a)})["catch"](function(d){c("recoverableViolation")("An error occurred when parsing an uploaded image","comet_composer",{error:d});return(h||(h=b("Promise"))).resolve(a)}):(h||(h=b("Promise"))).resolve(a)},[f]),z=j(function(a,d){var e=a.file?a.file:void 0,g=a.fileObjectURL,i;if(g!=null)switch(a.fileType){case"PHOTO":i=c("genDimensionsFromImageFile")(g);break;case"VIDEO":i=c("genDurationAndDimensionsFromVideoFile")(g);break}else if(e!=null)switch(a.fileType){case"PHOTO":i=c("genDimensionsFromImageFile")(e);break;case"VIDEO":i=c("genDurationAndDimensionsFromVideoFile")(e);break}else i=(h||(h=b("Promise"))).resolve({duration:null,height:0,width:0});if(i!=null)return i.then(function(b){var c=b.duration,e=b.height;b=b.width;f({attachment:a,height:e,type:"SET_MEDIA_ATTACHMENT_ITEM_DIMENSIONS",width:b});a.fileType==="VIDEO"&&c!=null&&f({currentIndex:d,type:"SET_VIDEO_ATTACHMENT_METADATA",videoAttachmentMetadata:{originalVideoDurationSeconds:c}})},function(){f({attachment:a,height:0,type:"SET_MEDIA_ATTACHMENT_ITEM_DIMENSIONS",width:0})})},[f]),A=j(function(a,d){var e=a.file;if(e)return c("genIsNonAnimatedWebPFile")(e).then(function(g){if(g){f({type:"MARK_UPLOADS_AS_PHOTO",uploadIDs:[e==null?void 0:e.uploadID].filter(Boolean)});g=c("convertVideoToPhoto")(a);if(g!=null){g=z(g,d);if(g!=null)return g.then(function(){return(h||(h=b("Promise"))).resolve(a)})}}});var g=z(a,d);if(g!=null)return g.then(function(){return(h||(h=b("Promise"))).resolve(a)})},[f,z]),B=j(function(){var a=(g||[]).map(function(a){return a.state==="NEW"?a:null}).filter(Boolean);a.forEach(function(a,d){var e=a.file.uploadID;e!=null&&(n({fields:{media_id:e,media_type:a.fileType},type:"MEDIA_UPLOAD_FLOW_START"}),n({fields:{media_id:e,media_type:a.fileType},type:"MEDIA_UPLOAD_START"}));e=[];u([a]);a.fileType==="UNKNOWN"&&a.file?(e.push(v(a)),e.push(w(a))):a.fileType==="PHOTO"?e.push(y(a)):a.fileType==="VIDEO"&&a.file.type==="image/gif"&&e.push(x(a));a.fileType==="VIDEO"&&a.file.type==="image/webp"?e.push(A(a,d)):e.push(z(a,d));c("promiseDone")((h||(h=b("Promise"))).all(e).then(function(){var b=[a.file.uploadID].filter(Boolean),c=a.fileType;f({type:"MEDIA_ATTACHMENT_CLIENT_PROCESSING_COMPLETED",uploadIDs:b});b.forEach(function(a){return n({fields:{media_id:a,media_type:c},type:"MEDIA_UPLOAD_PROCESS_SUCCESS"})})}))})},[A,z,v,w,x,y,f,n,u,g]),C=j(function(){if(g!=null){var a=g.filter(function(a){return a.state==="CLIENT_PROCESSING_COMPLETE"}).map(c("translateMediaViewStateData")).filter(Boolean);a.length>0&&(f({type:"QUEUE_UPLOADS",uploadIDs:a.map(function(a){a=a.file;return a.uploadID}).filter(Boolean)}),e.upload(a,l));i&&g.forEach(function(a){if(a.state==="CLIENT_PROCESSING_COMPLETE"&&a.file.uploadID!=null){a=i[a.file.uploadID];a!=null&&c("promiseDone")(a.onUploadCancel,function(a){e.cancelUpload(a.attachmentID,a.attachmentType)})}})}},[e,f,g,i]),D=j(function(){b("cr:1029")!==null&&b("cr:1029")(g,f)},[f,g]);k(function(){B(),C(),c("gkx")("22889")||D()},[B,C,D]);return null}g["default"]=a}),98);
__d("useComposerVideoUploaderConfigQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6293020010825217"}),null);
__d("useComposerVideoUploaderConfigQuery.graphql",["useComposerVideoUploaderConfigQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"actorID"},{defaultValue:null,kind:"LocalArgument",name:"entryPoint"},{defaultValue:null,kind:"LocalArgument",name:"targetID"}],c=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"actor_id",variableName:"actorID"},{kind:"Variable",name:"entry_point",variableName:"entryPoint"},{kind:"Variable",name:"target_id",variableName:"targetID"}],kind:"ScalarField",name:"comet_composer_video_uploader_config",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useComposerVideoUploaderConfigQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useComposerVideoUploaderConfigQuery",selections:c},params:{id:b("useComposerVideoUploaderConfigQuery_facebookRelayOperation"),metadata:{},name:"useComposerVideoUploaderConfigQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useComposerVideoUploaderConfig",["CometRelay","emptyObject","react","useComposerVideoUploaderConfigQuery.graphql","useJSON"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).c;function a(a,e,f){var g=j(5),i;g[0]===Symbol["for"]("react.memo_cache_sentinel")?(i=h!==void 0?h:h=b("useComposerVideoUploaderConfigQuery.graphql"),g[0]=i):i=g[0];a=(a=a)!=null?a:"";e=(e=e)!=null?e:"";f=(f=f)!=null?f:"";var k;g[1]!==a||g[2]!==e||g[3]!==f?(k={actorID:a,entryPoint:e,targetID:f},g[1]=a,g[2]=e,g[3]=f,g[4]=k):k=g[4];a=d("CometRelay").useLazyLoadQuery(i,k);f=a==null?void 0:(e=a.viewer)==null?void 0:e.comet_composer_video_uploader_config;return(i=c("useJSON")((g=f)!=null?g:null))!=null?i:c("emptyObject")}g["default"]=a}),98);
__d("CometComposerHeadlessMediaUploader.react",["Actor","CometComposerHeadlessMediaUploaderImpl.react","FBLogger","GroupCometComposerContext","getComposerMediaFileUploader","react","useComposerVideoUploaderConfig","useComposerViewStateDispatcher","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.useMemo;function a(a){var b=a.creationSessionID,e=a.isWorkDraftingFor,f=a.mediaAttachments,g=a.mediaUploadStatuses,h=a.workDraftFor,l=a.forceResetUploaderConfig;a=a.mediaUploadLoggingMetadata;var m=a.composerEntrypointRef,n=a.source;a=c("useComposerViewStateDispatcher")();var o=d("Actor").useActor();o=o[0];var p,q=j(c("GroupCometComposerContext"));q=q.groupID;(h==null?void 0:h.originalActorID)!=null&&q!=null&&(p=q);var r=c("useComposerVideoUploaderConfig")(o,String(m),p);h=k(function(){return babelHelpers["extends"]({},r,{composer_entry_point_ref:m,silent_file_validation:!0,source:n})},[m,n,r]);o=c("getComposerMediaFileUploader")(o,h,b,e,(q=l)!=null?q:!1);h=o[0];b==null&&c("FBLogger")("comet_composer").mustfix("creationSessionID must be defined for the media upload flow. [source]: "+String(n)+" [composerEntrypoint]: "+String(m));return i.jsx(c("CometComposerHeadlessMediaUploaderImpl.react"),{composerUploader:h,dispatch:a,mediaAttachments:f,mediaUploadStatuses:g,preventDefaultErrorHandler:n==="album_uploader",useOptimisticMediaPost:!0})}a.displayName=a.name+" [from "+f.id+"]";e=c("withComposerViewStatePart")(a,function(a){return{creationSessionID:a.creationSessionID,isWorkDraftingFor:a.workDraftFor!=null,mediaAttachments:a.mediaAttachments,mediaUploadStatuses:a.mediaUploadStatuses,workDraftFor:a.workDraftFor}});g["default"]=e}),98);
__d("cometComposerCheckMediaAttachmentsForPhoto3d",["QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(!a)return;var d=a.reduce(function(a,b){b.state==="UPLOADED"&&b.fileType==="PHOTO"&&a.push(b);return a},[]);if(a.length!==2||d.length!==2)return;a=h(d);d=i(a);if(d==null)return;c("QPLUserFlow").start(c("qpl")._(37631558,"4977"));c("QPLUserFlow").addPoint(c("qpl")._(37631558,"4977"),"three_d_photo_creation_data_provided");b({colorImageIds:d.colorImageIds,depthImageIds:d.depthImageIds,placeholderImage:d.placeholderImage,type:"SET_PHOTO3D_CREATION_DATA"});b({attachmentType:"PHOTO3D",type:"ACTIVATE_ATTACHMENT_TYPE"})}function h(a){var b={},c=["jpg","jpeg","png"];a.forEach(function(a){var d=a.file.name;if(!d)return;var e=d.lastIndexOf(".");if(e<0)return;var f=d.split(".").pop().toLowerCase();if(!c.includes(f))return;f=d.substring(0,e).toLowerCase();d=f.split("_");if(d.length>1&&d.pop().toLowerCase()==="depth"){e=d.join("_");e in b||(b[e]={colorImage:null,depthImage:null});b[e].depthImage=a}else f in b||(b[f]={colorImage:null,depthImage:null}),b[f].colorImage=a});return b}function i(a){var b=Object.keys(a).sort();if(b.length===0)return null;var c=[],d=[],e=null;b.forEach(function(b){b=a[b];var f=b.colorImage;b=b.depthImage;if(!f||!b)return null;var g=f.entID;b=b.entID;if(g==null||b==null)return null;e==null&&(e=f);c.push(g);d.push(b)});return c.length===0||c.length!==d.length||e===null?null:{colorImageIds:c,depthImageIds:d,placeholderImage:e}}g["default"]=a}),98);